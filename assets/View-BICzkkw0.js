var Gg=Object.defineProperty;var Wg=(t,e,r)=>e in t?Gg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fc=(t,e,r)=>Wg(t,typeof e!="symbol"?e+"":e,r);import{j as Jg,n as Kg,C as Hg,p as Hr,B as Xg}from"./ConnectLayout-DCXim5oJ.js";import{g as As,k as gu,d as bu,a as hc,_ as vu,r as ln,o as mu,c as _u,w as Te,b as Ye,e as hi,t as Yg,f as Pt}from"./index-CVQZtFQN.js";import{H as Zg,q as yi,Q as Ms,k as yc,t as ys,R as yr,S as gr,T as Qg,_ as yt,$ as eb,n as me,F as tb,a0 as rb,a1 as nb,b as wa,e as Ns,h as sb,s as gc}from"./secp256k1-BHJWReMe.js";var wu={},Gn={},Oa={},Sa={};Object.defineProperty(Sa,"__esModule",{value:!0});function ib(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),p=u.charCodeAt(0);if(e[p]!==255)throw new TypeError(u+" is ambiguous");e[p]=l}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function a(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,p=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const y=(h-f)*i+1>>>0,w=new Uint8Array(y);for(;f!==h;){let x=l[f],F=0;for(let W=y-1;(x!==0||F<p)&&W!==-1;W--,F++)x+=256*w[W]>>>0,w[W]=x%r>>>0,x=x/r>>>0;if(x!==0)throw new Error("Non-zero carry");p=F,f++}let j=y-p;for(;j!==y&&w[j]===0;)j++;let U=n.repeat(u);for(;j<y;++j)U+=t.charAt(w[j]);return U}function o(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,p=0,f=0;for(;l[u]===n;)p++,u++;const h=(l.length-u)*s+1>>>0,y=new Uint8Array(h);for(;l[u];){let x=e[l.charCodeAt(u)];if(x===255)return;let F=0;for(let W=h-1;(x!==0||F<f)&&W!==-1;W--,F++)x+=r*y[W]>>>0,y[W]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");f=F,u++}let w=h-f;for(;w!==h&&y[w]===0;)w++;const j=new Uint8Array(p+(h-w));let U=p;for(;w!==h;)j[U++]=y[w++];return j}function c(l){const u=o(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:a,decodeUnsafe:o,decode:c}}Sa.default=ib;var ab=As&&As.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Oa,"__esModule",{value:!0});var ob=ab(Sa),cb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Oa.default=(0,ob.default)(cb);var ub=Object.create,ri=Object.defineProperty,lb=Object.getOwnPropertyDescriptor,pb=Object.getOwnPropertyNames,db=Object.getPrototypeOf,fb=Object.prototype.hasOwnProperty,hb=(t,e)=>{for(var r in e)ri(t,r,{get:e[r],enumerable:!0})},Ou=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of pb(e))!fb.call(t,s)&&s!==r&&ri(t,s,{get:()=>e[s],enumerable:!(n=lb(e,s))||n.enumerable});return t},yb=(t,e,r)=>(r=t!=null?ub(db(t)):{},Ou(!t||!t.__esModule?ri(r,"default",{value:t,enumerable:!0}):r,t)),gb=t=>Ou(ri({},"__esModule",{value:!0}),t),Su={};hb(Su,{fromB58:()=>vb,fromBase58:()=>Eu,toB58:()=>bb,toBase58:()=>$u});var ka=gb(Su),ku=yb(Oa);const $u=t=>ku.default.encode(t),Eu=t=>ku.default.decode(t),bb=$u,vb=Eu;var $a=Object.defineProperty,mb=Object.getOwnPropertyDescriptor,_b=Object.getOwnPropertyNames,wb=Object.prototype.hasOwnProperty,Ob=(t,e)=>{for(var r in e)$a(t,r,{get:e[r],enumerable:!0})},Sb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of _b(e))!wb.call(t,s)&&s!==r&&$a(t,s,{get:()=>e[s],enumerable:!(n=mb(e,s))||n.enumerable});return t},kb=t=>Sb($a({},"__esModule",{value:!0}),t),ju={};Ob(ju,{fromB64:()=>Eb,fromBase64:()=>Tu,toB64:()=>$b,toBase64:()=>Pu});var Ea=kb(ju);function Tu(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const gi=8192;function Pu(t){if(t.length<gi)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=gi){const n=t.slice(r,r+gi);e+=String.fromCharCode(...n)}return btoa(e)}const $b=Pu,Eb=Tu;var ja=Object.defineProperty,jb=Object.getOwnPropertyDescriptor,Tb=Object.getOwnPropertyNames,Pb=Object.prototype.hasOwnProperty,Ib=(t,e)=>{for(var r in e)ja(t,r,{get:e[r],enumerable:!0})},xb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Tb(e))!Pb.call(t,s)&&s!==r&&ja(t,s,{get:()=>e[s],enumerable:!(n=jb(e,s))||n.enumerable});return t},Cb=t=>xb(ja({},"__esModule",{value:!0}),t),Iu={};Ib(Iu,{fromHEX:()=>Mb,fromHex:()=>xu,toHEX:()=>Ab,toHex:()=>Cu});var Ta=Cb(Iu);function xu(t){var s;const e=t.startsWith("0x")?t.slice(2):t,n=((s=(e.length%2===0?e:`0${e}}`).match(/.{2}/g))==null?void 0:s.map(i=>parseInt(i,16)))??[];return Uint8Array.from(n)}function Cu(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}const Ab=Cu,Mb=xu;var Pa=Object.defineProperty,Nb=Object.getOwnPropertyDescriptor,Bb=Object.getOwnPropertyNames,Db=Object.prototype.hasOwnProperty,Ub=(t,e)=>{for(var r in e)Pa(t,r,{get:e[r],enumerable:!0})},Rb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Bb(e))!Db.call(t,s)&&s!==r&&Pa(t,s,{get:()=>e[s],enumerable:!(n=Nb(e,s))||n.enumerable});return t},zb=t=>Rb(Pa({},"__esModule",{value:!0}),t),Au={};Ub(Au,{ulebDecode:()=>Lb,ulebEncode:()=>Vb});var ni=zb(Au);function Vb(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function Lb(t){let e=0,r=0,n=0;for(;;){let s=t[n];if(n+=1,e|=(s&127)<<r,!(s&128))break;r+=7}return{value:e,length:n}}var Ia=Object.defineProperty,qb=Object.getOwnPropertyDescriptor,Fb=Object.getOwnPropertyNames,Gb=Object.prototype.hasOwnProperty,Wb=(t,e)=>{for(var r in e)Ia(t,r,{get:e[r],enumerable:!0})},Jb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Fb(e))!Gb.call(t,s)&&s!==r&&Ia(t,s,{get:()=>e[s],enumerable:!(n=qb(e,s))||n.enumerable});return t},Kb=t=>Jb(Ia({},"__esModule",{value:!0}),t),Mu={};Wb(Mu,{BcsReader:()=>Xb});var Nu=Kb(Mu),Hb=ni;let Xb=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:s}=(0,Hb.ulebDecode)(r);return this.shift(s),n}readVec(e){let r=this.readULEB(),n=[];for(let s=0;s<r;s++)n.push(e(this,s,r));return n}};var xa=Object.defineProperty,Yb=Object.getOwnPropertyDescriptor,Zb=Object.getOwnPropertyNames,Qb=Object.prototype.hasOwnProperty,ev=(t,e)=>{for(var r in e)xa(t,r,{get:e[r],enumerable:!0})},tv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Zb(e))!Qb.call(t,s)&&s!==r&&xa(t,s,{get:()=>e[s],enumerable:!(n=Yb(e,s))||n.enumerable});return t},rv=t=>tv(xa({},"__esModule",{value:!0}),t),Bu={};ev(Bu,{decodeStr:()=>sv,encodeStr:()=>nv,splitGenericParameters:()=>iv});var Du=rv(Bu),Uu=ka,Ru=Ea,zu=Ta;function nv(t,e){switch(e){case"base58":return(0,Uu.toBase58)(t);case"base64":return(0,Ru.toBase64)(t);case"hex":return(0,zu.toHex)(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function sv(t,e){switch(e){case"base58":return(0,Uu.fromBase58)(t);case"base64":return(0,Ru.fromBase64)(t);case"hex":return(0,zu.fromHex)(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function iv(t,e=["<",">"]){const[r,n]=e,s=[];let i="",a=0;for(let o=0;o<t.length;o++){const c=t[o];if(c===r&&a++,c===n&&a--,a===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}var Ca=Object.defineProperty,av=Object.getOwnPropertyDescriptor,ov=Object.getOwnPropertyNames,cv=Object.prototype.hasOwnProperty,uv=(t,e)=>{for(var r in e)Ca(t,r,{get:e[r],enumerable:!0})},lv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ov(e))!cv.call(t,s)&&s!==r&&Ca(t,s,{get:()=>e[s],enumerable:!(n=av(e,s))||n.enumerable});return t},pv=t=>lv(Ca({},"__esModule",{value:!0}),t),Vu={};uv(Vu,{BcsWriter:()=>hv});var Lu=pv(Vu),dv=ni,fv=Du;let hv=class{constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return bi(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return bi(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return bi(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return(0,dv.ulebEncode)(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,s)=>r(this,n,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return(0,fv.encodeStr)(this.toBytes(),e)}};function bi(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Aa=Object.defineProperty,yv=Object.getOwnPropertyDescriptor,gv=Object.getOwnPropertyNames,bv=Object.prototype.hasOwnProperty,qu=t=>{throw TypeError(t)},vv=(t,e)=>{for(var r in e)Aa(t,r,{get:e[r],enumerable:!0})},mv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of gv(e))!bv.call(t,s)&&s!==r&&Aa(t,s,{get:()=>e[s],enumerable:!(n=yv(e,s))||n.enumerable});return t},_v=t=>mv(Aa({},"__esModule",{value:!0}),t),Fu=(t,e,r)=>e.has(t)||qu("Cannot "+r),Le=(t,e,r)=>(Fu(t,e,"read from private field"),r?r.call(t):e.get(t)),Bs=(t,e,r)=>e.has(t)?qu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ds=(t,e,r,n)=>(Fu(t,e,"write to private field"),e.set(t,r),r),Gu={};vv(Gu,{BcsType:()=>Wn,SerializedBcs:()=>Zu,bigUIntBcsType:()=>jv,dynamicSizeBcsType:()=>Tv,fixedSizeBcsType:()=>Ma,isSerializedBcs:()=>$v,lazyBcsType:()=>Iv,stringLikeBcsType:()=>Pv,uIntBcsType:()=>Ev});var Wu=_v(Gu),Ju=ka,Ku=Ea,Hu=Ta,wv=Nu,Ov=ni,Sv=Lu,_r,pn,gs,Mt;const kv=class Xu{constructor(e){Bs(this,_r),Bs(this,pn),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Ds(this,_r,e.write),Ds(this,pn,e.serialize??((r,n)=>{const s=new Sv.BcsWriter({initialSize:this.serializedSize(r)??void 0,...n});return Le(this,_r).call(this,r,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),Le(this,_r).call(this,e,r)}serialize(e,r){return this.validate(e),new Zu(this,Le(this,pn).call(this,e,r))}parse(e){const r=new wv.BcsReader(e);return this.read(r)}fromHex(e){return this.parse((0,Hu.fromHex)(e))}fromBase58(e){return this.parse((0,Ju.fromBase58)(e))}fromBase64(e){return this.parse((0,Ku.fromBase64)(e))}transform({name:e,input:r,output:n,validate:s}){return new Xu({name:e??this.name,read:i=>n(this.read(i)),write:(i,a)=>Le(this,_r).call(this,r(i),a),serializedSize:i=>this.serializedSize(r(i)),serialize:(i,a)=>Le(this,pn).call(this,r(i),a),validate:i=>{s==null||s(i),this.validate(r(i))}})}};_r=new WeakMap;pn=new WeakMap;let Wn=kv;const Yu=Symbol.for("@mysten/serialized-bcs");function $v(t){return!!t&&typeof t=="object"&&t[Yu]===!0}let Zu=class{constructor(e,r){Bs(this,gs),Bs(this,Mt),Ds(this,gs,e),Ds(this,Mt,r)}get[Yu](){return!0}toBytes(){return Le(this,Mt)}toHex(){return(0,Hu.toHex)(Le(this,Mt))}toBase64(){return(0,Ku.toBase64)(Le(this,Mt))}toBase58(){return(0,Ju.toBase58)(Le(this,Mt))}parse(){return Le(this,gs).parse(Le(this,Mt))}};gs=new WeakMap;Mt=new WeakMap;function Ma({size:t,...e}){return new Wn({...e,serializedSize:()=>t})}function Ev({readMethod:t,writeMethod:e,...r}){return Ma({...r,read:n=>n[t](),write:(n,s)=>s[e](n),validate:n=>{var s;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(s=r.validate)==null||s.call(r,n)}})}function jv({readMethod:t,writeMethod:e,...r}){return Ma({...r,read:n=>n[t](),write:(n,s)=>s[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function Tv({serialize:t,...e}){const r=new Wn({...e,serialize:t,write:(n,s)=>{for(const i of r.serialize(n).toBytes())s.write8(i)}});return r}function Pv({toBytes:t,fromBytes:e,...r}){return new Wn({...r,read:n=>{const s=n.readULEB(),i=n.readBytes(s);return e(i)},write:(n,s)=>{const i=t(n);s.writeULEB(i.length);for(let a=0;a<i.length;a++)s.write8(i[a])},serialize:n=>{const s=t(n),i=(0,Ov.ulebEncode)(s.length),a=new Uint8Array(i.length+s.length);return a.set(i,0),a.set(s,i.length),a},validate:n=>{var s;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(s=r.validate)==null||s.call(r,n)}})}function Iv(t){let e=null;function r(){return e||(e=t()),e}return new Wn({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,s)=>r().write(n,s),serialize:(n,s)=>r().serialize(n,s).toBytes()})}var Na=Object.defineProperty,xv=Object.getOwnPropertyDescriptor,Cv=Object.getOwnPropertyNames,Av=Object.prototype.hasOwnProperty,Mv=(t,e)=>{for(var r in e)Na(t,r,{get:e[r],enumerable:!0})},Nv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Cv(e))!Av.call(t,s)&&s!==r&&Na(t,s,{get:()=>e[s],enumerable:!(n=xv(e,s))||n.enumerable});return t},Bv=t=>Nv(Na({},"__esModule",{value:!0}),t),Qu={};Mv(Qu,{bcs:()=>bs});var Dv=Bv(Qu),be=Wu,Uv=ni;const bs={u8(t){return(0,be.uIntBcsType)({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return(0,be.uIntBcsType)({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return(0,be.uIntBcsType)({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return(0,be.bigUIntBcsType)({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return(0,be.bigUIntBcsType)({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return(0,be.bigUIntBcsType)({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return(0,be.fixedSizeBcsType)({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return(0,be.dynamicSizeBcsType)({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from((0,Uv.ulebEncode)(e)),...t})},bytes(t,e){return(0,be.fixedSizeBcsType)({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{for(let s=0;s<t;s++)n.write8(r[s]??0)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return(0,be.stringLikeBcsType)({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new be.BcsType({name:`${e.name}[${t}]`,read:n=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(n);return s},write:(n,s)=>{for(const i of n)e.write(i,s)},...r,validate:n=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return bs.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new be.BcsType({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),s=new Array(n);for(let i=0;i<n;i++)s[i]=t.read(r);return s},write:(r,n)=>{n.writeULEB(r.length);for(const s of r)t.write(s,n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new be.BcsType({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let s=0;s<t.length;s++){const i=t[s].serializedSize(r[s]);if(i==null)return null;n+=i}return n},read:r=>{const n=[];for(const s of t)n.push(s.read(r));return n},write:(r,n)=>{for(let s=0;s<t.length;s++)t[s].write(r[s],n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new be.BcsType({name:t,serializedSize:s=>{let i=0;for(const[a,o]of n){const c=o.serializedSize(s[a]);if(c==null)return null;i+=c}return i},read:s=>{const i={};for(const[a,o]of n)i[a]=o.read(s);return i},write:(s,i)=>{for(const[a,o]of n)o.write(s[a],i)},...r,validate:s=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,r){const n=Object.entries(e);return new be.BcsType({name:t,read:s=>{const i=s.readULEB(),a=n[i];if(!a)throw new TypeError(`Unknown value ${i} for enum ${t}`);const[o,c]=a;return{[o]:(c==null?void 0:c.read(s))??!0,$kind:o}},write:(s,i)=>{const[a,o]=Object.entries(s).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<n.length;c++){const[l,u]=n[c];if(l===a){i.writeULEB(c),u==null||u.write(o,i);return}}},...r,validate:s=>{var o;if((o=r==null?void 0:r.validate)==null||o.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s).filter(c=>s[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);const[a]=i;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(t,e){return bs.vector(bs.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[s,i]of r)n.set(s,i);return n}})},lazy(t){return(0,be.lazyBcsType)(t)}};var Ba=Object.defineProperty,Rv=Object.getOwnPropertyDescriptor,zv=Object.getOwnPropertyNames,Vv=Object.prototype.hasOwnProperty,Lv=(t,e)=>{for(var r in e)Ba(t,r,{get:e[r],enumerable:!0})},qv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of zv(e))!Vv.call(t,s)&&s!==r&&Ba(t,s,{get:()=>e[s],enumerable:!(n=Rv(e,s))||n.enumerable});return t},Fv=t=>qv(Ba({},"__esModule",{value:!0}),t),el={};Lv(el,{BcsReader:()=>Wv.BcsReader,BcsType:()=>vi.BcsType,BcsWriter:()=>Jv.BcsWriter,SerializedBcs:()=>vi.SerializedBcs,bcs:()=>Gv.bcs,decodeStr:()=>mi.decodeStr,encodeStr:()=>mi.encodeStr,fromB58:()=>rs.fromB58,fromB64:()=>ns.fromB64,fromBase58:()=>rs.fromBase58,fromBase64:()=>ns.fromBase64,fromHEX:()=>ss.fromHEX,fromHex:()=>ss.fromHex,isSerializedBcs:()=>vi.isSerializedBcs,splitGenericParameters:()=>mi.splitGenericParameters,toB58:()=>rs.toB58,toB64:()=>ns.toB64,toBase58:()=>rs.toBase58,toBase64:()=>ns.toBase64,toHEX:()=>ss.toHEX,toHex:()=>ss.toHex});var ge=Fv(el),rs=ka,ns=Ea,vi=Wu,Gv=Dv,ss=Ta,Wv=Nu,mi=Du,Jv=Lu,Da=Object.defineProperty,Kv=Object.getOwnPropertyDescriptor,Hv=Object.getOwnPropertyNames,Xv=Object.prototype.hasOwnProperty,Yv=(t,e)=>{for(var r in e)Da(t,r,{get:e[r],enumerable:!0})},Zv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Hv(e))!Xv.call(t,s)&&s!==r&&Da(t,s,{get:()=>e[s],enumerable:!(n=Kv(e,s))||n.enumerable});return t},Qv=t=>Zv(Da({},"__esModule",{value:!0}),t),tl={};Yv(tl,{SUI_ADDRESS_LENGTH:()=>Ua,isValidSuiAddress:()=>nl,isValidSuiObjectId:()=>rm,isValidTransactionDigest:()=>tm,normalizeStructTag:()=>sl,normalizeSuiAddress:()=>za,normalizeSuiObjectId:()=>sm,parseStructTag:()=>Ra});var $e=Qv(tl),rl=ge;const em=32;function tm(t){try{return(0,rl.fromBase58)(t).length===em}catch{return!1}}const Ua=32;function nl(t){return im(t)&&am(t)===Ua}function rm(t){return nl(t)}function nm(t){return t.includes("::")?Ra(t):t}function Ra(t){const[e,r]=t.split("::"),n=t.slice(e.length+r.length+4),s=n.includes("<")?n.slice(0,n.indexOf("<")):n,i=n.includes("<")?(0,rl.splitGenericParameters)(n.slice(n.indexOf("<")+1,n.lastIndexOf(">"))).map(a=>nm(a.trim())):[];return{address:za(e),module:r,name:s,typeParams:i}}function sl(t){const{address:e,module:r,name:n,typeParams:s}=typeof t=="string"?Ra(t):t,i=(s==null?void 0:s.length)>0?`<${s.map(a=>typeof a=="string"?a:sl(a)).join(",")}>`:"";return`${e}::${r}::${n}${i}`}function za(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Ua*2,"0")}`}function sm(t,e=!1){return za(t,e)}function im(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function am(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}var Va=Object.defineProperty,om=Object.getOwnPropertyDescriptor,cm=Object.getOwnPropertyNames,um=Object.prototype.hasOwnProperty,lm=(t,e)=>{for(var r in e)Va(t,r,{get:e[r],enumerable:!0})},pm=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of cm(e))!um.call(t,s)&&s!==r&&Va(t,s,{get:()=>e[s],enumerable:!(n=om(e,s))||n.enumerable});return t},dm=t=>pm(Va({},"__esModule",{value:!0}),t),il={};lm(il,{TypeTagSerializer:()=>bm});var al=dm(il),fm=ge,hm=$e;const ym=/^vector<(.+)>$/,gm=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let bm=class wr{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(ym);if(n)return{vector:wr.parseFromStr(n[1],r)};const s=e.match(gm);if(s)return{struct:{address:r?(0,hm.normalizeSuiAddress)(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:wr.parseStructTypeArgs(s[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return(0,fm.splitGenericParameters)(e).map(n=>wr.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${wr.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(wr.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};var La=Object.defineProperty,vm=Object.getOwnPropertyDescriptor,mm=Object.getOwnPropertyNames,_m=Object.prototype.hasOwnProperty,wm=(t,e)=>{for(var r in e)La(t,r,{get:e[r],enumerable:!0})},Om=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of mm(e))!_m.call(t,s)&&s!==r&&La(t,s,{get:()=>e[s],enumerable:!(n=vm(e,s))||n.enumerable});return t},Sm=t=>Om(La({},"__esModule",{value:!0}),t),ol={};wm(ol,{Address:()=>it,AppId:()=>kl,Argument:()=>rt,CallArg:()=>dl,Command:()=>hl,CompressedSignature:()=>jl,GasData:()=>ml,Intent:()=>$l,IntentMessage:()=>El,IntentScope:()=>Ol,IntentVersion:()=>Sl,MultiSig:()=>Em,MultiSigPkMap:()=>Pl,MultiSigPublicKey:()=>Il,ObjectArg:()=>pl,ObjectDigest:()=>ul,ProgrammableMoveCall:()=>fl,ProgrammableTransaction:()=>yl,PublicKey:()=>Tl,SenderSignedData:()=>jm,SenderSignedTransaction:()=>Cl,SharedObjectRef:()=>ll,StructTag:()=>vl,SuiObjectRef:()=>Us,TransactionData:()=>wl,TransactionDataV1:()=>_l,TransactionExpiration:()=>bl,TransactionKind:()=>gl,TypeTag:()=>Fa,base64String:()=>xl});var cl=Sm(ol),m=ge,Xr=$e,bc=al;function km(t){return m.bcs.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function $m(t){return m.bcs.enum("Option",{None:null,Some:t})}const it=m.bcs.bytes(Xr.SUI_ADDRESS_LENGTH).transform({validate:t=>{const e=typeof t=="string"?t:(0,m.toHex)(t);if(!e||!(0,Xr.isValidSuiAddress)((0,Xr.normalizeSuiAddress)(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?(0,m.fromHex)((0,Xr.normalizeSuiAddress)(t)):t,output:t=>(0,Xr.normalizeSuiAddress)((0,m.toHex)(t))}),ul=m.bcs.vector(m.bcs.u8()).transform({name:"ObjectDigest",input:t=>(0,m.fromBase58)(t),output:t=>(0,m.toBase58)(new Uint8Array(t)),validate:t=>{if((0,m.fromBase58)(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Us=m.bcs.struct("SuiObjectRef",{objectId:it,version:m.bcs.u64(),digest:ul}),ll=m.bcs.struct("SharedObjectRef",{objectId:it,initialSharedVersion:m.bcs.u64(),mutable:m.bcs.bool()}),pl=m.bcs.enum("ObjectArg",{ImmOrOwnedObject:Us,SharedObject:ll,Receiving:Us}),dl=m.bcs.enum("CallArg",{Pure:m.bcs.struct("Pure",{bytes:m.bcs.vector(m.bcs.u8()).transform({input:t=>typeof t=="string"?(0,m.fromBase64)(t):t,output:t=>(0,m.toBase64)(new Uint8Array(t))})}),Object:pl}),qa=m.bcs.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:m.bcs.lazy(()=>qa),struct:m.bcs.lazy(()=>vl),u16:null,u32:null,u256:null}),Fa=qa.transform({input:t=>typeof t=="string"?bc.TypeTagSerializer.parseFromStr(t,!0):t,output:t=>bc.TypeTagSerializer.tagToString(t)}),rt=m.bcs.enum("Argument",{GasCoin:null,Input:m.bcs.u16(),Result:m.bcs.u16(),NestedResult:m.bcs.tuple([m.bcs.u16(),m.bcs.u16()])}),fl=m.bcs.struct("ProgrammableMoveCall",{package:it,module:m.bcs.string(),function:m.bcs.string(),typeArguments:m.bcs.vector(Fa),arguments:m.bcs.vector(rt)}),hl=m.bcs.enum("Command",{MoveCall:fl,TransferObjects:m.bcs.struct("TransferObjects",{objects:m.bcs.vector(rt),address:rt}),SplitCoins:m.bcs.struct("SplitCoins",{coin:rt,amounts:m.bcs.vector(rt)}),MergeCoins:m.bcs.struct("MergeCoins",{destination:rt,sources:m.bcs.vector(rt)}),Publish:m.bcs.struct("Publish",{modules:m.bcs.vector(m.bcs.vector(m.bcs.u8()).transform({input:t=>typeof t=="string"?(0,m.fromBase64)(t):t,output:t=>(0,m.toBase64)(new Uint8Array(t))})),dependencies:m.bcs.vector(it)}),MakeMoveVec:m.bcs.struct("MakeMoveVec",{type:$m(Fa).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:m.bcs.vector(rt)}),Upgrade:m.bcs.struct("Upgrade",{modules:m.bcs.vector(m.bcs.vector(m.bcs.u8()).transform({input:t=>typeof t=="string"?(0,m.fromBase64)(t):t,output:t=>(0,m.toBase64)(new Uint8Array(t))})),dependencies:m.bcs.vector(it),package:it,ticket:rt})}),yl=m.bcs.struct("ProgrammableTransaction",{inputs:m.bcs.vector(dl),commands:m.bcs.vector(hl)}),gl=m.bcs.enum("TransactionKind",{ProgrammableTransaction:yl,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),bl=m.bcs.enum("TransactionExpiration",{None:null,Epoch:km()}),vl=m.bcs.struct("StructTag",{address:it,module:m.bcs.string(),name:m.bcs.string(),typeParams:m.bcs.vector(qa)}),ml=m.bcs.struct("GasData",{payment:m.bcs.vector(Us),owner:it,price:m.bcs.u64(),budget:m.bcs.u64()}),_l=m.bcs.struct("TransactionDataV1",{kind:gl,sender:it,gasData:ml,expiration:bl}),wl=m.bcs.enum("TransactionData",{V1:_l}),Ol=m.bcs.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Sl=m.bcs.enum("IntentVersion",{V0:null}),kl=m.bcs.enum("AppId",{Sui:null}),$l=m.bcs.struct("Intent",{scope:Ol,version:Sl,appId:kl});function El(t){return m.bcs.struct(`IntentMessage<${t.name}>`,{intent:$l,value:t})}const jl=m.bcs.enum("CompressedSignature",{ED25519:m.bcs.fixedArray(64,m.bcs.u8()),Secp256k1:m.bcs.fixedArray(64,m.bcs.u8()),Secp256r1:m.bcs.fixedArray(64,m.bcs.u8()),ZkLogin:m.bcs.vector(m.bcs.u8())}),Tl=m.bcs.enum("PublicKey",{ED25519:m.bcs.fixedArray(32,m.bcs.u8()),Secp256k1:m.bcs.fixedArray(33,m.bcs.u8()),Secp256r1:m.bcs.fixedArray(33,m.bcs.u8()),ZkLogin:m.bcs.vector(m.bcs.u8())}),Pl=m.bcs.struct("MultiSigPkMap",{pubKey:Tl,weight:m.bcs.u8()}),Il=m.bcs.struct("MultiSigPublicKey",{pk_map:m.bcs.vector(Pl),threshold:m.bcs.u16()}),Em=m.bcs.struct("MultiSig",{sigs:m.bcs.vector(jl),bitmap:m.bcs.u16(),multisig_pk:Il}),xl=m.bcs.vector(m.bcs.u8()).transform({input:t=>typeof t=="string"?(0,m.fromBase64)(t):t,output:t=>(0,m.toBase64)(new Uint8Array(t))}),Cl=m.bcs.struct("SenderSignedTransaction",{intentMessage:El(wl),txSignatures:m.bcs.vector(xl)}),jm=m.bcs.vector(Cl,{name:"SenderSignedData"});var Ga=Object.defineProperty,Tm=Object.getOwnPropertyDescriptor,Pm=Object.getOwnPropertyNames,Im=Object.prototype.hasOwnProperty,xm=(t,e)=>{for(var r in e)Ga(t,r,{get:e[r],enumerable:!0})},Cm=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Pm(e))!Im.call(t,s)&&s!==r&&Ga(t,s,{get:()=>e[s],enumerable:!(n=Tm(e,s))||n.enumerable});return t},Am=t=>Cm(Ga({},"__esModule",{value:!0}),t),Al={};xm(Al,{TransactionEffects:()=>Jm});var Mm=Am(Al),_=ge,J=cl;const Nm=_.bcs.enum("PackageUpgradeError",{UnableToFetchPackage:_.bcs.struct("UnableToFetchPackage",{packageId:J.Address}),NotAPackage:_.bcs.struct("NotAPackage",{objectId:J.Address}),IncompatibleUpgrade:null,DigestDoesNotMatch:_.bcs.struct("DigestDoesNotMatch",{digest:_.bcs.vector(_.bcs.u8())}),UnknownUpgradePolicy:_.bcs.struct("UnknownUpgradePolicy",{policy:_.bcs.u8()}),PackageIDDoesNotMatch:_.bcs.struct("PackageIDDoesNotMatch",{packageId:J.Address,ticketId:J.Address})}),Bm=_.bcs.struct("ModuleId",{address:J.Address,name:_.bcs.string()}),vc=_.bcs.struct("MoveLocation",{module:Bm,function:_.bcs.u16(),instruction:_.bcs.u16(),functionName:_.bcs.option(_.bcs.string())}),Dm=_.bcs.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:_.bcs.struct("IndexOutOfBounds",{idx:_.bcs.u16()}),SecondaryIndexOutOfBounds:_.bcs.struct("SecondaryIndexOutOfBounds",{resultIdx:_.bcs.u16(),secondaryIdx:_.bcs.u16()}),InvalidResultArity:_.bcs.struct("InvalidResultArity",{resultIdx:_.bcs.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Um=_.bcs.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Rm=_.bcs.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:_.bcs.struct("MoveObjectTooBig",{objectSize:_.bcs.u64(),maxObjectSize:_.bcs.u64()}),MovePackageTooBig:_.bcs.struct("MovePackageTooBig",{objectSize:_.bcs.u64(),maxObjectSize:_.bcs.u64()}),CircularObjectOwnership:_.bcs.struct("CircularObjectOwnership",{object:J.Address}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:_.bcs.option(vc),MoveAbort:_.bcs.tuple([vc,_.bcs.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:_.bcs.struct("CommandArgumentError",{argIdx:_.bcs.u16(),kind:Dm}),TypeArgumentError:_.bcs.struct("TypeArgumentError",{argumentIdx:_.bcs.u16(),kind:Um}),UnusedValueWithoutDrop:_.bcs.struct("UnusedValueWithoutDrop",{resultIdx:_.bcs.u16(),secondaryIdx:_.bcs.u16()}),InvalidPublicFunctionReturnType:_.bcs.struct("InvalidPublicFunctionReturnType",{idx:_.bcs.u16()}),InvalidTransferObject:null,EffectsTooLarge:_.bcs.struct("EffectsTooLarge",{currentSize:_.bcs.u64(),maxSize:_.bcs.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:_.bcs.struct("PackageUpgradeError",{upgradeError:Nm}),WrittenObjectsTooLarge:_.bcs.struct("WrittenObjectsTooLarge",{currentSize:_.bcs.u64(),maxSize:_.bcs.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),Ml=_.bcs.enum("ExecutionStatus",{Success:null,Failed:_.bcs.struct("ExecutionFailed",{error:Rm,command:_.bcs.option(_.bcs.u64())})}),Nl=_.bcs.struct("GasCostSummary",{computationCost:_.bcs.u64(),storageCost:_.bcs.u64(),storageRebate:_.bcs.u64(),nonRefundableStorageFee:_.bcs.u64()}),jr=_.bcs.enum("Owner",{AddressOwner:J.Address,ObjectOwner:J.Address,Shared:_.bcs.struct("Shared",{initialSharedVersion:_.bcs.u64()}),Immutable:null}),zm=_.bcs.struct("TransactionEffectsV1",{status:Ml,executedEpoch:_.bcs.u64(),gasUsed:Nl,modifiedAtVersions:_.bcs.vector(_.bcs.tuple([J.Address,_.bcs.u64()])),sharedObjects:_.bcs.vector(J.SuiObjectRef),transactionDigest:J.ObjectDigest,created:_.bcs.vector(_.bcs.tuple([J.SuiObjectRef,jr])),mutated:_.bcs.vector(_.bcs.tuple([J.SuiObjectRef,jr])),unwrapped:_.bcs.vector(_.bcs.tuple([J.SuiObjectRef,jr])),deleted:_.bcs.vector(J.SuiObjectRef),unwrappedThenDeleted:_.bcs.vector(J.SuiObjectRef),wrapped:_.bcs.vector(J.SuiObjectRef),gasObject:_.bcs.tuple([J.SuiObjectRef,jr]),eventsDigest:_.bcs.option(J.ObjectDigest),dependencies:_.bcs.vector(J.ObjectDigest)}),Wa=_.bcs.tuple([_.bcs.u64(),J.ObjectDigest]),Vm=_.bcs.enum("ObjectIn",{NotExist:null,Exist:_.bcs.tuple([Wa,jr])}),Lm=_.bcs.enum("ObjectOut",{NotExist:null,ObjectWrite:_.bcs.tuple([J.ObjectDigest,jr]),PackageWrite:Wa}),qm=_.bcs.enum("IDOperation",{None:null,Created:null,Deleted:null}),Fm=_.bcs.struct("EffectsObjectChange",{inputState:Vm,outputState:Lm,idOperation:qm}),Gm=_.bcs.enum("UnchangedSharedKind",{ReadOnlyRoot:Wa,MutateDeleted:_.bcs.u64(),ReadDeleted:_.bcs.u64(),Cancelled:_.bcs.u64(),PerEpochConfig:null}),Wm=_.bcs.struct("TransactionEffectsV2",{status:Ml,executedEpoch:_.bcs.u64(),gasUsed:Nl,transactionDigest:J.ObjectDigest,gasObjectIndex:_.bcs.option(_.bcs.u32()),eventsDigest:_.bcs.option(J.ObjectDigest),dependencies:_.bcs.vector(J.ObjectDigest),lamportVersion:_.bcs.u64(),changedObjects:_.bcs.vector(_.bcs.tuple([J.Address,Fm])),unchangedSharedObjects:_.bcs.vector(_.bcs.tuple([J.Address,Gm])),auxDataDigest:_.bcs.option(J.ObjectDigest)}),Jm=_.bcs.enum("TransactionEffects",{V1:zm,V2:Wm});var Ja=Object.defineProperty,Km=Object.getOwnPropertyDescriptor,Hm=Object.getOwnPropertyNames,Xm=Object.prototype.hasOwnProperty,Ym=(t,e)=>{for(var r in e)Ja(t,r,{get:e[r],enumerable:!0})},Zm=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Hm(e))!Xm.call(t,s)&&s!==r&&Ja(t,s,{get:()=>e[s],enumerable:!(n=Km(e,s))||n.enumerable});return t},Qm=t=>Zm(Ja({},"__esModule",{value:!0}),t),Bl={};Ym(Bl,{BcsType:()=>r_.BcsType,TypeTagSerializer:()=>t_.TypeTagSerializer,bcs:()=>n_});var ct=Qm(Bl),Ze=ge,G=cl,e_=Mm,t_=al,r_=ge;const n_={...Ze.bcs,U8:Ze.bcs.u8(),U16:Ze.bcs.u16(),U32:Ze.bcs.u32(),U64:Ze.bcs.u64(),U128:Ze.bcs.u128(),U256:Ze.bcs.u256(),ULEB128:Ze.bcs.uleb128(),Bool:Ze.bcs.bool(),String:Ze.bcs.string(),Address:G.Address,AppId:G.AppId,Argument:G.Argument,CallArg:G.CallArg,CompressedSignature:G.CompressedSignature,GasData:G.GasData,Intent:G.Intent,IntentMessage:G.IntentMessage,IntentScope:G.IntentScope,IntentVersion:G.IntentVersion,MultiSig:G.MultiSig,MultiSigPkMap:G.MultiSigPkMap,MultiSigPublicKey:G.MultiSigPublicKey,ObjectArg:G.ObjectArg,ObjectDigest:G.ObjectDigest,ProgrammableMoveCall:G.ProgrammableMoveCall,ProgrammableTransaction:G.ProgrammableTransaction,PublicKey:G.PublicKey,SenderSignedData:G.SenderSignedData,SenderSignedTransaction:G.SenderSignedTransaction,SharedObjectRef:G.SharedObjectRef,StructTag:G.StructTag,SuiObjectRef:G.SuiObjectRef,Command:G.Command,TransactionData:G.TransactionData,TransactionDataV1:G.TransactionDataV1,TransactionExpiration:G.TransactionExpiration,TransactionKind:G.TransactionKind,TypeTag:G.TypeTag,TransactionEffects:e_.TransactionEffects};var Ka=Object.defineProperty,s_=Object.getOwnPropertyDescriptor,i_=Object.getOwnPropertyNames,a_=Object.prototype.hasOwnProperty,o_=(t,e)=>{for(var r in e)Ka(t,r,{get:e[r],enumerable:!0})},c_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of i_(e))!a_.call(t,s)&&s!==r&&Ka(t,s,{get:()=>e[s],enumerable:!(n=s_(e,s))||n.enumerable});return t},u_=t=>c_(Ka({},"__esModule",{value:!0}),t),Dl={};o_(Dl,{formatAddress:()=>p_,formatDigest:()=>d_});var l_=u_(Dl);const Ul="…";function p_(t){if(t.length<=6)return t;const e=t.startsWith("0x")?2:0;return`0x${t.slice(e,e+4)}${Ul}${t.slice(-4)}`}function d_(t){return`${t.slice(0,10)}${Ul}`}var Ha=Object.defineProperty,f_=Object.getOwnPropertyDescriptor,h_=Object.getOwnPropertyNames,y_=Object.prototype.hasOwnProperty,g_=(t,e)=>{for(var r in e)Ha(t,r,{get:e[r],enumerable:!0})},b_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of h_(e))!y_.call(t,s)&&s!==r&&Ha(t,s,{get:()=>e[s],enumerable:!(n=f_(e,s))||n.enumerable});return t},v_=t=>b_(Ha({},"__esModule",{value:!0}),t),Rl={};g_(Rl,{isValidSuiNSName:()=>__,normalizeSuiNSName:()=>w_});var Xa=v_(Rl);const zl=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Vl=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,m_=235;function __(t){return t.length>m_?!1:t.includes("@")?zl.test(t):Vl.test(t)}function w_(t,e="at"){const r=t.toLowerCase();let n;if(r.includes("@")){if(!zl.test(r))throw new Error(`Invalid SuiNS name ${t}`);const[s,i]=r.split("@");n=[...s?s.split("."):[],i]}else{if(!Vl.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}var Ya=Object.defineProperty,O_=Object.getOwnPropertyDescriptor,S_=Object.getOwnPropertyNames,k_=Object.prototype.hasOwnProperty,$_=(t,e)=>{for(var r in e)Ya(t,r,{get:e[r],enumerable:!0})},E_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S_(e))!k_.call(t,s)&&s!==r&&Ya(t,s,{get:()=>e[s],enumerable:!(n=O_(e,s))||n.enumerable});return t},j_=t=>E_(Ya({},"__esModule",{value:!0}),t),Ll={};$_(Ll,{MIST_PER_SUI:()=>I_,MOVE_STDLIB_ADDRESS:()=>x_,SUI_CLOCK_OBJECT_ID:()=>A_,SUI_DECIMALS:()=>P_,SUI_FRAMEWORK_ADDRESS:()=>Fl,SUI_SYSTEM_ADDRESS:()=>C_,SUI_SYSTEM_MODULE_NAME:()=>M_,SUI_SYSTEM_STATE_OBJECT_ID:()=>B_,SUI_TYPE_ARG:()=>N_});var T_=j_(Ll),ql=$e;const P_=9,I_=BigInt(1e9),x_="0x1",Fl="0x2",C_="0x3",A_=(0,ql.normalizeSuiObjectId)("0x6"),M_="sui_system",N_=`${Fl}::sui::SUI`,B_=(0,ql.normalizeSuiObjectId)("0x5");var Za=Object.defineProperty,D_=Object.getOwnPropertyDescriptor,U_=Object.getOwnPropertyNames,R_=Object.prototype.hasOwnProperty,z_=(t,e)=>{for(var r in e)Za(t,r,{get:e[r],enumerable:!0})},V_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of U_(e))!R_.call(t,s)&&s!==r&&Za(t,s,{get:()=>e[s],enumerable:!(n=D_(e,s))||n.enumerable});return t},L_=t=>V_(Za({},"__esModule",{value:!0}),t),Gl={};z_(Gl,{isValidNamedPackage:()=>Kl,isValidNamedType:()=>J_});var Wl=L_(Gl),q_=Xa;const F_=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,G_=/^\d+$/,W_=64,Jl="/",Kl=t=>{const e=t.split(Jl);if(e.length<2||e.length>3)return!1;const[r,n,s]=e;return s!==void 0&&!G_.test(s)||!(0,q_.isValidSuiNSName)(r)?!1:F_.test(n)&&n.length<W_},J_=t=>{const e=t.split(/::|<|>|,/);for(const r of e)if(r.includes(Jl)&&!Kl(r))return!1;return!0},K_=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class H_ extends Zg{constructor(e,r,n={},s,i,a){if(super(),this.blockLen=e,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,yi(e),yi(r),yi(s),r<0||r>s)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>s))throw new Error("key length must be undefined or 1.."+s);if(n.salt!==void 0&&n.salt.length!==i)throw new Error("salt must be undefined or "+i);if(n.personalization!==void 0&&n.personalization.length!==a)throw new Error("personalization must be undefined or "+a);this.buffer=new Uint8Array(e),this.buffer32=Ms(this.buffer)}update(e){yc(this);const{blockLen:r,buffer:n,buffer32:s}=this;e=ys(e);const i=e.length,a=e.byteOffset,o=e.buffer;for(let c=0;c<i;){this.pos===r&&(yr||gr(s),this.compress(s,0,!1),yr||gr(s),this.pos=0);const l=Math.min(r-this.pos,i-c),u=a+c;if(l===r&&!(u%4)&&c+l<i){const p=new Uint32Array(o,u,Math.floor((i-c)/4));yr||gr(p);for(let f=0;c+r<i;f+=s.length,c+=r)this.length+=r,this.compress(p,f,!1);yr||gr(p);continue}n.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){yc(this),Qg(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),yr||gr(n),this.compress(n,0,!0),yr||gr(n);const s=Ms(e);this.get().forEach((i,a)=>s[a]=yt(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:a,pos:o}=this;return e||(e=new this.constructor({dkLen:a})),e.set(...this.get()),e.length=n,e.finished=s,e.destroyed=i,e.outputLen=a,e.buffer.set(r),e.pos=o,e}}const le=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),S=new Uint32Array(32);function It(t,e,r,n,s,i){const a=s[i],o=s[i+1];let c=S[2*t],l=S[2*t+1],u=S[2*e],p=S[2*e+1],f=S[2*r],h=S[2*r+1],y=S[2*n],w=S[2*n+1],j=me.add3L(c,u,a);l=me.add3H(j,l,p,o),c=j|0,{Dh:w,Dl:y}={Dh:w^l,Dl:y^c},{Dh:w,Dl:y}={Dh:me.rotr32H(w,y),Dl:me.rotr32L(w,y)},{h,l:f}=me.add(h,f,w,y),{Bh:p,Bl:u}={Bh:p^h,Bl:u^f},{Bh:p,Bl:u}={Bh:me.rotrSH(p,u,24),Bl:me.rotrSL(p,u,24)},S[2*t]=c,S[2*t+1]=l,S[2*e]=u,S[2*e+1]=p,S[2*r]=f,S[2*r+1]=h,S[2*n]=y,S[2*n+1]=w}function xt(t,e,r,n,s,i){const a=s[i],o=s[i+1];let c=S[2*t],l=S[2*t+1],u=S[2*e],p=S[2*e+1],f=S[2*r],h=S[2*r+1],y=S[2*n],w=S[2*n+1],j=me.add3L(c,u,a);l=me.add3H(j,l,p,o),c=j|0,{Dh:w,Dl:y}={Dh:w^l,Dl:y^c},{Dh:w,Dl:y}={Dh:me.rotrSH(w,y,16),Dl:me.rotrSL(w,y,16)},{h,l:f}=me.add(h,f,w,y),{Bh:p,Bl:u}={Bh:p^h,Bl:u^f},{Bh:p,Bl:u}={Bh:me.rotrBH(p,u,63),Bl:me.rotrBL(p,u,63)},S[2*t]=c,S[2*t+1]=l,S[2*e]=u,S[2*e+1]=p,S[2*r]=f,S[2*r+1]=h,S[2*n]=y,S[2*n+1]=w}class Hl extends H_{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=le[0]|0,this.v0h=le[1]|0,this.v1l=le[2]|0,this.v1h=le[3]|0,this.v2l=le[4]|0,this.v2h=le[5]|0,this.v3l=le[6]|0,this.v3h=le[7]|0,this.v4l=le[8]|0,this.v4h=le[9]|0,this.v5l=le[10]|0,this.v5h=le[11]|0,this.v6l=le[12]|0,this.v6h=le[13]|0,this.v7l=le[14]|0,this.v7h=le[15]|0;const r=e.key?e.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,e.salt){const n=Ms(ys(e.salt));this.v4l^=yt(n[0]),this.v4h^=yt(n[1]),this.v5l^=yt(n[2]),this.v5h^=yt(n[3])}if(e.personalization){const n=Ms(ys(e.personalization));this.v6l^=yt(n[0]),this.v6h^=yt(n[1]),this.v7l^=yt(n[2]),this.v7h^=yt(n[3])}if(e.key){const n=new Uint8Array(this.blockLen);n.set(ys(e.key)),this.update(n)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:a,v3l:o,v3h:c,v4l:l,v4h:u,v5l:p,v5h:f,v6l:h,v6h:y,v7l:w,v7h:j}=this;return[e,r,n,s,i,a,o,c,l,u,p,f,h,y,w,j]}set(e,r,n,s,i,a,o,c,l,u,p,f,h,y,w,j){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=a|0,this.v3l=o|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=p|0,this.v5h=f|0,this.v6l=h|0,this.v6h=y|0,this.v7l=w|0,this.v7h=j|0}compress(e,r,n){this.get().forEach((c,l)=>S[l]=c),S.set(le,16);let{h:s,l:i}=me.fromBig(BigInt(this.length));S[24]=le[8]^i,S[25]=le[9]^s,n&&(S[28]=~S[28],S[29]=~S[29]);let a=0;const o=K_;for(let c=0;c<12;c++)It(0,4,8,12,e,r+2*o[a++]),xt(0,4,8,12,e,r+2*o[a++]),It(1,5,9,13,e,r+2*o[a++]),xt(1,5,9,13,e,r+2*o[a++]),It(2,6,10,14,e,r+2*o[a++]),xt(2,6,10,14,e,r+2*o[a++]),It(3,7,11,15,e,r+2*o[a++]),xt(3,7,11,15,e,r+2*o[a++]),It(0,5,10,15,e,r+2*o[a++]),xt(0,5,10,15,e,r+2*o[a++]),It(1,6,11,12,e,r+2*o[a++]),xt(1,6,11,12,e,r+2*o[a++]),It(2,7,8,13,e,r+2*o[a++]),xt(2,7,8,13,e,r+2*o[a++]),It(3,4,9,14,e,r+2*o[a++]),xt(3,4,9,14,e,r+2*o[a++]);this.v0l^=S[0]^S[16],this.v0h^=S[1]^S[17],this.v1l^=S[2]^S[18],this.v1h^=S[3]^S[19],this.v2l^=S[4]^S[20],this.v2h^=S[5]^S[21],this.v3l^=S[6]^S[22],this.v3h^=S[7]^S[23],this.v4l^=S[8]^S[24],this.v4h^=S[9]^S[25],this.v5l^=S[10]^S[26],this.v5h^=S[11]^S[27],this.v6l^=S[12]^S[28],this.v6h^=S[13]^S[29],this.v7l^=S[14]^S[30],this.v7h^=S[15]^S[31],S.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const lr=eb(t=>new Hl(t)),X_=Object.freeze(Object.defineProperty({__proto__:null,BLAKE2b:Hl,blake2b:lr},Symbol.toStringTag,{value:"Module"})),Xl=gu(X_);var Qa=Object.defineProperty,Y_=Object.getOwnPropertyDescriptor,Z_=Object.getOwnPropertyNames,Q_=Object.prototype.hasOwnProperty,ew=(t,e)=>{for(var r in e)Qa(t,r,{get:e[r],enumerable:!0})},tw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Z_(e))!Q_.call(t,s)&&s!==r&&Qa(t,s,{get:()=>e[s],enumerable:!(n=Y_(e,s))||n.enumerable});return t},rw=t=>tw(Qa({},"__esModule",{value:!0}),t),Yl={};ew(Yl,{deriveDynamicFieldID:()=>aw});var nw=rw(Yl),sw=ge,iw=Xl,_i=ct;function aw(t,e,r){const n=_i.bcs.Address.serialize(t).toBytes(),s=_i.bcs.TypeTag.serialize(e).toBytes(),i=_i.bcs.u64().serialize(r.length).toBytes(),a=iw.blake2b.create({dkLen:32});return a.update(new Uint8Array([240])),a.update(n),a.update(i),a.update(r),a.update(s),`0x${(0,sw.toHex)(a.digest().slice(0,32))}`}var eo=Object.defineProperty,ow=Object.getOwnPropertyDescriptor,cw=Object.getOwnPropertyNames,uw=Object.prototype.hasOwnProperty,lw=(t,e)=>{for(var r in e)eo(t,r,{get:e[r],enumerable:!0})},pw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of cw(e))!uw.call(t,s)&&s!==r&&eo(t,s,{get:()=>e[s],enumerable:!(n=ow(e,s))||n.enumerable});return t},dw=t=>pw(eo({},"__esModule",{value:!0}),t),Zl={};lw(Zl,{MIST_PER_SUI:()=>ut.MIST_PER_SUI,MOVE_STDLIB_ADDRESS:()=>ut.MOVE_STDLIB_ADDRESS,SUI_ADDRESS_LENGTH:()=>Ct.SUI_ADDRESS_LENGTH,SUI_CLOCK_OBJECT_ID:()=>ut.SUI_CLOCK_OBJECT_ID,SUI_DECIMALS:()=>ut.SUI_DECIMALS,SUI_FRAMEWORK_ADDRESS:()=>ut.SUI_FRAMEWORK_ADDRESS,SUI_SYSTEM_ADDRESS:()=>ut.SUI_SYSTEM_ADDRESS,SUI_SYSTEM_MODULE_NAME:()=>ut.SUI_SYSTEM_MODULE_NAME,SUI_SYSTEM_STATE_OBJECT_ID:()=>ut.SUI_SYSTEM_STATE_OBJECT_ID,SUI_TYPE_ARG:()=>ut.SUI_TYPE_ARG,deriveDynamicFieldID:()=>fw.deriveDynamicFieldID,formatAddress:()=>mc.formatAddress,formatDigest:()=>mc.formatDigest,fromB64:()=>Qe.fromB64,fromBase58:()=>Qe.fromBase58,fromBase64:()=>Qe.fromBase64,fromHEX:()=>Qe.fromHEX,fromHex:()=>Qe.fromHex,isValidNamedPackage:()=>wc.isValidNamedPackage,isValidNamedType:()=>wc.isValidNamedType,isValidSuiAddress:()=>Ct.isValidSuiAddress,isValidSuiNSName:()=>_c.isValidSuiNSName,isValidSuiObjectId:()=>Ct.isValidSuiObjectId,isValidTransactionDigest:()=>Ct.isValidTransactionDigest,normalizeStructTag:()=>Ct.normalizeStructTag,normalizeSuiAddress:()=>Ct.normalizeSuiAddress,normalizeSuiNSName:()=>_c.normalizeSuiNSName,normalizeSuiObjectId:()=>Ct.normalizeSuiObjectId,parseStructTag:()=>Ct.parseStructTag,toB64:()=>Qe.toB64,toBase58:()=>Qe.toBase58,toBase64:()=>Qe.toBase64,toHEX:()=>Qe.toHEX,toHex:()=>Qe.toHex});var to=dw(Zl),mc=l_,Ct=$e,Qe=ge,_c=Xa,ut=T_,wc=Wl,fw=nw,ro=Object.defineProperty,hw=Object.getOwnPropertyDescriptor,yw=Object.getOwnPropertyNames,gw=Object.prototype.hasOwnProperty,bw=(t,e)=>{for(var r in e)ro(t,r,{get:e[r],enumerable:!0})},vw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yw(e))!gw.call(t,s)&&s!==r&&ro(t,s,{get:()=>e[s],enumerable:!(n=hw(e,s))||n.enumerable});return t},mw=t=>vw(ro({},"__esModule",{value:!0}),t),Ql={};bw(Ql,{getPureBcsSchema:()=>Ri,isTxContext:()=>Tw,normalizedTypeToMoveTypeSignature:()=>Pw,pureBcsSchemaFromOpenMoveTypeSignatureBody:()=>tp});var ep=mw(Ql),X=ct,Oc=to,wn=$e;const _w="object",ww="ID",Ow="ascii",Sw="String",kw="string",$w="String",Ew="option",jw="Option";function Tw(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&(0,wn.normalizeSuiAddress)(e.package)===(0,wn.normalizeSuiAddress)("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function Ri(t){if(typeof t=="string")switch(t){case"address":return X.bcs.Address;case"bool":return X.bcs.Bool;case"u8":return X.bcs.U8;case"u16":return X.bcs.U16;case"u32":return X.bcs.U32;case"u64":return X.bcs.U64;case"u128":return X.bcs.U128;case"u256":return X.bcs.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return X.bcs.vector(X.bcs.U8).transform({input:r=>typeof r=="string"?new TextEncoder().encode(r):r,output:r=>r});const e=Ri(t.vector);return e?X.bcs.vector(e):null}if("datatype"in t){const e=(0,wn.normalizeSuiAddress)(t.datatype.package);if(e===(0,wn.normalizeSuiAddress)(Oc.MOVE_STDLIB_ADDRESS)){if(t.datatype.module===Ow&&t.datatype.type===Sw||t.datatype.module===kw&&t.datatype.type===$w)return X.bcs.String;if(t.datatype.module===Ew&&t.datatype.type===jw){const r=Ri(t.datatype.typeParameters[0]);return r?X.bcs.vector(r):null}}if(e===(0,wn.normalizeSuiAddress)(Oc.SUI_FRAMEWORK_ADDRESS)&&t.datatype.module===_w&&t.datatype.type===ww)return X.bcs.Address}return null}function Pw(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:On(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:On(t.MutableReference)}:{ref:null,body:On(t)}}function On(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:On(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(On)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function tp(t){if(typeof t=="string")switch(t){case"address":return X.bcs.Address;case"bool":return X.bcs.Bool;case"u8":return X.bcs.U8;case"u16":return X.bcs.U16;case"u32":return X.bcs.U32;case"u64":return X.bcs.U64;case"u128":return X.bcs.U128;case"u256":return X.bcs.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t)return X.bcs.vector(tp(t.vector));throw new Error(`Expected pure typeSignature, but got ${JSON.stringify(t)}`)}var no=Object.defineProperty,Iw=Object.getOwnPropertyDescriptor,xw=Object.getOwnPropertyNames,Cw=Object.prototype.hasOwnProperty,Aw=(t,e)=>{for(var r in e)no(t,r,{get:e[r],enumerable:!0})},Mw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of xw(e))!Cw.call(t,s)&&s!==r&&no(t,s,{get:()=>e[s],enumerable:!(n=Iw(e,s))||n.enumerable});return t},Nw=t=>Mw(no({},"__esModule",{value:!0}),t),rp={};Aw(rp,{Inputs:()=>Uw});var si=Nw(rp),Bw=ge,wi=$e;function Dw(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?(0,Bw.toBase64)(t):t.toBase64()}}}const Uw={Pure:Dw,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:(0,wi.normalizeSuiAddress)(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:(0,wi.normalizeSuiAddress)(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:(0,wi.normalizeSuiAddress)(t)}}}}};function np(){return{kind:"transformation",type:"await",reference:np,async:!0,async _run(t){return t.value=await t.value,t}}}var sp=/^[A-Z]{6}(?!00)[A-Z\d]{2}(?:[A-Z\d]{3})?$/u,ip=/^[a-z][\da-z]*$/u,ap=/^\d+$/u,op=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,cp=/^[\p{Extended_Pictographic}\p{Emoji_Component}]+$/u,up=/^(?:0h|0x)?[\da-f]+$/iu,lp=/^#(?:[\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/iu,pp=/^\d{15}$|^\d{2}-\d{6}-\d{6}-\d$/u,dp=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,fp=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,hp=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,yp=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,gp=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3]):[0-5]\d$/u,bp=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,vp=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,mp=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,_p=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,wp=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,Op=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,Sp=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,kp=/^(?:0o)?[0-7]+$/iu,$p=/^[\da-hjkmnp-tv-z]{26}$/iu,Ep=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu,Pe;function Rw(t){Pe={...Pe,...t}}function Jn(t){return{lang:(t==null?void 0:t.lang)??(Pe==null?void 0:Pe.lang),message:t==null?void 0:t.message,abortEarly:(t==null?void 0:t.abortEarly)??(Pe==null?void 0:Pe.abortEarly),abortPipeEarly:(t==null?void 0:t.abortPipeEarly)??(Pe==null?void 0:Pe.abortPipeEarly)}}function zw(){Pe=void 0}var $t;function Vw(t,e){$t||($t=new Map),$t.set(e,t)}function jp(t){return $t==null?void 0:$t.get(t)}function Lw(t){$t==null||$t.delete(t)}var Et;function qw(t,e){Et||(Et=new Map),Et.set(e,t)}function Tp(t){return Et==null?void 0:Et.get(t)}function Fw(t){Et==null||Et.delete(t)}var Je;function Gw(t,e,r){Je||(Je=new Map),Je.get(t)||Je.set(t,new Map),Je.get(t).set(r,e)}function Pp(t,e){var r;return(r=Je==null?void 0:Je.get(t))==null?void 0:r.get(e)}function Ww(t,e){var r;(r=Je==null?void 0:Je.get(t))==null||r.delete(e)}function Oe(t){var r,n;const e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&((n=(r=Object.getPrototypeOf(t))==null?void 0:r.constructor)==null?void 0:n.name))??"null":e}function v(t,e,r,n,s){const i=s&&"input"in s?s.input:r.value,a=(s==null?void 0:s.expected)??t.expects??null,o=(s==null?void 0:s.received)??Oe(i),c={kind:t.kind,type:t.type,input:i,expected:a,received:o,message:`Invalid ${e}: ${a?`Expected ${a} but r`:"R"}eceived ${o}`,requirement:t.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},l=t.kind==="schema",u=(s==null?void 0:s.message)??t.message??Pp(t.reference,c.lang)??(l?Tp(c.lang):null)??n.message??jp(c.lang);u&&(c.message=typeof u=="function"?u(c):u),l&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}var Jw=/\D/gu;function so(t){const e=t.replace(Jw,"");let r=e.length,n=1,s=0;for(;r;){const i=+e[--r];n^=1,s+=n?[0,2,4,6,8,1,3,5,7,9][i]:i}return s%10===0}function fr(t,e){return Object.hasOwn(t,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}function Kw(t,e){const r={};for(const n of t)r[n]=e;return r}function Ip(t){if(t.path){let e="";for(const r of t.path)if(typeof r.key=="string"||typeof r.key=="number")e?e+=`.${r.key}`:e+=r.key;else return null;return e}return null}function Hw(t,e){return e.kind===t}function Xw(t,e){return e.type===t}function Yw(t){return t instanceof ii}var ii=class extends Error{constructor(e){super(e[0].message);fc(this,"issues");this.name="ValiError",this.issues=e}};function xp(t){return{kind:"validation",type:"bic",reference:xp,async:!1,expects:null,requirement:sp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"BIC",e,r),e}}}function Cp(t){return{kind:"transformation",type:"brand",reference:Cp,async:!1,name:t,_run(e){return e}}}function Ap(t,e){return{kind:"validation",type:"bytes",reference:Ap,async:!1,expects:`${t}`,requirement:t,message:e,_run(r,n){if(r.typed){const s=new TextEncoder().encode(r.value).length;s!==this.requirement&&v(this,"bytes",r,n,{received:`${s}`})}return r}}}function qr(t,e){return{kind:"validation",type:"check",reference:qr,async:!1,expects:null,requirement:t,message:e,_run(r,n){return r.typed&&!this.requirement(r.value)&&v(this,"input",r,n),r}}}function Mp(t,e){return{kind:"validation",type:"check",reference:Mp,async:!0,expects:null,requirement:t,message:e,async _run(r,n){return r.typed&&!await this.requirement(r.value)&&v(this,"input",r,n),r}}}function Np(t,e){return{kind:"validation",type:"check_items",reference:Np,async:!1,expects:null,requirement:t,message:e,_run(r,n){if(r.typed)for(let s=0;s<r.value.length;s++){const i=r.value[s];this.requirement(i,s,r.value)||v(this,"item",r,n,{input:i,path:[{type:"array",origin:"value",input:r.value,key:s,value:i}]})}return r}}}var Zw=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,Qw=/[- ]/gu,eO=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function Bp(t){return{kind:"validation",type:"credit_card",reference:Bp,async:!1,expects:null,requirement(e){let r;return Zw.test(e)&&(r=e.replace(Qw,""))&&eO.some(n=>n.test(r))&&so(r)},message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"credit card",e,r),e}}}function Dp(t){return{kind:"validation",type:"cuid2",reference:Dp,async:!1,expects:null,requirement:ip,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"Cuid2",e,r),e}}}function Up(t){return{kind:"validation",type:"decimal",reference:Up,async:!1,expects:null,requirement:ap,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"decimal",e,r),e}}}function Rp(t){return{kind:"validation",type:"email",reference:Rp,expects:null,async:!1,requirement:op,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"email",e,r),e}}}function zp(t){return{kind:"validation",type:"emoji",reference:zp,async:!1,expects:null,requirement:cp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"emoji",e,r),e}}}function Vp(t){return{kind:"validation",type:"empty",reference:Vp,async:!1,expects:"0",message:t,_run(e,r){return e.typed&&e.value.length>0&&v(this,"length",e,r,{received:`${e.value.length}`}),e}}}function Lp(t,e){return{kind:"validation",type:"ends_with",reference:Lp,async:!1,expects:`"${t}"`,requirement:t,message:e,_run(r,n){return r.typed&&!r.value.endsWith(this.requirement)&&v(this,"end",r,n,{received:`"${r.value.slice(-this.requirement.length)}"`}),r}}}function qp(t,e){return{kind:"validation",type:"every_item",reference:qp,async:!1,expects:null,requirement:t,message:e,_run(r,n){return r.typed&&!r.value.every(this.requirement)&&v(this,"item",r,n),r}}}function Fp(t,e){const r=Oe(t);return{kind:"validation",type:"excludes",reference:Fp,async:!1,expects:`!${r}`,requirement:t,message:e,_run(n,s){return n.typed&&n.value.includes(this.requirement)&&v(this,"content",n,s,{received:r}),n}}}function Gp(t){return{kind:"transformation",type:"filter_items",reference:Gp,async:!1,operation:t,_run(e){return e.value=e.value.filter(this.operation),e}}}function Wp(t){return{kind:"transformation",type:"find_item",reference:Wp,async:!1,operation:t,_run(e){return e.value=e.value.find(this.operation),e}}}function Jp(t){return{kind:"validation",type:"finite",reference:Jp,async:!1,expects:null,requirement:Number.isFinite,message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"finite",e,r),e}}}var tO={md4:32,md5:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8,adler32:8};function Kp(t,e){return{kind:"validation",type:"hash",reference:Kp,expects:null,async:!1,requirement:RegExp(t.map(r=>`^[a-f0-9]{${tO[r]}}$`).join("|"),"iu"),message:e,_run(r,n){return r.typed&&!this.requirement.test(r.value)&&v(this,"hash",r,n),r}}}function Hp(t){return{kind:"validation",type:"hexadecimal",reference:Hp,async:!1,expects:null,requirement:up,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"hexadecimal",e,r),e}}}function Xp(t){return{kind:"validation",type:"hex_color",reference:Xp,async:!1,expects:null,requirement:lp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"hex color",e,r),e}}}function Yp(t){return{kind:"validation",type:"imei",reference:Yp,async:!1,expects:null,requirement(e){return pp.test(e)&&so(e)},message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"IMEI",e,r),e}}}function Zp(t,e){const r=Oe(t);return{kind:"validation",type:"includes",reference:Zp,async:!1,expects:r,requirement:t,message:e,_run(n,s){return n.typed&&!n.value.includes(this.requirement)&&v(this,"content",n,s,{received:`!${r}`}),n}}}function ee(t){return{kind:"validation",type:"integer",reference:ee,async:!1,expects:null,requirement:Number.isInteger,message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"integer",e,r),e}}}function Qp(t){return{kind:"validation",type:"ip",reference:Qp,async:!1,expects:null,requirement:hp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"IP",e,r),e}}}function ed(t){return{kind:"validation",type:"ipv4",reference:ed,async:!1,expects:null,requirement:dp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"IPv4",e,r),e}}}function td(t){return{kind:"validation",type:"ipv6",reference:td,async:!1,expects:null,requirement:fp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"IPv6",e,r),e}}}function rd(t){return{kind:"validation",type:"iso_date",reference:rd,async:!1,expects:null,requirement:yp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"date",e,r),e}}}function nd(t){return{kind:"validation",type:"iso_date_time",reference:nd,async:!1,expects:null,requirement:gp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"date-time",e,r),e}}}function sd(t){return{kind:"validation",type:"iso_time",reference:sd,async:!1,expects:null,requirement:bp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"time",e,r),e}}}function id(t){return{kind:"validation",type:"iso_time_second",reference:id,async:!1,expects:null,requirement:vp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"time-second",e,r),e}}}function ad(t){return{kind:"validation",type:"iso_timestamp",reference:ad,async:!1,expects:null,requirement:mp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"timestamp",e,r),e}}}function od(t){return{kind:"validation",type:"iso_week",reference:od,async:!1,expects:null,requirement:_p,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"week",e,r),e}}}function cd(t,e){return{kind:"validation",type:"length",reference:cd,async:!1,expects:`${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.length!==this.requirement&&v(this,"length",r,n,{received:`${r.value.length}`}),r}}}function ud(t){return{kind:"validation",type:"mac",reference:ud,async:!1,expects:null,requirement:Sp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"MAC",e,r),e}}}function ld(t){return{kind:"validation",type:"mac48",reference:ld,async:!1,expects:null,requirement:wp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"48-bit MAC",e,r),e}}}function pd(t){return{kind:"validation",type:"mac64",reference:pd,async:!1,expects:null,requirement:Op,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"64-bit MAC",e,r),e}}}function dd(t){return{kind:"transformation",type:"map_items",reference:dd,async:!1,operation:t,_run(e){return e.value=e.value.map(this.operation),e}}}function fd(t,e){return{kind:"validation",type:"max_bytes",reference:fd,async:!1,expects:`<=${t}`,requirement:t,message:e,_run(r,n){if(r.typed){const s=new TextEncoder().encode(r.value).length;s>this.requirement&&v(this,"bytes",r,n,{received:`${s}`})}return r}}}function hd(t,e){return{kind:"validation",type:"max_length",reference:hd,async:!1,expects:`<=${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.length>this.requirement&&v(this,"length",r,n,{received:`${r.value.length}`}),r}}}function yd(t,e){return{kind:"validation",type:"max_size",reference:yd,async:!1,expects:`<=${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.size>this.requirement&&v(this,"size",r,n,{received:`${r.value.size}`}),r}}}function gd(t,e){return{kind:"validation",type:"max_value",reference:gd,async:!1,expects:`<=${t instanceof Date?t.toJSON():Oe(t)}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value>this.requirement&&v(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():Oe(r.value)}),r}}}function bd(t,e){return{kind:"validation",type:"mime_type",reference:bd,async:!1,expects:t.map(r=>`"${r}"`).join(" | ")||"never",requirement:t,message:e,_run(r,n){return r.typed&&!this.requirement.includes(r.value.type)&&v(this,"MIME type",r,n,{received:`"${r.value.type}"`}),r}}}function vd(t,e){return{kind:"validation",type:"min_bytes",reference:vd,async:!1,expects:`>=${t}`,requirement:t,message:e,_run(r,n){if(r.typed){const s=new TextEncoder().encode(r.value).length;s<this.requirement&&v(this,"bytes",r,n,{received:`${s}`})}return r}}}function md(t,e){return{kind:"validation",type:"min_length",reference:md,async:!1,expects:`>=${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.length<this.requirement&&v(this,"length",r,n,{received:`${r.value.length}`}),r}}}function _d(t,e){return{kind:"validation",type:"min_size",reference:_d,async:!1,expects:`>=${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.size<this.requirement&&v(this,"size",r,n,{received:`${r.value.size}`}),r}}}function wd(t,e){return{kind:"validation",type:"min_value",reference:wd,async:!1,expects:`>=${t instanceof Date?t.toJSON():Oe(t)}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value<this.requirement&&v(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():Oe(r.value)}),r}}}function Od(t,e){return{kind:"validation",type:"multiple_of",reference:Od,async:!1,expects:`%${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value%this.requirement!==0&&v(this,"multiple",r,n),r}}}function Sd(t){return{kind:"validation",type:"non_empty",reference:Sd,async:!1,expects:"!0",message:t,_run(e,r){return e.typed&&e.value.length===0&&v(this,"length",e,r,{received:"0"}),e}}}function kd(t){return{kind:"transformation",type:"normalize",reference:kd,async:!1,form:t,_run(e){return e.value=e.value.normalize(this.form),e}}}function $d(t,e){return{kind:"validation",type:"not_bytes",reference:$d,async:!1,expects:`!${t}`,requirement:t,message:e,_run(r,n){if(r.typed){const s=new TextEncoder().encode(r.value).length;s===this.requirement&&v(this,"bytes",r,n,{received:`${s}`})}return r}}}function Ed(t,e){return{kind:"validation",type:"not_length",reference:Ed,async:!1,expects:`!${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.length===this.requirement&&v(this,"length",r,n,{received:`${r.value.length}`}),r}}}function jd(t,e){return{kind:"validation",type:"not_size",reference:jd,async:!1,expects:`!${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.size===this.requirement&&v(this,"size",r,n,{received:`${r.value.size}`}),r}}}function Td(t,e){return{kind:"validation",type:"not_value",reference:Td,async:!1,expects:t instanceof Date?`!${t.toJSON()}`:`!${Oe(t)}`,requirement:t,message:e,_run(r,n){return r.typed&&this.requirement<=r.value&&this.requirement>=r.value&&v(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():Oe(r.value)}),r}}}function Pd(t){return{kind:"validation",type:"octal",reference:Pd,async:!1,expects:null,requirement:kp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"octal",e,r),e}}}function Id(t,e){var r;if(t.issues)for(const n of e)for(const s of t.issues){let i=!1;const a=Math.min(n.length,((r=s.path)==null?void 0:r.length)??0);for(let o=0;o<a;o++)if(n[o]!==s.path[o].key){i=!0;break}if(!i)return!1}return!0}function xd(t,e,r){return{kind:"validation",type:"partial_check",reference:xd,async:!1,expects:null,requirement:e,message:r,_run(n,s){return Id(n,t)&&!this.requirement(n.value)&&v(this,"input",n,s),n}}}function Cd(t,e,r){return{kind:"validation",type:"partial_check",reference:Cd,async:!0,expects:null,requirement:e,message:r,async _run(n,s){return Id(n,t)&&!await this.requirement(n.value)&&v(this,"input",n,s),n}}}function Ad(t){return{kind:"validation",type:"raw_check",reference:Ad,async:!1,expects:null,_run(e,r){return t({dataset:e,config:r,addIssue:n=>v(this,(n==null?void 0:n.label)??"input",e,r,n)}),e}}}function Md(t){return{kind:"validation",type:"raw_check",reference:Md,async:!0,expects:null,async _run(e,r){return await t({dataset:e,config:r,addIssue:n=>v(this,(n==null?void 0:n.label)??"input",e,r,n)}),e}}}function Nd(t){return{kind:"transformation",type:"raw_transform",reference:Nd,async:!1,_run(e,r){const n=t({dataset:e,config:r,addIssue:s=>v(this,(s==null?void 0:s.label)??"input",e,r,s),NEVER:null});return e.issues?e.typed=!1:e.value=n,e}}}function Bd(t){return{kind:"transformation",type:"raw_transform",reference:Bd,async:!0,async _run(e,r){const n=await t({dataset:e,config:r,addIssue:s=>v(this,(s==null?void 0:s.label)??"input",e,r,s),NEVER:null});return e.issues?e.typed=!1:e.value=n,e}}}function Dd(){return{kind:"transformation",type:"readonly",reference:Dd,async:!1,_run(t){return t}}}function Ud(t,e){return{kind:"transformation",type:"reduce_items",reference:Ud,async:!1,operation:t,initial:e,_run(r){return r.value=r.value.reduce(this.operation,this.initial),r}}}function Rd(t,e){return{kind:"validation",type:"regex",reference:Rd,async:!1,expects:`${t}`,requirement:t,message:e,_run(r,n){return r.typed&&!this.requirement.test(r.value)&&v(this,"format",r,n),r}}}function zd(t){return{kind:"validation",type:"safe_integer",reference:zd,async:!1,expects:null,requirement:Number.isSafeInteger,message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"safe integer",e,r),e}}}function Vd(t,e){return{kind:"validation",type:"size",reference:Vd,async:!1,expects:`${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.size!==this.requirement&&v(this,"size",r,n,{received:`${r.value.size}`}),r}}}function Ld(t,e){return{kind:"validation",type:"some_item",reference:Ld,async:!1,expects:null,requirement:t,message:e,_run(r,n){return r.typed&&!r.value.some(this.requirement)&&v(this,"item",r,n),r}}}function qd(t){return{kind:"transformation",type:"sort_items",reference:qd,async:!1,operation:t,_run(e){return e.value=e.value.sort(this.operation),e}}}function Fd(t,e){return{kind:"validation",type:"starts_with",reference:Fd,async:!1,expects:`"${t}"`,requirement:t,message:e,_run(r,n){return r.typed&&!r.value.startsWith(this.requirement)&&v(this,"start",r,n,{received:`"${r.value.slice(0,this.requirement.length)}"`}),r}}}function Gd(){return{kind:"transformation",type:"to_lower_case",reference:Gd,async:!1,_run(t){return t.value=t.value.toLowerCase(),t}}}function Wd(t){return{kind:"transformation",type:"to_max_value",reference:Wd,async:!1,requirement:t,_run(e){return e.value=e.value>this.requirement?this.requirement:e.value,e}}}function Jd(t){return{kind:"transformation",type:"to_min_value",reference:Jd,async:!1,requirement:t,_run(e){return e.value=e.value<this.requirement?this.requirement:e.value,e}}}function Kd(){return{kind:"transformation",type:"to_upper_case",reference:Kd,async:!1,_run(t){return t.value=t.value.toUpperCase(),t}}}function Kn(t){return{kind:"transformation",type:"transform",reference:Kn,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}function Hd(t){return{kind:"transformation",type:"transform",reference:Hd,async:!0,operation:t,async _run(e){return e.value=await this.operation(e.value),e}}}function Xd(){return{kind:"transformation",type:"trim",reference:Xd,async:!1,_run(t){return t.value=t.value.trim(),t}}}function Yd(){return{kind:"transformation",type:"trim_end",reference:Yd,async:!1,_run(t){return t.value=t.value.trimEnd(),t}}}function Zd(){return{kind:"transformation",type:"trim_start",reference:Zd,async:!1,_run(t){return t.value=t.value.trimStart(),t}}}function Qd(t){return{kind:"validation",type:"ulid",reference:Qd,async:!1,expects:null,requirement:$p,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"ULID",e,r),e}}}function ef(t){return{kind:"validation",type:"url",reference:ef,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"URL",e,r),e}}}function tf(t){return{kind:"validation",type:"uuid",reference:tf,async:!1,expects:null,requirement:Ep,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"UUID",e,r),e}}}function rf(t,e){return{kind:"validation",type:"value",reference:rf,async:!1,expects:t instanceof Date?t.toJSON():Oe(t),requirement:t,message:e,_run(r,n){return r.typed&&!(this.requirement<=r.value&&this.requirement>=r.value)&&v(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():Oe(r.value)}),r}}}function rO(t,e){return{...t,_run(r,n){return t._run(r,{...n,...e})}}}function Hn(t,e,r){return typeof t.fallback=="function"?t.fallback(e,r):t.fallback}function nO(t,e){return{...t,fallback:e,_run(r,n){return t._run(r,n),r.issues?{typed:!0,value:Hn(this,r,n)}:r}}}function sO(t,e){return{...t,fallback:e,async:!0,async _run(r,n){return t._run(r,n),r.issues?{typed:!0,value:await Hn(this,r,n)}:r}}}function iO(t){const e={};for(const r of t)if(r.path){const n=Ip(r);n?(e.nested||(e.nested={}),e.nested[n]?e.nested[n].push(r.message):e.nested[n]=[r.message]):e.other?e.other.push(r.message):e.other=[r.message]}else e.root?e.root.push(r.message):e.root=[r.message];return e}function aO(t,e){return{...t,_run(r,n){const s=r.issues&&[...r.issues];if(t._run(r,n),r.issues){for(const i of r.issues)if(!(s!=null&&s.includes(i))){let a=r.value;for(const o of e){const c=a[o],l={type:"unknown",origin:"value",input:a,key:o,value:c};if(i.path?i.path.push(l):i.path=[l],!c)break;a=c}}}return r}}}function oO(t,e){return{...t,async:!0,async _run(r,n){const s=r.issues&&[...r.issues];if(await t._run(r,n),r.issues){for(const i of r.issues)if(!(s!=null&&s.includes(i))){let a=r.value;for(const o of e){const c=a[o],l={type:"unknown",origin:"value",input:a,key:o,value:c};if(i.path?i.path.push(l):i.path=[l],!c)break;a=c}}}return r}}}function Tt(t,e,r){return typeof t.default=="function"?t.default(e,r):t.default}function zi(t){if("entries"in t){const e={};for(const r in t.entries)e[r]=zi(t.entries[r]);return e}return"items"in t?t.items.map(zi):Tt(t)}async function Vi(t){return"entries"in t?Object.fromEntries(await Promise.all(Object.entries(t.entries).map(async([e,r])=>[e,await Vi(r)]))):"items"in t?Promise.all(t.items.map(Vi)):Tt(t)}function Li(t){if("entries"in t){const e={};for(const r in t.entries)e[r]=Li(t.entries[r]);return e}return"items"in t?t.items.map(Li):Hn(t)}async function qi(t){return"entries"in t?Object.fromEntries(await Promise.all(Object.entries(t.entries).map(async([e,r])=>[e,await qi(r)]))):"items"in t?Promise.all(t.items.map(qi)):Hn(t)}function Rs(t,e){return!t._run({typed:!1,value:e},{abortEarly:!0}).issues}function nf(){return{kind:"schema",type:"any",reference:nf,expects:"any",async:!1,_run(t){return t.typed=!0,t}}}function I(t,e){return{kind:"schema",type:"array",reference:I,expects:"Array",async:!1,item:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<s.length;a++){const o=s[a],c=this.item._run({typed:!1,value:o},n);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else v(this,"type",r,n);return r}}}function sf(t,e){return{kind:"schema",type:"array",reference:sf,expects:"Array",async:!0,item:t,message:e,async _run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];const a=await Promise.all(s.map(o=>this.item._run({typed:!1,value:o},n)));for(let o=0;o<a.length;o++){const c=a[o];if(c.issues){const l={type:"array",origin:"value",input:s,key:o,value:s[o]};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else v(this,"type",r,n);return r}}}function ai(t){return{kind:"schema",type:"bigint",reference:ai,expects:"bigint",async:!1,message:t,_run(e,r){return typeof e.value=="bigint"?e.typed=!0:v(this,"type",e,r),e}}}function af(t){return{kind:"schema",type:"blob",reference:af,expects:"Blob",async:!1,message:t,_run(e,r){return e.value instanceof Blob?e.typed=!0:v(this,"type",e,r),e}}}function Xn(t){return{kind:"schema",type:"boolean",reference:Xn,expects:"boolean",async:!1,message:t,_run(e,r){return typeof e.value=="boolean"?e.typed=!0:v(this,"type",e,r),e}}}function of(t,e){return{kind:"schema",type:"custom",reference:of,expects:"unknown",async:!1,check:t,message:e,_run(r,n){return this.check(r.value)?r.typed=!0:v(this,"type",r,n),r}}}function cf(t,e){return{kind:"schema",type:"custom",reference:cf,expects:"unknown",async:!0,check:t,message:e,async _run(r,n){return await this.check(r.value)?r.typed=!0:v(this,"type",r,n),r}}}function uf(t){return{kind:"schema",type:"date",reference:uf,expects:"Date",async:!1,message:t,_run(e,r){return e.value instanceof Date?isNaN(e.value)?v(this,"type",e,r,{received:'"Invalid Date"'}):e.typed=!0:v(this,"type",e,r),e}}}function Fi(t,e){const r=Object.entries(t).filter(([n])=>isNaN(+n)).map(([,n])=>n);return{kind:"schema",type:"enum",reference:Fi,expects:r.map(Oe).join(" | ")||"never",async:!1,enum:t,options:r,message:e,_run(n,s){return this.options.includes(n.value)?n.typed=!0:v(this,"type",n,s),n}}}function lf(t){return{kind:"schema",type:"file",reference:lf,expects:"File",async:!1,message:t,_run(e,r){return e.value instanceof File?e.typed=!0:v(this,"type",e,r),e}}}function Gi(t){return{kind:"schema",type:"function",reference:Gi,expects:"Function",async:!1,message:t,_run(e,r){return typeof e.value=="function"?e.typed=!0:v(this,"type",e,r),e}}}function pf(t,e){return{kind:"schema",type:"instance",reference:pf,expects:t.name,async:!1,class:t,message:e,_run(r,n){return r.value instanceof this.class?r.typed=!0:v(this,"type",r,n),r}}}function zs(t,e){if(typeof t==typeof e){if(t===e||t instanceof Date&&e instanceof Date&&+t==+e)return{value:t};if(t&&e&&t.constructor===Object&&e.constructor===Object){for(const r in e)if(r in t){const n=zs(t[r],e[r]);if(n.issue)return n;t[r]=n.value}else t[r]=e[r];return{value:t}}if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length){for(let r=0;r<t.length;r++){const n=zs(t[r],e[r]);if(n.issue)return n;t[r]=n.value}return{value:t}}}return{issue:!0}}function df(t,e){return{kind:"schema",type:"intersect",reference:df,expects:[...new Set(t.map(r=>r.expects))].join(" & ")||"never",async:!1,options:t,message:e,_run(r,n){if(this.options.length){const s=r.value;let i;r.typed=!0;for(const a of this.options){const o=a._run({typed:!1,value:s},n);if(o.issues&&(r.issues?r.issues.push(...o.issues):r.issues=o.issues,n.abortEarly)){r.typed=!1;break}o.typed||(r.typed=!1),r.typed&&(i?i.push(o.value):i=[o.value])}if(r.typed){r.value=i[0];for(let a=1;a<i.length;a++){const o=zs(r.value,i[a]);if(o.issue){v(this,"type",r,n,{received:"unknown"});break}r.value=o.value}}}else v(this,"type",r,n);return r}}}function ff(t,e){return{kind:"schema",type:"intersect",reference:ff,expects:[...new Set(t.map(r=>r.expects))].join(" & ")||"never",async:!0,options:t,message:e,async _run(r,n){if(this.options.length){const s=r.value;let i;r.typed=!0;const a=await Promise.all(this.options.map(o=>o._run({typed:!1,value:s},n)));for(const o of a){if(o.issues&&(r.issues?r.issues.push(...o.issues):r.issues=o.issues,n.abortEarly)){r.typed=!1;break}o.typed||(r.typed=!1),r.typed&&(i?i.push(o.value):i=[o.value])}if(r.typed){r.value=i[0];for(let o=1;o<i.length;o++){const c=zs(r.value,i[o]);if(c.issue){v(this,"type",r,n,{received:"unknown"});break}r.value=c.value}}}else v(this,"type",r,n);return r}}}function Ur(t){return{kind:"schema",type:"lazy",reference:Ur,expects:"unknown",async:!1,getter:t,_run(e,r){return this.getter(e.value)._run(e,r)}}}function hf(t){return{kind:"schema",type:"lazy",reference:hf,expects:"unknown",async:!0,getter:t,async _run(e,r){return(await this.getter(e.value))._run(e,r)}}}function C(t,e){return{kind:"schema",type:"literal",reference:C,expects:Oe(t),async:!1,literal:t,message:e,_run(r,n){return r.value===this.literal?r.typed=!0:v(this,"type",r,n),r}}}function yf(t,e){return{kind:"schema",type:"loose_object",reference:yf,expects:"Object",async:!1,entries:t,message:e,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const a in this.entries){const o=s[a],c=this.entries[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"object",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||a in s)&&(r.value[a]=c.value)}if(!r.issues||!n.abortEarly)for(const a in s)fr(s,a)&&!(a in this.entries)&&(r.value[a]=s[a])}else v(this,"type",r,n);return r}}}function gf(t,e){return{kind:"schema",type:"loose_object",reference:gf,expects:"Object",async:!0,entries:t,message:e,async _run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};const a=await Promise.all(Object.entries(this.entries).map(async([o,c])=>{const l=s[o];return[o,l,await c._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"object",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),(l.value!==void 0||o in s)&&(r.value[o]=l.value)}if(!r.issues||!n.abortEarly)for(const o in s)fr(s,o)&&!(o in this.entries)&&(r.value[o]=s[o])}else v(this,"type",r,n);return r}}}function bf(t,e){return{kind:"schema",type:"loose_tuple",reference:bf,expects:"Array",async:!1,items:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<this.items.length;a++){const o=s[a],c=this.items[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}if(!r.issues||!n.abortEarly)for(let a=this.items.length;a<s.length;a++)r.value.push(s[a])}else v(this,"type",r,n);return r}}}function vf(t,e){return{kind:"schema",type:"loose_tuple",reference:vf,expects:"Array",async:!0,items:t,message:e,async _run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];const a=await Promise.all(this.items.map(async(o,c)=>{const l=s[c];return[c,l,await o._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"array",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value.push(l.value)}if(!r.issues||!n.abortEarly)for(let o=this.items.length;o<s.length;o++)r.value.push(s[o])}else v(this,"type",r,n);return r}}}function mf(t,e,r){return{kind:"schema",type:"map",reference:mf,expects:"Map",async:!1,key:t,value:e,message:r,_run(n,s){var a,o;const i=n.value;if(i instanceof Map){n.typed=!0,n.value=new Map;for(const[c,l]of i){const u=this.key._run({typed:!1,value:c},s);if(u.issues){const f={type:"map",origin:"key",input:i,key:c,value:l};for(const h of u.issues)h.path?h.path.unshift(f):h.path=[f],(a=n.issues)==null||a.push(h);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}const p=this.value._run({typed:!1,value:l},s);if(p.issues){const f={type:"map",origin:"value",input:i,key:c,value:l};for(const h of p.issues)h.path?h.path.unshift(f):h.path=[f],(o=n.issues)==null||o.push(h);if(n.issues||(n.issues=p.issues),s.abortEarly){n.typed=!1;break}}(!u.typed||!p.typed)&&(n.typed=!1),n.value.set(u.value,p.value)}}else v(this,"type",n,s);return n}}}function _f(t,e,r){return{kind:"schema",type:"map",reference:_f,expects:"Map",async:!0,key:t,value:e,message:r,async _run(n,s){var a,o;const i=n.value;if(i instanceof Map){n.typed=!0,n.value=new Map;const c=await Promise.all([...i].map(([l,u])=>Promise.all([l,u,this.key._run({typed:!1,value:l},s),this.value._run({typed:!1,value:u},s)])));for(const[l,u,p,f]of c){if(p.issues){const h={type:"map",origin:"key",input:i,key:l,value:u};for(const y of p.issues)y.path?y.path.unshift(h):y.path=[h],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=p.issues),s.abortEarly){n.typed=!1;break}}if(f.issues){const h={type:"map",origin:"value",input:i,key:l,value:u};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(o=n.issues)==null||o.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}(!p.typed||!f.typed)&&(n.typed=!1),n.value.set(p.value,f.value)}}else v(this,"type",n,s);return n}}}function wf(t){return{kind:"schema",type:"nan",reference:wf,expects:"NaN",async:!1,message:t,_run(e,r){return Number.isNaN(e.value)?e.typed=!0:v(this,"type",e,r),e}}}function Of(t){return{kind:"schema",type:"never",reference:Of,expects:"never",async:!1,message:t,_run(e,r){return v(this,"type",e,r),e}}}function Sf(t,e){return{kind:"schema",type:"non_nullable",reference:Sf,expects:"!null",async:!1,wrapped:t,message:e,_run(r,n){return r.value===null?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function kf(t,e){return{kind:"schema",type:"non_nullable",reference:kf,expects:"!null",async:!0,wrapped:t,message:e,async _run(r,n){return r.value===null?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function $f(t,e){return{kind:"schema",type:"non_nullish",reference:$f,expects:"!null & !undefined",async:!1,wrapped:t,message:e,_run(r,n){return r.value===null||r.value===void 0?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function Ef(t,e){return{kind:"schema",type:"non_nullish",reference:Ef,expects:"!null & !undefined",async:!0,wrapped:t,message:e,async _run(r,n){return r.value===null||r.value===void 0?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function io(t,e){return{kind:"schema",type:"non_optional",reference:io,expects:"!undefined",async:!1,wrapped:t,message:e,_run(r,n){return r.value===void 0?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function ao(t,e){return{kind:"schema",type:"non_optional",reference:ao,expects:"!undefined",async:!0,wrapped:t,message:e,async _run(r,n){return r.value===void 0?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function Wi(t){return{kind:"schema",type:"null",reference:Wi,expects:"null",async:!1,message:t,_run(e,r){return e.value===null?e.typed=!0:v(this,"type",e,r),e}}}function L(t,...e){const r={kind:"schema",type:"nullable",reference:L,expects:`${t.expects} | null`,async:!1,wrapped:t,_run(n,s){return n.value===null&&("default"in this&&(n.value=Tt(this,n,s)),n.value===null)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function jf(t,...e){const r={kind:"schema",type:"nullable",reference:jf,expects:`${t.expects} | null`,async:!0,wrapped:t,async _run(n,s){return n.value===null&&("default"in this&&(n.value=await Tt(this,n,s)),n.value===null)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function pr(t,...e){const r={kind:"schema",type:"nullish",reference:pr,expects:`${t.expects} | null | undefined`,async:!1,wrapped:t,_run(n,s){return(n.value===null||n.value===void 0)&&("default"in this&&(n.value=Tt(this,n,s)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function Tf(t,...e){const r={kind:"schema",type:"nullish",reference:Tf,expects:`${t.expects} | null | undefined`,async:!0,wrapped:t,async _run(n,s){return(n.value===null||n.value===void 0)&&("default"in this&&(n.value=await Tt(this,n,s)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function Q(t){return{kind:"schema",type:"number",reference:Q,expects:"number",async:!1,message:t,_run(e,r){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:v(this,"type",e,r),e}}}function O(t,e){return{kind:"schema",type:"object",reference:O,expects:"Object",async:!1,entries:t,message:e,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const a in this.entries){const o=s[a],c=this.entries[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"object",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||a in s)&&(r.value[a]=c.value)}}else v(this,"type",r,n);return r}}}function Pf(t,e){return{kind:"schema",type:"object",reference:Pf,expects:"Object",async:!0,entries:t,message:e,async _run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};const a=await Promise.all(Object.entries(this.entries).map(async([o,c])=>{const l=s[o];return[o,l,await c._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"object",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),(l.value!==void 0||o in s)&&(r.value[o]=l.value)}}else v(this,"type",r,n);return r}}}function If(t,e,r){return{kind:"schema",type:"object_with_rest",reference:If,expects:"Object",async:!1,entries:t,rest:e,message:r,_run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const c in this.entries){const l=i[c],u=this.entries[c]._run({typed:!1,value:l},s);if(u.issues){const p={type:"object",origin:"value",input:i,key:c,value:l};for(const f of u.issues)f.path?f.path.unshift(p):f.path=[p],(a=n.issues)==null||a.push(f);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),(u.value!==void 0||c in i)&&(n.value[c]=u.value)}if(!n.issues||!s.abortEarly){for(const c in i)if(fr(i,c)&&!(c in this.entries)){const l=i[c],u=this.rest._run({typed:!1,value:l},s);if(u.issues){const p={type:"object",origin:"value",input:i,key:c,value:l};for(const f of u.issues)f.path?f.path.unshift(p):f.path=[p],(o=n.issues)==null||o.push(f);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value[c]=u.value}}}else v(this,"type",n,s);return n}}}function xf(t,e,r){return{kind:"schema",type:"object_with_rest",reference:xf,expects:"Object",async:!0,entries:t,rest:e,message:r,async _run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};const[c,l]=await Promise.all([Promise.all(Object.entries(this.entries).map(async([u,p])=>{const f=i[u];return[u,f,await p._run({typed:!1,value:f},s)]})),Promise.all(Object.entries(i).filter(([u])=>fr(i,u)&&!(u in this.entries)).map(async([u,p])=>[u,p,await this.rest._run({typed:!1,value:p},s)]))]);for(const[u,p,f]of c){if(f.issues){const h={type:"object",origin:"value",input:i,key:u,value:p};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}f.typed||(n.typed=!1),(f.value!==void 0||u in i)&&(n.value[u]=f.value)}if(!n.issues||!s.abortEarly)for(const[u,p,f]of l){if(f.issues){const h={type:"object",origin:"value",input:i,key:u,value:p};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(o=n.issues)==null||o.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}f.typed||(n.typed=!1),n.value[u]=f.value}}else v(this,"type",n,s);return n}}}function fe(t,...e){const r={kind:"schema",type:"optional",reference:fe,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(n,s){return n.value===void 0&&("default"in this&&(n.value=Tt(this,n,s)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function oo(t,...e){const r={kind:"schema",type:"optional",reference:oo,expects:`${t.expects} | undefined`,async:!0,wrapped:t,async _run(n,s){return n.value===void 0&&("default"in this&&(n.value=await Tt(this,n,s)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function co(t,e){return{kind:"schema",type:"picklist",reference:co,expects:t.map(Oe).join(" | ")||"never",async:!1,options:t,message:e,_run(r,n){return this.options.includes(r.value)?r.typed=!0:v(this,"type",r,n),r}}}function Cf(t){return{kind:"schema",type:"promise",reference:Cf,expects:"Promise",async:!1,message:t,_run(e,r){return e.value instanceof Promise?e.typed=!0:v(this,"type",e,r),e}}}function Rr(t,e,r){return{kind:"schema",type:"record",reference:Rr,expects:"Object",async:!1,key:t,value:e,message:r,_run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const c in i)if(fr(i,c)){const l=i[c],u=this.key._run({typed:!1,value:c},s);if(u.issues){const f={type:"object",origin:"key",input:i,key:c,value:l};for(const h of u.issues)h.path=[f],(a=n.issues)==null||a.push(h);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}const p=this.value._run({typed:!1,value:l},s);if(p.issues){const f={type:"object",origin:"value",input:i,key:c,value:l};for(const h of p.issues)h.path?h.path.unshift(f):h.path=[f],(o=n.issues)==null||o.push(h);if(n.issues||(n.issues=p.issues),s.abortEarly){n.typed=!1;break}}(!u.typed||!p.typed)&&(n.typed=!1),u.typed&&(n.value[u.value]=p.value)}}else v(this,"type",n,s);return n}}}function Af(t,e,r){return{kind:"schema",type:"record",reference:Af,expects:"Object",async:!0,key:t,value:e,message:r,async _run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};const c=await Promise.all(Object.entries(i).filter(([l])=>fr(i,l)).map(([l,u])=>Promise.all([l,u,this.key._run({typed:!1,value:l},s),this.value._run({typed:!1,value:u},s)])));for(const[l,u,p,f]of c){if(p.issues){const h={type:"object",origin:"key",input:i,key:l,value:u};for(const y of p.issues)y.path=[h],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=p.issues),s.abortEarly){n.typed=!1;break}}if(f.issues){const h={type:"object",origin:"value",input:i,key:l,value:u};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(o=n.issues)==null||o.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}(!p.typed||!f.typed)&&(n.typed=!1),p.typed&&(n.value[p.value]=f.value)}}else v(this,"type",n,s);return n}}}function Mf(t,e){return{kind:"schema",type:"set",reference:Mf,expects:"Set",async:!1,value:t,message:e,_run(r,n){var i;const s=r.value;if(s instanceof Set){r.typed=!0,r.value=new Set;for(const a of s){const o=this.value._run({typed:!1,value:a},n);if(o.issues){const c={type:"set",origin:"value",input:s,key:null,value:a};for(const l of o.issues)l.path?l.path.unshift(c):l.path=[c],(i=r.issues)==null||i.push(l);if(r.issues||(r.issues=o.issues),n.abortEarly){r.typed=!1;break}}o.typed||(r.typed=!1),r.value.add(o.value)}}else v(this,"type",r,n);return r}}}function Nf(t,e){return{kind:"schema",type:"set",reference:Nf,expects:"Set",async:!0,value:t,message:e,async _run(r,n){var i;const s=r.value;if(s instanceof Set){r.typed=!0,r.value=new Set;const a=await Promise.all([...s].map(async o=>[o,await this.value._run({typed:!1,value:o},n)]));for(const[o,c]of a){if(c.issues){const l={type:"set",origin:"value",input:s,key:null,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.add(c.value)}}else v(this,"type",r,n);return r}}}function Bf(t,e){return{kind:"schema",type:"strict_object",reference:Bf,expects:"Object",async:!1,entries:t,message:e,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const a in this.entries){const o=s[a],c=this.entries[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"object",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||a in s)&&(r.value[a]=c.value)}if(!r.issues||!n.abortEarly){for(const a in s)if(!(a in this.entries)){const o=s[a];v(this,"type",r,n,{input:o,expected:"never",path:[{type:"object",origin:"value",input:s,key:a,value:o}]});break}}}else v(this,"type",r,n);return r}}}function Df(t,e){return{kind:"schema",type:"strict_object",reference:Df,expects:"Object",async:!0,entries:t,message:e,async _run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};const a=await Promise.all(Object.entries(this.entries).map(async([o,c])=>{const l=s[o];return[o,l,await c._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"object",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),(l.value!==void 0||o in s)&&(r.value[o]=l.value)}if(!r.issues||!n.abortEarly){for(const o in s)if(!(o in this.entries)){const c=s[o];v(this,"type",r,n,{input:c,expected:"never",path:[{type:"object",origin:"value",input:s,key:o,value:c}]});break}}}else v(this,"type",r,n);return r}}}function Uf(t,e){return{kind:"schema",type:"strict_tuple",reference:Uf,expects:"Array",async:!1,items:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<this.items.length;a++){const o=s[a],c=this.items[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}if(!(r.issues&&n.abortEarly)&&this.items.length<s.length){const a=s[t.length];v(this,"type",r,n,{input:a,expected:"never",path:[{type:"array",origin:"value",input:s,key:this.items.length,value:a}]})}}else v(this,"type",r,n);return r}}}function Rf(t,e){return{kind:"schema",type:"strict_tuple",reference:Rf,expects:"Array",async:!0,items:t,message:e,async _run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];const a=await Promise.all(this.items.map(async(o,c)=>{const l=s[c];return[c,l,await o._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"array",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value.push(l.value)}if(!(r.issues&&n.abortEarly)&&this.items.length<s.length){const o=s[t.length];v(this,"type",r,n,{input:o,expected:"never",path:[{type:"array",origin:"value",input:s,key:this.items.length,value:o}]})}}else v(this,"type",r,n);return r}}}function M(t){return{kind:"schema",type:"string",reference:M,expects:"string",async:!1,message:t,_run(e,r){return typeof e.value=="string"?e.typed=!0:v(this,"type",e,r),e}}}function zf(t){return{kind:"schema",type:"symbol",reference:zf,expects:"symbol",async:!1,message:t,_run(e,r){return typeof e.value=="symbol"?e.typed=!0:v(this,"type",e,r),e}}}function oi(t,e){return{kind:"schema",type:"tuple",reference:oi,expects:"Array",async:!1,items:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<this.items.length;a++){const o=s[a],c=this.items[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else v(this,"type",r,n);return r}}}function Vf(t,e){return{kind:"schema",type:"tuple",reference:Vf,expects:"Array",async:!0,items:t,message:e,async _run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];const a=await Promise.all(this.items.map(async(o,c)=>{const l=s[c];return[c,l,await o._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"array",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value.push(l.value)}}else v(this,"type",r,n);return r}}}function Lf(t,e,r){return{kind:"schema",type:"tuple_with_rest",reference:Lf,expects:"Array",async:!1,items:t,rest:e,message:r,_run(n,s){var a,o;const i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];for(let c=0;c<this.items.length;c++){const l=i[c],u=this.items[c]._run({typed:!1,value:l},s);if(u.issues){const p={type:"array",origin:"value",input:i,key:c,value:l};for(const f of u.issues)f.path?f.path.unshift(p):f.path=[p],(a=n.issues)==null||a.push(f);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}if(!n.issues||!s.abortEarly)for(let c=this.items.length;c<i.length;c++){const l=i[c],u=this.rest._run({typed:!1,value:l},s);if(u.issues){const p={type:"array",origin:"value",input:i,key:c,value:l};for(const f of u.issues)f.path?f.path.unshift(p):f.path=[p],(o=n.issues)==null||o.push(f);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}}else v(this,"type",n,s);return n}}}function qf(t,e,r){return{kind:"schema",type:"tuple_with_rest",reference:qf,expects:"Array",async:!0,items:t,rest:e,message:r,async _run(n,s){var a,o;const i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];const[c,l]=await Promise.all([Promise.all(this.items.map(async(u,p)=>{const f=i[p];return[p,f,await u._run({typed:!1,value:f},s)]})),Promise.all(i.slice(this.items.length).map(async(u,p)=>[p+this.items.length,u,await this.rest._run({typed:!1,value:u},s)]))]);for(const[u,p,f]of c){if(f.issues){const h={type:"array",origin:"value",input:i,key:u,value:p};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}f.typed||(n.typed=!1),n.value.push(f.value)}if(!n.issues||!s.abortEarly)for(const[u,p,f]of l){if(f.issues){const h={type:"array",origin:"value",input:i,key:u,value:p};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(o=n.issues)==null||o.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}f.typed||(n.typed=!1),n.value.push(f.value)}}else v(this,"type",n,s);return n}}}function Ji(t){return{kind:"schema",type:"undefined",reference:Ji,expects:"undefined",async:!1,message:t,_run(e,r){return e.value===void 0?e.typed=!0:v(this,"type",e,r),e}}}function Vs(t){let e;if(t)for(const r of t)e?e.push(...r.issues):e=r.issues;return e}function he(t,e){return{kind:"schema",type:"union",reference:he,expects:[...new Set(t.map(r=>r.expects))].join(" | ")||"never",async:!1,options:t,message:e,_run(r,n){let s,i,a;for(const o of this.options){const c=o._run({typed:!1,value:r.value},n);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];v(this,"type",r,n,{issues:Vs(i)}),r.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];v(this,"type",r,n,{issues:Vs(a)})}return r}}}function Ff(t,e){return{kind:"schema",type:"union",reference:Ff,expects:[...new Set(t.map(r=>r.expects))].join(" | ")||"never",async:!0,options:t,message:e,async _run(r,n){let s,i,a;for(const o of this.options){const c=await o._run({typed:!1,value:r.value},n);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];v(this,"type",r,n,{issues:Vs(i)}),r.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];v(this,"type",r,n,{issues:Vs(a)})}return r}}}function Vt(){return{kind:"schema",type:"unknown",reference:Vt,expects:"unknown",async:!1,_run(t){return t.typed=!0,t}}}function uo(t,e,r=new Set){for(const n of e)n.type==="variant"?uo(t,n.options,r):r.add(n.entries[t].expects);return r}function Gf(t,e,r){let n;return{kind:"schema",type:"variant",reference:Gf,expects:"Object",async:!1,key:t,options:e,message:r,_run(s,i){const a=s.value;if(a&&typeof a=="object"){const o=a[this.key];if(this.key in a){let c;for(const l of this.options)if(l.type==="variant"||!l.entries[this.key]._run({typed:!1,value:o},i).issues){const u=l._run({typed:!1,value:a},i);if(!u.issues)return u;(!c||!c.typed&&u.typed)&&(c=u)}if(c)return c}n||(n=[...uo(this.key,this.options)].join(" | ")||"never"),v(this,"type",s,i,{input:o,expected:n,path:[{type:"object",origin:"value",input:a,key:this.key,value:o}]})}else v(this,"type",s,i);return s}}}function Wf(t,e,r){let n;return{kind:"schema",type:"variant",reference:Wf,expects:"Object",async:!0,key:t,options:e,message:r,async _run(s,i){const a=s.value;if(a&&typeof a=="object"){const o=a[this.key];if(this.key in a){let c;for(const l of this.options)if(l.type==="variant"||!(await l.entries[this.key]._run({typed:!1,value:o},i)).issues){const u=await l._run({typed:!1,value:a},i);if(!u.issues)return u;(!c||!c.typed&&u.typed)&&(c=u)}if(c)return c}n||(n=[...uo(this.key,this.options)].join(" | ")||"never"),v(this,"type",s,i,{input:o,expected:n,path:[{type:"object",origin:"value",input:a,key:this.key,value:o}]})}else v(this,"type",s,i);return s}}}function Ki(t){return{kind:"schema",type:"void",reference:Ki,expects:"void",async:!1,message:t,_run(e,r){return e.value===void 0?e.typed=!0:v(this,"type",e,r),e}}}function cO(t,e){return co(Object.keys(t.entries),e)}function uO(t,e){const r={...t.entries};for(const n of e)delete r[n];return{...t,entries:r}}function Y(t,e,r){const n=t._run({typed:!1,value:e},Jn(r));if(n.issues)throw new ii(n.issues);return n.value}async function Jf(t,e,r){const n=await t._run({typed:!1,value:e},Jn(r));if(n.issues)throw new ii(n.issues);return n.value}function lO(t,e){const r=n=>Y(t,n,e);return r.schema=t,r.config=e,r}function pO(t,e){const r=n=>Jf(t,n,e);return r.schema=t,r.config=e,r}function dO(t,e){const r={};for(const n in t.entries)r[n]=!e||e.includes(n)?fe(t.entries[n]):t.entries[n];return{...t,entries:r}}function fO(t,e){const r={};for(const n in t.entries)r[n]=!e||e.includes(n)?oo(t.entries[n]):t.entries[n];return{...t,entries:r}}function hO(t,e){const r={};for(const n of e)r[n]=t.entries[n];return{...t,entries:r}}function K(...t){return{...t[0],pipe:t,_run(e,r){for(let n=0;n<t.length;n++){if(e.issues&&(t[n].kind==="schema"||t[n].kind==="transformation")){e.typed=!1;break}(!e.issues||!r.abortEarly&&!r.abortPipeEarly)&&(e=t[n]._run(e,r))}return e}}}function yO(...t){return{...t[0],pipe:t,async:!0,async _run(e,r){for(let n=0;n<t.length;n++){if(e.issues&&(t[n].kind==="schema"||t[n].kind==="transformation")){e.typed=!1;break}(!e.issues||!r.abortEarly&&!r.abortPipeEarly)&&(e=await t[n]._run(e,r))}return e}}}function gO(t,e,r){const n=Array.isArray(e)?e:void 0,s=Array.isArray(e)?r:e,i={};for(const a in t.entries)i[a]=!n||n.includes(a)?io(t.entries[a],s):t.entries[a];return{...t,entries:i}}function bO(t,e,r){const n=Array.isArray(e)?e:void 0,s=Array.isArray(e)?r:e,i={};for(const a in t.entries)i[a]=!n||n.includes(a)?ao(t.entries[a],s):t.entries[a];return{...t,entries:i}}function Kf(t,e,r){const n=t._run({typed:!1,value:e},Jn(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}async function Hf(t,e,r){const n=await t._run({typed:!1,value:e},Jn(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}function vO(t,e){const r=n=>Kf(t,n,e);return r.schema=t,r.config=e,r}function mO(t,e){const r=n=>Hf(t,n,e);return r.schema=t,r.config=e,r}function _O(t){return t.wrapped}const wO=Object.freeze(Object.defineProperty({__proto__:null,BIC_REGEX:sp,CUID2_REGEX:ip,DECIMAL_REGEX:ap,EMAIL_REGEX:op,EMOJI_REGEX:cp,HEXADECIMAL_REGEX:up,HEX_COLOR_REGEX:lp,IMEI_REGEX:pp,IPV4_REGEX:dp,IPV6_REGEX:fp,IP_REGEX:hp,ISO_DATE_REGEX:yp,ISO_DATE_TIME_REGEX:gp,ISO_TIMESTAMP_REGEX:mp,ISO_TIME_REGEX:bp,ISO_TIME_SECOND_REGEX:vp,ISO_WEEK_REGEX:_p,MAC48_REGEX:wp,MAC64_REGEX:Op,MAC_REGEX:Sp,OCTAL_REGEX:kp,ULID_REGEX:$p,UUID_REGEX:Ep,ValiError:ii,_addIssue:v,_isLuhnAlgo:so,_isValidObjectKey:fr,_stringify:Oe,any:nf,array:I,arrayAsync:sf,awaitAsync:np,bic:xp,bigint:ai,blob:af,boolean:Xn,brand:Cp,bytes:Ap,check:qr,checkAsync:Mp,checkItems:Np,config:rO,creditCard:Bp,cuid2:Dp,custom:of,customAsync:cf,date:uf,decimal:Up,deleteGlobalConfig:zw,deleteGlobalMessage:Lw,deleteSchemaMessage:Fw,deleteSpecificMessage:Ww,email:Rp,emoji:zp,empty:Vp,endsWith:Lp,entriesFromList:Kw,enum:Fi,enum_:Fi,everyItem:qp,excludes:Fp,fallback:nO,fallbackAsync:sO,file:lf,filterItems:Gp,findItem:Wp,finite:Jp,flatten:iO,forward:aO,forwardAsync:oO,function:Gi,function_:Gi,getDefault:Tt,getDefaults:zi,getDefaultsAsync:Vi,getDotPath:Ip,getFallback:Hn,getFallbacks:Li,getFallbacksAsync:qi,getGlobalConfig:Jn,getGlobalMessage:jp,getSchemaMessage:Tp,getSpecificMessage:Pp,hash:Kp,hexColor:Xp,hexadecimal:Hp,imei:Yp,includes:Zp,instance:pf,integer:ee,intersect:df,intersectAsync:ff,ip:Qp,ipv4:ed,ipv6:td,is:Rs,isOfKind:Hw,isOfType:Xw,isValiError:Yw,isoDate:rd,isoDateTime:nd,isoTime:sd,isoTimeSecond:id,isoTimestamp:ad,isoWeek:od,keyof:cO,lazy:Ur,lazyAsync:hf,length:cd,literal:C,looseObject:yf,looseObjectAsync:gf,looseTuple:bf,looseTupleAsync:vf,mac:ud,mac48:ld,mac64:pd,map:mf,mapAsync:_f,mapItems:dd,maxBytes:fd,maxLength:hd,maxSize:yd,maxValue:gd,mimeType:bd,minBytes:vd,minLength:md,minSize:_d,minValue:wd,multipleOf:Od,nan:wf,never:Of,nonEmpty:Sd,nonNullable:Sf,nonNullableAsync:kf,nonNullish:$f,nonNullishAsync:Ef,nonOptional:io,nonOptionalAsync:ao,normalize:kd,notBytes:$d,notLength:Ed,notSize:jd,notValue:Td,null:Wi,null_:Wi,nullable:L,nullableAsync:jf,nullish:pr,nullishAsync:Tf,number:Q,object:O,objectAsync:Pf,objectWithRest:If,objectWithRestAsync:xf,octal:Pd,omit:uO,optional:fe,optionalAsync:oo,parse:Y,parseAsync:Jf,parser:lO,parserAsync:pO,partial:dO,partialAsync:fO,partialCheck:xd,partialCheckAsync:Cd,pick:hO,picklist:co,pipe:K,pipeAsync:yO,promise:Cf,rawCheck:Ad,rawCheckAsync:Md,rawTransform:Nd,rawTransformAsync:Bd,readonly:Dd,record:Rr,recordAsync:Af,reduceItems:Ud,regex:Rd,required:gO,requiredAsync:bO,safeInteger:zd,safeParse:Kf,safeParseAsync:Hf,safeParser:vO,safeParserAsync:mO,set:Mf,setAsync:Nf,setGlobalConfig:Rw,setGlobalMessage:Vw,setSchemaMessage:qw,setSpecificMessage:Gw,size:Vd,someItem:Ld,sortItems:qd,startsWith:Fd,strictObject:Bf,strictObjectAsync:Df,strictTuple:Uf,strictTupleAsync:Rf,string:M,symbol:zf,toLowerCase:Gd,toMaxValue:Wd,toMinValue:Jd,toUpperCase:Kd,transform:Kn,transformAsync:Hd,trim:Xd,trimEnd:Yd,trimStart:Zd,tuple:oi,tupleAsync:Vf,tupleWithRest:Lf,tupleWithRestAsync:qf,ulid:Qd,undefined:Ji,undefined_:Ji,union:he,unionAsync:Ff,unknown:Vt,unwrap:_O,url:ef,uuid:tf,value:rf,variant:Gf,variantAsync:Wf,void:Ki,void_:Ki},Symbol.toStringTag,{value:"Module"})),Gt=gu(wO);var lo=Object.defineProperty,OO=Object.getOwnPropertyDescriptor,SO=Object.getOwnPropertyNames,kO=Object.prototype.hasOwnProperty,$O=(t,e)=>{for(var r in e)lo(t,r,{get:e[r],enumerable:!0})},EO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of SO(e))!kO.call(t,s)&&s!==r&&lo(t,s,{get:()=>e[s],enumerable:!(n=OO(e,s))||n.enumerable});return t},jO=t=>EO(lo({},"__esModule",{value:!0}),t),Xf={};$O(Xf,{$Intent:()=>Qf,Argument:()=>Ie,BCSBytes:()=>Bn,Command:()=>eh,GasData:()=>Yf,JsonU64:()=>Lt,NormalizedCallArg:()=>xO,ObjectArg:()=>po,ObjectID:()=>cr,ObjectRef:()=>Ls,OpenMoveTypeSignature:()=>Zf,OpenMoveTypeSignatureBody:()=>qs,StructTag:()=>TO,SuiAddress:()=>Yn,TransactionData:()=>CO,TransactionExpiration:()=>th,safeEnum:()=>Gr});var Fr=jO(Xf),b=Gt,Sc=$e;function Gr(t){const e=Object.entries(t).map(([r,n])=>(0,b.object)({[r]:n}));return(0,b.pipe)((0,b.union)(e),(0,b.transform)(r=>({...r,$kind:Object.keys(r)[0]})))}const Yn=(0,b.pipe)((0,b.string)(),(0,b.transform)(t=>(0,Sc.normalizeSuiAddress)(t)),(0,b.check)(Sc.isValidSuiAddress)),cr=Yn,Bn=(0,b.string)(),Lt=(0,b.pipe)((0,b.union)([(0,b.string)(),(0,b.pipe)((0,b.number)(),(0,b.integer)())]),(0,b.check)(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Ls=(0,b.object)({objectId:Yn,version:Lt,digest:(0,b.string)()}),Ie=(0,b.pipe)((0,b.union)([(0,b.object)({GasCoin:(0,b.literal)(!0)}),(0,b.object)({Input:(0,b.pipe)((0,b.number)(),(0,b.integer)()),type:(0,b.optional)((0,b.literal)("pure"))}),(0,b.object)({Input:(0,b.pipe)((0,b.number)(),(0,b.integer)()),type:(0,b.optional)((0,b.literal)("object"))}),(0,b.object)({Result:(0,b.pipe)((0,b.number)(),(0,b.integer)())}),(0,b.object)({NestedResult:(0,b.tuple)([(0,b.pipe)((0,b.number)(),(0,b.integer)()),(0,b.pipe)((0,b.number)(),(0,b.integer)())])})]),(0,b.transform)(t=>({...t,$kind:Object.keys(t)[0]}))),Yf=(0,b.object)({budget:(0,b.nullable)(Lt),price:(0,b.nullable)(Lt),owner:(0,b.nullable)(Yn),payment:(0,b.nullable)((0,b.array)(Ls))}),TO=(0,b.object)({address:(0,b.string)(),module:(0,b.string)(),name:(0,b.string)(),typeParams:(0,b.array)((0,b.string)())}),qs=(0,b.union)([(0,b.literal)("address"),(0,b.literal)("bool"),(0,b.literal)("u8"),(0,b.literal)("u16"),(0,b.literal)("u32"),(0,b.literal)("u64"),(0,b.literal)("u128"),(0,b.literal)("u256"),(0,b.object)({vector:(0,b.lazy)(()=>qs)}),(0,b.object)({datatype:(0,b.object)({package:(0,b.string)(),module:(0,b.string)(),type:(0,b.string)(),typeParameters:(0,b.array)((0,b.lazy)(()=>qs))})}),(0,b.object)({typeParameter:(0,b.pipe)((0,b.number)(),(0,b.integer)())})]),Zf=(0,b.object)({ref:(0,b.nullable)((0,b.union)([(0,b.literal)("&"),(0,b.literal)("&mut")])),body:qs}),PO=(0,b.object)({package:cr,module:(0,b.string)(),function:(0,b.string)(),typeArguments:(0,b.array)((0,b.string)()),arguments:(0,b.array)(Ie),_argumentTypes:(0,b.optional)((0,b.nullable)((0,b.array)(Zf)))}),Qf=(0,b.object)({name:(0,b.string)(),inputs:(0,b.record)((0,b.string)(),(0,b.union)([Ie,(0,b.array)(Ie)])),data:(0,b.record)((0,b.string)(),(0,b.unknown)())}),eh=Gr({MoveCall:PO,TransferObjects:(0,b.object)({objects:(0,b.array)(Ie),address:Ie}),SplitCoins:(0,b.object)({coin:Ie,amounts:(0,b.array)(Ie)}),MergeCoins:(0,b.object)({destination:Ie,sources:(0,b.array)(Ie)}),Publish:(0,b.object)({modules:(0,b.array)(Bn),dependencies:(0,b.array)(cr)}),MakeMoveVec:(0,b.object)({type:(0,b.nullable)((0,b.string)()),elements:(0,b.array)(Ie)}),Upgrade:(0,b.object)({modules:(0,b.array)(Bn),dependencies:(0,b.array)(cr),package:cr,ticket:Ie}),$Intent:Qf}),po=Gr({ImmOrOwnedObject:Ls,SharedObject:(0,b.object)({objectId:cr,initialSharedVersion:Lt,mutable:(0,b.boolean)()}),Receiving:Ls}),IO=Gr({Object:po,Pure:(0,b.object)({bytes:Bn}),UnresolvedPure:(0,b.object)({value:(0,b.unknown)()}),UnresolvedObject:(0,b.object)({objectId:cr,version:(0,b.optional)((0,b.nullable)(Lt)),digest:(0,b.optional)((0,b.nullable)((0,b.string)())),initialSharedVersion:(0,b.optional)((0,b.nullable)(Lt))})}),xO=Gr({Object:po,Pure:(0,b.object)({bytes:Bn})}),th=Gr({None:(0,b.literal)(!0),Epoch:Lt}),CO=(0,b.object)({version:(0,b.literal)(2),sender:(0,b.nullish)(Yn),expiration:(0,b.nullish)(th),gasData:Yf,inputs:(0,b.array)(IO),commands:(0,b.array)(eh)});var fo=Object.defineProperty,AO=Object.getOwnPropertyDescriptor,MO=Object.getOwnPropertyNames,NO=Object.prototype.hasOwnProperty,BO=(t,e)=>{for(var r in e)fo(t,r,{get:e[r],enumerable:!0})},DO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of MO(e))!NO.call(t,s)&&s!==r&&fo(t,s,{get:()=>e[s],enumerable:!(n=AO(e,s))||n.enumerable});return t},UO=t=>DO(fo({},"__esModule",{value:!0}),t),rh={};BO(rh,{Commands:()=>RO,UpgradePolicy:()=>nh});var ho=UO(rh),kc=ge,et=Gt,$c=$e,tt=Fr,nh=(t=>(t[t.COMPATIBLE=0]="COMPATIBLE",t[t.ADDITIVE=128]="ADDITIVE",t[t.DEP_ONLY=192]="DEP_ONLY",t))(nh||{});const RO={MoveCall(t){const[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>(0,et.parse)(tt.Argument,r)),address:(0,et.parse)(tt.Argument,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:(0,et.parse)(tt.Argument,t),amounts:e.map(r=>(0,et.parse)(tt.Argument,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:(0,et.parse)(tt.Argument,t),sources:e.map(r=>(0,et.parse)(tt.Argument,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:(0,kc.toBase64)(new Uint8Array(r))),dependencies:e.map(r=>(0,$c.normalizeSuiObjectId)(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:(0,kc.toBase64)(new Uint8Array(s))),dependencies:e.map(s=>(0,$c.normalizeSuiObjectId)(s)),package:r,ticket:(0,et.parse)(tt.Argument,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>(0,et.parse)(tt.Argument,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,s])=>[n,Array.isArray(s)?s.map(i=>(0,et.parse)(tt.Argument,i)):(0,et.parse)(tt.Argument,s)])),data:r}}}};var yo=Object.defineProperty,zO=Object.getOwnPropertyDescriptor,VO=Object.getOwnPropertyNames,LO=Object.prototype.hasOwnProperty,qO=(t,e)=>{for(var r in e)yo(t,r,{get:e[r],enumerable:!0})},FO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of VO(e))!LO.call(t,s)&&s!==r&&yo(t,s,{get:()=>e[s],enumerable:!(n=zO(e,s))||n.enumerable});return t},GO=t=>FO(yo({},"__esModule",{value:!0}),t),sh={};qO(sh,{NormalizedCallArg:()=>Hi,ObjectRef:()=>Fs,SerializedTransactionDataV1:()=>i0,StructTag:()=>ch,TransactionArgument:()=>ot,TypeTag:()=>ci,serializeV1TransactionData:()=>a0,transactionDataFromV1:()=>o0});var ih=GO(sh),Ir=ge,g=Gt,ah=ct,Sn=Fr;const Fs=(0,g.object)({digest:(0,g.string)(),objectId:(0,g.string)(),version:(0,g.union)([(0,g.pipe)((0,g.number)(),(0,g.integer)()),(0,g.string)(),(0,g.bigint)()])}),WO=(0,Sn.safeEnum)({ImmOrOwned:Fs,Shared:(0,g.object)({objectId:Sn.ObjectID,initialSharedVersion:Sn.JsonU64,mutable:(0,g.boolean)()}),Receiving:Fs}),Hi=(0,Sn.safeEnum)({Object:WO,Pure:(0,g.array)((0,g.pipe)((0,g.number)(),(0,g.integer)()))}),oh=(0,g.union)([(0,g.object)({kind:(0,g.literal)("Input"),index:(0,g.pipe)((0,g.number)(),(0,g.integer)()),value:(0,g.unknown)(),type:(0,g.optional)((0,g.literal)("object"))}),(0,g.object)({kind:(0,g.literal)("Input"),index:(0,g.pipe)((0,g.number)(),(0,g.integer)()),value:(0,g.unknown)(),type:(0,g.literal)("pure")})]),JO=(0,g.union)([(0,g.object)({Epoch:(0,g.pipe)((0,g.number)(),(0,g.integer)())}),(0,g.object)({None:(0,g.nullable)((0,g.literal)(!0))})]),Ec=(0,g.pipe)((0,g.union)([(0,g.number)(),(0,g.string)(),(0,g.bigint)()]),(0,g.check)(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),ci=(0,g.union)([(0,g.object)({bool:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u8:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u64:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u128:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({address:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({signer:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({vector:(0,g.lazy)(()=>ci)}),(0,g.object)({struct:(0,g.lazy)(()=>ch)}),(0,g.object)({u16:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u32:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u256:(0,g.nullable)((0,g.literal)(!0))})]),ch=(0,g.object)({address:(0,g.string)(),module:(0,g.string)(),name:(0,g.string)(),typeParams:(0,g.array)(ci)}),KO=(0,g.object)({budget:(0,g.optional)(Ec),price:(0,g.optional)(Ec),payment:(0,g.optional)((0,g.array)(Fs)),owner:(0,g.optional)((0,g.string)())}),HO=[oh,(0,g.object)({kind:(0,g.literal)("GasCoin")}),(0,g.object)({kind:(0,g.literal)("Result"),index:(0,g.pipe)((0,g.number)(),(0,g.integer)())}),(0,g.object)({kind:(0,g.literal)("NestedResult"),index:(0,g.pipe)((0,g.number)(),(0,g.integer)()),resultIndex:(0,g.pipe)((0,g.number)(),(0,g.integer)())})],ot=(0,g.union)([...HO]),XO=(0,g.object)({kind:(0,g.literal)("MoveCall"),target:(0,g.pipe)((0,g.string)(),(0,g.check)(t=>t.split("::").length===3)),typeArguments:(0,g.array)((0,g.string)()),arguments:(0,g.array)(ot)}),YO=(0,g.object)({kind:(0,g.literal)("TransferObjects"),objects:(0,g.array)(ot),address:ot}),ZO=(0,g.object)({kind:(0,g.literal)("SplitCoins"),coin:ot,amounts:(0,g.array)(ot)}),QO=(0,g.object)({kind:(0,g.literal)("MergeCoins"),destination:ot,sources:(0,g.array)(ot)}),e0=(0,g.object)({kind:(0,g.literal)("MakeMoveVec"),type:(0,g.union)([(0,g.object)({Some:ci}),(0,g.object)({None:(0,g.nullable)((0,g.literal)(!0))})]),objects:(0,g.array)(ot)}),t0=(0,g.object)({kind:(0,g.literal)("Publish"),modules:(0,g.array)((0,g.array)((0,g.pipe)((0,g.number)(),(0,g.integer)()))),dependencies:(0,g.array)((0,g.string)())}),r0=(0,g.object)({kind:(0,g.literal)("Upgrade"),modules:(0,g.array)((0,g.array)((0,g.pipe)((0,g.number)(),(0,g.integer)()))),dependencies:(0,g.array)((0,g.string)()),packageId:(0,g.string)(),ticket:ot}),n0=[XO,YO,ZO,QO,t0,r0,e0],s0=(0,g.union)([...n0]),i0=(0,g.object)({version:(0,g.literal)(1),sender:(0,g.optional)((0,g.string)()),expiration:(0,g.nullish)(JO),gasConfig:KO,inputs:(0,g.array)(oh),transactions:(0,g.array)(s0)});function a0(t){var r;const e=t.inputs.map((n,s)=>{if(n.Object)return{kind:"Input",index:s,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:s,value:{Pure:Array.from((0,Ir.fromBase64)(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((r=t.expiration)==null?void 0:r.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:ah.TypeTagSerializer.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(s=>lt(s,e))};if(n.MergeCoins)return{kind:"MergeCoins",destination:lt(n.MergeCoins.destination,e),sources:n.MergeCoins.sources.map(s=>lt(s,e))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(s=>lt(s,e))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(s=>Array.from((0,Ir.fromBase64)(s))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:lt(n.SplitCoins.coin,e),amounts:n.SplitCoins.amounts.map(s=>lt(s,e))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(s=>lt(s,e)),address:lt(n.TransferObjects.address,e)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(s=>Array.from((0,Ir.fromBase64)(s))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:lt(n.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function lt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function o0(t){var e,r,n;return(0,g.parse)(Sn.TransactionData,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((r=t.gasConfig.price)==null?void 0:r.toString())??null,payment:((n=t.gasConfig.payment)==null?void 0:n.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if((0,g.is)(Hi,s.value)){const i=(0,g.parse)(Hi,s.value);if(i.Object){if(i.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:i.Object.ImmOrOwned.objectId,version:String(i.Object.ImmOrOwned.version),digest:i.Object.ImmOrOwned.digest}}};if(i.Object.Shared)return{Object:{SharedObject:{mutable:i.Object.Shared.mutable??null,initialSharedVersion:i.Object.Shared.initialSharedVersion,objectId:i.Object.Shared.objectId}}};if(i.Object.Receiving)return{Object:{Receiving:{digest:i.Object.Receiving.digest,version:String(i.Object.Receiving.version),objectId:i.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:(0,Ir.toBase64)(new Uint8Array(i.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?ah.TypeTagSerializer.tagToString(s.type.Some):null,elements:s.objects.map(i=>pt(i))}};case"MergeCoins":return{MergeCoins:{destination:pt(s.destination),sources:s.sources.map(i=>pt(i))}};case"MoveCall":{const[i,a,o]=s.target.split("::");return{MoveCall:{package:i,module:a,function:o,typeArguments:s.typeArguments,arguments:s.arguments.map(c=>pt(c))}}}case"Publish":return{Publish:{modules:s.modules.map(i=>(0,Ir.toBase64)(Uint8Array.from(i))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:pt(s.coin),amounts:s.amounts.map(i=>pt(i))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(i=>pt(i)),address:pt(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(i=>(0,Ir.toBase64)(Uint8Array.from(i))),dependencies:s.dependencies,package:s.packageId,ticket:pt(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function pt(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}var go=Object.defineProperty,c0=Object.getOwnPropertyDescriptor,u0=Object.getOwnPropertyNames,l0=Object.prototype.hasOwnProperty,p0=(t,e)=>{for(var r in e)go(t,r,{get:e[r],enumerable:!0})},d0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of u0(e))!l0.call(t,s)&&s!==r&&go(t,s,{get:()=>e[s],enumerable:!(n=c0(e,s))||n.enumerable});return t},f0=t=>d0(go({},"__esModule",{value:!0}),t),uh={};p0(uh,{SerializedTransactionDataV2:()=>O0});var h0=f0(uh),k=Gt,ue=Fr;function Zn(t){return(0,k.union)(Object.entries(t).map(([e,r])=>(0,k.object)({[e]:r})))}const Ue=Zn({GasCoin:(0,k.literal)(!0),Input:(0,k.pipe)((0,k.number)(),(0,k.integer)()),Result:(0,k.pipe)((0,k.number)(),(0,k.integer)()),NestedResult:(0,k.tuple)([(0,k.pipe)((0,k.number)(),(0,k.integer)()),(0,k.pipe)((0,k.number)(),(0,k.integer)())])}),y0=(0,k.object)({budget:(0,k.nullable)(ue.JsonU64),price:(0,k.nullable)(ue.JsonU64),owner:(0,k.nullable)(ue.SuiAddress),payment:(0,k.nullable)((0,k.array)(ue.ObjectRef))}),g0=(0,k.object)({package:ue.ObjectID,module:(0,k.string)(),function:(0,k.string)(),typeArguments:(0,k.array)((0,k.string)()),arguments:(0,k.array)(Ue)}),b0=(0,k.object)({name:(0,k.string)(),inputs:(0,k.record)((0,k.string)(),(0,k.union)([Ue,(0,k.array)(Ue)])),data:(0,k.record)((0,k.string)(),(0,k.unknown)())}),v0=Zn({MoveCall:g0,TransferObjects:(0,k.object)({objects:(0,k.array)(Ue),address:Ue}),SplitCoins:(0,k.object)({coin:Ue,amounts:(0,k.array)(Ue)}),MergeCoins:(0,k.object)({destination:Ue,sources:(0,k.array)(Ue)}),Publish:(0,k.object)({modules:(0,k.array)(ue.BCSBytes),dependencies:(0,k.array)(ue.ObjectID)}),MakeMoveVec:(0,k.object)({type:(0,k.nullable)((0,k.string)()),elements:(0,k.array)(Ue)}),Upgrade:(0,k.object)({modules:(0,k.array)(ue.BCSBytes),dependencies:(0,k.array)(ue.ObjectID),package:ue.ObjectID,ticket:Ue}),$Intent:b0}),m0=Zn({ImmOrOwnedObject:ue.ObjectRef,SharedObject:(0,k.object)({objectId:ue.ObjectID,initialSharedVersion:ue.JsonU64,mutable:(0,k.boolean)()}),Receiving:ue.ObjectRef}),_0=Zn({Object:m0,Pure:(0,k.object)({bytes:ue.BCSBytes}),UnresolvedPure:(0,k.object)({value:(0,k.unknown)()}),UnresolvedObject:(0,k.object)({objectId:ue.ObjectID,version:(0,k.optional)((0,k.nullable)(ue.JsonU64)),digest:(0,k.optional)((0,k.nullable)((0,k.string)())),initialSharedVersion:(0,k.optional)((0,k.nullable)(ue.JsonU64))})}),w0=Zn({None:(0,k.literal)(!0),Epoch:ue.JsonU64}),O0=(0,k.object)({version:(0,k.literal)(2),sender:(0,k.nullish)(ue.SuiAddress),expiration:(0,k.nullish)(w0),gasData:y0,inputs:(0,k.array)(_0),commands:(0,k.array)(v0)});var bo=Object.defineProperty,S0=Object.getOwnPropertyDescriptor,k0=Object.getOwnPropertyNames,$0=Object.prototype.hasOwnProperty,E0=(t,e)=>{for(var r in e)bo(t,r,{get:e[r],enumerable:!0})},j0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of k0(e))!$0.call(t,s)&&s!==r&&bo(t,s,{get:()=>e[s],enumerable:!(n=S0(e,s))||n.enumerable});return t},T0=t=>j0(bo({},"__esModule",{value:!0}),t),lh={};E0(lh,{getClient:()=>Wr,resolveTransactionData:()=>M0});var ph=T0(lh),P0=Gt,jc=ct,Xi=to,I0=Fr,kn=si,Oi=ep;const x0=50,C0=1000n,A0=5e10;async function M0(t,e,r){return await R0(t,e),await U0(t,e),e.onlyTransactionKind||(await N0(t,e),await B0(t,e),await D0(t,e)),await z0(t),await r()}async function N0(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Wr(e).getReferenceGasPrice()))}async function B0(t,e){if(t.gasConfig.budget)return;const r=await Wr(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(A0),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=C0*BigInt(t.gasConfig.price||1n),s=BigInt(r.effects.gasUsed.computationCost)+n,i=s+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>s?i:s)}async function D0(t,e){if(!t.gasConfig.payment){const n=(await Wr(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:Xi.SUI_TYPE_ARG})).data.filter(s=>!t.inputs.find(a=>{var o;return(o=a.Object)!=null&&o.ImmOrOwnedObject?s.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(s=>(0,P0.parse)(I0.ObjectRef,s))}}async function U0(t,e){const r=t.inputs.filter(u=>{var p;return u.UnresolvedObject&&!(u.UnresolvedObject.version||(p=u.UnresolvedObject)!=null&&p.initialSharedVersion)}),n=[...new Set(r.map(u=>(0,Xi.normalizeSuiObjectId)(u.UnresolvedObject.objectId)))],s=n.length?F0(n,x0):[],i=(await Promise.all(s.map(u=>Wr(e).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat(),a=new Map(n.map((u,p)=>[u,i[p]])),o=Array.from(a).filter(([u,p])=>p.error).map(([u,p])=>JSON.stringify(p.error));if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=i.map(u=>{if(u.error||!u.data)throw new Error(`Failed to fetch object: ${u.error}`);const p=u.data.owner,f=p&&typeof p=="object"&&"Shared"in p?p.Shared.initial_shared_version:null;return{objectId:u.data.objectId,digest:u.data.digest,version:u.data.version,initialSharedVersion:f}}),l=new Map(n.map((u,p)=>[u,c[p]]));for(const[u,p]of t.inputs.entries()){if(!p.UnresolvedObject)continue;let f;const h=(0,Xi.normalizeSuiAddress)(p.UnresolvedObject.objectId),y=l.get(h);p.UnresolvedObject.initialSharedVersion??(y==null?void 0:y.initialSharedVersion)?f=kn.Inputs.SharedObjectRef({objectId:h,initialSharedVersion:p.UnresolvedObject.initialSharedVersion||(y==null?void 0:y.initialSharedVersion),mutable:V0(t,u)}):L0(t,u)&&(f=kn.Inputs.ReceivingRef({objectId:h,digest:p.UnresolvedObject.digest??(y==null?void 0:y.digest),version:p.UnresolvedObject.version??(y==null?void 0:y.version)})),t.inputs[t.inputs.indexOf(p)]=f??kn.Inputs.ObjectRef({objectId:h,digest:p.UnresolvedObject.digest??(y==null?void 0:y.digest),version:p.UnresolvedObject.version??(y==null?void 0:y.version)})}}async function R0(t,e){const{inputs:r,commands:n}=t,s=[],i=new Set;n.forEach(o=>{if(o.MoveCall){if(o.MoveCall._argumentTypes)return;if(o.MoveCall.arguments.map(u=>u.$kind==="Input"?t.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${o.MoveCall.package}::${o.MoveCall.module}::${o.MoveCall.function}`;i.add(u),s.push(o.MoveCall)}}switch(o.$kind){case"SplitCoins":o.SplitCoins.amounts.forEach(c=>{Tc(c,jc.bcs.U64,t)});break;case"TransferObjects":Tc(o.TransferObjects.address,jc.bcs.Address,t);break}});const a=new Map;if(i.size>0){const o=Wr(e);await Promise.all([...i].map(async c=>{const[l,u,p]=c.split("::"),f=await o.getNormalizedMoveFunction({package:l,module:u,function:p});a.set(c,f.parameters.map(h=>(0,Oi.normalizedTypeToMoveTypeSignature)(h)))}))}s.length&&await Promise.all(s.map(async o=>{const c=a.get(`${o.package}::${o.module}::${o.function}`);if(!c)return;const u=c.length>0&&(0,Oi.isTxContext)(c.at(-1))?c.slice(0,c.length-1):c;o._argumentTypes=u})),n.forEach(o=>{if(!o.MoveCall)return;const c=o.MoveCall,l=`${c.package}::${c.module}::${c.function}`,u=c._argumentTypes;if(u){if(u.length!==o.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${l}`);u.forEach((p,f)=>{var x,F;const h=c.arguments[f];if(h.$kind!=="Input")return;const y=r[h.Input];if(!y.UnresolvedPure&&!y.UnresolvedObject)return;const w=((x=y.UnresolvedPure)==null?void 0:x.value)??((F=y.UnresolvedObject)==null?void 0:F.objectId),j=(0,Oi.getPureBcsSchema)(p.body);if(j){h.type="pure",r[r.indexOf(y)]=kn.Inputs.Pure(j.serialize(w));return}if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);h.type="object";const U=y.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:w}}:y;r[h.Input]=U})}})}function z0(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function Tc(t,e,r){if(t.$kind!=="Input")return;const n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=kn.Inputs.Pure(e.serialize(n.UnresolvedPure.value)))}function V0(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=s.MoveCall._argumentTypes[i].ref!=="&"||r}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(r=!0)}),r}function L0(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=q0(s.MoveCall._argumentTypes[i])||r}}),r}function q0(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function Wr(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function F0(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))}var vo=Object.defineProperty,G0=Object.getOwnPropertyDescriptor,W0=Object.getOwnPropertyNames,J0=Object.prototype.hasOwnProperty,K0=(t,e)=>{for(var r in e)vo(t,r,{get:e[r],enumerable:!0})},H0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of W0(e))!J0.call(t,s)&&s!==r&&vo(t,s,{get:()=>e[s],enumerable:!(n=G0(e,s))||n.enumerable});return t},X0=t=>H0(vo({},"__esModule",{value:!0}),t),dh={};K0(dh,{createObjectMethods:()=>Y0});var fh=X0(dh);function Y0(t){function e(r){return t(r)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e}var mo=Object.defineProperty,Z0=Object.getOwnPropertyDescriptor,Q0=Object.getOwnPropertyNames,eS=Object.prototype.hasOwnProperty,tS=(t,e)=>{for(var r in e)mo(t,r,{get:e[r],enumerable:!0})},rS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Q0(e))!eS.call(t,s)&&s!==r&&mo(t,s,{get:()=>e[s],enumerable:!(n=Z0(e,s))||n.enumerable});return t},nS=t=>rS(mo({},"__esModule",{value:!0}),t),hh={};tS(hh,{createPure:()=>iS});var yh=nS(hh),sS=ge,ae=ct;function iS(t){function e(r,n){if(typeof r=="string")return t($n(r).serialize(n));if(r instanceof Uint8Array||(0,sS.isSerializedBcs)(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=r=>t(ae.bcs.U8.serialize(r)),e.u16=r=>t(ae.bcs.U16.serialize(r)),e.u32=r=>t(ae.bcs.U32.serialize(r)),e.u64=r=>t(ae.bcs.U64.serialize(r)),e.u128=r=>t(ae.bcs.U128.serialize(r)),e.u256=r=>t(ae.bcs.U256.serialize(r)),e.bool=r=>t(ae.bcs.Bool.serialize(r)),e.string=r=>t(ae.bcs.String.serialize(r)),e.address=r=>t(ae.bcs.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(ae.bcs.vector($n(r)).serialize(n)),e.option=(r,n)=>t(ae.bcs.option($n(r)).serialize(n)),e}function $n(t){switch(t){case"u8":return ae.bcs.u8();case"u16":return ae.bcs.u16();case"u32":return ae.bcs.u32();case"u64":return ae.bcs.u64();case"u128":return ae.bcs.u128();case"u256":return ae.bcs.u256();case"bool":return ae.bcs.bool();case"string":return ae.bcs.string();case"id":case"address":return ae.bcs.Address}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[r,n]=e.slice(1);return r==="vector"?ae.bcs.vector($n(n)):ae.bcs.option($n(n))}throw new Error(`Invalid Pure type name: ${t}`)}var _o=Object.defineProperty,aS=Object.getOwnPropertyDescriptor,oS=Object.getOwnPropertyNames,cS=Object.prototype.hasOwnProperty,uS=(t,e)=>{for(var r in e)_o(t,r,{get:e[r],enumerable:!0})},lS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of oS(e))!cS.call(t,s)&&s!==r&&_o(t,s,{get:()=>e[s],enumerable:!(n=aS(e,s))||n.enumerable});return t},pS=t=>lS(_o({},"__esModule",{value:!0}),t),gh={};uS(gh,{hashTypedData:()=>hS});var dS=pS(gh),fS=Xl;function hS(t,e){const r=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),(0,fS.blake2b)(n,{dkLen:32})}var wo=Object.defineProperty,yS=Object.getOwnPropertyDescriptor,gS=Object.getOwnPropertyNames,bS=Object.prototype.hasOwnProperty,vS=(t,e)=>{for(var r in e)wo(t,r,{get:e[r],enumerable:!0})},mS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of gS(e))!bS.call(t,s)&&s!==r&&wo(t,s,{get:()=>e[s],enumerable:!(n=yS(e,s))||n.enumerable});return t},_S=t=>mS(wo({},"__esModule",{value:!0}),t),bh={};vS(bh,{TransactionDataBuilder:()=>$S});var Oo=_S(bh),wS=ge,Si=Gt,is=ct,OS=$e,ki=Fr,SS=ih,kS=dS;function Pc(t){return(0,OS.normalizeSuiAddress)(t).replace("0x","")}let $S=class Or{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const n=is.bcs.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return Or.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){const r=is.bcs.TransactionData.parse(e),n=r==null?void 0:r.V1,s=n.kind.ProgrammableTransaction;if(!n||!s)throw new Error("Unable to deserialize from bytes.");return Or.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new Or((0,Si.parse)(ki.TransactionData,e)):new Or((0,Si.parse)(ki.TransactionData,(0,SS.transactionDataFromV1)(e)))}static getDigestFromBytes(e){const r=(0,kS.hashTypedData)("TransactionData",e);return(0,wS.toBase58)(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const s=this.inputs,i=this.commands,a={ProgrammableTransaction:{inputs:s,commands:i}};if(n)return is.bcs.TransactionKind.serialize(a,{maxSize:e}).toBytes();const o=(r==null?void 0:r.expiration)??this.expiration,c=(r==null?void 0:r.sender)??this.sender,l={...this.gasData,...r==null?void 0:r.gasConfig,...r==null?void 0:r.gasData};if(!c)throw new Error("Missing transaction sender");if(!l.budget)throw new Error("Missing gas budget");if(!l.payment)throw new Error("Missing gas payment");if(!l.price)throw new Error("Missing gas price");const u={sender:Pc(c),expiration:o||{None:!0},gasData:{payment:l.payment,owner:Pc(this.gasData.owner??c),price:BigInt(l.price),budget:BigInt(l.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:i}}};return is.bcs.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,r){const n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,s)=>(n.$kind==="Input"&&n.Input===e&&r(n,s),n))}mapArguments(e){for(const r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(s=>e(s,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(s=>e(s,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(s=>e(s,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(s=>e(s,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(s=>e(s,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":const n=r.$Intent.inputs;r.$Intent.inputs={};for(const[s,i]of Object.entries(n))r.$Intent.inputs[s]=Array.isArray(i)?i.map(a=>e(a,r)):e(i,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}const n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>e&&(s.Result+=n);break;case"NestedResult":s.NestedResult[0]>e&&(s.NestedResult[0]+=n);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return Or.getDigestFromBytes(e)}snapshot(){return(0,Si.parse)(ki.TransactionData,this)}};var So=Object.defineProperty,ES=Object.getOwnPropertyDescriptor,jS=Object.getOwnPropertyNames,TS=Object.prototype.hasOwnProperty,PS=(t,e)=>{for(var r in e)So(t,r,{get:e[r],enumerable:!0})},IS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of jS(e))!TS.call(t,s)&&s!==r&&So(t,s,{get:()=>e[s],enumerable:!(n=ES(e,s))||n.enumerable});return t},xS=t=>IS(So({},"__esModule",{value:!0}),t),vh={};PS(vh,{extractMutableReference:()=>mh,extractReference:()=>_h,extractStructTag:()=>AS,getIdFromCallArg:()=>MS});var CS=xS(vh),Yr=$e;function mh(t){return typeof t=="object"&&"MutableReference"in t?t.MutableReference:void 0}function _h(t){return typeof t=="object"&&"Reference"in t?t.Reference:void 0}function AS(t){if(typeof t=="object"&&"Struct"in t)return t;const e=_h(t),r=mh(t);if(typeof e=="object"&&"Struct"in e)return e;if(typeof r=="object"&&"Struct"in r)return r}function MS(t){if(typeof t=="string")return(0,Yr.normalizeSuiAddress)(t);if(t.Object)return t.Object.ImmOrOwnedObject?(0,Yr.normalizeSuiAddress)(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?(0,Yr.normalizeSuiAddress)(t.Object.Receiving.objectId):(0,Yr.normalizeSuiAddress)(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return(0,Yr.normalizeSuiAddress)(t.UnresolvedObject.objectId)}var ko=Object.defineProperty,NS=Object.getOwnPropertyDescriptor,BS=Object.getOwnPropertyNames,DS=Object.prototype.hasOwnProperty,wh=t=>{throw TypeError(t)},US=(t,e)=>{for(var r in e)ko(t,r,{get:e[r],enumerable:!0})},RS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of BS(e))!DS.call(t,s)&&s!==r&&ko(t,s,{get:()=>e[s],enumerable:!(n=NS(e,s))||n.enumerable});return t},zS=t=>RS(ko({},"__esModule",{value:!0}),t),$o=(t,e,r)=>e.has(t)||wh("Cannot "+r),B=(t,e,r)=>($o(t,e,"read from private field"),r?r.call(t):e.get(t)),Zr=(t,e,r)=>e.has(t)?wh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Wt=(t,e,r,n)=>($o(t,e,"write to private field"),e.set(t,r),r),gt=(t,e,r)=>($o(t,e,"access private method"),r),Oh={};US(Oh,{Transaction:()=>KS,isTransaction:()=>kh});var ui=zS(Oh),vs=ge,Ut=Gt,VS=$e,Jt=ho,sr=Fr,Ic=ih,LS=h0,as=si,qS=ph,FS=fh,GS=yh,Qr=Oo,xc=CS,dn,En,Zt,R,Re,ms,Eo,Yi,jo;function WS(t){const e={$kind:"Result",Result:t},r=[],n=s=>r[s]??(r[s]={$kind:"NestedResult",NestedResult:[t,s]});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,i){if(i in s)return Reflect.get(s,i);if(i===Symbol.iterator)return function*(){let o=0;for(;;)yield n(o),o++};if(typeof i=="symbol")return;const a=parseInt(i,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}const Sh=Symbol.for("@mysten/transaction");function kh(t){return!!t&&typeof t=="object"&&t[Sh]===!0}const Cc={buildPlugins:new Map,serializationPlugins:new Map},$i=Symbol.for("@mysten/transaction/registry");function en(){try{const t=globalThis;return t[$i]||(t[$i]=Cc),t[$i]}catch{return Cc}}const JS=class Zi{constructor(){Zr(this,Re),Zr(this,dn),Zr(this,En),Zr(this,Zt,new Map),Zr(this,R),this.object=(0,FS.createObjectMethods)(r=>{var i,a;if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&(0,Ut.is)(sr.Argument,r))return r;const n=(0,xc.getIdFromCallArg)(r),s=B(this,R).inputs.find(o=>n===(0,xc.getIdFromCallArg)(o));return(i=s==null?void 0:s.Object)!=null&&i.SharedObject&&typeof r=="object"&&((a=r.Object)!=null&&a.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||r.Object.SharedObject.mutable),s?{$kind:"Input",Input:B(this,R).inputs.indexOf(s),type:"object"}:B(this,R).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,VS.normalizeSuiAddress)(r)}}:r)});const e=en();Wt(this,R,new Qr.TransactionDataBuilder),Wt(this,En,[...e.buildPlugins.values()]),Wt(this,dn,[...e.serializationPlugins.values()])}static fromKind(e){const r=new Zi;return Wt(r,R,Qr.TransactionDataBuilder.fromKindBytes(typeof e=="string"?(0,vs.fromBase64)(e):e)),r}static from(e){const r=new Zi;return kh(e)?Wt(r,R,new Qr.TransactionDataBuilder(e.getData())):typeof e!="string"||!e.startsWith("{")?Wt(r,R,Qr.TransactionDataBuilder.fromBytes(typeof e=="string"?(0,vs.fromBase64)(e):e)):Wt(r,R,Qr.TransactionDataBuilder.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){en().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){en().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){en().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){en().buildPlugins.delete(e)}addSerializationPlugin(e){B(this,dn).push(e)}addBuildPlugin(e){B(this,En).push(e)}addIntentResolver(e,r){if(B(this,Zt).has(e)&&B(this,Zt).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);B(this,Zt).set(e,r)}setSender(e){B(this,R).sender=e}setSenderIfNotSet(e){B(this,R).sender||(B(this,R).sender=e)}setExpiration(e){B(this,R).expiration=e?(0,Ut.parse)(sr.TransactionExpiration,e):null}setGasPrice(e){B(this,R).gasConfig.price=String(e)}setGasBudget(e){B(this,R).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){B(this,R).gasData.budget==null&&(B(this,R).gasConfig.budget=String(e))}setGasOwner(e){B(this,R).gasConfig.owner=e}setGasPayment(e){B(this,R).gasConfig.payment=e.map(r=>(0,Ut.parse)(sr.ObjectRef,r))}get blockData(){return(0,Ic.serializeV1TransactionData)(B(this,R).snapshot())}getData(){return B(this,R).snapshot()}get[Sh](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:(0,GS.createPure)(e=>(0,vs.isSerializedBcs)(e)?B(this,R).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):B(this,R).addInput("pure",(0,Ut.is)(sr.NormalizedCallArg,e)?(0,Ut.parse)(sr.NormalizedCallArg,e):e instanceof Uint8Array?as.Inputs.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(as.Inputs.ObjectRef(...e))}receivingRef(...e){return this.object(as.Inputs.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(as.Inputs.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const r=B(this,R).commands.push(e);return WS(r-1)}splitCoins(e,r){return this.add(Jt.Commands.SplitCoins(typeof e=="string"?this.object(e):gt(this,Re,Eo).call(this,e),r.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):gt(this,Re,ms).call(this,n))))}mergeCoins(e,r){return this.add(Jt.Commands.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(Jt.Commands.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:s}){return this.add(Jt.Commands.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(s)}))}moveCall({arguments:e,...r}){return this.add(Jt.Commands.MoveCall({...r,arguments:e==null?void 0:e.map(n=>gt(this,Re,ms).call(this,n))}))}transferObjects(e,r){return this.add(Jt.Commands.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):gt(this,Re,ms).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(Jt.Commands.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify((0,Ic.serializeV1TransactionData)(B(this,R).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify((0,Ut.parse)(LS.SerializedTransactionDataV2,B(this,R).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){const{signer:r,...n}=e,s=await this.build(n);return r.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await gt(this,Re,Yi).call(this,e),B(this,R).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await gt(this,Re,Yi).call(this,e),B(this,R).getDigest()}async prepareForSerialization(e){var s;const r=new Set;for(const i of B(this,R).commands)i.$Intent&&r.add(i.$Intent.name);const n=[...B(this,dn)];for(const i of r)if(!((s=e.supportedIntents)!=null&&s.includes(i))){if(!B(this,Zt).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(B(this,Zt).get(i))}await gt(this,Re,jo).call(this,n,e)}};dn=new WeakMap;En=new WeakMap;Zt=new WeakMap;R=new WeakMap;Re=new WeakSet;ms=function(t){return(0,vs.isSerializedBcs)(t)?this.pure(t):gt(this,Re,Eo).call(this,t)};Eo=function(t){return typeof t=="function"?(0,Ut.parse)(sr.Argument,t(this)):(0,Ut.parse)(sr.Argument,t)};Yi=async function(t){if(!t.onlyTransactionKind&&!B(this,R).sender)throw new Error("Missing transaction sender");await gt(this,Re,jo).call(this,[...B(this,En),qS.resolveTransactionData],t)};jo=async function(t,e){const r=n=>{if(n>=t.length)return()=>{};const s=t[n];return async()=>{const i=r(n+1);let a=!1,o=!1;if(await s(B(this,R),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);a=!0,await i(),o=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!o)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()};let KS=JS;var To=Object.defineProperty,HS=Object.getOwnPropertyDescriptor,XS=Object.getOwnPropertyNames,YS=Object.prototype.hasOwnProperty,$h=t=>{throw TypeError(t)},ZS=(t,e)=>{for(var r in e)To(t,r,{get:e[r],enumerable:!0})},QS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of XS(e))!YS.call(t,s)&&s!==r&&To(t,s,{get:()=>e[s],enumerable:!(n=HS(e,s))||n.enumerable});return t},ek=t=>QS(To({},"__esModule",{value:!0}),t),Eh=(t,e,r)=>e.has(t)||$h("Cannot "+r),de=(t,e,r)=>(Eh(t,e,"read from private field"),r?r.call(t):e.get(t)),jh=(t,e,r)=>e.has(t)?$h("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),tk=(t,e,r,n)=>(Eh(t,e,"write to private field"),e.set(t,r),r),Th={};ZS(Th,{AsyncCache:()=>Ih,InMemoryCache:()=>xh,ObjectCache:()=>rk});var Ph=ek(Th),Ei=$e,Qt,ye;class Ih{async getObject(e){const[r,n]=await Promise.all([this.get("OwnedObject",e),this.get("SharedOrImmutableObject",e)]);return r??n??null}async getObjects(e){return Promise.all([...e.map(r=>this.getObject(r))])}async addObject(e){return e.owner?await this.set("OwnedObject",e.objectId,e):await this.set("SharedOrImmutableObject",e.objectId,e),e}async addObjects(e){await Promise.all(e.map(async r=>this.addObject(r)))}async deleteObject(e){await Promise.all([this.delete("OwnedObject",e),this.delete("SharedOrImmutableObject",e)])}async deleteObjects(e){await Promise.all(e.map(r=>this.deleteObject(r)))}async getMoveFunctionDefinition(e){const r=`${(0,Ei.normalizeSuiAddress)(e.package)}::${e.module}::${e.function}`;return this.get("MoveFunction",r)}async addMoveFunctionDefinition(e){const r=(0,Ei.normalizeSuiAddress)(e.package),n=`${r}::${e.module}::${e.function}`,s={...e,package:r};return await this.set("MoveFunction",n,s),s}async deleteMoveFunctionDefinition(e){const r=`${(0,Ei.normalizeSuiAddress)(e.package)}::${e.module}::${e.function}`;await this.delete("MoveFunction",r)}async getCustom(e){return this.get("Custom",e)}async setCustom(e,r){return this.set("Custom",e,r)}async deleteCustom(e){return this.delete("Custom",e)}}class xh extends Ih{constructor(){super(...arguments),jh(this,Qt,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(e,r){return de(this,Qt)[e].get(r)??null}async set(e,r,n){de(this,Qt)[e].set(r,n)}async delete(e,r){de(this,Qt)[e].delete(r)}async clear(e){if(e)de(this,Qt)[e].clear();else for(const r of Object.values(de(this,Qt)))r.clear()}}Qt=new WeakMap;class rk{constructor({cache:e=new xh}){jh(this,ye),tk(this,ye,e)}asPlugin(){return async(e,r,n)=>{const s=e.inputs.filter(o=>o.UnresolvedObject).map(o=>o.UnresolvedObject.objectId),i=(await de(this,ye).getObjects(s)).filter(o=>o!==null),a=new Map(i.map(o=>[o.objectId,o]));for(const o of e.inputs){if(!o.UnresolvedObject)continue;const c=a.get(o.UnresolvedObject.objectId);c&&(c.initialSharedVersion&&!o.UnresolvedObject.initialSharedVersion?o.UnresolvedObject.initialSharedVersion=c.initialSharedVersion:(c.version&&!o.UnresolvedObject.version&&(o.UnresolvedObject.version=c.version),c.digest&&!o.UnresolvedObject.digest&&(o.UnresolvedObject.digest=c.digest)))}await Promise.all(e.commands.map(async o=>{if(o.MoveCall){const c=await this.getMoveFunctionDefinition({package:o.MoveCall.package,module:o.MoveCall.module,function:o.MoveCall.function});c&&(o.MoveCall._argumentTypes=c.parameters)}})),await n(),await Promise.all(e.commands.map(async o=>{var c;(c=o.MoveCall)!=null&&c._argumentTypes&&await de(this,ye).addMoveFunctionDefinition({package:o.MoveCall.package,module:o.MoveCall.module,function:o.MoveCall.function,parameters:o.MoveCall._argumentTypes})}))}}async clear(){await de(this,ye).clear()}async getMoveFunctionDefinition(e){return de(this,ye).getMoveFunctionDefinition(e)}async getObjects(e){return de(this,ye).getObjects(e)}async deleteObjects(e){return de(this,ye).deleteObjects(e)}async clearOwnedObjects(){await de(this,ye).clear("OwnedObject")}async clearCustom(){await de(this,ye).clear("Custom")}async getCustom(e){return de(this,ye).getCustom(e)}async setCustom(e,r){return de(this,ye).setCustom(e,r)}async deleteCustom(e){return de(this,ye).deleteCustom(e)}async applyEffects(e){if(!e.V2)throw new Error(`Unsupported transaction effects version ${e.$kind}`);const{lamportVersion:r,changedObjects:n}=e.V2,s=[],i=[];n.map(async([a,o])=>{var c;if(o.outputState.NotExist)await de(this,ye).deleteObject(a);else if(o.outputState.ObjectWrite){const[l,u]=o.outputState.ObjectWrite;i.push({objectId:a,digest:l,version:r,owner:u.AddressOwner??u.ObjectOwner??null,initialSharedVersion:((c=u.Shared)==null?void 0:c.initialSharedVersion)??null})}}),await Promise.all([de(this,ye).addObjects(i),de(this,ye).deleteObjects(s)])}}ye=new WeakMap;var Po=Object.defineProperty,nk=Object.getOwnPropertyDescriptor,sk=Object.getOwnPropertyNames,ik=Object.prototype.hasOwnProperty,Ch=t=>{throw TypeError(t)},ak=(t,e)=>{for(var r in e)Po(t,r,{get:e[r],enumerable:!0})},ok=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of sk(e))!ik.call(t,s)&&s!==r&&Po(t,s,{get:()=>e[s],enumerable:!(n=nk(e,s))||n.enumerable});return t},ck=t=>ok(Po({},"__esModule",{value:!0}),t),Ah=(t,e,r)=>e.has(t)||Ch("Cannot "+r),tn=(t,e,r)=>(Ah(t,e,"read from private field"),r?r.call(t):e.get(t)),Ac=(t,e,r)=>e.has(t)?Ch("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ji=(t,e,r,n)=>(Ah(t,e,"write to private field"),e.set(t,r),r),Mh={};ak(Mh,{CachingTransactionExecutor:()=>dk});var Nh=ck(Mh),uk=ct,lk=Ph,pk=ui,Sr,kr;class dk{constructor({client:e,...r}){Ac(this,Sr),Ac(this,kr,null),ji(this,Sr,e),this.cache=new lk.ObjectCache(r)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:e,...r}){return e.addBuildPlugin(this.cache.asPlugin()),e.build({client:tn(this,Sr),...r})}async executeTransaction({transaction:e,options:r,...n}){const s=(0,pk.isTransaction)(e)?await this.buildTransaction({transaction:e}):e,i=await tn(this,Sr).executeTransactionBlock({...n,transactionBlock:s,options:{...r,showRawEffects:!0}});if(i.rawEffects){const a=uk.bcs.TransactionEffects.parse(Uint8Array.from(i.rawEffects));await this.applyEffects(a)}return i}async signAndExecuteTransaction({options:e,transaction:r,...n}){r.setSenderIfNotSet(n.signer.toSuiAddress());const s=await this.buildTransaction({transaction:r}),{signature:i}=await n.signer.signTransaction(s);return await this.executeTransaction({transaction:s,signature:i,options:e})}async applyEffects(e){var r;ji(this,kr,((r=e.V2)==null?void 0:r.transactionDigest)??null),await this.cache.applyEffects(e)}async waitForLastTransaction(){tn(this,kr)&&(await tn(this,Sr).waitForTransaction({digest:tn(this,kr)}),ji(this,kr,null))}}Sr=new WeakMap;kr=new WeakMap;var Io=Object.defineProperty,fk=Object.getOwnPropertyDescriptor,hk=Object.getOwnPropertyNames,yk=Object.prototype.hasOwnProperty,Bh=t=>{throw TypeError(t)},gk=(t,e)=>{for(var r in e)Io(t,r,{get:e[r],enumerable:!0})},bk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of hk(e))!yk.call(t,s)&&s!==r&&Io(t,s,{get:()=>e[s],enumerable:!(n=fk(e,s))||n.enumerable});return t},vk=t=>bk(Io({},"__esModule",{value:!0}),t),mk=(t,e,r)=>e.has(t)||Bh("Cannot "+r),qe=(t,e,r)=>(mk(t,e,"read from private field"),r?r.call(t):e.get(t)),Dh=(t,e,r)=>e.has(t)?Bh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Uh={};gk(Uh,{ParallelQueue:()=>wk,SerialQueue:()=>_k});var Rh=vk(Uh),Nt,er;class _k{constructor(){Dh(this,Nt,[])}async runTask(e){return new Promise((r,n)=>{qe(this,Nt).push(()=>{e().finally(()=>{qe(this,Nt).shift(),qe(this,Nt).length>0&&qe(this,Nt)[0]()}).then(r,n)}),qe(this,Nt).length===1&&qe(this,Nt)[0]()})}}Nt=new WeakMap;class wk{constructor(e){Dh(this,er,[]),this.activeTasks=0,this.maxTasks=e}runTask(e){return new Promise((r,n)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,e().finally(()=>{qe(this,er).length>0?qe(this,er).shift()():this.activeTasks--}).then(r,n)):qe(this,er).push(()=>{e().finally(()=>{qe(this,er).length>0?qe(this,er).shift()():this.activeTasks--}).then(r,n)})})}}er=new WeakMap;var xo=Object.defineProperty,Ok=Object.getOwnPropertyDescriptor,Sk=Object.getOwnPropertyNames,kk=Object.prototype.hasOwnProperty,zh=t=>{throw TypeError(t)},$k=(t,e)=>{for(var r in e)xo(t,r,{get:e[r],enumerable:!0})},Ek=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Sk(e))!kk.call(t,s)&&s!==r&&xo(t,s,{get:()=>e[s],enumerable:!(n=Ok(e,s))||n.enumerable});return t},jk=t=>Ek(xo({},"__esModule",{value:!0}),t),Vh=(t,e,r)=>e.has(t)||zh("Cannot "+r),ve=(t,e,r)=>(Vh(t,e,"read from private field"),r?r.call(t):e.get(t)),br=(t,e,r)=>e.has(t)?zh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ti=(t,e,r,n)=>(Vh(t,e,"write to private field"),e.set(t,r),r),Lh={};$k(Lh,{SerialTransactionExecutor:()=>Ck,getGasCoinFromEffects:()=>Fh});var qh=jk(Lh),Tk=ge,Pk=ct,Mc=ui,Ik=Nh,xk=Rh,_s,fn,Be,ws,Qi,Os;class Ck{constructor({signer:e,defaultGasBudget:r=50000000n,...n}){br(this,_s,new xk.SerialQueue),br(this,fn),br(this,Be),br(this,ws),br(this,Qi,async s=>{if(!s.V2)return;const i=Fh(s).ref;i?ve(this,Be).cache.setCustom("gasCoin",i):ve(this,Be).cache.deleteCustom("gasCoin")}),br(this,Os,async s=>{const i=await ve(this,Be).cache.getCustom("gasCoin"),a=Mc.Transaction.from(s);return i&&a.setGasPayment([i]),a.setGasBudgetIfNotSet(ve(this,ws)),a.setSenderIfNotSet(ve(this,fn).toSuiAddress()),ve(this,Be).buildTransaction({transaction:a})}),Ti(this,fn,e),Ti(this,ws,r),Ti(this,Be,new Ik.CachingTransactionExecutor({client:n.client,cache:n.cache}))}async applyEffects(e){return Promise.all([ve(this,Qi).call(this,e),ve(this,Be).cache.applyEffects(e)])}async buildTransaction(e){return ve(this,_s).runTask(()=>ve(this,Os).call(this,e))}resetCache(){return ve(this,Be).reset()}waitForLastTransaction(){return ve(this,Be).waitForLastTransaction()}executeTransaction(e,r){return ve(this,_s).runTask(async()=>{const n=(0,Mc.isTransaction)(e)?await ve(this,Os).call(this,e):e,{signature:s}=await ve(this,fn).signTransaction(n),i=await ve(this,Be).executeTransaction({signature:s,transaction:n,options:r}).catch(async c=>{throw await this.resetCache(),c}),a=Uint8Array.from(i.rawEffects),o=Pk.bcs.TransactionEffects.parse(a);return await this.applyEffects(o),{digest:i.digest,effects:(0,Tk.toBase64)(a),data:i}})}}_s=new WeakMap;fn=new WeakMap;Be=new WeakMap;ws=new WeakMap;Qi=new WeakMap;Os=new WeakMap;function Fh(t){if(!t.V2)throw new Error("Unexpected effects version");const e=t.V2.changedObjects[t.V2.gasObjectIndex];if(!e)throw new Error("Gas object not found in effects");const[r,{outputState:n}]=e;if(!n.ObjectWrite)throw new Error("Unexpected gas object state");const[s,i]=n.ObjectWrite;return{ref:{objectId:r,digest:s,version:t.V2.lamportVersion},owner:i.AddressOwner||i.ObjectOwner}}var Co=Object.defineProperty,Ak=Object.getOwnPropertyDescriptor,Mk=Object.getOwnPropertyNames,Nk=Object.prototype.hasOwnProperty,Gh=t=>{throw TypeError(t)},Bk=(t,e)=>{for(var r in e)Co(t,r,{get:e[r],enumerable:!0})},Dk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Mk(e))!Nk.call(t,s)&&s!==r&&Co(t,s,{get:()=>e[s],enumerable:!(n=Ak(e,s))||n.enumerable});return t},Uk=t=>Dk(Co({},"__esModule",{value:!0}),t),Ao=(t,e,r)=>e.has(t)||Gh("Cannot "+r),E=(t,e,r)=>(Ao(t,e,"read from private field"),r?r.call(t):e.get(t)),pe=(t,e,r)=>e.has(t)?Gh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ne=(t,e,r,n)=>(Ao(t,e,"write to private field"),e.set(t,r),r),Me=(t,e,r)=>(Ao(t,e,"access private method"),r),Nc=(t,e,r,n)=>({set _(s){ne(t,e,s)},get _(){return E(t,e,n)}}),Wh={};Bk(Wh,{ParallelTransactionExecutor:()=>Fk});var Rk=Uk(Wh),zk=ge,Jh=ct,Vk=ui,Lk=Oo,qk=Nh,Bc=Rh,Kh=qh,Rt,at,Gs,Dn,jn,Un,Ws,xr,_e,zt,ur,ir,Mo,Ss,Rn,Tr,zr,vt,Se,Hh,Xh,zn,No,Yh,ea,Zh;const rn={coinBatchSize:20,initialCoinBalance:200000000n,minimumCoinBalance:50000000n,maxPoolSize:50,epochBoundaryWindow:1e3};class Fk{constructor(e){pe(this,Se),pe(this,Rt),pe(this,at),pe(this,Gs),pe(this,Dn),pe(this,jn),pe(this,Un),pe(this,Ws),pe(this,xr),pe(this,_e),pe(this,zt,[]),pe(this,ur),pe(this,ir,new Map),pe(this,Mo,new Bc.SerialQueue),pe(this,Ss),pe(this,Rn,null),pe(this,Tr,null),pe(this,zr,0),pe(this,vt,null),ne(this,Rt,e.signer),ne(this,at,e.client),ne(this,Gs,e.coinBatchSize??rn.coinBatchSize),ne(this,Dn,e.initialCoinBalance??rn.initialCoinBalance),ne(this,jn,e.minimumCoinBalance??rn.minimumCoinBalance),ne(this,Ws,e.defaultGasBudget??E(this,jn)),ne(this,Un,e.epochBoundaryWindow??rn.epochBoundaryWindow),ne(this,xr,e.maxPoolSize??rn.maxPoolSize),ne(this,ur,new qk.CachingTransactionExecutor({client:e.client,cache:e.cache})),ne(this,Ss,new Bc.ParallelQueue(E(this,xr))),ne(this,_e,e.sourceCoins?new Map(e.sourceCoins.map(r=>[r,null])):null)}resetCache(){return ne(this,vt,null),Me(this,Se,zn).call(this,()=>E(this,ur).reset())}async waitForLastTransaction(){await Me(this,Se,zn).call(this,()=>Me(this,Se,No).call(this))}async executeTransaction(e,r){const{promise:n,resolve:s,reject:i}=Gk(),a=await Me(this,Se,Hh).call(this,e),o=()=>{E(this,Ss).runTask(()=>Me(this,Se,Xh).call(this,e,a,r).then(s,i))},c=new Set;return a.forEach(l=>{E(this,ir).get(l)?(c.add(l),E(this,ir).get(l).push(()=>{c.delete(l),c.size===0&&o()})):E(this,ir).set(l,[])}),c.size===0&&o(),n}}Rt=new WeakMap;at=new WeakMap;Gs=new WeakMap;Dn=new WeakMap;jn=new WeakMap;Un=new WeakMap;Ws=new WeakMap;xr=new WeakMap;_e=new WeakMap;zt=new WeakMap;ur=new WeakMap;ir=new WeakMap;Mo=new WeakMap;Ss=new WeakMap;Rn=new WeakMap;Tr=new WeakMap;zr=new WeakMap;vt=new WeakMap;Se=new WeakSet;Hh=async function(t){const e=new Set;let r=!1;return t.addSerializationPlugin(async(n,s,i)=>{await i(),!r&&(r=!0,n.inputs.forEach(a=>{var o,c,l,u,p;(c=(o=a.Object)==null?void 0:o.ImmOrOwnedObject)!=null&&c.objectId?e.add(a.Object.ImmOrOwnedObject.objectId):(u=(l=a.Object)==null?void 0:l.Receiving)!=null&&u.objectId?e.add(a.Object.Receiving.objectId):(p=a.UnresolvedObject)!=null&&p.objectId&&!a.UnresolvedObject.initialSharedVersion&&e.add(a.UnresolvedObject.objectId)}))}),await t.prepareForSerialization({client:E(this,at)}),e};Xh=async function(t,e,r){var s;let n;try{t.setSenderIfNotSet(E(this,Rt).toSuiAddress()),await E(this,Mo).runTask(async()=>{t.getData().gasData.price||t.setGasPrice(await Me(this,Se,ea).call(this)),t.setGasBudgetIfNotSet(E(this,Ws)),await Me(this,Se,zn).call(this),n=await Me(this,Se,Yh).call(this),Nc(this,zr)._++,t.setGasPayment([{objectId:n.id,version:n.version,digest:n.digest}]),await E(this,ur).buildTransaction({transaction:t,onlyTransactionKind:!0})});const i=await t.build({client:E(this,at)}),{signature:a}=await E(this,Rt).signTransaction(i),o=await E(this,ur).executeTransaction({transaction:i,signature:a,options:{...r,showEffects:!0}}),c=Uint8Array.from(o.rawEffects),l=Jh.bcs.TransactionEffects.parse(c),u=(0,Kh.getGasCoinFromEffects)(l),p=(s=l.V2)==null?void 0:s.gasUsed;if(n&&p&&u.owner===E(this,Rt).toSuiAddress()){const f=BigInt(p.computationCost)+BigInt(p.storageCost)+BigInt(p.storageCost)-BigInt(p.storageRebate);let h=!1;new Lk.TransactionDataBuilder(t.getData()).mapArguments(y=>(y.$kind==="GasCoin"&&(h=!0),y)),!h&&n.balance>=E(this,jn)?E(this,zt).push({id:u.ref.objectId,version:u.ref.version,digest:u.ref.digest,balance:n.balance-f}):(E(this,_e)||ne(this,_e,new Map),E(this,_e).set(u.ref.objectId,u.ref))}return ne(this,Rn,o.digest),{digest:o.digest,effects:(0,zk.toBase64)(c),data:o}}catch(i){throw n&&(E(this,_e)||ne(this,_e,new Map),E(this,_e).set(n.id,null)),await Me(this,Se,zn).call(this,async()=>{await Promise.all([E(this,ur).cache.deleteObjects([...e]),Me(this,Se,No).call(this)])}),i}finally{e.forEach(i=>{const a=E(this,ir).get(i);a&&a.length>0?a.shift()():a&&E(this,ir).delete(i)}),Nc(this,zr)._--}};zn=async function(t){E(this,Tr)&&await E(this,Tr),ne(this,Tr,(t==null?void 0:t().then(()=>{ne(this,Tr,null)},()=>{}))??null)};No=async function(){const t=E(this,Rn);t&&(ne(this,Rn,null),await E(this,at).waitForTransaction({digest:t}))};Yh=async function(){if(E(this,zt).length===0&&E(this,zr)<=E(this,xr)&&await Me(this,Se,Zh).call(this),E(this,zt).length===0)throw new Error("No coins available");return E(this,zt).shift()};ea=async function(){if((E(this,vt)?E(this,vt).expiration-E(this,Un)-Date.now():0)>0)return E(this,vt).price;if(E(this,vt)){const r=Math.max(E(this,vt).expiration+E(this,Un)-Date.now(),1e3);await new Promise(n=>setTimeout(n,r))}const e=await E(this,at).getLatestSuiSystemState();return ne(this,vt,{price:BigInt(e.referenceGasPrice),expiration:Number.parseInt(e.epochStartTimestampMs,10)+Number.parseInt(e.epochDurationMs,10)}),Me(this,Se,ea).call(this)};Zh=async function(){var l;const t=Math.min(E(this,Gs),E(this,xr)-(E(this,zt).length+E(this,zr))+1);if(t===0)return;const e=new Vk.Transaction,r=E(this,Rt).toSuiAddress();if(e.setSender(r),E(this,_e)){const u=[],p=[];for(const[f,h]of E(this,_e))h?u.push(h):p.push(f);if(p.length>0){const f=await E(this,at).multiGetObjects({ids:p});u.push(...f.filter(h=>h.data!==null).map(({data:h})=>({objectId:h.objectId,version:h.version,digest:h.digest})))}e.setGasPayment(u),ne(this,_e,new Map)}const n=new Array(t).fill(E(this,Dn)),s=e.splitCoins(e.gas,n),i=[];for(let u=0;u<n.length;u++)i.push(s[u]);e.transferObjects(i,r),await this.waitForLastTransaction();const a=await E(this,at).signAndExecuteTransaction({transaction:e,signer:E(this,Rt),options:{showRawEffects:!0}}),o=Jh.bcs.TransactionEffects.parse(Uint8Array.from(a.rawEffects));(l=o.V2)==null||l.changedObjects.forEach(([u,{outputState:p}],f)=>{var h;f===((h=o.V2)==null?void 0:h.gasObjectIndex)||!p.ObjectWrite||E(this,zt).push({id:u,version:o.V2.lamportVersion,digest:p.ObjectWrite[0],balance:BigInt(E(this,Dn))})}),E(this,_e)||ne(this,_e,new Map);const c=(0,Kh.getGasCoinFromEffects)(o).ref;E(this,_e).set(c.objectId,c),await E(this,at).waitForTransaction({digest:a.digest})};function Gk(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}var Bo=Object.defineProperty,Wk=Object.getOwnPropertyDescriptor,Jk=Object.getOwnPropertyNames,Kk=Object.prototype.hasOwnProperty,Hk=(t,e)=>{for(var r in e)Bo(t,r,{get:e[r],enumerable:!0})},Xk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Jk(e))!Kk.call(t,s)&&s!==r&&Bo(t,s,{get:()=>e[s],enumerable:!(n=Wk(e,s))||n.enumerable});return t},Yk=t=>Xk(Bo({},"__esModule",{value:!0}),t),Qh={};Hk(Qh,{coinWithBalance:()=>t$});var Zk=Yk(Qh),ks=Gt,Qk=ct,ey=$e,ta=ho,Dc=si,e$=ph;const Js="CoinWithBalance",Uc=(0,ey.normalizeStructTag)("0x2::sui::SUI");function t$({type:t=Uc,balance:e,useGasCoin:r=!0}){return n=>{n.addIntentResolver(Js,n$);const s=t==="gas"?t:(0,ey.normalizeStructTag)(t);return n.add(ta.Commands.Intent({name:Js,inputs:{},data:{type:s===Uc&&r?"gas":s,balance:BigInt(e)}}))}}const r$=(0,ks.object)({type:(0,ks.string)(),balance:(0,ks.bigint)()});async function n$(t,e,r){var l,u;const n=new Set,s=new Map;if(!t.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const p of t.commands)if(p.$kind==="$Intent"&&p.$Intent.name===Js){const{type:f,balance:h}=(0,ks.parse)(r$,p.$Intent.data);f!=="gas"&&n.add(f),s.set(f,(s.get(f)??0n)+h)}const i=new Set;for(const p of t.inputs)(l=p.Object)!=null&&l.ImmOrOwnedObject&&i.add(p.Object.ImmOrOwnedObject.objectId),(u=p.UnresolvedObject)!=null&&u.objectId&&i.add(p.UnresolvedObject.objectId);const a=new Map,o=(0,e$.getClient)(e);await Promise.all([...n].map(async p=>{a.set(p,await s$({coinType:p,balance:s.get(p),client:o,owner:t.sender,usedIds:i}))}));const c=new Map;c.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[p,f]of t.commands.entries()){if(f.$kind!=="$Intent"||f.$Intent.name!==Js)continue;const{type:h,balance:y}=f.$Intent.data,w=[];if(!c.has(h)){const[j,...U]=a.get(h).map(x=>t.addInput("object",Dc.Inputs.ObjectRef({objectId:x.coinObjectId,digest:x.digest,version:x.version})));U.length>0&&w.push(ta.Commands.MergeCoins(j,U)),c.set(h,j)}w.push(ta.Commands.SplitCoins(c.get(h),[t.addInput("pure",Dc.Inputs.Pure(Qk.bcs.u64().serialize(y)))])),t.replaceCommand(p,w),t.mapArguments(j=>j.$kind==="Result"&&j.Result===p?{$kind:"NestedResult",NestedResult:[p+w.length-1,0]}:j)}return r()}async function s$({coinType:t,balance:e,client:r,owner:n,usedIds:s}){let i=e;const a=[];return o();async function o(c=null){const{data:l,hasNextPage:u,nextCursor:p}=await r.getCoins({owner:n,coinType:t,cursor:c}),f=l.sort((h,y)=>Number(BigInt(y.balance)-BigInt(h.balance)));for(const h of f){if(s.has(h.coinObjectId))continue;const y=BigInt(h.balance);if(a.push(h),i-=y,i<=0)return a}if(u)return o(p);throw new Error(`Not enough coins of type ${t} to satisfy requested balance`)}}var Do=Object.defineProperty,i$=Object.getOwnPropertyDescriptor,a$=Object.getOwnPropertyNames,o$=Object.prototype.hasOwnProperty,c$=(t,e)=>{for(var r in e)Do(t,r,{get:e[r],enumerable:!0})},u$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of a$(e))!o$.call(t,s)&&s!==r&&Do(t,s,{get:()=>e[s],enumerable:!(n=i$(e,s))||n.enumerable});return t},l$=t=>u$(Do({},"__esModule",{value:!0}),t),ty={};c$(ty,{Arguments:()=>h$});var p$=l$(ty),d$=fh,f$=yh;const h$={pure:(0,f$.createPure)(t=>e=>e.pure(t)),object:(0,d$.createObjectMethods)(t=>e=>e.object(t)),sharedObjectRef:(...t)=>e=>e.sharedObjectRef(...t),objectRef:(...t)=>e=>e.objectRef(...t),receivingRef:(...t)=>e=>e.receivingRef(...t)};var Uo=Object.defineProperty,y$=Object.getOwnPropertyDescriptor,g$=Object.getOwnPropertyNames,b$=Object.prototype.hasOwnProperty,v$=(t,e)=>{for(var r in e)Uo(t,r,{get:e[r],enumerable:!0})},m$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of g$(e))!b$.call(t,s)&&s!==r&&Uo(t,s,{get:()=>e[s],enumerable:!(n=y$(e,s))||n.enumerable});return t},_$=t=>m$(Uo({},"__esModule",{value:!0}),t),ry={};v$(ry,{findTransactionBlockNames:()=>O$,listToRequests:()=>k$,replaceNames:()=>S$});var w$=_$(ry),ny=Wl;const Tn="/",O$=t=>{var n;const e=new Set,r=new Set;for(const s of t.commands){if((n=s.MakeMoveVec)!=null&&n.type){Rc([s.MakeMoveVec.type]).forEach(o=>{r.add(o)});continue}if(!("MoveCall"in s))continue;const i=s.MoveCall;if(!i)continue;const a=i.package.split("::")[0];if(a.includes(Tn)){if(!(0,ny.isValidNamedPackage)(a))throw new Error(`Invalid package name: ${a}`);e.add(a)}Rc(i.typeArguments??[]).forEach(o=>{r.add(o)})}return{packages:[...e],types:[...r]}};function Rc(t){const e=new Set;for(const r of t)if(r.includes(Tn)){if(!(0,ny.isValidNamedType)(r))throw new Error(`Invalid type with names: ${r}`);e.add(r)}return[...e]}const S$=(t,e)=>{var r;for(const n of t.commands){if((r=n.MakeMoveVec)!=null&&r.type){if(!n.MakeMoveVec.type.includes(Tn))continue;if(!e.types[n.MakeMoveVec.type])throw new Error(`No resolution found for type: ${n.MakeMoveVec.type}`);n.MakeMoveVec.type=e.types[n.MakeMoveVec.type]}const s=n.MoveCall;if(!s)continue;const i=s.package.split("::"),a=i[0];if(a.includes(Tn)&&!e.packages[a])throw new Error(`No address found for package: ${a}`);i[0]=e.packages[a],s.package=i.join("::");const o=s.typeArguments;if(o){for(let c=0;c<o.length;c++)if(o[c].includes(Tn)){if(!e.types[o[c]])throw new Error(`No resolution found for type: ${o[c]}`);o[c]=e.types[o[c]]}s.typeArguments=o}}},k$=(t,e)=>{const r=[],n=zc(t.packages),s=zc(t.types);for(const[i,a]of n.entries())r.push({id:i,type:"package",name:a});for(const[i,a]of s.entries())r.push({id:i+n.length,type:"moveType",name:a});return $$(r,e)},zc=t=>[...new Set(t)],$$=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r};var Ro=Object.defineProperty,E$=Object.getOwnPropertyDescriptor,j$=Object.getOwnPropertyNames,T$=Object.prototype.hasOwnProperty,P$=(t,e)=>{for(var r in e)Ro(t,r,{get:e[r],enumerable:!0})},I$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of j$(e))!T$.call(t,s)&&s!==r&&Ro(t,s,{get:()=>e[s],enumerable:!(n=E$(e,s))||n.enumerable});return t},x$=t=>I$(Ro({},"__esModule",{value:!0}),t),sy={};P$(sy,{namedPackagesPlugin:()=>A$});var C$=x$(sy),Pi=w$;const A$=({suiGraphQLClient:t,pageSize:e=10,overrides:r={packages:{},types:{}}})=>{const n={packages:{...r.packages},types:{...r.types}};return async(i,a,o)=>{const c=(0,Pi.findTransactionBlockNames)(i),l=(0,Pi.listToRequests)({packages:c.packages.filter(u=>!n.packages[u]),types:c.types.filter(u=>!n.types[u])},e);(await Promise.all(l.map(u=>s(t,u)))).forEach(u=>{Object.assign(n.types,u.types),Object.assign(n.packages,u.packages)}),(0,Pi.replaceNames)(i,n),await o()};async function s(i,a){const o={packages:{},types:{}};if(a.length===0)return o;const c=`{
        ${a.map(u=>{const p=u.type==="package"?"packageByName":"typeByName",f=u.type==="package"?"address":"repr";return`${Vc(u.id)}: ${p}(name:"${u.name}") {
                    ${f}
                }`})}
    }`,l=await i.query({query:c,variables:void 0});if(l.errors)throw new Error(JSON.stringify({query:c,errors:l.errors}));for(const u of a){const p=Vc(u.id);if(!l.data||!l.data[p])throw new Error(`No result found for: ${u.name}`);const f=l.data[p];u.type==="package"&&(o.packages[u.name]=f.address),u.type==="moveType"&&(o.types[u.name]=f.repr)}return o}},Vc=t=>`key_${t}`;var zo=Object.defineProperty,M$=Object.getOwnPropertyDescriptor,N$=Object.getOwnPropertyNames,B$=Object.prototype.hasOwnProperty,D$=(t,e)=>{for(var r in e)zo(t,r,{get:e[r],enumerable:!0})},U$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of N$(e))!B$.call(t,s)&&s!==r&&zo(t,s,{get:()=>e[s],enumerable:!(n=M$(e,s))||n.enumerable});return t},R$=t=>U$(zo({},"__esModule",{value:!0}),t),iy={};D$(iy,{Arguments:()=>G$.Arguments,AsyncCache:()=>Gc.AsyncCache,Commands:()=>qc.Commands,Inputs:()=>z$.Inputs,ObjectCache:()=>Gc.ObjectCache,ParallelTransactionExecutor:()=>q$.ParallelTransactionExecutor,SerialTransactionExecutor:()=>L$.SerialTransactionExecutor,Transaction:()=>Fc.Transaction,TransactionDataBuilder:()=>V$.TransactionDataBuilder,UpgradePolicy:()=>qc.UpgradePolicy,coinWithBalance:()=>F$.coinWithBalance,getPureBcsSchema:()=>Lc.getPureBcsSchema,isTransaction:()=>Fc.isTransaction,namedPackagesPlugin:()=>W$.namedPackagesPlugin,normalizedTypeToMoveTypeSignature:()=>Lc.normalizedTypeToMoveTypeSignature});var ay=R$(iy),Lc=ep,z$=si,qc=ho,Fc=ui,V$=Oo,Gc=Ph,L$=qh,q$=Rk,F$=Zk,G$=p$,W$=C$,oy={exports:{}},Vo=Object.defineProperty,J$=Object.getOwnPropertyDescriptor,K$=Object.getOwnPropertyNames,H$=Object.prototype.hasOwnProperty,X$=(t,e)=>{for(var r in e)Vo(t,r,{get:e[r],enumerable:!0})},Y$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of K$(e))!H$.call(t,s)&&s!==r&&Vo(t,s,{get:()=>e[s],enumerable:!(n=J$(e,s))||n.enumerable});return t},Z$=t=>Y$(Vo({},"__esModule",{value:!0}),t),cy={};X$(cy,{PACKAGE_VERSION:()=>eE,TARGETED_RPC_VERSION:()=>tE});var Q$=Z$(cy);const eE="1.12.0",tE="1.36.0";var Lo=Object.defineProperty,rE=Object.getOwnPropertyDescriptor,nE=Object.getOwnPropertyNames,sE=Object.prototype.hasOwnProperty,iE=(t,e)=>{for(var r in e)Lo(t,r,{get:e[r],enumerable:!0})},aE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of nE(e))!sE.call(t,s)&&s!==r&&Lo(t,s,{get:()=>e[s],enumerable:!(n=rE(e,s))||n.enumerable});return t},oE=t=>aE(Lo({},"__esModule",{value:!0}),t),uy={};iE(uy,{JsonRpcError:()=>uE,SuiHTTPStatusError:()=>lE,SuiHTTPTransportError:()=>Fo});var qo=oE(uy);const cE={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};let Fo=class extends Error{},uE=class extends Fo{constructor(e,r){super(e),this.code=r,this.type=cE[r]??"ServerError"}},lE=class extends Fo{constructor(e,r,n){super(e),this.status=r,this.statusText=n}};var Go=Object.defineProperty,pE=Object.getOwnPropertyDescriptor,dE=Object.getOwnPropertyNames,fE=Object.prototype.hasOwnProperty,ly=t=>{throw TypeError(t)},hE=(t,e)=>{for(var r in e)Go(t,r,{get:e[r],enumerable:!0})},yE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of dE(e))!fE.call(t,s)&&s!==r&&Go(t,s,{get:()=>e[s],enumerable:!(n=pE(e,s))||n.enumerable});return t},gE=t=>yE(Go({},"__esModule",{value:!0}),t),Wo=(t,e,r)=>e.has(t)||ly("Cannot "+r),se=(t,e,r)=>(Wo(t,e,"read from private field"),r?r.call(t):e.get(t)),Kt=(t,e,r)=>e.has(t)?ly("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Cr=(t,e,r,n)=>(Wo(t,e,"write to private field"),e.set(t,r),r),py=(t,e,r)=>(Wo(t,e,"access private method"),r),bE=(t,e,r,n)=>({set _(s){Cr(t,e,s)},get _(){return se(t,e,n)}}),dy={};hE(dy,{DEFAULT_CLIENT_OPTIONS:()=>yy,WebsocketClient:()=>wE});var vE=gE(dy),mE=qo,tr,Pn,mt,ar,Vn,Ar,Ks,fy,hy;function _E(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const yy={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};let wE=class{constructor(e,r={}){if(Kt(this,Ks),Kt(this,tr,0),Kt(this,Pn,0),Kt(this,mt,null),Kt(this,ar,null),Kt(this,Vn,new Set),Kt(this,Ar,new Map),this.endpoint=e,this.options={...yy,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=_E(this.endpoint))}async makeRequest(e,r){const n=await py(this,Ks,fy).call(this);return new Promise((s,i)=>{Cr(this,tr,se(this,tr)+1),se(this,Ar).set(se(this,tr),{resolve:s,reject:i,timeout:setTimeout(()=>{se(this,Ar).delete(se(this,tr)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:se(this,tr),method:e,params:r}))}).then(({error:s,result:i})=>{if(s)throw new mE.JsonRpcError(s.message,s.code);return i})}async subscribe(e){const r=new OE(e);return se(this,Vn).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};tr=new WeakMap;Pn=new WeakMap;mt=new WeakMap;ar=new WeakMap;Vn=new WeakMap;Ar=new WeakMap;Ks=new WeakSet;fy=function(){return se(this,ar)?se(this,ar):(Cr(this,ar,new Promise(t=>{var e;(e=se(this,mt))==null||e.close(),Cr(this,mt,new this.options.WebSocketConstructor(this.endpoint)),se(this,mt).addEventListener("open",()=>{Cr(this,Pn,0),t(se(this,mt))}),se(this,mt).addEventListener("close",()=>{bE(this,Pn)._++,se(this,Pn)<=this.options.maxReconnects&&setTimeout(()=>{py(this,Ks,hy).call(this)},this.options.reconnectTimeout)}),se(this,mt).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(s){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:s}));return}if("id"in n&&n.id!=null&&se(this,Ar).has(n.id)){const{resolve:s,timeout:i}=se(this,Ar).get(n.id);clearTimeout(i),s(n)}else if("params"in n){const{params:s}=n;se(this,Vn).forEach(i=>{i.subscriptionId===s.subscription&&s.subscription===i.subscriptionId&&i.onMessage(s.result)})}})})),se(this,ar))};hy=async function(){var t;return(t=se(this,mt))==null||t.close(),Cr(this,ar,null),Promise.allSettled([...se(this,Vn)].map(e=>e.subscribe(this)))};let OE=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var Jo=Object.defineProperty,SE=Object.getOwnPropertyDescriptor,kE=Object.getOwnPropertyNames,$E=Object.prototype.hasOwnProperty,gy=t=>{throw TypeError(t)},EE=(t,e)=>{for(var r in e)Jo(t,r,{get:e[r],enumerable:!0})},jE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of kE(e))!$E.call(t,s)&&s!==r&&Jo(t,s,{get:()=>e[s],enumerable:!(n=SE(e,s))||n.enumerable});return t},TE=t=>jE(Jo({},"__esModule",{value:!0}),t),Ko=(t,e,r)=>e.has(t)||gy("Cannot "+r),Ce=(t,e,r)=>(Ko(t,e,"read from private field"),r?r.call(t):e.get(t)),os=(t,e,r)=>e.has(t)?gy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ra=(t,e,r,n)=>(Ko(t,e,"write to private field"),e.set(t,r),r),PE=(t,e,r)=>(Ko(t,e,"access private method"),r),by={};EE(by,{SuiHTTPTransport:()=>xE});var vy=TE(by),Wc=Q$,Jc=qo,IE=vE,hn,Fe,In,na,my;let xE=class{constructor(e){os(this,na),os(this,hn,0),os(this,Fe),os(this,In),ra(this,Fe,e)}fetch(e,r){const n=Ce(this,Fe).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var s,i;ra(this,hn,Ce(this,hn)+1);const r=await this.fetch(((s=Ce(this,Fe).rpc)==null?void 0:s.url)??Ce(this,Fe).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Wc.PACKAGE_VERSION,"Client-Target-Api-Version":Wc.TARGETED_RPC_VERSION,...(i=Ce(this,Fe).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:Ce(this,hn),method:e.method,params:e.params})});if(!r.ok)throw new Jc.SuiHTTPStatusError(`Unexpected status code: ${r.status}`,r.status,r.statusText);const n=await r.json();if("error"in n&&n.error!=null)throw new Jc.JsonRpcError(n.error.message,n.error.code);return n.result}async subscribe(e){const r=await PE(this,na,my).call(this).subscribe(e);return async()=>!!await r()}};hn=new WeakMap;Fe=new WeakMap;In=new WeakMap;na=new WeakSet;my=function(){var t;if(!Ce(this,In)){const e=Ce(this,Fe).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");ra(this,In,new IE.WebsocketClient(((t=Ce(this,Fe).websocket)==null?void 0:t.url)??Ce(this,Fe).url,{WebSocketConstructor:e,...Ce(this,Fe).websocket}))}return Ce(this,In)};var Ho=Object.defineProperty,CE=Object.getOwnPropertyDescriptor,AE=Object.getOwnPropertyNames,ME=Object.prototype.hasOwnProperty,NE=(t,e)=>{for(var r in e)Ho(t,r,{get:e[r],enumerable:!0})},BE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of AE(e))!ME.call(t,s)&&s!==r&&Ho(t,s,{get:()=>e[s],enumerable:!(n=CE(e,s))||n.enumerable});return t},DE=t=>BE(Ho({},"__esModule",{value:!0}),t),_y={};NE(_y,{getFullnodeUrl:()=>RE});var UE=DE(_y);function RE(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}var wy={exports:{}},Oy=Object.defineProperty,zE=Object.getOwnPropertyDescriptor,VE=Object.getOwnPropertyNames,LE=Object.prototype.hasOwnProperty,qE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of VE(e))!LE.call(t,s)&&s!==r&&Oy(t,s,{get:()=>e[s],enumerable:!(n=zE(e,s))||n.enumerable});return t},FE=t=>qE(Oy({},"__esModule",{value:!0}),t),GE={},WE=FE(GE),Sy=Object.defineProperty,JE=Object.getOwnPropertyDescriptor,KE=Object.getOwnPropertyNames,HE=Object.prototype.hasOwnProperty,XE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of KE(e))!HE.call(t,s)&&s!==r&&Sy(t,s,{get:()=>e[s],enumerable:!(n=JE(e,s))||n.enumerable});return t},YE=t=>XE(Sy({},"__esModule",{value:!0}),t),ZE={},QE=YE(ZE),ky=Object.defineProperty,ej=Object.getOwnPropertyDescriptor,tj=Object.getOwnPropertyNames,rj=Object.prototype.hasOwnProperty,nj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of tj(e))!rj.call(t,s)&&s!==r&&ky(t,s,{get:()=>e[s],enumerable:!(n=ej(e,s))||n.enumerable});return t},sj=t=>nj(ky({},"__esModule",{value:!0}),t),ij={},aj=sj(ij),$y=Object.defineProperty,oj=Object.getOwnPropertyDescriptor,cj=Object.getOwnPropertyNames,uj=Object.prototype.hasOwnProperty,lj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of cj(e))!uj.call(t,s)&&s!==r&&$y(t,s,{get:()=>e[s],enumerable:!(n=oj(e,s))||n.enumerable});return t},pj=t=>lj($y({},"__esModule",{value:!0}),t),dj={},fj=pj(dj),Ey=Object.defineProperty,hj=Object.getOwnPropertyDescriptor,yj=Object.getOwnPropertyNames,gj=Object.prototype.hasOwnProperty,bj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yj(e))!gj.call(t,s)&&s!==r&&Ey(t,s,{get:()=>e[s],enumerable:!(n=hj(e,s))||n.enumerable});return t},vj=t=>bj(Ey({},"__esModule",{value:!0}),t),mj={},_j=vj(mj),jy=Object.defineProperty,wj=Object.getOwnPropertyDescriptor,Oj=Object.getOwnPropertyNames,Sj=Object.prototype.hasOwnProperty,kj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Oj(e))!Sj.call(t,s)&&s!==r&&jy(t,s,{get:()=>e[s],enumerable:!(n=wj(e,s))||n.enumerable});return t},$j=t=>kj(jy({},"__esModule",{value:!0}),t),Ej={},jj=$j(Ej);(function(t){var e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i=(l,u,p,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!s.call(l,h)&&h!==p&&e(l,h,{get:()=>u[h],enumerable:!(f=r(u,h))||f.enumerable});return l},a=(l,u,p)=>(i(l,u,"default"),p&&i(p,u,"default")),o=l=>i(e({},"__esModule",{value:!0}),l),c={};t.exports=o(c),a(c,WE,t.exports),a(c,QE,t.exports),a(c,aj,t.exports),a(c,fj,t.exports),a(c,_j,t.exports),a(c,jj,t.exports)})(wy);var Tj=wy.exports,Xo=Object.defineProperty,Pj=Object.getOwnPropertyDescriptor,Ij=Object.getOwnPropertyNames,xj=Object.prototype.hasOwnProperty,Cj=(t,e)=>{for(var r in e)Xo(t,r,{get:e[r],enumerable:!0})},Aj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ij(e))!xj.call(t,s)&&s!==r&&Xo(t,s,{get:()=>e[s],enumerable:!(n=Pj(e,s))||n.enumerable});return t},Mj=t=>Aj(Xo({},"__esModule",{value:!0}),t),Ty={};Cj(Ty,{SuiClient:()=>zj,isSuiClient:()=>Rj});var Nj=Mj(Ty),vr=ge,Bj=ay,re=$e,Dj=Xa,Uj=vy;const Py=Symbol.for("@mysten/SuiClient");function Rj(t){return typeof t=="object"&&t!==null&&t[Py]===!0}let zj=class{get[Py](){return!0}constructor(e){this.transport=e.transport??new Uj.SuiHTTPTransport({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,re.isValidSuiObjectId)((0,re.normalizeSuiObjectId)(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!(0,re.isValidSuiObjectId)((0,re.normalizeSuiObjectId)(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!(0,re.isValidTransactionDigest)(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!(0,re.isValidTransactionDigest)(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:s}){const i=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:(0,vr.toBase64)(e),Array.isArray(r)?r:[r],n]});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:i.digest})}catch{}return i}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(r.toSuiAddress()),s=await e.build({client:this}));const{signature:i,bytes:a}=await r.signTransaction(s);return this.executeTransactionBlock({transactionBlock:a,signature:i,...n})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!(0,re.isValidSuiObjectId)((0,re.normalizeSuiObjectId)(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var n;let r;if((0,Bj.isTransaction)(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=(0,vr.toBase64)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=(0,vr.toBase64)(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,(n=e.gasPrice)==null?void 0:n.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:(0,vr.toBase64)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,re.isValidSuiObjectId)((0,re.normalizeSuiObjectId)(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),r=(0,vr.fromBase58)(e.digest);return(0,vr.toHex)(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){const{nextCursor:n,hasNextPage:s,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:s,nextCursor:n,data:i.map(a=>(0,Dj.normalizeSuiNSName)(a,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...s}){const i=AbortSignal.timeout(r),a=new Promise((o,c)=>{i.addEventListener("abort",()=>c(i.reason))});for(a.catch(()=>{});!i.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};(function(t){var e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i=(y,w)=>{for(var j in w)e(y,j,{get:w[j],enumerable:!0})},a=(y,w,j,U)=>{if(w&&typeof w=="object"||typeof w=="function")for(let x of n(w))!s.call(y,x)&&x!==j&&e(y,x,{get:()=>w[x],enumerable:!(U=r(w,x))||U.enumerable});return y},o=(y,w,j)=>(a(y,w,"default"),j&&a(j,w,"default")),c=y=>a(e({},"__esModule",{value:!0}),y),l={};i(l,{JsonRpcError:()=>h.JsonRpcError,SuiClient:()=>f.SuiClient,SuiHTTPStatusError:()=>h.SuiHTTPStatusError,SuiHTTPTransport:()=>u.SuiHTTPTransport,SuiHTTPTransportError:()=>h.SuiHTTPTransportError,getFullnodeUrl:()=>p.getFullnodeUrl,isSuiClient:()=>f.isSuiClient}),t.exports=c(l);var u=vy,p=UE;o(l,Tj,t.exports);var f=Nj,h=qo})(oy);var Vj=oy.exports,nn=As&&As.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{l(n.next(u))}catch(p){a(p)}}function c(u){try{l(n.throw(u))}catch(p){a(p)}}function l(u){u.done?i(u.value):s(u.value).then(o,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.OKXSuiProvider=void 0;const At=Jg(),Lj=ay,qj=to,Kc=Vj;class Iy{get defaultNetwork(){return this.provider.requestDefaultChainWithNamespace(At.NameSpaceKeySui)}get suiClient(){var e;let r=(0,Kc.getFullnodeUrl)(this.defaultNetwork),n=(e=this.provider.session)===null||e===void 0?void 0:e.namespaces[At.NameSpaceKeySui];if(n&&n.rpcMap){let s=n.rpcMap[this.currentChainId];s!==void 0?(r=s,console.log("use custom rpc======> ",r)):console.log("use mainnet rpc======> ",r)}else console.log("use mainnet rpc======> ",r);return new Kc.SuiClient({url:r})}get currentChainId(){return`sui:${this.defaultNetwork}`}constructor(e){this.provider=e}getAccount(){var e,r,n,s,i,a,o;let c=At.NameSpaceKeySui,l=(r=(e=this.provider.session)===null||e===void 0?void 0:e.namespaces[c])===null||r===void 0?void 0:r.accounts[0];if(console.log("====> getAccount"),console.log(l),!l)return;const u=l.split(":"),p=l.split(":")[2];console.log("sui_publicKey",(s=(n=this.provider.session)===null||n===void 0?void 0:n.namespaces[c])===null||s===void 0?void 0:s.extra);let f=(o=(a=(i=this.provider.session)===null||i===void 0?void 0:i.namespaces[c])===null||a===void 0?void 0:a.extra)===null||o===void 0?void 0:o[`${u[0]}:${u[1]}`],h="";if(f!=null&&(h=f.publicKey,console.log("sui_publicKey",h)),!!p)return{address:p,publicKey:h}}signTransaction(e){return nn(this,void 0,void 0,function*(){const[r,n]=yield this.generateTsBytesAndSerizlize(e),s=yield this.provider.request({method:"sui_signTransactionBlock",params:{txBytes:r,txSerialize:n},injectParams:Object.assign(Object.assign({},e),{account:Object.assign({},this.getAccount())})},this.currentChainId);return"result"in s?{signature:s.result,transactionBlockBytes:r}:s.error})}signAndExecuteTransaction(e){return nn(this,void 0,void 0,function*(){const[r,n]=yield this.generateTsBytesAndSerizlize(e);let s=yield this.provider.request({method:"sui_signAndExecuteTransactionBlock",params:{txBytes:r,txSerialize:n},injectParams:Object.assign(Object.assign({},e),{account:Object.assign({},this.getAccount())})},this.currentChainId);return"result"in s?{confirmedLocalExecution:!1,digest:s.result,txBytes:r}:s.error})}signMessage(e){return nn(this,void 0,void 0,function*(){console.log("====> signMessage:"),console.log(e);const r=new TextDecoder("utf8"),n=btoa(r.decode(e.message)),s=atob(n),i=yield this.provider.request({method:"sui_signMessage",params:{message:s},injectParams:Object.assign(Object.assign({},e),{account:Object.assign({},this.getAccount())})},this.currentChainId);if("result"in i){let a=i;console.log("====> signAction result"),console.log(i);const o=a.result;return{messageBytes:n,signature:o}}else return console.log("====> signAction result error"),i.error})}signPersonalMessage(e){return nn(this,void 0,void 0,function*(){console.log("====> signPersonalMessage："),console.log(e);const r=new TextDecoder("utf8"),n=btoa(r.decode(e.message)),s=atob(n),i=yield this.provider.request({method:"sui_signPersonalMessage",params:{message:s},injectParams:Object.assign(Object.assign({},e),{account:Object.assign({},this.getAccount())})},this.currentChainId);if("result"in i){let a=i;console.log("====> signAction result"),console.log(i);const o=a.result;return{bytes:n,signature:o}}else return console.log("====> signAction result error"),i.error})}generateTsBytesAndSerizlize(e){return nn(this,void 0,void 0,function*(){let r=["",""];if("txBytes"in e&&e.txBytes.length>0&&"txSerialize"in e&&e.txSerialize.length>0&&(r=[e.txBytes,e.txSerialize]),!("transactionBlock"in e))throw new At.OKXConnectError(At.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"params doesn't contains transactionBlock");let n=this.provider.requestAccountsWithNamespace(At.NameSpaceKeySui);if(n.length==0)throw new At.OKXConnectError(At.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"there is no sui account");e.transactionBlock.setSender(n[0]);const s=yield e.transactionBlock.build({client:this.suiClient}),i=(0,qj.toBase64)(s),a=yield Lj.Transaction.from(i).toJSON();return r=[i,a],new Promise(o=>{o(r)})})}}Gn.OKXSuiProvider=Iy;Gn.default=Iy;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OKXSuiProvider=void 0;var e=Gn;Object.defineProperty(t,"OKXSuiProvider",{enumerable:!0,get:function(){return e.OKXSuiProvider}})})(wu);const Fj="1.17.0",Gj="1.40.0",Wj={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class xy extends Error{}class Cy extends xy{constructor(e,r){super(e),this.code=r,this.type=Wj[r]??"ServerError"}}class Jj extends xy{constructor(e,r,n){super(e),this.status=r,this.statusText=n}}var Ay=t=>{throw TypeError(t)},Yo=(t,e,r)=>e.has(t)||Ay("Cannot "+r),ie=(t,e,r)=>(Yo(t,e,"read from private field"),r?r.call(t):e.get(t)),Ht=(t,e,r)=>e.has(t)?Ay("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Mr=(t,e,r,n)=>(Yo(t,e,"write to private field"),e.set(t,r),r),My=(t,e,r)=>(Yo(t,e,"access private method"),r),Kj=(t,e,r,n)=>({set _(s){Mr(t,e,s)},get _(){return ie(t,e,n)}}),rr,xn,_t,or,Ln,Nr,Hs,Ny,By;function Hj(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const Xj={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Yj{constructor(e,r={}){if(Ht(this,Hs),Ht(this,rr,0),Ht(this,xn,0),Ht(this,_t,null),Ht(this,or,null),Ht(this,Ln,new Set),Ht(this,Nr,new Map),this.endpoint=e,this.options={...Xj,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=Hj(this.endpoint))}async makeRequest(e,r){const n=await My(this,Hs,Ny).call(this);return new Promise((s,i)=>{Mr(this,rr,ie(this,rr)+1),ie(this,Nr).set(ie(this,rr),{resolve:s,reject:i,timeout:setTimeout(()=>{ie(this,Nr).delete(ie(this,rr)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:ie(this,rr),method:e,params:r}))}).then(({error:s,result:i})=>{if(s)throw new Cy(s.message,s.code);return i})}async subscribe(e){const r=new Zj(e);return ie(this,Ln).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}}rr=new WeakMap;xn=new WeakMap;_t=new WeakMap;or=new WeakMap;Ln=new WeakMap;Nr=new WeakMap;Hs=new WeakSet;Ny=function(){return ie(this,or)?ie(this,or):(Mr(this,or,new Promise(t=>{var e;(e=ie(this,_t))==null||e.close(),Mr(this,_t,new this.options.WebSocketConstructor(this.endpoint)),ie(this,_t).addEventListener("open",()=>{Mr(this,xn,0),t(ie(this,_t))}),ie(this,_t).addEventListener("close",()=>{Kj(this,xn)._++,ie(this,xn)<=this.options.maxReconnects&&setTimeout(()=>{My(this,Hs,By).call(this)},this.options.reconnectTimeout)}),ie(this,_t).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(s){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:s}));return}if("id"in n&&n.id!=null&&ie(this,Nr).has(n.id)){const{resolve:s,timeout:i}=ie(this,Nr).get(n.id);clearTimeout(i),s(n)}else if("params"in n){const{params:s}=n;ie(this,Ln).forEach(i=>{i.subscriptionId===s.subscription&&s.subscription===i.subscriptionId&&i.onMessage(s.result)})}})})),ie(this,or))};By=async function(){var t;return(t=ie(this,_t))==null||t.close(),Mr(this,or,null),Promise.allSettled([...ie(this,Ln)].map(e=>e.subscribe(this)))};class Zj{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}}var Dy=t=>{throw TypeError(t)},Zo=(t,e,r)=>e.has(t)||Dy("Cannot "+r),Ae=(t,e,r)=>(Zo(t,e,"read from private field"),r?r.call(t):e.get(t)),cs=(t,e,r)=>e.has(t)?Dy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),sa=(t,e,r,n)=>(Zo(t,e,"write to private field"),e.set(t,r),r),Qj=(t,e,r)=>(Zo(t,e,"access private method"),r),yn,Ge,Cn,ia,Uy;class e1{constructor(e){cs(this,ia),cs(this,yn,0),cs(this,Ge),cs(this,Cn),sa(this,Ge,e)}fetch(e,r){const n=Ae(this,Ge).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var s,i;sa(this,yn,Ae(this,yn)+1);const r=await this.fetch(((s=Ae(this,Ge).rpc)==null?void 0:s.url)??Ae(this,Ge).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Fj,"Client-Target-Api-Version":Gj,"Client-Request-Method":e.method,...(i=Ae(this,Ge).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:Ae(this,yn),method:e.method,params:e.params})});if(!r.ok)throw new Jj(`Unexpected status code: ${r.status}`,r.status,r.statusText);const n=await r.json();if("error"in n&&n.error!=null)throw new Cy(n.error.message,n.error.code);return n.result}async subscribe(e){const r=await Qj(this,ia,Uy).call(this).subscribe(e);return async()=>!!await r()}}yn=new WeakMap;Ge=new WeakMap;Cn=new WeakMap;ia=new WeakSet;Uy=function(){var t;if(!Ae(this,Cn)){const e=Ae(this,Ge).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");sa(this,Cn,new Yj(((t=Ae(this,Ge).websocket)==null?void 0:t.url)??Ae(this,Ge).url,{WebSocketConstructor:e,...Ae(this,Ge).websocket}))}return Ae(this,Cn)};function t1(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),p=u.charCodeAt(0);if(e[p]!==255)throw new TypeError(u+" is ambiguous");e[p]=l}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function a(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,p=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const y=(h-f)*i+1>>>0,w=new Uint8Array(y);for(;f!==h;){let x=l[f],F=0;for(let W=y-1;(x!==0||F<p)&&W!==-1;W--,F++)x+=256*w[W]>>>0,w[W]=x%r>>>0,x=x/r>>>0;if(x!==0)throw new Error("Non-zero carry");p=F,f++}let j=y-p;for(;j!==y&&w[j]===0;)j++;let U=n.repeat(u);for(;j<y;++j)U+=t.charAt(w[j]);return U}function o(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,p=0,f=0;for(;l[u]===n;)p++,u++;const h=(l.length-u)*s+1>>>0,y=new Uint8Array(h);for(;l[u];){let x=e[l.charCodeAt(u)];if(x===255)return;let F=0;for(let W=h-1;(x!==0||F<f)&&W!==-1;W--,F++)x+=r*y[W]>>>0,y[W]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");f=F,u++}let w=h-f;for(;w!==h&&y[w]===0;)w++;const j=new Uint8Array(p+(h-w));let U=p;for(;w!==h;)j[U++]=y[w++];return j}function c(l){const u=o(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:a,decodeUnsafe:o,decode:c}}var r1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Ry=t1(r1),li=t=>Ry.encode(t),qn=t=>Ry.decode(t);function ce(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const Ii=8192;function H(t){if(t.length<Ii)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Ii){const n=t.slice(r,r+Ii);e+=String.fromCharCode(...n)}return btoa(e)}function zy(t){var s;const e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,n=((s=r.match(/[0-9a-fA-F]{2}/g))==null?void 0:s.map(i=>parseInt(i,16)))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(n)}function Vr(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}function Qo(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function n1(t){let e=0,r=0,n=0;for(;;){let s=t[n];if(n+=1,e|=(s&127)<<r,!(s&128))break;r+=7}return{value:e,length:n}}class s1{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:s}=n1(r);return this.shift(s),n}readVec(e){let r=this.readULEB(),n=[];for(let s=0;s<r;s++)n.push(e(this,s,r));return n}}function i1(t,e){switch(e){case"base58":return li(t);case"base64":return H(t);case"hex":return Vr(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function a1(t,e=["<",">"]){const[r,n]=e,s=[];let i="",a=0;for(let o=0;o<t.length;o++){const c=t[o];if(c===r&&a++,c===n&&a--,a===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}class o1{constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return xi(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return xi(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return xi(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Qo(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,s)=>r(this,n,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return i1(this.toBytes(),e)}}function xi(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Vy=t=>{throw TypeError(t)},Ly=(t,e,r)=>e.has(t)||Vy("Cannot "+r),We=(t,e,r)=>(Ly(t,e,"read from private field"),r?r.call(t):e.get(t)),Xs=(t,e,r)=>e.has(t)?Vy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ys=(t,e,r,n)=>(Ly(t,e,"write to private field"),e.set(t,r),r),$r,gn,$s,Bt;const c1=class qy{constructor(e){Xs(this,$r),Xs(this,gn),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Ys(this,$r,e.write),Ys(this,gn,e.serialize??((r,n)=>{const s=new o1({initialSize:this.serializedSize(r)??void 0,...n});return We(this,$r).call(this,r,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),We(this,$r).call(this,e,r)}serialize(e,r){return this.validate(e),new u1(this,We(this,gn).call(this,e,r))}parse(e){const r=new s1(e);return this.read(r)}fromHex(e){return this.parse(zy(e))}fromBase58(e){return this.parse(qn(e))}fromBase64(e){return this.parse(ce(e))}transform({name:e,input:r,output:n,validate:s}){return new qy({name:e??this.name,read:i=>n(this.read(i)),write:(i,a)=>We(this,$r).call(this,r(i),a),serializedSize:i=>this.serializedSize(r(i)),serialize:(i,a)=>We(this,gn).call(this,r(i),a),validate:i=>{s==null||s(i),this.validate(r(i))}})}};$r=new WeakMap;gn=new WeakMap;let Ot=c1;const Fy=Symbol.for("@mysten/serialized-bcs");function ec(t){return!!t&&typeof t=="object"&&t[Fy]===!0}class u1{constructor(e,r){Xs(this,$s),Xs(this,Bt),Ys(this,$s,e),Ys(this,Bt,r)}get[Fy](){return!0}toBytes(){return We(this,Bt)}toHex(){return Vr(We(this,Bt))}toBase64(){return H(We(this,Bt))}toBase58(){return li(We(this,Bt))}parse(){return We(this,$s).parse(We(this,Bt))}}$s=new WeakMap;Bt=new WeakMap;function Zs({size:t,...e}){return new Ot({...e,serializedSize:()=>t})}function Ci({readMethod:t,writeMethod:e,...r}){return Zs({...r,read:n=>n[t](),write:(n,s)=>s[e](n),validate:n=>{var s;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(s=r.validate)==null||s.call(r,n)}})}function Ai({readMethod:t,writeMethod:e,...r}){return Zs({...r,read:n=>n[t](),write:(n,s)=>s[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function l1({serialize:t,...e}){const r=new Ot({...e,serialize:t,write:(n,s)=>{for(const i of r.serialize(n).toBytes())s.write8(i)}});return r}function p1({toBytes:t,fromBytes:e,...r}){return new Ot({...r,read:n=>{const s=n.readULEB(),i=n.readBytes(s);return e(i)},write:(n,s)=>{const i=t(n);s.writeULEB(i.length);for(let a=0;a<i.length;a++)s.write8(i[a])},serialize:n=>{const s=t(n),i=Qo(s.length),a=new Uint8Array(i.length+s.length);return a.set(i,0),a.set(s,i.length),a},validate:n=>{var s;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(s=r.validate)==null||s.call(r,n)}})}function d1(t){let e=null;function r(){return e||(e=t()),e}return new Ot({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,s)=>r().write(n,s),serialize:(n,s)=>r().serialize(n,s).toBytes()})}const d={u8(t){return Ci({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Ci({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Ci({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Ai({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Ai({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Ai({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Zs({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return l1({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Qo(e)),...t})},bytes(t,e){return Zs({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{const s=new Uint8Array(r);for(let i=0;i<t;i++)n.write8(s[i]??0)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return p1({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new Ot({name:`${e.name}[${t}]`,read:n=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(n);return s},write:(n,s)=>{for(const i of n)e.write(i,s)},...r,validate:n=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return d.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new Ot({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),s=new Array(n);for(let i=0;i<n;i++)s[i]=t.read(r);return s},write:(r,n)=>{n.writeULEB(r.length);for(const s of r)t.write(s,n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new Ot({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let s=0;s<t.length;s++){const i=t[s].serializedSize(r[s]);if(i==null)return null;n+=i}return n},read:r=>{const n=[];for(const s of t)n.push(s.read(r));return n},write:(r,n)=>{for(let s=0;s<t.length;s++)t[s].write(r[s],n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new Ot({name:t,serializedSize:s=>{let i=0;for(const[a,o]of n){const c=o.serializedSize(s[a]);if(c==null)return null;i+=c}return i},read:s=>{const i={};for(const[a,o]of n)i[a]=o.read(s);return i},write:(s,i)=>{for(const[a,o]of n)o.write(s[a],i)},...r,validate:s=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,r){const n=Object.entries(e);return new Ot({name:t,read:s=>{const i=s.readULEB(),a=n[i];if(!a)throw new TypeError(`Unknown value ${i} for enum ${t}`);const[o,c]=a;return{[o]:(c==null?void 0:c.read(s))??!0,$kind:o}},write:(s,i)=>{const[a,o]=Object.entries(s).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<n.length;c++){const[l,u]=n[c];if(l===a){i.writeULEB(c),u==null||u.write(o,i);return}}},...r,validate:s=>{var o;if((o=r==null?void 0:r.validate)==null||o.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s).filter(c=>s[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);const[a]=i;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(t,e){return d.vector(d.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[s,i]of r)n.set(s,i);return n}})},lazy(t){return d1(t)}},f1=32;function Hc(t){try{return qn(t).length===f1}catch{return!1}}const Qn=32;function wt(t){return h1(t)&&y1(t)===Qn}function us(t){return wt(t)}function q(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Qn*2,"0")}`}function St(t,e=!1){return q(t,e)}function h1(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function y1(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const g1=/^vector<(.+)>$/,b1=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class st{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(g1);if(n)return{vector:st.parseFromStr(n[1],r)};const s=e.match(b1);if(s)return{struct:{address:r?q(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:st.parseStructTypeArgs(s[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return a1(e).map(n=>st.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${st.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(st.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}function v1(t){return d.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function m1(t){return d.enum("Option",{None:null,Some:t})}const te=d.bytes(Qn).transform({validate:t=>{const e=typeof t=="string"?t:Vr(t);if(!e||!wt(q(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?zy(q(t)):t,output:t=>q(Vr(t))}),He=d.vector(d.u8()).transform({name:"ObjectDigest",input:t=>qn(t),output:t=>li(new Uint8Array(t)),validate:t=>{if(qn(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),xe=d.struct("SuiObjectRef",{objectId:te,version:d.u64(),digest:He}),Gy=d.struct("SharedObjectRef",{objectId:te,initialSharedVersion:d.u64(),mutable:d.bool()}),Wy=d.enum("ObjectArg",{ImmOrOwnedObject:xe,SharedObject:Gy,Receiving:xe}),Jy=d.enum("CallArg",{Pure:d.struct("Pure",{bytes:d.vector(d.u8()).transform({input:t=>typeof t=="string"?ce(t):t,output:t=>H(new Uint8Array(t))})}),Object:Wy}),tc=d.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:d.lazy(()=>tc),struct:d.lazy(()=>Qy),u16:null,u32:null,u256:null}),rc=tc.transform({input:t=>typeof t=="string"?st.parseFromStr(t,!0):t,output:t=>st.tagToString(t)}),nt=d.enum("Argument",{GasCoin:null,Input:d.u16(),Result:d.u16(),NestedResult:d.tuple([d.u16(),d.u16()])}),Ky=d.struct("ProgrammableMoveCall",{package:te,module:d.string(),function:d.string(),typeArguments:d.vector(rc),arguments:d.vector(nt)}),Hy=d.enum("Command",{MoveCall:Ky,TransferObjects:d.struct("TransferObjects",{objects:d.vector(nt),address:nt}),SplitCoins:d.struct("SplitCoins",{coin:nt,amounts:d.vector(nt)}),MergeCoins:d.struct("MergeCoins",{destination:nt,sources:d.vector(nt)}),Publish:d.struct("Publish",{modules:d.vector(d.vector(d.u8()).transform({input:t=>typeof t=="string"?ce(t):t,output:t=>H(new Uint8Array(t))})),dependencies:d.vector(te)}),MakeMoveVec:d.struct("MakeMoveVec",{type:m1(rc).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:d.vector(nt)}),Upgrade:d.struct("Upgrade",{modules:d.vector(d.vector(d.u8()).transform({input:t=>typeof t=="string"?ce(t):t,output:t=>H(new Uint8Array(t))})),dependencies:d.vector(te),package:te,ticket:nt})}),Xy=d.struct("ProgrammableTransaction",{inputs:d.vector(Jy),commands:d.vector(Hy)}),Yy=d.enum("TransactionKind",{ProgrammableTransaction:Xy,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Zy=d.enum("TransactionExpiration",{None:null,Epoch:v1()}),Qy=d.struct("StructTag",{address:te,module:d.string(),name:d.string(),typeParams:d.vector(tc)}),eg=d.struct("GasData",{payment:d.vector(xe),owner:te,price:d.u64(),budget:d.u64()}),tg=d.struct("TransactionDataV1",{kind:Yy,sender:te,gasData:eg,expiration:Zy}),rg=d.enum("TransactionData",{V1:tg}),ng=d.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),sg=d.enum("IntentVersion",{V0:null}),ig=d.enum("AppId",{Sui:null}),ag=d.struct("Intent",{scope:ng,version:sg,appId:ig});function og(t){return d.struct(`IntentMessage<${t.name}>`,{intent:ag,value:t})}const cg=d.enum("CompressedSignature",{ED25519:d.fixedArray(64,d.u8()),Secp256k1:d.fixedArray(64,d.u8()),Secp256r1:d.fixedArray(64,d.u8()),ZkLogin:d.vector(d.u8())}),ug=d.enum("PublicKey",{ED25519:d.fixedArray(32,d.u8()),Secp256k1:d.fixedArray(33,d.u8()),Secp256r1:d.fixedArray(33,d.u8()),ZkLogin:d.vector(d.u8())}),lg=d.struct("MultiSigPkMap",{pubKey:ug,weight:d.u8()}),pg=d.struct("MultiSigPublicKey",{pk_map:d.vector(lg),threshold:d.u16()}),_1=d.struct("MultiSig",{sigs:d.vector(cg),bitmap:d.u16(),multisig_pk:pg}),w1=d.vector(d.u8()).transform({input:t=>typeof t=="string"?ce(t):t,output:t=>H(new Uint8Array(t))}),dg=d.struct("SenderSignedTransaction",{intentMessage:og(rg),txSignatures:d.vector(w1)}),O1=d.vector(dg,{name:"SenderSignedData"}),fg=d.struct("PasskeyAuthenticator",{authenticatorData:d.vector(d.u8()),clientDataJson:d.string(),userSignature:d.vector(d.u8())}),S1=d.enum("PackageUpgradeError",{UnableToFetchPackage:d.struct("UnableToFetchPackage",{packageId:te}),NotAPackage:d.struct("NotAPackage",{objectId:te}),IncompatibleUpgrade:null,DigestDoesNotMatch:d.struct("DigestDoesNotMatch",{digest:d.vector(d.u8())}),UnknownUpgradePolicy:d.struct("UnknownUpgradePolicy",{policy:d.u8()}),PackageIDDoesNotMatch:d.struct("PackageIDDoesNotMatch",{packageId:te,ticketId:te})}),k1=d.struct("ModuleId",{address:te,name:d.string()}),Xc=d.struct("MoveLocation",{module:k1,function:d.u16(),instruction:d.u16(),functionName:d.option(d.string())}),$1=d.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:d.struct("IndexOutOfBounds",{idx:d.u16()}),SecondaryIndexOutOfBounds:d.struct("SecondaryIndexOutOfBounds",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidResultArity:d.struct("InvalidResultArity",{resultIdx:d.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),E1=d.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),j1=d.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:d.struct("MoveObjectTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),MovePackageTooBig:d.struct("MovePackageTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),CircularObjectOwnership:d.struct("CircularObjectOwnership",{object:te}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:d.option(Xc),MoveAbort:d.tuple([Xc,d.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:d.struct("CommandArgumentError",{argIdx:d.u16(),kind:$1}),TypeArgumentError:d.struct("TypeArgumentError",{argumentIdx:d.u16(),kind:E1}),UnusedValueWithoutDrop:d.struct("UnusedValueWithoutDrop",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidPublicFunctionReturnType:d.struct("InvalidPublicFunctionReturnType",{idx:d.u16()}),InvalidTransferObject:null,EffectsTooLarge:d.struct("EffectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:d.struct("PackageUpgradeError",{upgradeError:S1}),WrittenObjectsTooLarge:d.struct("WrittenObjectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:d.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:d.vector(te)}),AddressDeniedForCoin:d.struct("AddressDeniedForCoin",{address:te,coinType:d.string()}),CoinTypeGlobalPause:d.struct("CoinTypeGlobalPause",{coinType:d.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),hg=d.enum("ExecutionStatus",{Success:null,Failed:d.struct("ExecutionFailed",{error:j1,command:d.option(d.u64())})}),yg=d.struct("GasCostSummary",{computationCost:d.u64(),storageCost:d.u64(),storageRebate:d.u64(),nonRefundableStorageFee:d.u64()}),Pr=d.enum("Owner",{AddressOwner:te,ObjectOwner:te,Shared:d.struct("Shared",{initialSharedVersion:d.u64()}),Immutable:null}),T1=d.struct("TransactionEffectsV1",{status:hg,executedEpoch:d.u64(),gasUsed:yg,modifiedAtVersions:d.vector(d.tuple([te,d.u64()])),sharedObjects:d.vector(xe),transactionDigest:He,created:d.vector(d.tuple([xe,Pr])),mutated:d.vector(d.tuple([xe,Pr])),unwrapped:d.vector(d.tuple([xe,Pr])),deleted:d.vector(xe),unwrappedThenDeleted:d.vector(xe),wrapped:d.vector(xe),gasObject:d.tuple([xe,Pr]),eventsDigest:d.option(He),dependencies:d.vector(He)}),nc=d.tuple([d.u64(),He]),P1=d.enum("ObjectIn",{NotExist:null,Exist:d.tuple([nc,Pr])}),I1=d.enum("ObjectOut",{NotExist:null,ObjectWrite:d.tuple([He,Pr]),PackageWrite:nc}),x1=d.enum("IDOperation",{None:null,Created:null,Deleted:null}),C1=d.struct("EffectsObjectChange",{inputState:P1,outputState:I1,idOperation:x1}),A1=d.enum("UnchangedSharedKind",{ReadOnlyRoot:nc,MutateDeleted:d.u64(),ReadDeleted:d.u64(),Cancelled:d.u64(),PerEpochConfig:null}),M1=d.struct("TransactionEffectsV2",{status:hg,executedEpoch:d.u64(),gasUsed:yg,transactionDigest:He,gasObjectIndex:d.option(d.u32()),eventsDigest:d.option(He),dependencies:d.vector(He),lamportVersion:d.u64(),changedObjects:d.vector(d.tuple([te,C1])),unchangedSharedObjects:d.vector(d.tuple([te,A1])),auxDataDigest:d.option(He)}),N1=d.enum("TransactionEffects",{V1:T1,V2:M1}),T={...d,U8:d.u8(),U16:d.u16(),U32:d.u32(),U64:d.u64(),U128:d.u128(),U256:d.u256(),ULEB128:d.uleb128(),Bool:d.bool(),String:d.string(),Address:te,AppId:ig,Argument:nt,CallArg:Jy,CompressedSignature:cg,GasData:eg,Intent:ag,IntentMessage:og,IntentScope:ng,IntentVersion:sg,MultiSig:_1,MultiSigPkMap:lg,MultiSigPublicKey:pg,ObjectArg:Wy,ObjectDigest:He,ProgrammableMoveCall:Ky,ProgrammableTransaction:Xy,PublicKey:ug,SenderSignedData:O1,SenderSignedTransaction:dg,SharedObjectRef:Gy,StructTag:Qy,SuiObjectRef:xe,Command:Hy,TransactionData:rg,TransactionDataV1:tg,TransactionExpiration:Zy,TransactionKind:Yy,TypeTag:rc,TransactionEffects:N1,PasskeyAuthenticator:fg},B1=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,D1=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function U1(t,e="at"){const r=t.toLowerCase();let n;if(r.includes("@")){if(!B1.test(r))throw new Error(`Invalid SuiNS name ${t}`);const[s,i]=r.split("@");n=[...s?s.split("."):[],i]}else{if(!D1.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}BigInt(1e9);const R1="0x1",gg="0x2";St("0x6");const z1=`${gg}::sui::SUI`;St("0x5");const V1="object",L1="ID",q1="ascii",F1="String",G1="string",W1="String",J1="option",K1="Option";function H1(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&q(e.package)===q("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function aa(t){if(typeof t=="string")switch(t){case"address":return T.Address;case"bool":return T.Bool;case"u8":return T.U8;case"u16":return T.U16;case"u32":return T.U32;case"u64":return T.U64;case"u128":return T.U128;case"u256":return T.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return T.vector(T.U8).transform({input:r=>typeof r=="string"?new TextEncoder().encode(r):r,output:r=>r});const e=aa(t.vector);return e?T.vector(e):null}if("datatype"in t){const e=q(t.datatype.package);if(e===q(R1)){if(t.datatype.module===q1&&t.datatype.type===F1||t.datatype.module===G1&&t.datatype.type===W1)return T.String;if(t.datatype.module===J1&&t.datatype.type===K1){const r=aa(t.datatype.typeParameters[0]);return r?T.vector(r):null}}if(e===q(gg)&&t.datatype.module===V1&&t.datatype.type===L1)return T.Address}return null}function X1(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:An(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:An(t.MutableReference)}:{ref:null,body:An(t)}}function An(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:An(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(An)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function Y1(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?H(t):t.toBase64()}}}const kt={Pure:Y1,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:q(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:q(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:q(t)}}}}};function hr(t){const e=Object.entries(t).map(([r,n])=>O({[r]:n}));return K(he(e),Kn(r=>({...r,$kind:Object.keys(r)[0]})))}const Jr=K(M(),Kn(t=>q(t)),qr(wt)),Ee=Jr,dr=M(),ke=K(he([M(),K(Q(),ee())]),qr(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),qt=O({objectId:Jr,version:ke,digest:M()}),Z=K(he([O({GasCoin:C(!0)}),O({Input:K(Q(),ee()),type:fe(C("pure"))}),O({Input:K(Q(),ee()),type:fe(C("object"))}),O({Result:K(Q(),ee())}),O({NestedResult:oi([K(Q(),ee()),K(Q(),ee())])})]),Kn(t=>({...t,$kind:Object.keys(t)[0]}))),Z1=O({budget:L(ke),price:L(ke),owner:L(Jr),payment:L(I(qt))}),oa=he([C("address"),C("bool"),C("u8"),C("u16"),C("u32"),C("u64"),C("u128"),C("u256"),O({vector:Ur(()=>oa)}),O({datatype:O({package:M(),module:M(),type:M(),typeParameters:I(Ur(()=>oa))})}),O({typeParameter:K(Q(),ee())})]),Q1=O({ref:L(he([C("&"),C("&mut")])),body:oa}),eT=O({package:Ee,module:M(),function:M(),typeArguments:I(M()),arguments:I(Z),_argumentTypes:fe(L(I(Q1)))}),tT=O({name:M(),inputs:Rr(M(),he([Z,I(Z)])),data:Rr(M(),Vt())}),rT=hr({MoveCall:eT,TransferObjects:O({objects:I(Z),address:Z}),SplitCoins:O({coin:Z,amounts:I(Z)}),MergeCoins:O({destination:Z,sources:I(Z)}),Publish:O({modules:I(dr),dependencies:I(Ee)}),MakeMoveVec:O({type:L(M()),elements:I(Z)}),Upgrade:O({modules:I(dr),dependencies:I(Ee),package:Ee,ticket:Z}),$Intent:tT}),bg=hr({ImmOrOwnedObject:qt,SharedObject:O({objectId:Ee,initialSharedVersion:ke,mutable:Xn()}),Receiving:qt}),nT=hr({Object:bg,Pure:O({bytes:dr}),UnresolvedPure:O({value:Vt()}),UnresolvedObject:O({objectId:Ee,version:fe(L(ke)),digest:fe(L(M())),initialSharedVersion:fe(L(ke))})}),Yc=hr({Object:bg,Pure:O({bytes:dr})}),vg=hr({None:C(!0),Epoch:ke}),Es=O({version:C(2),sender:pr(Jr),expiration:pr(vg),gasData:Z1,inputs:I(nT),commands:I(rT)}),Xt={MoveCall(t){const[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>Y(Z,r)),address:Y(Z,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:Y(Z,t),amounts:e.map(r=>Y(Z,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:Y(Z,t),sources:e.map(r=>Y(Z,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:H(new Uint8Array(r))),dependencies:e.map(r=>St(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:H(new Uint8Array(s))),dependencies:e.map(s=>St(s)),package:r,ticket:Y(Z,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>Y(Z,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,s])=>[n,Array.isArray(s)?s.map(i=>Y(Z,i)):Y(Z,s)])),data:r}}}},ca=O({digest:M(),objectId:M(),version:he([K(Q(),ee()),M(),ai()])}),sT=hr({ImmOrOwned:ca,Shared:O({objectId:Ee,initialSharedVersion:ke,mutable:Xn()}),Receiving:ca}),Zc=hr({Object:sT,Pure:I(K(Q(),ee()))}),mg=he([O({kind:C("Input"),index:K(Q(),ee()),value:Vt(),type:fe(C("object"))}),O({kind:C("Input"),index:K(Q(),ee()),value:Vt(),type:C("pure")})]),iT=he([O({Epoch:K(Q(),ee())}),O({None:L(C(!0))})]),Qc=K(he([Q(),M(),ai()]),qr(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),sc=he([O({bool:L(C(!0))}),O({u8:L(C(!0))}),O({u64:L(C(!0))}),O({u128:L(C(!0))}),O({address:L(C(!0))}),O({signer:L(C(!0))}),O({vector:Ur(()=>sc)}),O({struct:Ur(()=>aT)}),O({u16:L(C(!0))}),O({u32:L(C(!0))}),O({u256:L(C(!0))})]),aT=O({address:M(),module:M(),name:M(),typeParams:I(sc)}),oT=O({budget:fe(Qc),price:fe(Qc),payment:fe(I(ca)),owner:fe(M())}),cT=[mg,O({kind:C("GasCoin")}),O({kind:C("Result"),index:K(Q(),ee())}),O({kind:C("NestedResult"),index:K(Q(),ee()),resultIndex:K(Q(),ee())})],jt=he([...cT]),uT=O({kind:C("MoveCall"),target:K(M(),qr(t=>t.split("::").length===3)),typeArguments:I(M()),arguments:I(jt)}),lT=O({kind:C("TransferObjects"),objects:I(jt),address:jt}),pT=O({kind:C("SplitCoins"),coin:jt,amounts:I(jt)}),dT=O({kind:C("MergeCoins"),destination:jt,sources:I(jt)}),fT=O({kind:C("MakeMoveVec"),type:he([O({Some:sc}),O({None:L(C(!0))})]),objects:I(jt)}),hT=O({kind:C("Publish"),modules:I(I(K(Q(),ee()))),dependencies:I(M())}),yT=O({kind:C("Upgrade"),modules:I(I(K(Q(),ee()))),dependencies:I(M()),packageId:M(),ticket:jt}),gT=[uT,lT,pT,dT,hT,yT,fT],bT=he([...gT]);O({version:C(1),sender:fe(M()),expiration:pr(iT),gasConfig:oT,inputs:I(mg),transactions:I(bT)});function eu(t){var r;const e=t.inputs.map((n,s)=>{if(n.Object)return{kind:"Input",index:s,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(ce(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((r=t.expiration)==null?void 0:r.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:st.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(s=>dt(s,e))};if(n.MergeCoins)return{kind:"MergeCoins",destination:dt(n.MergeCoins.destination,e),sources:n.MergeCoins.sources.map(s=>dt(s,e))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(s=>dt(s,e))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(s=>Array.from(ce(s))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:dt(n.SplitCoins.coin,e),amounts:n.SplitCoins.amounts.map(s=>dt(s,e))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(s=>dt(s,e)),address:dt(n.TransferObjects.address,e)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(s=>Array.from(ce(s))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:dt(n.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function dt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function vT(t){var e,r,n;return Y(Es,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((r=t.gasConfig.price)==null?void 0:r.toString())??null,payment:((n=t.gasConfig.payment)==null?void 0:n.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if(Rs(Zc,s.value)){const i=Y(Zc,s.value);if(i.Object){if(i.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:i.Object.ImmOrOwned.objectId,version:String(i.Object.ImmOrOwned.version),digest:i.Object.ImmOrOwned.digest}}};if(i.Object.Shared)return{Object:{SharedObject:{mutable:i.Object.Shared.mutable??null,initialSharedVersion:i.Object.Shared.initialSharedVersion,objectId:i.Object.Shared.objectId}}};if(i.Object.Receiving)return{Object:{Receiving:{digest:i.Object.Receiving.digest,version:String(i.Object.Receiving.version),objectId:i.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:H(new Uint8Array(i.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?st.tagToString(s.type.Some):null,elements:s.objects.map(i=>ft(i))}};case"MergeCoins":return{MergeCoins:{destination:ft(s.destination),sources:s.sources.map(i=>ft(i))}};case"MoveCall":{const[i,a,o]=s.target.split("::");return{MoveCall:{package:i,module:a,function:o,typeArguments:s.typeArguments,arguments:s.arguments.map(c=>ft(c))}}}case"Publish":return{Publish:{modules:s.modules.map(i=>H(Uint8Array.from(i))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:ft(s.coin),amounts:s.amounts.map(i=>ft(i))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(i=>ft(i)),address:ft(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(i=>H(Uint8Array.from(i))),dependencies:s.dependencies,package:s.packageId,ticket:ft(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function ft(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function es(t){return he(Object.entries(t).map(([e,r])=>O({[e]:r})))}const ze=es({GasCoin:C(!0),Input:K(Q(),ee()),Result:K(Q(),ee()),NestedResult:oi([K(Q(),ee()),K(Q(),ee())])}),mT=O({budget:L(ke),price:L(ke),owner:L(Jr),payment:L(I(qt))}),_T=O({package:Ee,module:M(),function:M(),typeArguments:I(M()),arguments:I(ze)}),wT=O({name:M(),inputs:Rr(M(),he([ze,I(ze)])),data:Rr(M(),Vt())}),OT=es({MoveCall:_T,TransferObjects:O({objects:I(ze),address:ze}),SplitCoins:O({coin:ze,amounts:I(ze)}),MergeCoins:O({destination:ze,sources:I(ze)}),Publish:O({modules:I(dr),dependencies:I(Ee)}),MakeMoveVec:O({type:L(M()),elements:I(ze)}),Upgrade:O({modules:I(dr),dependencies:I(Ee),package:Ee,ticket:ze}),$Intent:wT}),ST=es({ImmOrOwnedObject:qt,SharedObject:O({objectId:Ee,initialSharedVersion:ke,mutable:Xn()}),Receiving:qt}),kT=es({Object:ST,Pure:O({bytes:dr}),UnresolvedPure:O({value:Vt()}),UnresolvedObject:O({objectId:Ee,version:fe(L(ke)),digest:fe(L(M())),initialSharedVersion:fe(L(ke))})}),$T=es({None:C(!0),Epoch:ke}),ET=O({version:C(2),sender:pr(Jr),expiration:pr($T),gasData:mT,inputs:I(kT),commands:I(OT)}),jT=50,TT=1000n,PT=5e10;async function IT(t,e,r){return await NT(t,e),await MT(t,e),e.onlyTransactionKind||(await xT(t,e),await CT(t,e),await AT(t,e)),await BT(t),await r()}async function xT(t,e){t.gasConfig.price||(t.gasConfig.price=String(await ts(e).getReferenceGasPrice()))}async function CT(t,e){if(t.gasConfig.budget)return;const r=await ts(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(PT),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=TT*BigInt(t.gasConfig.price||1n),s=BigInt(r.effects.gasUsed.computationCost)+n,i=s+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>s?i:s)}async function AT(t,e){if(!t.gasConfig.payment){const n=(await ts(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:z1})).data.filter(s=>!t.inputs.find(a=>{var o;return(o=a.Object)!=null&&o.ImmOrOwnedObject?s.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(s=>Y(qt,s))}}async function MT(t,e){const r=t.inputs.filter(u=>{var p;return u.UnresolvedObject&&!(u.UnresolvedObject.version||(p=u.UnresolvedObject)!=null&&p.initialSharedVersion)}),n=[...new Set(r.map(u=>St(u.UnresolvedObject.objectId)))],s=n.length?zT(n,jT):[],i=(await Promise.all(s.map(u=>ts(e).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat(),a=new Map(n.map((u,p)=>[u,i[p]])),o=Array.from(a).filter(([u,p])=>p.error).map(([u,p])=>JSON.stringify(p.error));if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=i.map(u=>{if(u.error||!u.data)throw new Error(`Failed to fetch object: ${u.error}`);const p=u.data.owner,f=p&&typeof p=="object"&&"Shared"in p?p.Shared.initial_shared_version:null;return{objectId:u.data.objectId,digest:u.data.digest,version:u.data.version,initialSharedVersion:f}}),l=new Map(n.map((u,p)=>[u,c[p]]));for(const[u,p]of t.inputs.entries()){if(!p.UnresolvedObject)continue;let f;const h=q(p.UnresolvedObject.objectId),y=l.get(h);p.UnresolvedObject.initialSharedVersion??(y==null?void 0:y.initialSharedVersion)?f=kt.SharedObjectRef({objectId:h,initialSharedVersion:p.UnresolvedObject.initialSharedVersion||(y==null?void 0:y.initialSharedVersion),mutable:DT(t,u)}):UT(t,u)&&(f=kt.ReceivingRef({objectId:h,digest:p.UnresolvedObject.digest??(y==null?void 0:y.digest),version:p.UnresolvedObject.version??(y==null?void 0:y.version)})),t.inputs[t.inputs.indexOf(p)]=f??kt.ObjectRef({objectId:h,digest:p.UnresolvedObject.digest??(y==null?void 0:y.digest),version:p.UnresolvedObject.version??(y==null?void 0:y.version)})}}async function NT(t,e){const{inputs:r,commands:n}=t,s=[],i=new Set;n.forEach(o=>{if(o.MoveCall){if(o.MoveCall._argumentTypes)return;if(o.MoveCall.arguments.map(u=>u.$kind==="Input"?t.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${o.MoveCall.package}::${o.MoveCall.module}::${o.MoveCall.function}`;i.add(u),s.push(o.MoveCall)}}switch(o.$kind){case"SplitCoins":o.SplitCoins.amounts.forEach(c=>{tu(c,T.U64,t)});break;case"TransferObjects":tu(o.TransferObjects.address,T.Address,t);break}});const a=new Map;if(i.size>0){const o=ts(e);await Promise.all([...i].map(async c=>{const[l,u,p]=c.split("::"),f=await o.getNormalizedMoveFunction({package:l,module:u,function:p});a.set(c,f.parameters.map(h=>X1(h)))}))}s.length&&await Promise.all(s.map(async o=>{const c=a.get(`${o.package}::${o.module}::${o.function}`);if(!c)return;const u=c.length>0&&H1(c.at(-1))?c.slice(0,c.length-1):c;o._argumentTypes=u})),n.forEach(o=>{if(!o.MoveCall)return;const c=o.MoveCall,l=`${c.package}::${c.module}::${c.function}`,u=c._argumentTypes;if(u){if(u.length!==o.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${l}`);u.forEach((p,f)=>{var x,F;const h=c.arguments[f];if(h.$kind!=="Input")return;const y=r[h.Input];if(!y.UnresolvedPure&&!y.UnresolvedObject)return;const w=((x=y.UnresolvedPure)==null?void 0:x.value)??((F=y.UnresolvedObject)==null?void 0:F.objectId),j=aa(p.body);if(j){h.type="pure",r[r.indexOf(y)]=kt.Pure(j.serialize(w));return}if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);h.type="object";const U=y.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:w}}:y;r[h.Input]=U})}})}function BT(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function tu(t,e,r){if(t.$kind!=="Input")return;const n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=kt.Pure(e.serialize(n.UnresolvedPure.value)))}function DT(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=s.MoveCall._argumentTypes[i].ref!=="&"||r}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(r=!0)}),r}function UT(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=RT(s.MoveCall._argumentTypes[i])||r}}),r}function RT(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function ts(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function zT(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))}function VT(t){function e(r){return t(r)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:n})=>s=>s.moveCall({typeArguments:[r],target:`0x1::option::${n===null?"none":"some"}`,arguments:n===null?[]:[s.object(n)]}),e}function LT(t){function e(r,n){if(typeof r=="string")return t(Mn(r).serialize(n));if(r instanceof Uint8Array||ec(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=r=>t(T.U8.serialize(r)),e.u16=r=>t(T.U16.serialize(r)),e.u32=r=>t(T.U32.serialize(r)),e.u64=r=>t(T.U64.serialize(r)),e.u128=r=>t(T.U128.serialize(r)),e.u256=r=>t(T.U256.serialize(r)),e.bool=r=>t(T.Bool.serialize(r)),e.string=r=>t(T.String.serialize(r)),e.address=r=>t(T.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(T.vector(Mn(r)).serialize(n)),e.option=(r,n)=>t(T.option(Mn(r)).serialize(n)),e}function Mn(t){switch(t){case"u8":return T.u8();case"u16":return T.u16();case"u32":return T.u32();case"u64":return T.u64();case"u128":return T.u128();case"u256":return T.u256();case"bool":return T.bool();case"string":return T.string();case"id":case"address":return T.Address}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[r,n]=e.slice(1);return r==="vector"?T.vector(Mn(n)):T.option(Mn(n))}throw new Error(`Invalid Pure type name: ${t}`)}function qT(t,e){const r=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),lr(n,{dkLen:32})}function ru(t){return q(t).replace("0x","")}class Ke{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const n=T.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return Ke.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){const r=T.TransactionData.parse(e),n=r==null?void 0:r.V1,s=n.kind.ProgrammableTransaction;if(!n||!s)throw new Error("Unable to deserialize from bytes.");return Ke.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new Ke(Y(Es,e)):new Ke(Y(Es,vT(e)))}static getDigestFromBytes(e){const r=qT("TransactionData",e);return li(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const s=this.inputs,i=this.commands,a={ProgrammableTransaction:{inputs:s,commands:i}};if(n)return T.TransactionKind.serialize(a,{maxSize:e}).toBytes();const o=(r==null?void 0:r.expiration)??this.expiration,c=(r==null?void 0:r.sender)??this.sender,l={...this.gasData,...r==null?void 0:r.gasConfig,...r==null?void 0:r.gasData};if(!c)throw new Error("Missing transaction sender");if(!l.budget)throw new Error("Missing gas budget");if(!l.payment)throw new Error("Missing gas payment");if(!l.price)throw new Error("Missing gas price");const u={sender:ru(c),expiration:o||{None:!0},gasData:{payment:l.payment,owner:ru(this.gasData.owner??c),price:BigInt(l.price),budget:BigInt(l.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:i}}};return T.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,r){const n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,s)=>(n.$kind==="Input"&&n.Input===e&&r(n,s),n))}mapArguments(e){for(const r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(s=>e(s,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(s=>e(s,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(s=>e(s,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(s=>e(s,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(s=>e(s,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":const n=r.$Intent.inputs;r.$Intent.inputs={};for(const[s,i]of Object.entries(n))r.$Intent.inputs[s]=Array.isArray(i)?i.map(a=>e(a,r)):e(i,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}const n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>e&&(s.Result+=n);break;case"NestedResult":s.NestedResult[0]>e&&(s.NestedResult[0]+=n);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return Ke.getDigestFromBytes(e)}snapshot(){return Y(Es,this)}}function nu(t){if(typeof t=="string")return q(t);if(t.Object)return t.Object.ImmOrOwnedObject?q(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?q(t.Object.Receiving.objectId):q(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return q(t.UnresolvedObject.objectId)}var _g=t=>{throw TypeError(t)},ic=(t,e,r)=>e.has(t)||_g("Cannot "+r),D=(t,e,r)=>(ic(t,e,"read from private field"),r?r.call(t):e.get(t)),sn=(t,e,r)=>e.has(t)?_g("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Yt=(t,e,r,n)=>(ic(t,e,"write to private field"),e.set(t,r),r),bt=(t,e,r)=>(ic(t,e,"access private method"),r),bn,Nn,nr,z,Ve,js,ac,ua,oc;function FT(t){const e={$kind:"Result",Result:t},r=[],n=s=>r[s]??(r[s]={$kind:"NestedResult",NestedResult:[t,s]});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,i){if(i in s)return Reflect.get(s,i);if(i===Symbol.iterator)return function*(){let o=0;for(;;)yield n(o),o++};if(typeof i=="symbol")return;const a=parseInt(i,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}const wg=Symbol.for("@mysten/transaction");function Og(t){return!!t&&typeof t=="object"&&t[wg]===!0}const su={buildPlugins:new Map,serializationPlugins:new Map},Mi=Symbol.for("@mysten/transaction/registry");function an(){try{const t=globalThis;return t[Mi]||(t[Mi]=su),t[Mi]}catch{return su}}const GT=class la{constructor(){sn(this,Ve),sn(this,bn),sn(this,Nn),sn(this,nr,new Map),sn(this,z),this.object=VT(r=>{var i,a;if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Rs(Z,r))return r;const n=nu(r),s=D(this,z).inputs.find(o=>n===nu(o));return(i=s==null?void 0:s.Object)!=null&&i.SharedObject&&typeof r=="object"&&((a=r.Object)!=null&&a.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||r.Object.SharedObject.mutable),s?{$kind:"Input",Input:D(this,z).inputs.indexOf(s),type:"object"}:D(this,z).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:q(r)}}:r)});const e=an();Yt(this,z,new Ke),Yt(this,Nn,[...e.buildPlugins.values()]),Yt(this,bn,[...e.serializationPlugins.values()])}static fromKind(e){const r=new la;return Yt(r,z,Ke.fromKindBytes(typeof e=="string"?ce(e):e)),r}static from(e){const r=new la;return Og(e)?Yt(r,z,new Ke(e.getData())):typeof e!="string"||!e.startsWith("{")?Yt(r,z,Ke.fromBytes(typeof e=="string"?ce(e):e)):Yt(r,z,Ke.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){an().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){an().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){an().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){an().buildPlugins.delete(e)}addSerializationPlugin(e){D(this,bn).push(e)}addBuildPlugin(e){D(this,Nn).push(e)}addIntentResolver(e,r){if(D(this,nr).has(e)&&D(this,nr).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);D(this,nr).set(e,r)}setSender(e){D(this,z).sender=e}setSenderIfNotSet(e){D(this,z).sender||(D(this,z).sender=e)}setExpiration(e){D(this,z).expiration=e?Y(vg,e):null}setGasPrice(e){D(this,z).gasConfig.price=String(e)}setGasBudget(e){D(this,z).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){D(this,z).gasData.budget==null&&(D(this,z).gasConfig.budget=String(e))}setGasOwner(e){D(this,z).gasConfig.owner=e}setGasPayment(e){D(this,z).gasConfig.payment=e.map(r=>Y(qt,r))}get blockData(){return eu(D(this,z).snapshot())}getData(){return D(this,z).snapshot()}get[wg](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:LT(e=>ec(e)?D(this,z).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):D(this,z).addInput("pure",Rs(Yc,e)?Y(Yc,e):e instanceof Uint8Array?kt.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(kt.ObjectRef(...e))}receivingRef(...e){return this.object(kt.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(kt.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const r=D(this,z).commands.push(e);return FT(r-1)}splitCoins(e,r){return this.add(Xt.SplitCoins(typeof e=="string"?this.object(e):bt(this,Ve,ac).call(this,e),r.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):bt(this,Ve,js).call(this,n))))}mergeCoins(e,r){return this.add(Xt.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(Xt.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:s}){return this.add(Xt.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(s)}))}moveCall({arguments:e,...r}){return this.add(Xt.MoveCall({...r,arguments:e==null?void 0:e.map(n=>bt(this,Ve,js).call(this,n))}))}transferObjects(e,r){return this.add(Xt.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):bt(this,Ve,js).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(Xt.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify(eu(D(this,z).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(Y(ET,D(this,z).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){const{signer:r,...n}=e,s=await this.build(n);return r.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await bt(this,Ve,ua).call(this,e),D(this,z).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await bt(this,Ve,ua).call(this,e),D(this,z).getDigest()}async prepareForSerialization(e){var s;const r=new Set;for(const i of D(this,z).commands)i.$Intent&&r.add(i.$Intent.name);const n=[...D(this,bn)];for(const i of r)if(!((s=e.supportedIntents)!=null&&s.includes(i))){if(!D(this,nr).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(D(this,nr).get(i))}await bt(this,Ve,oc).call(this,n,e)}};bn=new WeakMap;Nn=new WeakMap;nr=new WeakMap;z=new WeakMap;Ve=new WeakSet;js=function(t){return ec(t)?this.pure(t):bt(this,Ve,ac).call(this,t)};ac=function(t){return typeof t=="function"?Y(Z,t(this)):Y(Z,t)};ua=async function(t){if(!t.onlyTransactionKind&&!D(this,z).sender)throw new Error("Missing transaction sender");await bt(this,Ve,oc).call(this,[...D(this,Nn),IT],t)};oc=async function(t,e){const r=n=>{if(n>=t.length)return()=>{};const s=t[n];return async()=>{const i=r(n+1);let a=!1,o=!1;if(await s(D(this,z),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);a=!0,await i(),o=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!o)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()};let on=GT;const WT=Symbol.for("@mysten/SuiClient");class JT{get[WT](){return!0}constructor(e){this.transport=e.transport??new e1({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!wt(q(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!wt(q(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!wt(q(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!wt(q(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!wt(q(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!us(St(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!us(St(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Hc(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Hc(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:s}){const i=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:H(e),Array.isArray(r)?r:[r],n]});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:i.digest})}catch{}return i}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(r.toSuiAddress()),s=await e.build({client:this}));const{signature:i,bytes:a}=await r.signTransaction(s);return this.executeTransactionBlock({transactionBlock:a,signature:i,...n})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!wt(q(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!us(St(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var n;let r;if(Og(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=H(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=H(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,(n=e.gasPrice)==null?void 0:n.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:H(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!us(St(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),r=qn(e.digest);return Vr(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){const{nextCursor:n,hasNextPage:s,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:s,nextCursor:n,data:i.map(a=>U1(a,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...s}){const i=AbortSignal.timeout(r),a=new Promise((o,c)=>{i.addEventListener("abort",()=>c(i.reason))});for(a.catch(()=>{});!i.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sg=tb(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),KT=Sg.create(BigInt("-3")),HT=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),XT=rb({a:KT,b:HT,Fp:Sg,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},nb),pa=XT;function kg(t,e){return T.IntentMessage(T.fixedArray(e.length,T.u8())).serialize({intent:{scope:{[t]:!0},version:{V0:!0},appId:{Sui:!0}},value:e}).toBytes()}function Ft(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}class Kr{equals(e){return Ft(this.toRawBytes(),e.toRawBytes())}toBase64(){return H(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return H(e)}verifyWithIntent(e,r,n){const s=kg(n,e),i=lr(s,{dkLen:32});return this.verify(i,r)}verifyPersonalMessage(e,r){return this.verifyWithIntent(T.vector(T.u8()).serialize(e).toBytes(),r,"PersonalMessage")}verifyTransaction(e,r){return this.verifyWithIntent(e,r,"TransactionData")}toSuiBytes(){const e=this.toRawBytes(),r=new Uint8Array(e.length+1);return r.set([this.flag()]),r.set(e,1),r}toSuiAddress(){return q(wa(lr(this.toSuiBytes(),{dkLen:32})).slice(0,Qn*2))}}const Xe={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},YT={ED25519:32,Secp256k1:33,Secp256r1:33},$g={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"},da=33,fa=64;class Eg extends Kr{constructor(e){if(super(),typeof e=="string"?this.data=ce(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==da)throw new Error(`Invalid public key input. Expected ${da} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Xe.Passkey}async verify(e,r){const n=jg(r),s=JSON.parse(n.clientDataJson);if(s.type!=="webauthn.get")return!1;const i=ce(s.challenge.replace(/-/g,"+").replace(/_/g,"/"));if(!Ft(e,i))return!1;const a=n.userSignature.slice(1+fa);if(!Ft(this.toRawBytes(),a))return!1;const o=new Uint8Array([...n.authenticatorData,...Ns(n.clientDataJson)]),c=n.userSignature.slice(1,fa+1);return pa.verify(c,Ns(o),a)}}Eg.SIZE=da;function jg(t){const e=typeof t=="string"?ce(t):t;if(e[0]!==Xe.Passkey)throw new Error("Invalid signature scheme");const r=fg.parse(e.slice(1));return{signatureScheme:"Passkey",serializedSignature:H(e),signature:e,authenticatorData:r.authenticatorData,clientDataJson:r.clientDataJson,userSignature:new Uint8Array(r.userSignature),publicKey:new Uint8Array(r.userSignature.slice(1+fa))}}function ZT(t,e){if(!!!t)throw new Error(e)}const Tg={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},QT=new Set(Object.keys(Tg));function iu(t){const e=t==null?void 0:t.kind;return typeof e=="string"&&QT.has(e)}var au;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(au||(au={}));var ha;(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(ha||(ha={}));function ou(t){return t===9||t===32}function eP(t,e){const r=t.replace(/"""/g,'\\"""'),n=r.split(/\r\n|[\n\r]/g),s=n.length===1,i=n.length>1&&n.slice(1).every(h=>h.length===0||ou(h.charCodeAt(0))),a=r.endsWith('\\"""'),o=t.endsWith('"')&&!a,c=t.endsWith("\\"),l=o||c,u=!s||t.length>70||l||i||a;let p="";const f=s&&ou(t.charCodeAt(0));return(u&&!f||i)&&(p+=`
`),p+=r,(u||l)&&(p+=`
`),'"""'+p+'"""'}const tP=10,Pg=2;function rP(t){return pi(t,[])}function pi(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return nP(t,e);default:return String(t)}}function nP(t,e){if(t===null)return"null";if(e.includes(t))return"[Circular]";const r=[...e,t];if(sP(t)){const n=t.toJSON();if(n!==t)return typeof n=="string"?n:pi(n,r)}else if(Array.isArray(t))return aP(t,r);return iP(t,r)}function sP(t){return typeof t.toJSON=="function"}function iP(t,e){const r=Object.entries(t);return r.length===0?"{}":e.length>Pg?"["+oP(t)+"]":"{ "+r.map(([s,i])=>s+": "+pi(i,e)).join(", ")+" }"}function aP(t,e){if(t.length===0)return"[]";if(e.length>Pg)return"[Array]";const r=Math.min(tP,t.length),n=t.length-r,s=[];for(let i=0;i<r;++i)s.push(pi(t[i],e));return n===1?s.push("... 1 more item"):n>1&&s.push(`... ${n} more items`),"["+s.join(", ")+"]"}function oP(t){const e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){const r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function cP(t){return`"${t.replace(uP,lP)}"`}const uP=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function lP(t){return pP[t.charCodeAt(0)]}const pP=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],dP=Object.freeze({});function fP(t,e,r=Tg){const n=new Map;for(const U of Object.values(ha))n.set(U,hP(e,U));let s,i=Array.isArray(t),a=[t],o=-1,c=[],l=t,u,p;const f=[],h=[];do{o++;const U=o===a.length,x=U&&c.length!==0;if(U){if(u=h.length===0?void 0:f[f.length-1],l=p,p=h.pop(),x)if(i){l=l.slice();let W=0;for(const[fi,pc]of c){const dc=fi-W;pc===null?(l.splice(dc,1),W++):l[dc]=pc}}else{l=Object.defineProperties({},Object.getOwnPropertyDescriptors(l));for(const[W,fi]of c)l[W]=fi}o=s.index,a=s.keys,c=s.edits,i=s.inArray,s=s.prev}else if(p){if(u=i?o:a[o],l=p[u],l==null)continue;f.push(u)}let F;if(!Array.isArray(l)){var y,w;iu(l)||ZT(!1,`Invalid AST Node: ${rP(l)}.`);const W=U?(y=n.get(l.kind))===null||y===void 0?void 0:y.leave:(w=n.get(l.kind))===null||w===void 0?void 0:w.enter;if(F=W==null?void 0:W.call(e,l,u,p,f,h),F===dP)break;if(F===!1){if(!U){f.pop();continue}}else if(F!==void 0&&(c.push([u,F]),!U))if(iu(F))l=F;else{f.pop();continue}}if(F===void 0&&x&&c.push([u,l]),U)f.pop();else{var j;s={inArray:i,index:o,keys:a,edits:c,prev:s},i=Array.isArray(l),a=i?l:(j=r[l.kind])!==null&&j!==void 0?j:[],o=-1,c=[],p&&h.push(p),p=l}}while(s!==void 0);return c.length!==0?c[c.length-1][1]:t}function hP(t,e){const r=t[e];return typeof r=="object"?r:typeof r=="function"?{enter:r,leave:void 0}:{enter:t.enter,leave:t.leave}}function yP(t){return fP(t,bP)}const gP=80,bP={Name:{leave:t=>t.value},Variable:{leave:t=>"$"+t.name},Document:{leave:t=>$(t.definitions,`

`)},OperationDefinition:{leave(t){const e=N("(",$(t.variableDefinitions,", "),")"),r=$([t.operation,$([t.name,e]),$(t.directives," ")]," ");return(r==="query"?"":r+" ")+t.selectionSet}},VariableDefinition:{leave:({variable:t,type:e,defaultValue:r,directives:n})=>t+": "+e+N(" = ",r)+N(" ",$(n," "))},SelectionSet:{leave:({selections:t})=>Ne(t)},Field:{leave({alias:t,name:e,arguments:r,directives:n,selectionSet:s}){const i=N("",t,": ")+e;let a=i+N("(",$(r,", "),")");return a.length>gP&&(a=i+N(`(
`,Ts($(r,`
`)),`
)`)),$([a,$(n," "),s]," ")}},Argument:{leave:({name:t,value:e})=>t+": "+e},FragmentSpread:{leave:({name:t,directives:e})=>"..."+t+N(" ",$(e," "))},InlineFragment:{leave:({typeCondition:t,directives:e,selectionSet:r})=>$(["...",N("on ",t),$(e," "),r]," ")},FragmentDefinition:{leave:({name:t,typeCondition:e,variableDefinitions:r,directives:n,selectionSet:s})=>`fragment ${t}${N("(",$(r,", "),")")} on ${e} ${N("",$(n," ")," ")}`+s},IntValue:{leave:({value:t})=>t},FloatValue:{leave:({value:t})=>t},StringValue:{leave:({value:t,block:e})=>e?eP(t):cP(t)},BooleanValue:{leave:({value:t})=>t?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:t})=>t},ListValue:{leave:({values:t})=>"["+$(t,", ")+"]"},ObjectValue:{leave:({fields:t})=>"{"+$(t,", ")+"}"},ObjectField:{leave:({name:t,value:e})=>t+": "+e},Directive:{leave:({name:t,arguments:e})=>"@"+t+N("(",$(e,", "),")")},NamedType:{leave:({name:t})=>t},ListType:{leave:({type:t})=>"["+t+"]"},NonNullType:{leave:({type:t})=>t+"!"},SchemaDefinition:{leave:({description:t,directives:e,operationTypes:r})=>N("",t,`
`)+$(["schema",$(e," "),Ne(r)]," ")},OperationTypeDefinition:{leave:({operation:t,type:e})=>t+": "+e},ScalarTypeDefinition:{leave:({description:t,name:e,directives:r})=>N("",t,`
`)+$(["scalar",e,$(r," ")]," ")},ObjectTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:s})=>N("",t,`
`)+$(["type",e,N("implements ",$(r," & ")),$(n," "),Ne(s)]," ")},FieldDefinition:{leave:({description:t,name:e,arguments:r,type:n,directives:s})=>N("",t,`
`)+e+(cu(r)?N(`(
`,Ts($(r,`
`)),`
)`):N("(",$(r,", "),")"))+": "+n+N(" ",$(s," "))},InputValueDefinition:{leave:({description:t,name:e,type:r,defaultValue:n,directives:s})=>N("",t,`
`)+$([e+": "+r,N("= ",n),$(s," ")]," ")},InterfaceTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:s})=>N("",t,`
`)+$(["interface",e,N("implements ",$(r," & ")),$(n," "),Ne(s)]," ")},UnionTypeDefinition:{leave:({description:t,name:e,directives:r,types:n})=>N("",t,`
`)+$(["union",e,$(r," "),N("= ",$(n," | "))]," ")},EnumTypeDefinition:{leave:({description:t,name:e,directives:r,values:n})=>N("",t,`
`)+$(["enum",e,$(r," "),Ne(n)]," ")},EnumValueDefinition:{leave:({description:t,name:e,directives:r})=>N("",t,`
`)+$([e,$(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:t,name:e,directives:r,fields:n})=>N("",t,`
`)+$(["input",e,$(r," "),Ne(n)]," ")},DirectiveDefinition:{leave:({description:t,name:e,arguments:r,repeatable:n,locations:s})=>N("",t,`
`)+"directive @"+e+(cu(r)?N(`(
`,Ts($(r,`
`)),`
)`):N("(",$(r,", "),")"))+(n?" repeatable":"")+" on "+$(s," | ")},SchemaExtension:{leave:({directives:t,operationTypes:e})=>$(["extend schema",$(t," "),Ne(e)]," ")},ScalarTypeExtension:{leave:({name:t,directives:e})=>$(["extend scalar",t,$(e," ")]," ")},ObjectTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>$(["extend type",t,N("implements ",$(e," & ")),$(r," "),Ne(n)]," ")},InterfaceTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>$(["extend interface",t,N("implements ",$(e," & ")),$(r," "),Ne(n)]," ")},UnionTypeExtension:{leave:({name:t,directives:e,types:r})=>$(["extend union",t,$(e," "),N("= ",$(r," | "))]," ")},EnumTypeExtension:{leave:({name:t,directives:e,values:r})=>$(["extend enum",t,$(e," "),Ne(r)]," ")},InputObjectTypeExtension:{leave:({name:t,directives:e,fields:r})=>$(["extend input",t,$(e," "),Ne(r)]," ")}};function $(t,e=""){var r;return(r=t==null?void 0:t.filter(n=>n).join(e))!==null&&r!==void 0?r:""}function Ne(t){return N(`{
`,Ts($(t,`
`)),`
}`)}function N(t,e,r=""){return e!=null&&e!==""?t+e+r:""}function Ts(t){return N("  ",t.replace(/\n/g,`
  `))}function cu(t){var e;return(e=t==null?void 0:t.some(r=>r.includes(`
`)))!==null&&e!==void 0?e:!1}var Ig=t=>{throw TypeError(t)},xg=(t,e,r)=>e.has(t)||Ig("Cannot "+r),ls=(t,e,r)=>(xg(t,e,"read from private field"),r?r.call(t):e.get(t)),ps=(t,e,r)=>e.has(t)?Ig("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ds=(t,e,r,n)=>(xg(t,e,"write to private field"),e.set(t,r),r),Ps,Is,xs,Cs;class vP extends Error{}class mP{constructor({url:e,fetch:r=fetch,headers:n={},queries:s={}}){ps(this,Ps),ps(this,Is),ps(this,xs),ps(this,Cs),ds(this,Ps,e),ds(this,Is,s),ds(this,xs,n),ds(this,Cs,(...i)=>r(...i))}async query(e){const r=await ls(this,Cs).call(this,ls(this,Ps),{method:"POST",headers:{"Content-Type":"application/json",...ls(this,xs)},body:JSON.stringify({query:typeof e.query=="string"?String(e.query):yP(e.query),variables:e.variables,extensions:e.extensions,operationName:e.operationName})});if(!r.ok)throw new vP(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(e,r){return this.query({...r,query:ls(this,Is)[e]})}}Ps=new WeakMap;Is=new WeakMap;xs=new WeakMap;Cs=new WeakMap;var fs={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"};class _P extends Error{constructor(e,r,n,s,i,a,o){super(e),this.name="GraphQLError",this.message=e,i&&(this.path=i),r&&(this.nodes=Array.isArray(r)?r:[r]),n&&(this.source=n),s&&(this.positions=s),a&&(this.originalError=a);var c=o;if(!c&&a){var l=a.extensions;l&&typeof l=="object"&&(c=l)}this.extensions=c||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}}var V,P;function oe(t){return new _P(`Syntax Error: Unexpected token at ${P} in ${t}`)}function je(t){if(t.lastIndex=P,t.test(V))return V.slice(P,P=t.lastIndex)}var hs=/ +(?=[^\s])/y;function wP(t){for(var e=t.split(`
`),r="",n=0,s=0,i=e.length-1,a=0;a<e.length;a++)hs.lastIndex=0,hs.test(e[a])&&(a&&(!n||hs.lastIndex<n)&&(n=hs.lastIndex),s=s||a,i=a);for(var o=s;o<=i;o++)o!==s&&(r+=`
`),r+=e[o].slice(n).replace(/\\"""/g,'"""');return r}function A(){for(var t=0|V.charCodeAt(P++);t===9||t===10||t===13||t===32||t===35||t===44||t===65279;t=0|V.charCodeAt(P++))if(t===35)for(;(t=V.charCodeAt(P++))!==10&&t!==13;);P--}var we=/[_A-Za-z]\w*/y,Ni=new RegExp("(?:(null|true|false)|\\$("+we.source+')|(-?\\d+)((?:\\.\\d+)?[eE][+-]?\\d+|\\.\\d+)?|("""(?:"""|(?:[\\s\\S]*?[^\\\\])"""))|("(?:"|[^\\r\\n]*?[^\\\\]"))|('+we.source+"))","y"),Dt=function(t){return t[t.Const=1]="Const",t[t.Var=2]="Var",t[t.Int=3]="Int",t[t.Float=4]="Float",t[t.BlockString=5]="BlockString",t[t.String=6]="String",t[t.Enum=7]="Enum",t}(Dt||{}),OP=/\\/;function Qs(t){var e,r;if(Ni.lastIndex=P,V.charCodeAt(P)===91){P++,A();for(var n=[];V.charCodeAt(P)!==93;)n.push(Qs(t));return P++,A(),{kind:"ListValue",values:n}}else if(V.charCodeAt(P)===123){P++,A();for(var s=[];V.charCodeAt(P)!==125;){if((e=je(we))==null||(A(),V.charCodeAt(P++)!==58))throw oe("ObjectField");A(),s.push({kind:"ObjectField",name:{kind:"Name",value:e},value:Qs(t)})}return P++,A(),{kind:"ObjectValue",fields:s}}else if((r=Ni.exec(V))!=null){if(P=Ni.lastIndex,A(),(e=r[Dt.Const])!=null)return e==="null"?{kind:"NullValue"}:{kind:"BooleanValue",value:e==="true"};if((e=r[Dt.Var])!=null){if(t)throw oe("Variable");return{kind:"Variable",name:{kind:"Name",value:e}}}else if((e=r[Dt.Int])!=null){var i;return(i=r[Dt.Float])!=null?{kind:"FloatValue",value:e+i}:{kind:"IntValue",value:e}}else{if((e=r[Dt.BlockString])!=null)return{kind:"StringValue",value:wP(e.slice(3,-3)),block:!0};if((e=r[Dt.String])!=null)return{kind:"StringValue",value:OP.test(e)?JSON.parse(e):e.slice(1,-1),block:!1};if((e=r[Dt.Enum])!=null)return{kind:"EnumValue",value:e}}}throw oe("Value")}function Cg(t){if(V.charCodeAt(P)===40){var e=[];P++,A();var r;do{if((r=je(we))==null||(A(),V.charCodeAt(P++)!==58))throw oe("Argument");A(),e.push({kind:"Argument",name:{kind:"Name",value:r},value:Qs(t)})}while(V.charCodeAt(P)!==41);return P++,A(),e}}function Br(t){if(V.charCodeAt(P)===64){var e=[],r;do{if(P++,(r=je(we))==null)throw oe("Directive");A(),e.push({kind:"Directive",name:{kind:"Name",value:r},arguments:Cg(t)})}while(V.charCodeAt(P)===64);return e}}function SP(){for(var t,e=0;V.charCodeAt(P)===91;)e++,P++,A();if((t=je(we))==null)throw oe("NamedType");A();var r={kind:"NamedType",name:{kind:"Name",value:t}};do if(V.charCodeAt(P)===33&&(P++,A(),r={kind:"NonNullType",type:r}),e){if(V.charCodeAt(P++)!==93)throw oe("NamedType");A(),r={kind:"ListType",type:r}}while(e--);return r}var Bi=new RegExp("(?:(\\.{3})|("+we.source+"))","y"),ya=function(t){return t[t.Spread=1]="Spread",t[t.Name=2]="Name",t}(ya||{});function ei(){var t=[],e,r;do if(Bi.lastIndex=P,(r=Bi.exec(V))!=null){if(P=Bi.lastIndex,r[ya.Spread]!=null){A();var n=je(we);if(n!=null&&n!=="on")A(),t.push({kind:"FragmentSpread",name:{kind:"Name",value:n},directives:Br(!1)});else{if(A(),n==="on"){if((n=je(we))==null)throw oe("NamedType");A()}var s=Br(!1);if(V.charCodeAt(P++)!==123)throw oe("InlineFragment");A(),t.push({kind:"InlineFragment",typeCondition:n?{kind:"NamedType",name:{kind:"Name",value:n}}:void 0,directives:s,selectionSet:ei()})}}else if((e=r[ya.Name])!=null){var i=void 0;if(A(),V.charCodeAt(P)===58){if(P++,A(),i=e,(e=je(we))==null)throw oe("Field");A()}var a=Cg(!1);A();var o=Br(!1),c=void 0;V.charCodeAt(P)===123&&(P++,A(),c=ei()),t.push({kind:"Field",alias:i?{kind:"Name",value:i}:void 0,name:{kind:"Name",value:e},arguments:a,directives:o,selectionSet:c})}}else throw oe("SelectionSet");while(V.charCodeAt(P)!==125);return P++,A(),{kind:"SelectionSet",selections:t}}function kP(){var t,e;if((t=je(we))==null||(A(),je(we)!=="on")||(A(),(e=je(we))==null))throw oe("FragmentDefinition");A();var r=Br(!1);if(V.charCodeAt(P++)!==123)throw oe("FragmentDefinition");return A(),{kind:"FragmentDefinition",name:{kind:"Name",value:t},typeCondition:{kind:"NamedType",name:{kind:"Name",value:e}},directives:r,selectionSet:ei()}}var $P=/(?:query|mutation|subscription|fragment)/y;function EP(t){var e,r,n;if(t&&(A(),e=je(we),r=function(){if(A(),V.charCodeAt(P)===40){var i=[];P++,A();var a;do{if(V.charCodeAt(P++)!==36||(a=je(we))==null)throw oe("Variable");if(A(),V.charCodeAt(P++)!==58)throw oe("VariableDefinition");A();var o=SP(),c=void 0;V.charCodeAt(P)===61&&(P++,A(),c=Qs(!0)),A(),i.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:a}},type:o,defaultValue:c,directives:Br(!0)})}while(V.charCodeAt(P)!==41);return P++,A(),i}}(),n=Br(!1)),V.charCodeAt(P)===123)return P++,A(),{kind:"OperationDefinition",operation:t||"query",name:e?{kind:"Name",value:e}:void 0,variableDefinitions:r,directives:n,selectionSet:ei()}}function jP(t,e){return P=0,function(n,s){var i,a;A();var o=[];do if((i=je($P))==="fragment")A(),o.push(kP());else if((a=EP(i))!=null)o.push(a);else throw oe("Document");while(P<n.length);{var c;return{kind:"Document",definitions:o,set loc(l){c=l},get loc(){return c||(c={start:0,end:n.length,startToken:void 0,endToken:void 0,source:{body:n,name:"graphql.web",locationOffset:{line:1,column:1}}}),c}}}}(V=typeof t.body=="string"?t.body:t)}var uu=0,Di=new Set;function Ag(){function t(e,r){var n=jP(e).definitions,s=new Set;for(var i of r||[])for(var a of i.definitions)a.kind===fs.FRAGMENT_DEFINITION&&!s.has(a)&&(n.push(a),s.add(a));var o;(o=n[0].kind===fs.FRAGMENT_DEFINITION)&&n[0].directives&&(n[0].directives=n[0].directives.filter(l=>l.name.value!=="_unmask"));var c;return{kind:fs.DOCUMENT,definitions:n,get loc(){if(!c&&o){var l=e+function(p){try{uu++;var f="";for(var h of p)if(!Di.has(h)){Di.add(h);var{loc:y}=h;y&&(f+=y.source.body)}return f}finally{--uu==0&&Di.clear()}}(r||[]);return{start:0,end:l.length,source:{body:l,name:"GraphQLTada",locationOffset:{line:1,column:1}}}}return c},set loc(l){c=l}}}return t.scalar=function(r,n){return n},t.persisted=function(r,n){return{kind:fs.DOCUMENT,definitions:n?n.definitions:[],documentId:r}},t}Ag();const TP=Ag();function PP(t){if(t.length!==1)throw new Error("Invalid base64Url character: "+t);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(r===-1)throw new Error("Invalid base64Url character: "+t);const n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function IP(t){let e=[];for(let r=0;r<t.length;r++){const n=t.charAt(r),s=PP(n);e=e.concat(s)}return e}function xP(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let r=IP(t);const n=e%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);const s=(e+t.length-1)%4;if(s!==3)if(s===2)r=r.slice(0,r.length-2);else if(s===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(r.length%8!==0)throw new Error("We should never reach here...");const i=new Uint8Array(Math.floor(r.length/8));let a=0;for(let o=0;o<r.length;o+=8){const c=r.slice(o,o+8),l=parseInt(c.join(""),2);i[a++]=l}return new TextDecoder().decode(i)}function CP(t){if(!(t.slice(-1)==="}"||t.slice(-1)===","))throw new Error("Invalid claim");const e=JSON.parse("{"+t.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");const r=Object.keys(e)[0];return[r,e[r]]}function AP(t,e){const r=xP(t.value,t.indexMod4),[n,s]=CP(r);if(n!==e)throw new Error(`Invalid field name: found ${n} expected ${e}`);return s}const MP=d.struct("ZkLoginSignature",{inputs:d.struct("ZkLoginSignatureInputs",{proofPoints:d.struct("ZkLoginSignatureInputsProofPoints",{a:d.vector(d.string()),b:d.vector(d.vector(d.string())),c:d.vector(d.string())}),issBase64Details:d.struct("ZkLoginSignatureInputsClaim",{value:d.string(),indexMod4:d.u8()}),headerBase64:d.string(),addressSeed:d.string()}),maxEpoch:d.u64(),userSignature:d.vector(d.u8())});function NP(t){return MP.parse(typeof t=="string"?ce(t):t)}function BP(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return e;return-1}function cc(t,e){const r=t.toString(16);return sb(r.padStart(e*2,"0").slice(-e*2))}function DP(t,e){const r=cc(t,e),n=BP(r);return n===-1?new Uint8Array([0]):r.slice(n)}var Mg=t=>{throw TypeError(t)},Ng=(t,e,r)=>e.has(t)||Mg("Cannot "+r),ht=(t,e,r)=>(Ng(t,e,"read from private field"),r?r.call(t):e.get(t)),Ui=(t,e,r)=>e.has(t)?Mg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),mr=(t,e,r,n)=>(Ng(t,e,"write to private field"),e.set(t,r),r),De,vn,mn;const UP=class ga extends Kr{constructor(e,{client:r}={}){super(),Ui(this,De),Ui(this,vn),Ui(this,mn),mr(this,vn,r),typeof e=="string"?mr(this,De,ce(e)):e instanceof Uint8Array?mr(this,De,e):mr(this,De,Uint8Array.from(e)),mr(this,mn,ht(this,De).length!==ht(this,De)[0]+1+32),ht(this,mn)&&mr(this,De,lu(ht(this,De)))}equals(e){return super.equals(e)}toSuiAddress(){if(ht(this,mn)){const e=lu(ht(this,De),!0),r=new Uint8Array(e.length+1);return r[0]=this.flag(),r.set(e,1),q(wa(lr(r,{dkLen:32})).slice(0,Qn*2))}return super.toSuiAddress()}toRawBytes(){return ht(this,De)}flag(){return Xe.ZkLogin}async verify(e,r){throw Error("does not support")}verifyPersonalMessage(e,r){const n=ba(r),s=new ga(n.publicKey).toSuiAddress();return pu({address:s,bytes:H(e),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:ht(this,vn)})}verifyTransaction(e,r){const n=ba(r),s=new ga(n.publicKey).toSuiAddress();return pu({address:s,bytes:H(e),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:ht(this,vn)})}};De=new WeakMap;vn=new WeakMap;mn=new WeakMap;let Bg=UP;function Dg(t,e,r){const n=cc(t,32),s=new TextEncoder().encode(e),i=new Uint8Array(1+s.length+n.length);return i.set([s.length],0),i.set(s,1),i.set(n,1+s.length),new Bg(i,r)}const RP=TP(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function lu(t,e=!1){const r=t[0]+1,n=BigInt(`0x${Vr(t.slice(r))}`),s=e?DP(n,32):cc(n,32),i=new Uint8Array(r+s.length);return i.set(t.slice(0,r),0),i.set(s,r),i}async function pu({address:t,bytes:e,signature:r,intentScope:n,client:s=new mP({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){var a,o;const i=await s.query({query:RP,variables:{bytes:e,signature:r,intentScope:n,author:t}});return((a=i.data)==null?void 0:a.verifyZkloginSignature.success)===!0&&((o=i.data)==null?void 0:o.verifyZkloginSignature.errors.length)===0}function ba(t){const e=typeof t=="string"?ce(t):t;if(e[0]!==Xe.ZkLogin)throw new Error("Invalid signature scheme");const r=e.slice(1),{inputs:n,maxEpoch:s,userSignature:i}=NP(r),{issBase64Details:a,addressSeed:o}=n,c=AP(a,"iss"),l=Dg(BigInt(o),c);return{serializedSignature:H(e),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:s,userSignature:i,iss:c,addressSeed:BigInt(o)},signature:e,publicKey:l.toRawBytes()}}function zP({signature:t,signatureScheme:e,publicKey:r}){if(!r)throw new Error("`publicKey` is required");const n=r.toRawBytes(),s=new Uint8Array(1+t.length+n.length);return s.set([Xe[e]]),s.set(t,1),s.set(n,1+t.length),H(s)}function Lr(t){const e=ce(t),r=$g[e[0]];switch(r){case"Passkey":return jg(t);case"MultiSig":const n=T.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:r,multisig:n,bytes:e};case"ZkLogin":return ba(t);case"ED25519":case"Secp256k1":case"Secp256r1":const s=YT[r],i=e.slice(1,e.length-s),a=e.slice(1+i.length);return{serializedSignature:t,signatureScheme:r,signature:i,publicKey:a,bytes:e};default:throw new Error("Unsupported signature scheme")}}var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.bech32m=Fn.bech32=void 0;const ti="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Ug={};for(let t=0;t<ti.length;t++){const e=ti.charAt(t);Ug[e]=t}function Dr(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function du(t){let e=1;for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Dr(e)^n>>5}e=Dr(e);for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);e=Dr(e)^n&31}return e}function uc(t,e,r,n){let s=0,i=0;const a=(1<<r)-1,o=[];for(let c=0;c<t.length;++c)for(s=s<<e|t[c],i+=e;i>=r;)i-=r,o.push(s>>i&a);if(n)i>0&&o.push(s<<r-i&a);else{if(i>=e)return"Excess padding";if(s<<r-i&a)return"Non-zero padding"}return o}function VP(t){return uc(t,8,5,!0)}function LP(t){const e=uc(t,5,8,!1);if(Array.isArray(e))return e}function qP(t){const e=uc(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function Rg(t){let e;t==="bech32"?e=1:e=734539939;function r(a,o,c){if(c=c||90,a.length+7+o.length>c)throw new TypeError("Exceeds length limit");a=a.toLowerCase();let l=du(a);if(typeof l=="string")throw new Error(l);let u=a+"1";for(let p=0;p<o.length;++p){const f=o[p];if(f>>5)throw new Error("Non 5-bit word");l=Dr(l)^f,u+=ti.charAt(f)}for(let p=0;p<6;++p)l=Dr(l);l^=e;for(let p=0;p<6;++p){const f=l>>(5-p)*5&31;u+=ti.charAt(f)}return u}function n(a,o){if(o=o||90,a.length<8)return a+" too short";if(a.length>o)return"Exceeds length limit";const c=a.toLowerCase(),l=a.toUpperCase();if(a!==c&&a!==l)return"Mixed-case string "+a;a=c;const u=a.lastIndexOf("1");if(u===-1)return"No separator character for "+a;if(u===0)return"Missing prefix for "+a;const p=a.slice(0,u),f=a.slice(u+1);if(f.length<6)return"Data too short";let h=du(p);if(typeof h=="string")return h;const y=[];for(let w=0;w<f.length;++w){const j=f.charAt(w),U=Ug[j];if(U===void 0)return"Unknown character "+j;h=Dr(h)^U,!(w+6>=f.length)&&y.push(U)}return h!==e?"Invalid checksum for "+a:{prefix:p,words:y}}function s(a,o){const c=n(a,o);if(typeof c=="object")return c}function i(a,o){const c=n(a,o);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:s,decode:i,encode:r,toWords:VP,fromWordsUnsafe:LP,fromWords:qP}}Fn.bech32=Rg("bech32");Fn.bech32m=Rg("bech32m");class FP{async signWithIntent(e,r){const n=kg(r,e),s=lr(n,{dkLen:32});return{signature:zP({signature:await this.sign(s),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:H(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){const{signature:r}=await this.signWithIntent(d.vector(d.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:H(e),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}const va=32;class zg extends Kr{constructor(e){if(super(),typeof e=="string"?this.data=ce(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==va)throw new Error(`Invalid public key input. Expected ${va} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Xe.ED25519}async verify(e,r){let n;if(typeof r=="string"){const s=Lr(r);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!Ft(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return Kg.sign.detached.verify(e,n,this.toRawBytes())}}zg.SIZE=va;const ma=33;class Vg extends Kr{constructor(e){if(super(),typeof e=="string"?this.data=ce(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==ma)throw new Error(`Invalid public key input. Expected ${ma} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Xe.Secp256k1}async verify(e,r){let n;if(typeof r=="string"){const s=Lr(r);if(s.signatureScheme!=="Secp256k1")throw new Error("Invalid signature scheme");if(!Ft(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return gc.verify(gc.Signature.fromCompact(n),Ns(e),this.toRawBytes())}}Vg.SIZE=ma;const _a=33;class Lg extends Kr{constructor(e){if(super(),typeof e=="string"?this.data=ce(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==_a)throw new Error(`Invalid public key input. Expected ${_a} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Xe.Secp256r1}async verify(e,r){let n;if(typeof r=="string"){const s=Lr(r);if(s.signatureScheme!=="Secp256r1")throw new Error("Invalid signature scheme");if(!Ft(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return pa.verify(pa.Signature.fromCompact(n),Ns(e),this.toRawBytes())}}Lg.SIZE=_a;var qg=t=>{throw TypeError(t)},Fg=(t,e,r)=>e.has(t)||qg("Cannot "+r),cn=(t,e,r)=>(Fg(t,e,"read from private field"),r?r.call(t):e.get(t)),fu=(t,e,r)=>e.has(t)?qg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),hu=(t,e,r,n)=>(Fg(t,e,"write to private field"),e.set(t,r),r),Er,_n;class GP extends FP{constructor(e,r=[]){var a;super(),fu(this,Er),fu(this,_n),hu(this,Er,e),hu(this,_n,r);let n=new Set,s=0;const i=e.getPublicKeys().map(({weight:o,publicKey:c})=>({weight:o,address:c.toSuiAddress()}));for(let o of r){const c=o.toSuiAddress();if(n.has(c))throw new Error("Can't create MultiSigSigner with duplicate signers");n.add(c);const l=(a=i.find(u=>u.address===c))==null?void 0:a.weight;if(!l)throw new Error(`Signer ${c} is not part of the MultiSig public key`);s+=l}if(s<e.getThreshold())throw new Error("Combined weight of signers is less than threshold")}getKeyScheme(){return"MultiSig"}getPublicKey(){return cn(this,Er)}sign(e){throw new Error("MultiSigSigner does not support signing directly. Use signTransaction or signPersonalMessage instead")}signData(e){throw new Error("MultiSigSigner does not support signing directly. Use signTransaction or signPersonalMessage instead")}async signTransaction(e){return{signature:cn(this,Er).combinePartialSignatures(await Promise.all(cn(this,_n).map(async n=>(await n.signTransaction(e)).signature))),bytes:H(e)}}async signPersonalMessage(e){return{signature:cn(this,Er).combinePartialSignatures(await Promise.all(cn(this,_n).map(async n=>(await n.signPersonalMessage(e)).signature))),bytes:H(e)}}}Er=new WeakMap;_n=new WeakMap;const un=10,yu=1;class di extends Kr{constructor(e,r={}){if(super(),typeof e=="string"?(this.rawBytes=ce(e),this.multisigPublicKey=T.MultiSigPublicKey.parse(this.rawBytes)):e instanceof Uint8Array?(this.rawBytes=e,this.multisigPublicKey=T.MultiSigPublicKey.parse(this.rawBytes)):(this.multisigPublicKey=e,this.rawBytes=T.MultiSigPublicKey.serialize(e).toBytes()),this.multisigPublicKey.threshold<1)throw new Error("Invalid threshold");const n=new Set;this.publicKeys=this.multisigPublicKey.pk_map.map(({pubKey:i,weight:a})=>{const[o,c]=Object.entries(i).filter(([u])=>u!=="$kind")[0],l=Uint8Array.from(c).toString();if(n.has(l))throw new Error("Multisig does not support duplicate public keys");if(n.add(l),a<1)throw new Error("Invalid weight");return{publicKey:lc(o,Uint8Array.from(c),r),weight:a}});const s=this.publicKeys.reduce((i,{weight:a})=>i+a,0);if(this.multisigPublicKey.threshold>s)throw new Error("Unreachable threshold");if(this.publicKeys.length>un)throw new Error(`Max number of signers in a multisig is ${un}`);if(this.publicKeys.length<yu)throw new Error(`Min number of signers in a multisig is ${yu}`)}static fromPublicKeys({threshold:e,publicKeys:r}){return new di({pk_map:r.map(({publicKey:n,weight:s})=>({pubKey:{[$g[n.flag()]]:Array.from(n.toRawBytes())},weight:s})),threshold:e})}equals(e){return super.equals(e)}toRawBytes(){return this.rawBytes}getPublicKeys(){return this.publicKeys}getThreshold(){return this.multisigPublicKey.threshold}getSigner(...e){return new GP(this,e)}toSuiAddress(){const e=1+65*un+2,r=new Uint8Array(e);r.set([Xe.MultiSig]),r.set(T.u16().serialize(this.multisigPublicKey.threshold).toBytes(),1);let n=3;for(const{publicKey:s,weight:i}of this.publicKeys){const a=s.toSuiBytes();r.set(a,n),n+=a.length,r.set([i],n++)}return q(wa(lr(r.slice(0,n),{dkLen:32})))}flag(){return Xe.MultiSig}async verify(e,r){const n=Lr(r);if(n.signatureScheme!=="MultiSig")throw new Error("Invalid signature scheme");const{multisig:s}=n;let i=0;if(!Ft(T.MultiSigPublicKey.serialize(this.multisigPublicKey).toBytes(),T.MultiSigPublicKey.serialize(s.multisig_pk).toBytes()))return!1;for(const{publicKey:a,weight:o,signature:c}of WP(s)){if(!await a.verify(e,c))return!1;i+=o}return i>=this.multisigPublicKey.threshold}combinePartialSignatures(e){var o,c;if(e.length>un)throw new Error(`Max number of signatures in a multisig is ${un}`);let r=0;const n=new Array(e.length);for(let l=0;l<e.length;l++){let u=Lr(e[l]);if(u.signatureScheme==="MultiSig")throw new Error("MultiSig is not supported inside MultiSig");let p;u.signatureScheme==="ZkLogin"?p=Dg((o=u.zkLogin)==null?void 0:o.addressSeed,(c=u.zkLogin)==null?void 0:c.iss).toRawBytes():p=u.publicKey,n[l]={[u.signatureScheme]:Array.from(u.signature.map(h=>Number(h)))};let f;for(let h=0;h<this.publicKeys.length;h++)if(Ft(p,this.publicKeys[h].publicKey.toRawBytes())){if(r&1<<h)throw new Error("Received multiple signatures from the same public key");f=h;break}if(f===void 0)throw new Error("Received signature from unknown public key");r|=1<<f}let s={sigs:n,bitmap:r,multisig_pk:this.multisigPublicKey};const i=T.MultiSig.serialize(s,{maxSize:8192}).toBytes();let a=new Uint8Array(i.length+1);return a.set([Xe.MultiSig]),a.set(i,1),H(a)}}function WP(t,e={}){let r=new Array(t.sigs.length);for(let n=0;n<t.sigs.length;n++){const[s,i]=Object.entries(t.sigs[n]).filter(([u])=>u!=="$kind")[0],a=JP(t.bitmap).at(n),o=t.multisig_pk.pk_map[a],c=Uint8Array.from(Object.values(o.pubKey)[0]);if(s==="MultiSig")throw new Error("MultiSig is not supported inside MultiSig");const l=lc(s,c,e);r[n]={signatureScheme:s,signature:Uint8Array.from(i),publicKey:l,weight:o.weight}}return r}function JP(t){if(t<0||t>1024)throw new Error("Invalid bitmap");let e=[];for(let r=0;r<10;r++)t&1<<r&&e.push(r);return Uint8Array.from(e)}async function KP(t,e,r={}){const n=HP(e,r);if(!await n.publicKey.verifyPersonalMessage(t,n.serializedSignature))throw new Error("Signature is not valid for the provided message");return n.publicKey}function HP(t,e={}){const r=Lr(t);if(r.signatureScheme==="MultiSig")return{...r,publicKey:new di(r.multisig.multisig_pk)};const n=lc(r.signatureScheme,r.publicKey,e);return{...r,publicKey:n}}function lc(t,e,r={}){switch(t){case"ED25519":return new zg(e);case"Secp256k1":return new Vg(e);case"Secp256r1":return new Lg(e);case"MultiSig":return new di(e);case"ZkLogin":return new Bg(e,r);case"Passkey":return new Eg(e);default:throw new Error(`Unsupported signature scheme ${t}`)}}const XP=bu({props:{chainId:{type:String,required:!0},chainName:String},setup(t){const e=t.chainId,r=hc({}),n=hc("");return{chainId:e,chainNamespaces:{sui:{chains:[e],defaultChain:e}},chainName:t.chainName,transaction:r,transactionResult:n,suiProvider:void 0}},components:{ConnectLayout:Hg},methods:{getProvider(){if(!Hr.provider)throw alert("Please connect a wallet first"),Error("No provider");this.suiProvider||(this.suiProvider=new wu.OKXSuiProvider(Hr.provider))},async sui_verifySignature(t){let e=!1,r="";try{const n=this.suiProvider.getAccount();console.log(`Account中获取的address：${n==null?void 0:n.address}`);let s=await KP(this.transaction.message,t.signature),i=s.toSuiAddress();console.log(`验签结果计算得到address：${i}`),console.log(`account pubkey: ${n==null?void 0:n.publicKey}`),console.log(`result pubkey: ${s.toBase64()}`),e=(n==null?void 0:n.address)===i&&(n==null?void 0:n.publicKey)===s.toBase64(),r=`address verify: ${(n==null?void 0:n.address)===i}
publicKey verify: ${(n==null?void 0:n.publicKey)===s.toBase64()}`,console.log("signature verify success: ",s)}catch(n){console.log("signature verify failed: ",n)}return{result:e,msg:r}},sui_getAccount(){try{this.getProvider()}catch(t){console.error(t.message);return}try{const t=this.suiProvider.getAccount();this.transactionResult=t?JSON.stringify(t):""}catch(t){console.log("Sui error:",t),this.transactionResult=JSON.stringify(t)}},async sui_signMessage(){try{this.getProvider()}catch(r){console.error(r.message);return}const t=[76,111,103,105,110,32,119,105,116,104,32,66,108,117,101,109,111,118,101],e=new Uint8Array(t);this.transaction={message:e};try{const r=await this.suiProvider.signMessage(this.transaction);this.transactionResult=r?JSON.stringify(r):"",r&&"signature"in r&&this.sui_verifySignature(r).then(n=>{this.transactionResult=JSON.stringify(n)})}catch(r){console.log("Sui error:",r),this.transactionResult=JSON.stringify(r)}},async sui_signPersonalMessage(){try{this.getProvider()}catch(r){console.error(r.message);return}const t=[76,111,103,105,110,32,119,105,116,104,32,66,108,117,101,109,111,118,101],e=new Uint8Array(t);this.transaction={message:e};try{const r=await this.suiProvider.signPersonalMessage(this.transaction);this.transactionResult=r?JSON.stringify(r):"",r&&"signature"in r&&this.sui_verifySignature(r).then(n=>{this.transactionResult=JSON.stringify(n)})}catch(r){console.log("Sui error:",r),this.transactionResult=JSON.stringify(r)}},async sui_signTransaction2(){try{this.getProvider()}catch(i){console.error(i.message);return}const t=109,e="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",r=new on,[n]=r.splitCoins(r.gas,[t]);r.transferObjects([n],e);const s={transactionBlock:r,account:{},chain:"sui:mainnet",options:{showEffects:!0}};this.transaction={...s,transactionBlock:JSON.stringify(r)};try{const i=await this.suiProvider.signTransaction(s);this.transactionResult=i?JSON.stringify(i):""}catch(i){console.log("Sui error:",i),this.transactionResult=JSON.stringify(i)}},async sui_requestRpc(){try{this.getProvider()}catch(t){console.error(t.message);return}Hr.provider.setDefaultChain("sui:mainnet","https://fullnode.mainnet.sui.io:443"),this.transaction={method:"suix_getBalance",params:["0x51ceab2edc89f74730e683ebee65578cb3bc9237ba6fca019438a9737cf156ae","0x168da5bf1f48dafc111b0a488fa454aca95e0b5e::usdc::USDC"]};try{const t=await Hr.provider.request(this.transaction,this.chainId);this.transactionResult=t?JSON.stringify(t):""}catch(t){console.log("Sui error:",t),this.transactionResult=JSON.stringify(t)}},async sui_signTransaction_pre_execution(){try{this.getProvider()}catch(o){console.error(o.message);return}const t=102,e="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",r=new on,[n]=r.splitCoins(r.gas,[t]);r.transferObjects([n],e);const s={transactionBlock:r,options:{showEffects:!0}},[i,a]=await this.generateTsBytesAndSerialize(s);Object.assign(s,{txBytes:i,txSerialize:a}),this.transaction={...s,transactionBlock:JSON.stringify(r)};try{const o=await this.suiProvider.signTransaction(s);this.transactionResult=o?JSON.stringify(o):""}catch(o){console.log("Sui error:",o),this.transactionResult=JSON.stringify(o)}},async sui_signAndExecuteTransaction_pre_execution(){try{this.getProvider()}catch(o){console.error(o.message);return}const t=115,e="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",r=new on,[n]=r.splitCoins(r.gas,[t]);r.transferObjects([n],e);const s={transactionBlock:r,options:{showEffects:!0}},[i,a]=await this.generateTsBytesAndSerialize(s);Object.assign(s,{txBytes:i,txSerialize:a}),this.transaction={...s,transactionBlock:JSON.stringify(r)};try{const o=await this.suiProvider.signAndExecuteTransaction(s);this.transactionResult=o?JSON.stringify(o):""}catch(o){console.log("Sui error:",o),this.transactionResult=JSON.stringify(o)}},async generateTsBytesAndSerialize(t){let e=["",""];if(!("transactionBlock"in t))return new Promise(n=>{n(e)});const r=Hr.provider.requestAccountsWithNamespace("sui");if(r.length==0)return new Promise(n=>{n(e)});try{const n="https://www.okx.com/fullnode/sui/discover/rpc",s=new JT({url:n});t.transactionBlock.setSender(r[0]);const i=await t.transactionBlock.build({client:s}),a=Xg.from(i).toString("base64"),o=await on.from(a).toJSON();e=[a,o]}catch{return new Promise(s=>{s(e)})}return new Promise(n=>{n(e)})},async sui_signAndExecuteTransaction(){try{this.getProvider()}catch(i){console.error(i.message);return}const t=115,e="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",r=new on,[n]=r.splitCoins(r.gas,[t]);r.transferObjects([n],e);const s={transactionBlock:r,account:{},chain:"sui:mainnet",options:{showEffects:!0}};this.transaction={...s,transactionBlock:JSON.stringify(r)};try{const i=await this.suiProvider.signAndExecuteTransaction(s);this.transactionResult=i?JSON.stringify(i):""}catch(i){console.log("Sui error:",i),this.transactionResult=JSON.stringify(i)}}}});function YP(t,e,r,n,s,i){const a=ln("el-button"),o=ln("el-col"),c=ln("el-card"),l=ln("ConnectLayout");return mu(),_u(l,{chainId:t.chainId,chainNamespaces:t.chainNamespaces,transaction:t.transaction,transactionResult:t.transactionResult},{default:Te(()=>[Ye(c,null,{header:Te(()=>[hi("div",null,Yg(t.chainName||"SUI")+" methods",1)]),default:Te(()=>[Ye(a,{type:"primary",onClick:e[0]||(e[0]=u=>t.sui_getAccount())},{default:Te(()=>e[7]||(e[7]=[Pt("sui_getAccount")])),_:1}),Ye(a,{type:"primary",onClick:e[1]||(e[1]=u=>t.sui_signMessage())},{default:Te(()=>e[8]||(e[8]=[Pt("sui_signMessage")])),_:1}),Ye(a,{type:"primary",onClick:e[2]||(e[2]=u=>t.sui_signPersonalMessage())},{default:Te(()=>e[9]||(e[9]=[Pt(" sui_signPersonalMessage ")])),_:1}),Ye(a,{type:"primary",onClick:e[3]||(e[3]=u=>t.sui_signTransaction2())},{default:Te(()=>e[10]||(e[10]=[Pt(" sui_signTransaction ")])),_:1}),Ye(a,{type:"primary",onClick:e[4]||(e[4]=u=>t.sui_signAndExecuteTransaction())},{default:Te(()=>e[11]||(e[11]=[Pt(" sui_signAndExecuteTransaction ")])),_:1}),Ye(o,null,{default:Te(()=>[Ye(a,{type:"primary",onClick:t.sui_requestRpc},{default:Te(()=>e[12]||(e[12]=[Pt(" RPC_getBalance ")])),_:1},8,["onClick"]),e[13]||(e[13]=hi("div",{style:{"font-size":"12px",color:"gray"}},"get USDC balance of address:",-1)),e[14]||(e[14]=hi("div",{style:{"font-size":"12px",color:"gray"}},"0x51ceab2edc89f74730e683ebee65578cb3bc9237ba6fca019438a9737cf156ae",-1))]),_:1}),Ye(a,{type:"primary",onClick:e[5]||(e[5]=u=>t.sui_signTransaction_pre_execution())},{default:Te(()=>e[15]||(e[15]=[Pt(" sui_signTransaction (prepared data) ")])),_:1}),Ye(a,{type:"primary",onClick:e[6]||(e[6]=u=>t.sui_signAndExecuteTransaction_pre_execution())},{default:Te(()=>e[16]||(e[16]=[Pt(" sui_signAndExecuteTransaction (prepared data) ")])),_:1})]),_:1})]),_:1},8,["chainId","chainNamespaces","transaction","transactionResult"])}const ZP=vu(XP,[["render",YP]]),QP=bu({components:{SuiBaseView:ZP},setup(){return{chainId:"sui:mainnet"}}});function eI(t,e,r,n,s,i){const a=ln("SuiBaseView");return mu(),_u(a,{chainId:t.chainId},null,8,["chainId"])}const yI=vu(QP,[["render",eI]]);export{yI as default};
