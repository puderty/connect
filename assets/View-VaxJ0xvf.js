var zg=Object.defineProperty;var Vg=(t,e,r)=>e in t?zg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var uc=(t,e,r)=>Vg(t,typeof e!="symbol"?e+"":e,r);import{i as Lg,n as Fg,C as qg,p as Kr,B as Gg}from"./ConnectLayout-DoQGgMzj.js";import{g as As,k as fu,d as hu,a as lc,_ as yu,r as un,o as gu,c as bu,w as Te,b as Xe,e as fi,t as Wg,f as Pt}from"./index-B_XLZHpA.js";import{H as Jg,q as hi,Q as Ms,k as pc,t as ys,R as hr,S as yr,T as Kg,_ as ht,$ as Hg,n as me,b as ba,h as Xg,s as dc,e as vu,F as Yg,a0 as Zg,a1 as Qg}from"./secp256k1-BHJWReMe.js";var mu={},qn={},va={},ma={};Object.defineProperty(ma,"__esModule",{value:!0});function eb(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),p=u.charCodeAt(0);if(e[p]!==255)throw new TypeError(u+" is ambiguous");e[p]=l}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function a(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,p=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const y=(h-f)*i+1>>>0,w=new Uint8Array(y);for(;f!==h;){let x=l[f],q=0;for(let W=y-1;(x!==0||q<p)&&W!==-1;W--,q++)x+=256*w[W]>>>0,w[W]=x%r>>>0,x=x/r>>>0;if(x!==0)throw new Error("Non-zero carry");p=q,f++}let j=y-p;for(;j!==y&&w[j]===0;)j++;let U=n.repeat(u);for(;j<y;++j)U+=t.charAt(w[j]);return U}function o(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,p=0,f=0;for(;l[u]===n;)p++,u++;const h=(l.length-u)*s+1>>>0,y=new Uint8Array(h);for(;l[u];){let x=e[l.charCodeAt(u)];if(x===255)return;let q=0;for(let W=h-1;(x!==0||q<f)&&W!==-1;W--,q++)x+=r*y[W]>>>0,y[W]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");f=q,u++}let w=h-f;for(;w!==h&&y[w]===0;)w++;const j=new Uint8Array(p+(h-w));let U=p;for(;w!==h;)j[U++]=y[w++];return j}function c(l){const u=o(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:a,decodeUnsafe:o,decode:c}}ma.default=eb;var tb=As&&As.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(va,"__esModule",{value:!0});var rb=tb(ma),nb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";va.default=(0,rb.default)(nb);var sb=Object.create,ti=Object.defineProperty,ib=Object.getOwnPropertyDescriptor,ab=Object.getOwnPropertyNames,ob=Object.getPrototypeOf,cb=Object.prototype.hasOwnProperty,ub=(t,e)=>{for(var r in e)ti(t,r,{get:e[r],enumerable:!0})},_u=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of ab(e))!cb.call(t,s)&&s!==r&&ti(t,s,{get:()=>e[s],enumerable:!(n=ib(e,s))||n.enumerable});return t},lb=(t,e,r)=>(r=t!=null?sb(ob(t)):{},_u(!t||!t.__esModule?ti(r,"default",{value:t,enumerable:!0}):r,t)),pb=t=>_u(ti({},"__esModule",{value:!0}),t),wu={};ub(wu,{fromB58:()=>fb,fromBase58:()=>$u,toB58:()=>db,toBase58:()=>Su});var _a=pb(wu),Ou=lb(va);const Su=t=>Ou.default.encode(t),$u=t=>Ou.default.decode(t),db=Su,fb=$u;var wa=Object.defineProperty,hb=Object.getOwnPropertyDescriptor,yb=Object.getOwnPropertyNames,gb=Object.prototype.hasOwnProperty,bb=(t,e)=>{for(var r in e)wa(t,r,{get:e[r],enumerable:!0})},vb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yb(e))!gb.call(t,s)&&s!==r&&wa(t,s,{get:()=>e[s],enumerable:!(n=hb(e,s))||n.enumerable});return t},mb=t=>vb(wa({},"__esModule",{value:!0}),t),ku={};bb(ku,{fromB64:()=>wb,fromBase64:()=>Eu,toB64:()=>_b,toBase64:()=>ju});var Oa=mb(ku);function Eu(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const yi=8192;function ju(t){if(t.length<yi)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=yi){const n=t.slice(r,r+yi);e+=String.fromCharCode(...n)}return btoa(e)}const _b=ju,wb=Eu;var Sa=Object.defineProperty,Ob=Object.getOwnPropertyDescriptor,Sb=Object.getOwnPropertyNames,$b=Object.prototype.hasOwnProperty,kb=(t,e)=>{for(var r in e)Sa(t,r,{get:e[r],enumerable:!0})},Eb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Sb(e))!$b.call(t,s)&&s!==r&&Sa(t,s,{get:()=>e[s],enumerable:!(n=Ob(e,s))||n.enumerable});return t},jb=t=>Eb(Sa({},"__esModule",{value:!0}),t),Tu={};kb(Tu,{fromHEX:()=>Pb,fromHex:()=>Pu,toHEX:()=>Tb,toHex:()=>Iu});var $a=jb(Tu);function Pu(t){var s;const e=t.startsWith("0x")?t.slice(2):t,n=((s=(e.length%2===0?e:`0${e}}`).match(/.{2}/g))==null?void 0:s.map(i=>parseInt(i,16)))??[];return Uint8Array.from(n)}function Iu(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}const Tb=Iu,Pb=Pu;var ka=Object.defineProperty,Ib=Object.getOwnPropertyDescriptor,xb=Object.getOwnPropertyNames,Cb=Object.prototype.hasOwnProperty,Ab=(t,e)=>{for(var r in e)ka(t,r,{get:e[r],enumerable:!0})},Mb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of xb(e))!Cb.call(t,s)&&s!==r&&ka(t,s,{get:()=>e[s],enumerable:!(n=Ib(e,s))||n.enumerable});return t},Nb=t=>Mb(ka({},"__esModule",{value:!0}),t),xu={};Ab(xu,{ulebDecode:()=>Db,ulebEncode:()=>Bb});var ri=Nb(xu);function Bb(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function Db(t){let e=0,r=0,n=0;for(;;){let s=t[n];if(n+=1,e|=(s&127)<<r,!(s&128))break;r+=7}return{value:e,length:n}}var Ea=Object.defineProperty,Ub=Object.getOwnPropertyDescriptor,Rb=Object.getOwnPropertyNames,zb=Object.prototype.hasOwnProperty,Vb=(t,e)=>{for(var r in e)Ea(t,r,{get:e[r],enumerable:!0})},Lb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Rb(e))!zb.call(t,s)&&s!==r&&Ea(t,s,{get:()=>e[s],enumerable:!(n=Ub(e,s))||n.enumerable});return t},Fb=t=>Lb(Ea({},"__esModule",{value:!0}),t),Cu={};Vb(Cu,{BcsReader:()=>Gb});var Au=Fb(Cu),qb=ri;let Gb=class{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:s}=(0,qb.ulebDecode)(r);return this.shift(s),n}readVec(e){let r=this.readULEB(),n=[];for(let s=0;s<r;s++)n.push(e(this,s,r));return n}};var ja=Object.defineProperty,Wb=Object.getOwnPropertyDescriptor,Jb=Object.getOwnPropertyNames,Kb=Object.prototype.hasOwnProperty,Hb=(t,e)=>{for(var r in e)ja(t,r,{get:e[r],enumerable:!0})},Xb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Jb(e))!Kb.call(t,s)&&s!==r&&ja(t,s,{get:()=>e[s],enumerable:!(n=Wb(e,s))||n.enumerable});return t},Yb=t=>Xb(ja({},"__esModule",{value:!0}),t),Mu={};Hb(Mu,{decodeStr:()=>Qb,encodeStr:()=>Zb,splitGenericParameters:()=>ev});var Nu=Yb(Mu),Bu=_a,Du=Oa,Uu=$a;function Zb(t,e){switch(e){case"base58":return(0,Bu.toBase58)(t);case"base64":return(0,Du.toBase64)(t);case"hex":return(0,Uu.toHex)(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Qb(t,e){switch(e){case"base58":return(0,Bu.fromBase58)(t);case"base64":return(0,Du.fromBase64)(t);case"hex":return(0,Uu.fromHex)(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function ev(t,e=["<",">"]){const[r,n]=e,s=[];let i="",a=0;for(let o=0;o<t.length;o++){const c=t[o];if(c===r&&a++,c===n&&a--,a===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}var Ta=Object.defineProperty,tv=Object.getOwnPropertyDescriptor,rv=Object.getOwnPropertyNames,nv=Object.prototype.hasOwnProperty,sv=(t,e)=>{for(var r in e)Ta(t,r,{get:e[r],enumerable:!0})},iv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of rv(e))!nv.call(t,s)&&s!==r&&Ta(t,s,{get:()=>e[s],enumerable:!(n=tv(e,s))||n.enumerable});return t},av=t=>iv(Ta({},"__esModule",{value:!0}),t),Ru={};sv(Ru,{BcsWriter:()=>uv});var zu=av(Ru),ov=ri,cv=Nu;let uv=class{constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return gi(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return gi(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return gi(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return(0,ov.ulebEncode)(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,s)=>r(this,n,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return(0,cv.encodeStr)(this.toBytes(),e)}};function gi(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Pa=Object.defineProperty,lv=Object.getOwnPropertyDescriptor,pv=Object.getOwnPropertyNames,dv=Object.prototype.hasOwnProperty,Vu=t=>{throw TypeError(t)},fv=(t,e)=>{for(var r in e)Pa(t,r,{get:e[r],enumerable:!0})},hv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of pv(e))!dv.call(t,s)&&s!==r&&Pa(t,s,{get:()=>e[s],enumerable:!(n=lv(e,s))||n.enumerable});return t},yv=t=>hv(Pa({},"__esModule",{value:!0}),t),Lu=(t,e,r)=>e.has(t)||Vu("Cannot "+r),Le=(t,e,r)=>(Lu(t,e,"read from private field"),r?r.call(t):e.get(t)),Ns=(t,e,r)=>e.has(t)?Vu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Bs=(t,e,r,n)=>(Lu(t,e,"write to private field"),e.set(t,r),r),Fu={};fv(Fu,{BcsType:()=>Gn,SerializedBcs:()=>Xu,bigUIntBcsType:()=>Ov,dynamicSizeBcsType:()=>Sv,fixedSizeBcsType:()=>Ia,isSerializedBcs:()=>_v,lazyBcsType:()=>kv,stringLikeBcsType:()=>$v,uIntBcsType:()=>wv});var qu=yv(Fu),Gu=_a,Wu=Oa,Ju=$a,gv=Au,bv=ri,vv=zu,mr,ln,gs,Mt;const mv=class Ku{constructor(e){Ns(this,mr),Ns(this,ln),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Bs(this,mr,e.write),Bs(this,ln,e.serialize??((r,n)=>{const s=new vv.BcsWriter({initialSize:this.serializedSize(r)??void 0,...n});return Le(this,mr).call(this,r,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),Le(this,mr).call(this,e,r)}serialize(e,r){return this.validate(e),new Xu(this,Le(this,ln).call(this,e,r))}parse(e){const r=new gv.BcsReader(e);return this.read(r)}fromHex(e){return this.parse((0,Ju.fromHex)(e))}fromBase58(e){return this.parse((0,Gu.fromBase58)(e))}fromBase64(e){return this.parse((0,Wu.fromBase64)(e))}transform({name:e,input:r,output:n,validate:s}){return new Ku({name:e??this.name,read:i=>n(this.read(i)),write:(i,a)=>Le(this,mr).call(this,r(i),a),serializedSize:i=>this.serializedSize(r(i)),serialize:(i,a)=>Le(this,ln).call(this,r(i),a),validate:i=>{s==null||s(i),this.validate(r(i))}})}};mr=new WeakMap;ln=new WeakMap;let Gn=mv;const Hu=Symbol.for("@mysten/serialized-bcs");function _v(t){return!!t&&typeof t=="object"&&t[Hu]===!0}let Xu=class{constructor(e,r){Ns(this,gs),Ns(this,Mt),Bs(this,gs,e),Bs(this,Mt,r)}get[Hu](){return!0}toBytes(){return Le(this,Mt)}toHex(){return(0,Ju.toHex)(Le(this,Mt))}toBase64(){return(0,Wu.toBase64)(Le(this,Mt))}toBase58(){return(0,Gu.toBase58)(Le(this,Mt))}parse(){return Le(this,gs).parse(Le(this,Mt))}};gs=new WeakMap;Mt=new WeakMap;function Ia({size:t,...e}){return new Gn({...e,serializedSize:()=>t})}function wv({readMethod:t,writeMethod:e,...r}){return Ia({...r,read:n=>n[t](),write:(n,s)=>s[e](n),validate:n=>{var s;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(s=r.validate)==null||s.call(r,n)}})}function Ov({readMethod:t,writeMethod:e,...r}){return Ia({...r,read:n=>n[t](),write:(n,s)=>s[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function Sv({serialize:t,...e}){const r=new Gn({...e,serialize:t,write:(n,s)=>{for(const i of r.serialize(n).toBytes())s.write8(i)}});return r}function $v({toBytes:t,fromBytes:e,...r}){return new Gn({...r,read:n=>{const s=n.readULEB(),i=n.readBytes(s);return e(i)},write:(n,s)=>{const i=t(n);s.writeULEB(i.length);for(let a=0;a<i.length;a++)s.write8(i[a])},serialize:n=>{const s=t(n),i=(0,bv.ulebEncode)(s.length),a=new Uint8Array(i.length+s.length);return a.set(i,0),a.set(s,i.length),a},validate:n=>{var s;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(s=r.validate)==null||s.call(r,n)}})}function kv(t){let e=null;function r(){return e||(e=t()),e}return new Gn({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,s)=>r().write(n,s),serialize:(n,s)=>r().serialize(n,s).toBytes()})}var xa=Object.defineProperty,Ev=Object.getOwnPropertyDescriptor,jv=Object.getOwnPropertyNames,Tv=Object.prototype.hasOwnProperty,Pv=(t,e)=>{for(var r in e)xa(t,r,{get:e[r],enumerable:!0})},Iv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of jv(e))!Tv.call(t,s)&&s!==r&&xa(t,s,{get:()=>e[s],enumerable:!(n=Ev(e,s))||n.enumerable});return t},xv=t=>Iv(xa({},"__esModule",{value:!0}),t),Yu={};Pv(Yu,{bcs:()=>bs});var Cv=xv(Yu),be=qu,Av=ri;const bs={u8(t){return(0,be.uIntBcsType)({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return(0,be.uIntBcsType)({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return(0,be.uIntBcsType)({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return(0,be.bigUIntBcsType)({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return(0,be.bigUIntBcsType)({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return(0,be.bigUIntBcsType)({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return(0,be.fixedSizeBcsType)({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return(0,be.dynamicSizeBcsType)({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from((0,Av.ulebEncode)(e)),...t})},bytes(t,e){return(0,be.fixedSizeBcsType)({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{for(let s=0;s<t;s++)n.write8(r[s]??0)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return(0,be.stringLikeBcsType)({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new be.BcsType({name:`${e.name}[${t}]`,read:n=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(n);return s},write:(n,s)=>{for(const i of n)e.write(i,s)},...r,validate:n=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return bs.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new be.BcsType({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),s=new Array(n);for(let i=0;i<n;i++)s[i]=t.read(r);return s},write:(r,n)=>{n.writeULEB(r.length);for(const s of r)t.write(s,n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new be.BcsType({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let s=0;s<t.length;s++){const i=t[s].serializedSize(r[s]);if(i==null)return null;n+=i}return n},read:r=>{const n=[];for(const s of t)n.push(s.read(r));return n},write:(r,n)=>{for(let s=0;s<t.length;s++)t[s].write(r[s],n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new be.BcsType({name:t,serializedSize:s=>{let i=0;for(const[a,o]of n){const c=o.serializedSize(s[a]);if(c==null)return null;i+=c}return i},read:s=>{const i={};for(const[a,o]of n)i[a]=o.read(s);return i},write:(s,i)=>{for(const[a,o]of n)o.write(s[a],i)},...r,validate:s=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,r){const n=Object.entries(e);return new be.BcsType({name:t,read:s=>{const i=s.readULEB(),a=n[i];if(!a)throw new TypeError(`Unknown value ${i} for enum ${t}`);const[o,c]=a;return{[o]:(c==null?void 0:c.read(s))??!0,$kind:o}},write:(s,i)=>{const[a,o]=Object.entries(s).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<n.length;c++){const[l,u]=n[c];if(l===a){i.writeULEB(c),u==null||u.write(o,i);return}}},...r,validate:s=>{var o;if((o=r==null?void 0:r.validate)==null||o.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s).filter(c=>s[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);const[a]=i;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(t,e){return bs.vector(bs.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[s,i]of r)n.set(s,i);return n}})},lazy(t){return(0,be.lazyBcsType)(t)}};var Ca=Object.defineProperty,Mv=Object.getOwnPropertyDescriptor,Nv=Object.getOwnPropertyNames,Bv=Object.prototype.hasOwnProperty,Dv=(t,e)=>{for(var r in e)Ca(t,r,{get:e[r],enumerable:!0})},Uv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Nv(e))!Bv.call(t,s)&&s!==r&&Ca(t,s,{get:()=>e[s],enumerable:!(n=Mv(e,s))||n.enumerable});return t},Rv=t=>Uv(Ca({},"__esModule",{value:!0}),t),Zu={};Dv(Zu,{BcsReader:()=>Vv.BcsReader,BcsType:()=>bi.BcsType,BcsWriter:()=>Lv.BcsWriter,SerializedBcs:()=>bi.SerializedBcs,bcs:()=>zv.bcs,decodeStr:()=>vi.decodeStr,encodeStr:()=>vi.encodeStr,fromB58:()=>rs.fromB58,fromB64:()=>ns.fromB64,fromBase58:()=>rs.fromBase58,fromBase64:()=>ns.fromBase64,fromHEX:()=>ss.fromHEX,fromHex:()=>ss.fromHex,isSerializedBcs:()=>bi.isSerializedBcs,splitGenericParameters:()=>vi.splitGenericParameters,toB58:()=>rs.toB58,toB64:()=>ns.toB64,toBase58:()=>rs.toBase58,toBase64:()=>ns.toBase64,toHEX:()=>ss.toHEX,toHex:()=>ss.toHex});var ge=Rv(Zu),rs=_a,ns=Oa,bi=qu,zv=Cv,ss=$a,Vv=Au,vi=Nu,Lv=zu,Aa=Object.defineProperty,Fv=Object.getOwnPropertyDescriptor,qv=Object.getOwnPropertyNames,Gv=Object.prototype.hasOwnProperty,Wv=(t,e)=>{for(var r in e)Aa(t,r,{get:e[r],enumerable:!0})},Jv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of qv(e))!Gv.call(t,s)&&s!==r&&Aa(t,s,{get:()=>e[s],enumerable:!(n=Fv(e,s))||n.enumerable});return t},Kv=t=>Jv(Aa({},"__esModule",{value:!0}),t),Qu={};Wv(Qu,{SUI_ADDRESS_LENGTH:()=>Ma,isValidSuiAddress:()=>tl,isValidSuiObjectId:()=>Yv,isValidTransactionDigest:()=>Xv,normalizeStructTag:()=>rl,normalizeSuiAddress:()=>Ba,normalizeSuiObjectId:()=>Qv,parseStructTag:()=>Na});var ke=Kv(Qu),el=ge;const Hv=32;function Xv(t){try{return(0,el.fromBase58)(t).length===Hv}catch{return!1}}const Ma=32;function tl(t){return em(t)&&tm(t)===Ma}function Yv(t){return tl(t)}function Zv(t){return t.includes("::")?Na(t):t}function Na(t){const[e,r]=t.split("::"),n=t.slice(e.length+r.length+4),s=n.includes("<")?n.slice(0,n.indexOf("<")):n,i=n.includes("<")?(0,el.splitGenericParameters)(n.slice(n.indexOf("<")+1,n.lastIndexOf(">"))).map(a=>Zv(a.trim())):[];return{address:Ba(e),module:r,name:s,typeParams:i}}function rl(t){const{address:e,module:r,name:n,typeParams:s}=typeof t=="string"?Na(t):t,i=(s==null?void 0:s.length)>0?`<${s.map(a=>typeof a=="string"?a:rl(a)).join(",")}>`:"";return`${e}::${r}::${n}${i}`}function Ba(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Ma*2,"0")}`}function Qv(t,e=!1){return Ba(t,e)}function em(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function tm(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}var Da=Object.defineProperty,rm=Object.getOwnPropertyDescriptor,nm=Object.getOwnPropertyNames,sm=Object.prototype.hasOwnProperty,im=(t,e)=>{for(var r in e)Da(t,r,{get:e[r],enumerable:!0})},am=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of nm(e))!sm.call(t,s)&&s!==r&&Da(t,s,{get:()=>e[s],enumerable:!(n=rm(e,s))||n.enumerable});return t},om=t=>am(Da({},"__esModule",{value:!0}),t),nl={};im(nl,{TypeTagSerializer:()=>dm});var sl=om(nl),cm=ge,um=ke;const lm=/^vector<(.+)>$/,pm=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let dm=class _r{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(lm);if(n)return{vector:_r.parseFromStr(n[1],r)};const s=e.match(pm);if(s)return{struct:{address:r?(0,um.normalizeSuiAddress)(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:_r.parseStructTypeArgs(s[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return(0,cm.splitGenericParameters)(e).map(n=>_r.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${_r.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(_r.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}};var Ua=Object.defineProperty,fm=Object.getOwnPropertyDescriptor,hm=Object.getOwnPropertyNames,ym=Object.prototype.hasOwnProperty,gm=(t,e)=>{for(var r in e)Ua(t,r,{get:e[r],enumerable:!0})},bm=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of hm(e))!ym.call(t,s)&&s!==r&&Ua(t,s,{get:()=>e[s],enumerable:!(n=fm(e,s))||n.enumerable});return t},vm=t=>bm(Ua({},"__esModule",{value:!0}),t),il={};gm(il,{Address:()=>st,AppId:()=>Ol,Argument:()=>tt,CallArg:()=>ll,Command:()=>dl,CompressedSignature:()=>kl,GasData:()=>bl,Intent:()=>Sl,IntentMessage:()=>$l,IntentScope:()=>_l,IntentVersion:()=>wl,MultiSig:()=>wm,MultiSigPkMap:()=>jl,MultiSigPublicKey:()=>Tl,ObjectArg:()=>ul,ObjectDigest:()=>ol,ProgrammableMoveCall:()=>pl,ProgrammableTransaction:()=>fl,PublicKey:()=>El,SenderSignedData:()=>Om,SenderSignedTransaction:()=>Il,SharedObjectRef:()=>cl,StructTag:()=>gl,SuiObjectRef:()=>Ds,TransactionData:()=>ml,TransactionDataV1:()=>vl,TransactionExpiration:()=>yl,TransactionKind:()=>hl,TypeTag:()=>za,base64String:()=>Pl});var al=vm(il),m=ge,Hr=ke,fc=sl;function mm(t){return m.bcs.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function _m(t){return m.bcs.enum("Option",{None:null,Some:t})}const st=m.bcs.bytes(Hr.SUI_ADDRESS_LENGTH).transform({validate:t=>{const e=typeof t=="string"?t:(0,m.toHex)(t);if(!e||!(0,Hr.isValidSuiAddress)((0,Hr.normalizeSuiAddress)(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?(0,m.fromHex)((0,Hr.normalizeSuiAddress)(t)):t,output:t=>(0,Hr.normalizeSuiAddress)((0,m.toHex)(t))}),ol=m.bcs.vector(m.bcs.u8()).transform({name:"ObjectDigest",input:t=>(0,m.fromBase58)(t),output:t=>(0,m.toBase58)(new Uint8Array(t)),validate:t=>{if((0,m.fromBase58)(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ds=m.bcs.struct("SuiObjectRef",{objectId:st,version:m.bcs.u64(),digest:ol}),cl=m.bcs.struct("SharedObjectRef",{objectId:st,initialSharedVersion:m.bcs.u64(),mutable:m.bcs.bool()}),ul=m.bcs.enum("ObjectArg",{ImmOrOwnedObject:Ds,SharedObject:cl,Receiving:Ds}),ll=m.bcs.enum("CallArg",{Pure:m.bcs.struct("Pure",{bytes:m.bcs.vector(m.bcs.u8()).transform({input:t=>typeof t=="string"?(0,m.fromBase64)(t):t,output:t=>(0,m.toBase64)(new Uint8Array(t))})}),Object:ul}),Ra=m.bcs.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:m.bcs.lazy(()=>Ra),struct:m.bcs.lazy(()=>gl),u16:null,u32:null,u256:null}),za=Ra.transform({input:t=>typeof t=="string"?fc.TypeTagSerializer.parseFromStr(t,!0):t,output:t=>fc.TypeTagSerializer.tagToString(t)}),tt=m.bcs.enum("Argument",{GasCoin:null,Input:m.bcs.u16(),Result:m.bcs.u16(),NestedResult:m.bcs.tuple([m.bcs.u16(),m.bcs.u16()])}),pl=m.bcs.struct("ProgrammableMoveCall",{package:st,module:m.bcs.string(),function:m.bcs.string(),typeArguments:m.bcs.vector(za),arguments:m.bcs.vector(tt)}),dl=m.bcs.enum("Command",{MoveCall:pl,TransferObjects:m.bcs.struct("TransferObjects",{objects:m.bcs.vector(tt),address:tt}),SplitCoins:m.bcs.struct("SplitCoins",{coin:tt,amounts:m.bcs.vector(tt)}),MergeCoins:m.bcs.struct("MergeCoins",{destination:tt,sources:m.bcs.vector(tt)}),Publish:m.bcs.struct("Publish",{modules:m.bcs.vector(m.bcs.vector(m.bcs.u8()).transform({input:t=>typeof t=="string"?(0,m.fromBase64)(t):t,output:t=>(0,m.toBase64)(new Uint8Array(t))})),dependencies:m.bcs.vector(st)}),MakeMoveVec:m.bcs.struct("MakeMoveVec",{type:_m(za).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:m.bcs.vector(tt)}),Upgrade:m.bcs.struct("Upgrade",{modules:m.bcs.vector(m.bcs.vector(m.bcs.u8()).transform({input:t=>typeof t=="string"?(0,m.fromBase64)(t):t,output:t=>(0,m.toBase64)(new Uint8Array(t))})),dependencies:m.bcs.vector(st),package:st,ticket:tt})}),fl=m.bcs.struct("ProgrammableTransaction",{inputs:m.bcs.vector(ll),commands:m.bcs.vector(dl)}),hl=m.bcs.enum("TransactionKind",{ProgrammableTransaction:fl,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),yl=m.bcs.enum("TransactionExpiration",{None:null,Epoch:mm()}),gl=m.bcs.struct("StructTag",{address:st,module:m.bcs.string(),name:m.bcs.string(),typeParams:m.bcs.vector(Ra)}),bl=m.bcs.struct("GasData",{payment:m.bcs.vector(Ds),owner:st,price:m.bcs.u64(),budget:m.bcs.u64()}),vl=m.bcs.struct("TransactionDataV1",{kind:hl,sender:st,gasData:bl,expiration:yl}),ml=m.bcs.enum("TransactionData",{V1:vl}),_l=m.bcs.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),wl=m.bcs.enum("IntentVersion",{V0:null}),Ol=m.bcs.enum("AppId",{Sui:null}),Sl=m.bcs.struct("Intent",{scope:_l,version:wl,appId:Ol});function $l(t){return m.bcs.struct(`IntentMessage<${t.name}>`,{intent:Sl,value:t})}const kl=m.bcs.enum("CompressedSignature",{ED25519:m.bcs.fixedArray(64,m.bcs.u8()),Secp256k1:m.bcs.fixedArray(64,m.bcs.u8()),Secp256r1:m.bcs.fixedArray(64,m.bcs.u8()),ZkLogin:m.bcs.vector(m.bcs.u8())}),El=m.bcs.enum("PublicKey",{ED25519:m.bcs.fixedArray(32,m.bcs.u8()),Secp256k1:m.bcs.fixedArray(33,m.bcs.u8()),Secp256r1:m.bcs.fixedArray(33,m.bcs.u8()),ZkLogin:m.bcs.vector(m.bcs.u8())}),jl=m.bcs.struct("MultiSigPkMap",{pubKey:El,weight:m.bcs.u8()}),Tl=m.bcs.struct("MultiSigPublicKey",{pk_map:m.bcs.vector(jl),threshold:m.bcs.u16()}),wm=m.bcs.struct("MultiSig",{sigs:m.bcs.vector(kl),bitmap:m.bcs.u16(),multisig_pk:Tl}),Pl=m.bcs.vector(m.bcs.u8()).transform({input:t=>typeof t=="string"?(0,m.fromBase64)(t):t,output:t=>(0,m.toBase64)(new Uint8Array(t))}),Il=m.bcs.struct("SenderSignedTransaction",{intentMessage:$l(ml),txSignatures:m.bcs.vector(Pl)}),Om=m.bcs.vector(Il,{name:"SenderSignedData"});var Va=Object.defineProperty,Sm=Object.getOwnPropertyDescriptor,$m=Object.getOwnPropertyNames,km=Object.prototype.hasOwnProperty,Em=(t,e)=>{for(var r in e)Va(t,r,{get:e[r],enumerable:!0})},jm=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of $m(e))!km.call(t,s)&&s!==r&&Va(t,s,{get:()=>e[s],enumerable:!(n=Sm(e,s))||n.enumerable});return t},Tm=t=>jm(Va({},"__esModule",{value:!0}),t),xl={};Em(xl,{TransactionEffects:()=>Lm});var Pm=Tm(xl),_=ge,J=al;const Im=_.bcs.enum("PackageUpgradeError",{UnableToFetchPackage:_.bcs.struct("UnableToFetchPackage",{packageId:J.Address}),NotAPackage:_.bcs.struct("NotAPackage",{objectId:J.Address}),IncompatibleUpgrade:null,DigestDoesNotMatch:_.bcs.struct("DigestDoesNotMatch",{digest:_.bcs.vector(_.bcs.u8())}),UnknownUpgradePolicy:_.bcs.struct("UnknownUpgradePolicy",{policy:_.bcs.u8()}),PackageIDDoesNotMatch:_.bcs.struct("PackageIDDoesNotMatch",{packageId:J.Address,ticketId:J.Address})}),xm=_.bcs.struct("ModuleId",{address:J.Address,name:_.bcs.string()}),hc=_.bcs.struct("MoveLocation",{module:xm,function:_.bcs.u16(),instruction:_.bcs.u16(),functionName:_.bcs.option(_.bcs.string())}),Cm=_.bcs.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:_.bcs.struct("IndexOutOfBounds",{idx:_.bcs.u16()}),SecondaryIndexOutOfBounds:_.bcs.struct("SecondaryIndexOutOfBounds",{resultIdx:_.bcs.u16(),secondaryIdx:_.bcs.u16()}),InvalidResultArity:_.bcs.struct("InvalidResultArity",{resultIdx:_.bcs.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Am=_.bcs.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Mm=_.bcs.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:_.bcs.struct("MoveObjectTooBig",{objectSize:_.bcs.u64(),maxObjectSize:_.bcs.u64()}),MovePackageTooBig:_.bcs.struct("MovePackageTooBig",{objectSize:_.bcs.u64(),maxObjectSize:_.bcs.u64()}),CircularObjectOwnership:_.bcs.struct("CircularObjectOwnership",{object:J.Address}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:_.bcs.option(hc),MoveAbort:_.bcs.tuple([hc,_.bcs.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:_.bcs.struct("CommandArgumentError",{argIdx:_.bcs.u16(),kind:Cm}),TypeArgumentError:_.bcs.struct("TypeArgumentError",{argumentIdx:_.bcs.u16(),kind:Am}),UnusedValueWithoutDrop:_.bcs.struct("UnusedValueWithoutDrop",{resultIdx:_.bcs.u16(),secondaryIdx:_.bcs.u16()}),InvalidPublicFunctionReturnType:_.bcs.struct("InvalidPublicFunctionReturnType",{idx:_.bcs.u16()}),InvalidTransferObject:null,EffectsTooLarge:_.bcs.struct("EffectsTooLarge",{currentSize:_.bcs.u64(),maxSize:_.bcs.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:_.bcs.struct("PackageUpgradeError",{upgradeError:Im}),WrittenObjectsTooLarge:_.bcs.struct("WrittenObjectsTooLarge",{currentSize:_.bcs.u64(),maxSize:_.bcs.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null}),Cl=_.bcs.enum("ExecutionStatus",{Success:null,Failed:_.bcs.struct("ExecutionFailed",{error:Mm,command:_.bcs.option(_.bcs.u64())})}),Al=_.bcs.struct("GasCostSummary",{computationCost:_.bcs.u64(),storageCost:_.bcs.u64(),storageRebate:_.bcs.u64(),nonRefundableStorageFee:_.bcs.u64()}),Er=_.bcs.enum("Owner",{AddressOwner:J.Address,ObjectOwner:J.Address,Shared:_.bcs.struct("Shared",{initialSharedVersion:_.bcs.u64()}),Immutable:null}),Nm=_.bcs.struct("TransactionEffectsV1",{status:Cl,executedEpoch:_.bcs.u64(),gasUsed:Al,modifiedAtVersions:_.bcs.vector(_.bcs.tuple([J.Address,_.bcs.u64()])),sharedObjects:_.bcs.vector(J.SuiObjectRef),transactionDigest:J.ObjectDigest,created:_.bcs.vector(_.bcs.tuple([J.SuiObjectRef,Er])),mutated:_.bcs.vector(_.bcs.tuple([J.SuiObjectRef,Er])),unwrapped:_.bcs.vector(_.bcs.tuple([J.SuiObjectRef,Er])),deleted:_.bcs.vector(J.SuiObjectRef),unwrappedThenDeleted:_.bcs.vector(J.SuiObjectRef),wrapped:_.bcs.vector(J.SuiObjectRef),gasObject:_.bcs.tuple([J.SuiObjectRef,Er]),eventsDigest:_.bcs.option(J.ObjectDigest),dependencies:_.bcs.vector(J.ObjectDigest)}),La=_.bcs.tuple([_.bcs.u64(),J.ObjectDigest]),Bm=_.bcs.enum("ObjectIn",{NotExist:null,Exist:_.bcs.tuple([La,Er])}),Dm=_.bcs.enum("ObjectOut",{NotExist:null,ObjectWrite:_.bcs.tuple([J.ObjectDigest,Er]),PackageWrite:La}),Um=_.bcs.enum("IDOperation",{None:null,Created:null,Deleted:null}),Rm=_.bcs.struct("EffectsObjectChange",{inputState:Bm,outputState:Dm,idOperation:Um}),zm=_.bcs.enum("UnchangedSharedKind",{ReadOnlyRoot:La,MutateDeleted:_.bcs.u64(),ReadDeleted:_.bcs.u64(),Cancelled:_.bcs.u64(),PerEpochConfig:null}),Vm=_.bcs.struct("TransactionEffectsV2",{status:Cl,executedEpoch:_.bcs.u64(),gasUsed:Al,transactionDigest:J.ObjectDigest,gasObjectIndex:_.bcs.option(_.bcs.u32()),eventsDigest:_.bcs.option(J.ObjectDigest),dependencies:_.bcs.vector(J.ObjectDigest),lamportVersion:_.bcs.u64(),changedObjects:_.bcs.vector(_.bcs.tuple([J.Address,Rm])),unchangedSharedObjects:_.bcs.vector(_.bcs.tuple([J.Address,zm])),auxDataDigest:_.bcs.option(J.ObjectDigest)}),Lm=_.bcs.enum("TransactionEffects",{V1:Nm,V2:Vm});var Fa=Object.defineProperty,Fm=Object.getOwnPropertyDescriptor,qm=Object.getOwnPropertyNames,Gm=Object.prototype.hasOwnProperty,Wm=(t,e)=>{for(var r in e)Fa(t,r,{get:e[r],enumerable:!0})},Jm=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of qm(e))!Gm.call(t,s)&&s!==r&&Fa(t,s,{get:()=>e[s],enumerable:!(n=Fm(e,s))||n.enumerable});return t},Km=t=>Jm(Fa({},"__esModule",{value:!0}),t),Ml={};Wm(Ml,{BcsType:()=>Ym.BcsType,TypeTagSerializer:()=>Xm.TypeTagSerializer,bcs:()=>Zm});var ot=Km(Ml),Ye=ge,G=al,Hm=Pm,Xm=sl,Ym=ge;const Zm={...Ye.bcs,U8:Ye.bcs.u8(),U16:Ye.bcs.u16(),U32:Ye.bcs.u32(),U64:Ye.bcs.u64(),U128:Ye.bcs.u128(),U256:Ye.bcs.u256(),ULEB128:Ye.bcs.uleb128(),Bool:Ye.bcs.bool(),String:Ye.bcs.string(),Address:G.Address,AppId:G.AppId,Argument:G.Argument,CallArg:G.CallArg,CompressedSignature:G.CompressedSignature,GasData:G.GasData,Intent:G.Intent,IntentMessage:G.IntentMessage,IntentScope:G.IntentScope,IntentVersion:G.IntentVersion,MultiSig:G.MultiSig,MultiSigPkMap:G.MultiSigPkMap,MultiSigPublicKey:G.MultiSigPublicKey,ObjectArg:G.ObjectArg,ObjectDigest:G.ObjectDigest,ProgrammableMoveCall:G.ProgrammableMoveCall,ProgrammableTransaction:G.ProgrammableTransaction,PublicKey:G.PublicKey,SenderSignedData:G.SenderSignedData,SenderSignedTransaction:G.SenderSignedTransaction,SharedObjectRef:G.SharedObjectRef,StructTag:G.StructTag,SuiObjectRef:G.SuiObjectRef,Command:G.Command,TransactionData:G.TransactionData,TransactionDataV1:G.TransactionDataV1,TransactionExpiration:G.TransactionExpiration,TransactionKind:G.TransactionKind,TypeTag:G.TypeTag,TransactionEffects:Hm.TransactionEffects};var qa=Object.defineProperty,Qm=Object.getOwnPropertyDescriptor,e_=Object.getOwnPropertyNames,t_=Object.prototype.hasOwnProperty,r_=(t,e)=>{for(var r in e)qa(t,r,{get:e[r],enumerable:!0})},n_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of e_(e))!t_.call(t,s)&&s!==r&&qa(t,s,{get:()=>e[s],enumerable:!(n=Qm(e,s))||n.enumerable});return t},s_=t=>n_(qa({},"__esModule",{value:!0}),t),Nl={};r_(Nl,{formatAddress:()=>a_,formatDigest:()=>o_});var i_=s_(Nl);const Bl="…";function a_(t){if(t.length<=6)return t;const e=t.startsWith("0x")?2:0;return`0x${t.slice(e,e+4)}${Bl}${t.slice(-4)}`}function o_(t){return`${t.slice(0,10)}${Bl}`}var Ga=Object.defineProperty,c_=Object.getOwnPropertyDescriptor,u_=Object.getOwnPropertyNames,l_=Object.prototype.hasOwnProperty,p_=(t,e)=>{for(var r in e)Ga(t,r,{get:e[r],enumerable:!0})},d_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of u_(e))!l_.call(t,s)&&s!==r&&Ga(t,s,{get:()=>e[s],enumerable:!(n=c_(e,s))||n.enumerable});return t},f_=t=>d_(Ga({},"__esModule",{value:!0}),t),Dl={};p_(Dl,{isValidSuiNSName:()=>y_,normalizeSuiNSName:()=>g_});var Wa=f_(Dl);const Ul=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Rl=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,h_=235;function y_(t){return t.length>h_?!1:t.includes("@")?Ul.test(t):Rl.test(t)}function g_(t,e="at"){const r=t.toLowerCase();let n;if(r.includes("@")){if(!Ul.test(r))throw new Error(`Invalid SuiNS name ${t}`);const[s,i]=r.split("@");n=[...s?s.split("."):[],i]}else{if(!Rl.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}var Ja=Object.defineProperty,b_=Object.getOwnPropertyDescriptor,v_=Object.getOwnPropertyNames,m_=Object.prototype.hasOwnProperty,__=(t,e)=>{for(var r in e)Ja(t,r,{get:e[r],enumerable:!0})},w_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of v_(e))!m_.call(t,s)&&s!==r&&Ja(t,s,{get:()=>e[s],enumerable:!(n=b_(e,s))||n.enumerable});return t},O_=t=>w_(Ja({},"__esModule",{value:!0}),t),zl={};__(zl,{MIST_PER_SUI:()=>k_,MOVE_STDLIB_ADDRESS:()=>E_,SUI_CLOCK_OBJECT_ID:()=>T_,SUI_DECIMALS:()=>$_,SUI_FRAMEWORK_ADDRESS:()=>Ll,SUI_SYSTEM_ADDRESS:()=>j_,SUI_SYSTEM_MODULE_NAME:()=>P_,SUI_SYSTEM_STATE_OBJECT_ID:()=>x_,SUI_TYPE_ARG:()=>I_});var S_=O_(zl),Vl=ke;const $_=9,k_=BigInt(1e9),E_="0x1",Ll="0x2",j_="0x3",T_=(0,Vl.normalizeSuiObjectId)("0x6"),P_="sui_system",I_=`${Ll}::sui::SUI`,x_=(0,Vl.normalizeSuiObjectId)("0x5");var Ka=Object.defineProperty,C_=Object.getOwnPropertyDescriptor,A_=Object.getOwnPropertyNames,M_=Object.prototype.hasOwnProperty,N_=(t,e)=>{for(var r in e)Ka(t,r,{get:e[r],enumerable:!0})},B_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of A_(e))!M_.call(t,s)&&s!==r&&Ka(t,s,{get:()=>e[s],enumerable:!(n=C_(e,s))||n.enumerable});return t},D_=t=>B_(Ka({},"__esModule",{value:!0}),t),Fl={};N_(Fl,{isValidNamedPackage:()=>Wl,isValidNamedType:()=>L_});var ql=D_(Fl),U_=Wa;const R_=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,z_=/^\d+$/,V_=64,Gl="/",Wl=t=>{const e=t.split(Gl);if(e.length<2||e.length>3)return!1;const[r,n,s]=e;return s!==void 0&&!z_.test(s)||!(0,U_.isValidSuiNSName)(r)?!1:R_.test(n)&&n.length<V_},L_=t=>{const e=t.split(/::|<|>|,/);for(const r of e)if(r.includes(Gl)&&!Wl(r))return!1;return!0},F_=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class q_ extends Jg{constructor(e,r,n={},s,i,a){if(super(),this.blockLen=e,this.outputLen=r,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,hi(e),hi(r),hi(s),r<0||r>s)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>s))throw new Error("key length must be undefined or 1.."+s);if(n.salt!==void 0&&n.salt.length!==i)throw new Error("salt must be undefined or "+i);if(n.personalization!==void 0&&n.personalization.length!==a)throw new Error("personalization must be undefined or "+a);this.buffer=new Uint8Array(e),this.buffer32=Ms(this.buffer)}update(e){pc(this);const{blockLen:r,buffer:n,buffer32:s}=this;e=ys(e);const i=e.length,a=e.byteOffset,o=e.buffer;for(let c=0;c<i;){this.pos===r&&(hr||yr(s),this.compress(s,0,!1),hr||yr(s),this.pos=0);const l=Math.min(r-this.pos,i-c),u=a+c;if(l===r&&!(u%4)&&c+l<i){const p=new Uint32Array(o,u,Math.floor((i-c)/4));hr||yr(p);for(let f=0;c+r<i;f+=s.length,c+=r)this.length+=r,this.compress(p,f,!1);hr||yr(p);continue}n.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){pc(this),Kg(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),hr||yr(n),this.compress(n,0,!0),hr||yr(n);const s=Ms(e);this.get().forEach((i,a)=>s[a]=ht(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:a,pos:o}=this;return e||(e=new this.constructor({dkLen:a})),e.set(...this.get()),e.length=n,e.finished=s,e.destroyed=i,e.outputLen=a,e.buffer.set(r),e.pos=o,e}}const ue=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),S=new Uint32Array(32);function It(t,e,r,n,s,i){const a=s[i],o=s[i+1];let c=S[2*t],l=S[2*t+1],u=S[2*e],p=S[2*e+1],f=S[2*r],h=S[2*r+1],y=S[2*n],w=S[2*n+1],j=me.add3L(c,u,a);l=me.add3H(j,l,p,o),c=j|0,{Dh:w,Dl:y}={Dh:w^l,Dl:y^c},{Dh:w,Dl:y}={Dh:me.rotr32H(w,y),Dl:me.rotr32L(w,y)},{h,l:f}=me.add(h,f,w,y),{Bh:p,Bl:u}={Bh:p^h,Bl:u^f},{Bh:p,Bl:u}={Bh:me.rotrSH(p,u,24),Bl:me.rotrSL(p,u,24)},S[2*t]=c,S[2*t+1]=l,S[2*e]=u,S[2*e+1]=p,S[2*r]=f,S[2*r+1]=h,S[2*n]=y,S[2*n+1]=w}function xt(t,e,r,n,s,i){const a=s[i],o=s[i+1];let c=S[2*t],l=S[2*t+1],u=S[2*e],p=S[2*e+1],f=S[2*r],h=S[2*r+1],y=S[2*n],w=S[2*n+1],j=me.add3L(c,u,a);l=me.add3H(j,l,p,o),c=j|0,{Dh:w,Dl:y}={Dh:w^l,Dl:y^c},{Dh:w,Dl:y}={Dh:me.rotrSH(w,y,16),Dl:me.rotrSL(w,y,16)},{h,l:f}=me.add(h,f,w,y),{Bh:p,Bl:u}={Bh:p^h,Bl:u^f},{Bh:p,Bl:u}={Bh:me.rotrBH(p,u,63),Bl:me.rotrBL(p,u,63)},S[2*t]=c,S[2*t+1]=l,S[2*e]=u,S[2*e+1]=p,S[2*r]=f,S[2*r+1]=h,S[2*n]=y,S[2*n+1]=w}class Jl extends q_{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=ue[0]|0,this.v0h=ue[1]|0,this.v1l=ue[2]|0,this.v1h=ue[3]|0,this.v2l=ue[4]|0,this.v2h=ue[5]|0,this.v3l=ue[6]|0,this.v3h=ue[7]|0,this.v4l=ue[8]|0,this.v4h=ue[9]|0,this.v5l=ue[10]|0,this.v5h=ue[11]|0,this.v6l=ue[12]|0,this.v6h=ue[13]|0,this.v7l=ue[14]|0,this.v7h=ue[15]|0;const r=e.key?e.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,e.salt){const n=Ms(ys(e.salt));this.v4l^=ht(n[0]),this.v4h^=ht(n[1]),this.v5l^=ht(n[2]),this.v5h^=ht(n[3])}if(e.personalization){const n=Ms(ys(e.personalization));this.v6l^=ht(n[0]),this.v6h^=ht(n[1]),this.v7l^=ht(n[2]),this.v7h^=ht(n[3])}if(e.key){const n=new Uint8Array(this.blockLen);n.set(ys(e.key)),this.update(n)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:a,v3l:o,v3h:c,v4l:l,v4h:u,v5l:p,v5h:f,v6l:h,v6h:y,v7l:w,v7h:j}=this;return[e,r,n,s,i,a,o,c,l,u,p,f,h,y,w,j]}set(e,r,n,s,i,a,o,c,l,u,p,f,h,y,w,j){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=a|0,this.v3l=o|0,this.v3h=c|0,this.v4l=l|0,this.v4h=u|0,this.v5l=p|0,this.v5h=f|0,this.v6l=h|0,this.v6h=y|0,this.v7l=w|0,this.v7h=j|0}compress(e,r,n){this.get().forEach((c,l)=>S[l]=c),S.set(ue,16);let{h:s,l:i}=me.fromBig(BigInt(this.length));S[24]=ue[8]^i,S[25]=ue[9]^s,n&&(S[28]=~S[28],S[29]=~S[29]);let a=0;const o=F_;for(let c=0;c<12;c++)It(0,4,8,12,e,r+2*o[a++]),xt(0,4,8,12,e,r+2*o[a++]),It(1,5,9,13,e,r+2*o[a++]),xt(1,5,9,13,e,r+2*o[a++]),It(2,6,10,14,e,r+2*o[a++]),xt(2,6,10,14,e,r+2*o[a++]),It(3,7,11,15,e,r+2*o[a++]),xt(3,7,11,15,e,r+2*o[a++]),It(0,5,10,15,e,r+2*o[a++]),xt(0,5,10,15,e,r+2*o[a++]),It(1,6,11,12,e,r+2*o[a++]),xt(1,6,11,12,e,r+2*o[a++]),It(2,7,8,13,e,r+2*o[a++]),xt(2,7,8,13,e,r+2*o[a++]),It(3,4,9,14,e,r+2*o[a++]),xt(3,4,9,14,e,r+2*o[a++]);this.v0l^=S[0]^S[16],this.v0h^=S[1]^S[17],this.v1l^=S[2]^S[18],this.v1h^=S[3]^S[19],this.v2l^=S[4]^S[20],this.v2h^=S[5]^S[21],this.v3l^=S[6]^S[22],this.v3h^=S[7]^S[23],this.v4l^=S[8]^S[24],this.v4h^=S[9]^S[25],this.v5l^=S[10]^S[26],this.v5h^=S[11]^S[27],this.v6l^=S[12]^S[28],this.v6h^=S[13]^S[29],this.v7l^=S[14]^S[30],this.v7h^=S[15]^S[31],S.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ur=Hg(t=>new Jl(t)),G_=Object.freeze(Object.defineProperty({__proto__:null,BLAKE2b:Jl,blake2b:ur},Symbol.toStringTag,{value:"Module"})),Kl=fu(G_);var Ha=Object.defineProperty,W_=Object.getOwnPropertyDescriptor,J_=Object.getOwnPropertyNames,K_=Object.prototype.hasOwnProperty,H_=(t,e)=>{for(var r in e)Ha(t,r,{get:e[r],enumerable:!0})},X_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of J_(e))!K_.call(t,s)&&s!==r&&Ha(t,s,{get:()=>e[s],enumerable:!(n=W_(e,s))||n.enumerable});return t},Y_=t=>X_(Ha({},"__esModule",{value:!0}),t),Hl={};H_(Hl,{deriveDynamicFieldID:()=>tw});var Z_=Y_(Hl),Q_=ge,ew=Kl,mi=ot;function tw(t,e,r){const n=mi.bcs.Address.serialize(t).toBytes(),s=mi.bcs.TypeTag.serialize(e).toBytes(),i=mi.bcs.u64().serialize(r.length).toBytes(),a=ew.blake2b.create({dkLen:32});return a.update(new Uint8Array([240])),a.update(n),a.update(i),a.update(r),a.update(s),`0x${(0,Q_.toHex)(a.digest().slice(0,32))}`}var Xa=Object.defineProperty,rw=Object.getOwnPropertyDescriptor,nw=Object.getOwnPropertyNames,sw=Object.prototype.hasOwnProperty,iw=(t,e)=>{for(var r in e)Xa(t,r,{get:e[r],enumerable:!0})},aw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of nw(e))!sw.call(t,s)&&s!==r&&Xa(t,s,{get:()=>e[s],enumerable:!(n=rw(e,s))||n.enumerable});return t},ow=t=>aw(Xa({},"__esModule",{value:!0}),t),Xl={};iw(Xl,{MIST_PER_SUI:()=>ct.MIST_PER_SUI,MOVE_STDLIB_ADDRESS:()=>ct.MOVE_STDLIB_ADDRESS,SUI_ADDRESS_LENGTH:()=>Ct.SUI_ADDRESS_LENGTH,SUI_CLOCK_OBJECT_ID:()=>ct.SUI_CLOCK_OBJECT_ID,SUI_DECIMALS:()=>ct.SUI_DECIMALS,SUI_FRAMEWORK_ADDRESS:()=>ct.SUI_FRAMEWORK_ADDRESS,SUI_SYSTEM_ADDRESS:()=>ct.SUI_SYSTEM_ADDRESS,SUI_SYSTEM_MODULE_NAME:()=>ct.SUI_SYSTEM_MODULE_NAME,SUI_SYSTEM_STATE_OBJECT_ID:()=>ct.SUI_SYSTEM_STATE_OBJECT_ID,SUI_TYPE_ARG:()=>ct.SUI_TYPE_ARG,deriveDynamicFieldID:()=>cw.deriveDynamicFieldID,formatAddress:()=>yc.formatAddress,formatDigest:()=>yc.formatDigest,fromB64:()=>Ze.fromB64,fromBase58:()=>Ze.fromBase58,fromBase64:()=>Ze.fromBase64,fromHEX:()=>Ze.fromHEX,fromHex:()=>Ze.fromHex,isValidNamedPackage:()=>bc.isValidNamedPackage,isValidNamedType:()=>bc.isValidNamedType,isValidSuiAddress:()=>Ct.isValidSuiAddress,isValidSuiNSName:()=>gc.isValidSuiNSName,isValidSuiObjectId:()=>Ct.isValidSuiObjectId,isValidTransactionDigest:()=>Ct.isValidTransactionDigest,normalizeStructTag:()=>Ct.normalizeStructTag,normalizeSuiAddress:()=>Ct.normalizeSuiAddress,normalizeSuiNSName:()=>gc.normalizeSuiNSName,normalizeSuiObjectId:()=>Ct.normalizeSuiObjectId,parseStructTag:()=>Ct.parseStructTag,toB64:()=>Ze.toB64,toBase58:()=>Ze.toBase58,toBase64:()=>Ze.toBase64,toHEX:()=>Ze.toHEX,toHex:()=>Ze.toHex});var Ya=ow(Xl),yc=i_,Ct=ke,Ze=ge,gc=Wa,ct=S_,bc=ql,cw=Z_,Za=Object.defineProperty,uw=Object.getOwnPropertyDescriptor,lw=Object.getOwnPropertyNames,pw=Object.prototype.hasOwnProperty,dw=(t,e)=>{for(var r in e)Za(t,r,{get:e[r],enumerable:!0})},fw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of lw(e))!pw.call(t,s)&&s!==r&&Za(t,s,{get:()=>e[s],enumerable:!(n=uw(e,s))||n.enumerable});return t},hw=t=>fw(Za({},"__esModule",{value:!0}),t),Yl={};dw(Yl,{getPureBcsSchema:()=>Ui,isTxContext:()=>Sw,normalizedTypeToMoveTypeSignature:()=>$w,pureBcsSchemaFromOpenMoveTypeSignatureBody:()=>Ql});var Zl=hw(Yl),X=ot,vc=Ya,_n=ke;const yw="object",gw="ID",bw="ascii",vw="String",mw="string",_w="String",ww="option",Ow="Option";function Sw(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&(0,_n.normalizeSuiAddress)(e.package)===(0,_n.normalizeSuiAddress)("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function Ui(t){if(typeof t=="string")switch(t){case"address":return X.bcs.Address;case"bool":return X.bcs.Bool;case"u8":return X.bcs.U8;case"u16":return X.bcs.U16;case"u32":return X.bcs.U32;case"u64":return X.bcs.U64;case"u128":return X.bcs.U128;case"u256":return X.bcs.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return X.bcs.vector(X.bcs.U8).transform({input:r=>typeof r=="string"?new TextEncoder().encode(r):r,output:r=>r});const e=Ui(t.vector);return e?X.bcs.vector(e):null}if("datatype"in t){const e=(0,_n.normalizeSuiAddress)(t.datatype.package);if(e===(0,_n.normalizeSuiAddress)(vc.MOVE_STDLIB_ADDRESS)){if(t.datatype.module===bw&&t.datatype.type===vw||t.datatype.module===mw&&t.datatype.type===_w)return X.bcs.String;if(t.datatype.module===ww&&t.datatype.type===Ow){const r=Ui(t.datatype.typeParameters[0]);return r?X.bcs.vector(r):null}}if(e===(0,_n.normalizeSuiAddress)(vc.SUI_FRAMEWORK_ADDRESS)&&t.datatype.module===yw&&t.datatype.type===gw)return X.bcs.Address}return null}function $w(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:wn(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:wn(t.MutableReference)}:{ref:null,body:wn(t)}}function wn(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:wn(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(wn)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function Ql(t){if(typeof t=="string")switch(t){case"address":return X.bcs.Address;case"bool":return X.bcs.Bool;case"u8":return X.bcs.U8;case"u16":return X.bcs.U16;case"u32":return X.bcs.U32;case"u64":return X.bcs.U64;case"u128":return X.bcs.U128;case"u256":return X.bcs.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t)return X.bcs.vector(Ql(t.vector));throw new Error(`Expected pure typeSignature, but got ${JSON.stringify(t)}`)}var Qa=Object.defineProperty,kw=Object.getOwnPropertyDescriptor,Ew=Object.getOwnPropertyNames,jw=Object.prototype.hasOwnProperty,Tw=(t,e)=>{for(var r in e)Qa(t,r,{get:e[r],enumerable:!0})},Pw=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ew(e))!jw.call(t,s)&&s!==r&&Qa(t,s,{get:()=>e[s],enumerable:!(n=kw(e,s))||n.enumerable});return t},Iw=t=>Pw(Qa({},"__esModule",{value:!0}),t),ep={};Tw(ep,{Inputs:()=>Aw});var ni=Iw(ep),xw=ge,_i=ke;function Cw(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?(0,xw.toBase64)(t):t.toBase64()}}}const Aw={Pure:Cw,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:(0,_i.normalizeSuiAddress)(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:(0,_i.normalizeSuiAddress)(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:(0,_i.normalizeSuiAddress)(t)}}}}};function tp(){return{kind:"transformation",type:"await",reference:tp,async:!0,async _run(t){return t.value=await t.value,t}}}var rp=/^[A-Z]{6}(?!00)[A-Z\d]{2}(?:[A-Z\d]{3})?$/u,np=/^[a-z][\da-z]*$/u,sp=/^\d+$/u,ip=/^[\w+-]+(?:\.[\w+-]+)*@[\da-z]+(?:[.-][\da-z]+)*\.[a-z]{2,}$/iu,ap=/^[\p{Extended_Pictographic}\p{Emoji_Component}]+$/u,op=/^(?:0h|0x)?[\da-f]+$/iu,cp=/^#(?:[\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/iu,up=/^\d{15}$|^\d{2}-\d{6}-\d{6}-\d$/u,lp=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$/u,pp=/^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,dp=/^(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])(?:\.(?:(?:[1-9]|1\d|2[0-4])?\d|25[0-5])){3}$|^(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:|(?:[\da-f]{1,4}:){1,6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,5}(?::[\da-f]{1,4}){1,2}|(?:[\da-f]{1,4}:){1,4}(?::[\da-f]{1,4}){1,3}|(?:[\da-f]{1,4}:){1,3}(?::[\da-f]{1,4}){1,4}|(?:[\da-f]{1,4}:){1,2}(?::[\da-f]{1,4}){1,5}|[\da-f]{1,4}:(?::[\da-f]{1,4}){1,6}|:(?:(?::[\da-f]{1,4}){1,7}|:)|fe80:(?::[\da-f]{0,4}){0,4}%[\da-z]+|::(?:f{4}(?::0{1,4})?:)?(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d)|(?:[\da-f]{1,4}:){1,4}:(?:(?:25[0-5]|(?:2[0-4]|1?\d)?\d)\.){3}(?:25[0-5]|(?:2[0-4]|1?\d)?\d))$/iu,fp=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u,hp=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3]):[0-5]\d$/u,yp=/^(?:0\d|1\d|2[0-3]):[0-5]\d$/u,gp=/^(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}$/u,bp=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])T(?:0\d|1\d|2[0-3])(?::[0-5]\d){2}(?:\.\d{1,9})?(?:Z|[+-](?:0\d|1\d|2[0-3])(?::?[0-5]\d)?)$/u,vp=/^\d{4}-W(?:0[1-9]|[1-4]\d|5[0-3])$/u,mp=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$/iu,_p=/^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,wp=/^(?:[\da-f]{2}:){5}[\da-f]{2}$|^(?:[\da-f]{2}-){5}[\da-f]{2}$|^(?:[\da-f]{4}\.){2}[\da-f]{4}$|^(?:[\da-f]{2}:){7}[\da-f]{2}$|^(?:[\da-f]{2}-){7}[\da-f]{2}$|^(?:[\da-f]{4}\.){3}[\da-f]{4}$|^(?:[\da-f]{4}:){3}[\da-f]{4}$/iu,Op=/^(?:0o)?[0-7]+$/iu,Sp=/^[\da-hjkmnp-tv-z]{26}$/iu,$p=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu,Pe;function Mw(t){Pe={...Pe,...t}}function Wn(t){return{lang:(t==null?void 0:t.lang)??(Pe==null?void 0:Pe.lang),message:t==null?void 0:t.message,abortEarly:(t==null?void 0:t.abortEarly)??(Pe==null?void 0:Pe.abortEarly),abortPipeEarly:(t==null?void 0:t.abortPipeEarly)??(Pe==null?void 0:Pe.abortPipeEarly)}}function Nw(){Pe=void 0}var $t;function Bw(t,e){$t||($t=new Map),$t.set(e,t)}function kp(t){return $t==null?void 0:$t.get(t)}function Dw(t){$t==null||$t.delete(t)}var kt;function Uw(t,e){kt||(kt=new Map),kt.set(e,t)}function Ep(t){return kt==null?void 0:kt.get(t)}function Rw(t){kt==null||kt.delete(t)}var Je;function zw(t,e,r){Je||(Je=new Map),Je.get(t)||Je.set(t,new Map),Je.get(t).set(r,e)}function jp(t,e){var r;return(r=Je==null?void 0:Je.get(t))==null?void 0:r.get(e)}function Vw(t,e){var r;(r=Je==null?void 0:Je.get(t))==null||r.delete(e)}function Oe(t){var r,n;const e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&((n=(r=Object.getPrototypeOf(t))==null?void 0:r.constructor)==null?void 0:n.name))??"null":e}function v(t,e,r,n,s){const i=s&&"input"in s?s.input:r.value,a=(s==null?void 0:s.expected)??t.expects??null,o=(s==null?void 0:s.received)??Oe(i),c={kind:t.kind,type:t.type,input:i,expected:a,received:o,message:`Invalid ${e}: ${a?`Expected ${a} but r`:"R"}eceived ${o}`,requirement:t.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},l=t.kind==="schema",u=(s==null?void 0:s.message)??t.message??jp(t.reference,c.lang)??(l?Ep(c.lang):null)??n.message??kp(c.lang);u&&(c.message=typeof u=="function"?u(c):u),l&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}var Lw=/\D/gu;function eo(t){const e=t.replace(Lw,"");let r=e.length,n=1,s=0;for(;r;){const i=+e[--r];n^=1,s+=n?[0,2,4,6,8,1,3,5,7,9][i]:i}return s%10===0}function dr(t,e){return Object.hasOwn(t,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}function Fw(t,e){const r={};for(const n of t)r[n]=e;return r}function Tp(t){if(t.path){let e="";for(const r of t.path)if(typeof r.key=="string"||typeof r.key=="number")e?e+=`.${r.key}`:e+=r.key;else return null;return e}return null}function qw(t,e){return e.kind===t}function Gw(t,e){return e.type===t}function Ww(t){return t instanceof si}var si=class extends Error{constructor(e){super(e[0].message);uc(this,"issues");this.name="ValiError",this.issues=e}};function Pp(t){return{kind:"validation",type:"bic",reference:Pp,async:!1,expects:null,requirement:rp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"BIC",e,r),e}}}function Ip(t){return{kind:"transformation",type:"brand",reference:Ip,async:!1,name:t,_run(e){return e}}}function xp(t,e){return{kind:"validation",type:"bytes",reference:xp,async:!1,expects:`${t}`,requirement:t,message:e,_run(r,n){if(r.typed){const s=new TextEncoder().encode(r.value).length;s!==this.requirement&&v(this,"bytes",r,n,{received:`${s}`})}return r}}}function Fr(t,e){return{kind:"validation",type:"check",reference:Fr,async:!1,expects:null,requirement:t,message:e,_run(r,n){return r.typed&&!this.requirement(r.value)&&v(this,"input",r,n),r}}}function Cp(t,e){return{kind:"validation",type:"check",reference:Cp,async:!0,expects:null,requirement:t,message:e,async _run(r,n){return r.typed&&!await this.requirement(r.value)&&v(this,"input",r,n),r}}}function Ap(t,e){return{kind:"validation",type:"check_items",reference:Ap,async:!1,expects:null,requirement:t,message:e,_run(r,n){if(r.typed)for(let s=0;s<r.value.length;s++){const i=r.value[s];this.requirement(i,s,r.value)||v(this,"item",r,n,{input:i,path:[{type:"array",origin:"value",input:r.value,key:s,value:i}]})}return r}}}var Jw=/^(?:\d{14,19}|\d{4}(?: \d{3,6}){2,4}|\d{4}(?:-\d{3,6}){2,4})$/u,Kw=/[- ]/gu,Hw=[/^3[47]\d{13}$/u,/^3(?:0[0-5]|[68]\d)\d{11,13}$/u,/^6(?:011|5\d{2})\d{12,15}$/u,/^(?:2131|1800|35\d{3})\d{11}$/u,/^5[1-5]\d{2}|(?:222\d|22[3-9]\d|2[3-6]\d{2}|27[01]\d|2720)\d{12}$/u,/^(?:6[27]\d{14,17}|81\d{14,17})$/u,/^4\d{12}(?:\d{3,6})?$/u];function Mp(t){return{kind:"validation",type:"credit_card",reference:Mp,async:!1,expects:null,requirement(e){let r;return Jw.test(e)&&(r=e.replace(Kw,""))&&Hw.some(n=>n.test(r))&&eo(r)},message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"credit card",e,r),e}}}function Np(t){return{kind:"validation",type:"cuid2",reference:Np,async:!1,expects:null,requirement:np,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"Cuid2",e,r),e}}}function Bp(t){return{kind:"validation",type:"decimal",reference:Bp,async:!1,expects:null,requirement:sp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"decimal",e,r),e}}}function Dp(t){return{kind:"validation",type:"email",reference:Dp,expects:null,async:!1,requirement:ip,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"email",e,r),e}}}function Up(t){return{kind:"validation",type:"emoji",reference:Up,async:!1,expects:null,requirement:ap,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"emoji",e,r),e}}}function Rp(t){return{kind:"validation",type:"empty",reference:Rp,async:!1,expects:"0",message:t,_run(e,r){return e.typed&&e.value.length>0&&v(this,"length",e,r,{received:`${e.value.length}`}),e}}}function zp(t,e){return{kind:"validation",type:"ends_with",reference:zp,async:!1,expects:`"${t}"`,requirement:t,message:e,_run(r,n){return r.typed&&!r.value.endsWith(this.requirement)&&v(this,"end",r,n,{received:`"${r.value.slice(-this.requirement.length)}"`}),r}}}function Vp(t,e){return{kind:"validation",type:"every_item",reference:Vp,async:!1,expects:null,requirement:t,message:e,_run(r,n){return r.typed&&!r.value.every(this.requirement)&&v(this,"item",r,n),r}}}function Lp(t,e){const r=Oe(t);return{kind:"validation",type:"excludes",reference:Lp,async:!1,expects:`!${r}`,requirement:t,message:e,_run(n,s){return n.typed&&n.value.includes(this.requirement)&&v(this,"content",n,s,{received:r}),n}}}function Fp(t){return{kind:"transformation",type:"filter_items",reference:Fp,async:!1,operation:t,_run(e){return e.value=e.value.filter(this.operation),e}}}function qp(t){return{kind:"transformation",type:"find_item",reference:qp,async:!1,operation:t,_run(e){return e.value=e.value.find(this.operation),e}}}function Gp(t){return{kind:"validation",type:"finite",reference:Gp,async:!1,expects:null,requirement:Number.isFinite,message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"finite",e,r),e}}}var Xw={md4:32,md5:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8,adler32:8};function Wp(t,e){return{kind:"validation",type:"hash",reference:Wp,expects:null,async:!1,requirement:RegExp(t.map(r=>`^[a-f0-9]{${Xw[r]}}$`).join("|"),"iu"),message:e,_run(r,n){return r.typed&&!this.requirement.test(r.value)&&v(this,"hash",r,n),r}}}function Jp(t){return{kind:"validation",type:"hexadecimal",reference:Jp,async:!1,expects:null,requirement:op,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"hexadecimal",e,r),e}}}function Kp(t){return{kind:"validation",type:"hex_color",reference:Kp,async:!1,expects:null,requirement:cp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"hex color",e,r),e}}}function Hp(t){return{kind:"validation",type:"imei",reference:Hp,async:!1,expects:null,requirement(e){return up.test(e)&&eo(e)},message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"IMEI",e,r),e}}}function Xp(t,e){const r=Oe(t);return{kind:"validation",type:"includes",reference:Xp,async:!1,expects:r,requirement:t,message:e,_run(n,s){return n.typed&&!n.value.includes(this.requirement)&&v(this,"content",n,s,{received:`!${r}`}),n}}}function ee(t){return{kind:"validation",type:"integer",reference:ee,async:!1,expects:null,requirement:Number.isInteger,message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"integer",e,r),e}}}function Yp(t){return{kind:"validation",type:"ip",reference:Yp,async:!1,expects:null,requirement:dp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"IP",e,r),e}}}function Zp(t){return{kind:"validation",type:"ipv4",reference:Zp,async:!1,expects:null,requirement:lp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"IPv4",e,r),e}}}function Qp(t){return{kind:"validation",type:"ipv6",reference:Qp,async:!1,expects:null,requirement:pp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"IPv6",e,r),e}}}function ed(t){return{kind:"validation",type:"iso_date",reference:ed,async:!1,expects:null,requirement:fp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"date",e,r),e}}}function td(t){return{kind:"validation",type:"iso_date_time",reference:td,async:!1,expects:null,requirement:hp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"date-time",e,r),e}}}function rd(t){return{kind:"validation",type:"iso_time",reference:rd,async:!1,expects:null,requirement:yp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"time",e,r),e}}}function nd(t){return{kind:"validation",type:"iso_time_second",reference:nd,async:!1,expects:null,requirement:gp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"time-second",e,r),e}}}function sd(t){return{kind:"validation",type:"iso_timestamp",reference:sd,async:!1,expects:null,requirement:bp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"timestamp",e,r),e}}}function id(t){return{kind:"validation",type:"iso_week",reference:id,async:!1,expects:null,requirement:vp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"week",e,r),e}}}function ad(t,e){return{kind:"validation",type:"length",reference:ad,async:!1,expects:`${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.length!==this.requirement&&v(this,"length",r,n,{received:`${r.value.length}`}),r}}}function od(t){return{kind:"validation",type:"mac",reference:od,async:!1,expects:null,requirement:wp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"MAC",e,r),e}}}function cd(t){return{kind:"validation",type:"mac48",reference:cd,async:!1,expects:null,requirement:mp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"48-bit MAC",e,r),e}}}function ud(t){return{kind:"validation",type:"mac64",reference:ud,async:!1,expects:null,requirement:_p,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"64-bit MAC",e,r),e}}}function ld(t){return{kind:"transformation",type:"map_items",reference:ld,async:!1,operation:t,_run(e){return e.value=e.value.map(this.operation),e}}}function pd(t,e){return{kind:"validation",type:"max_bytes",reference:pd,async:!1,expects:`<=${t}`,requirement:t,message:e,_run(r,n){if(r.typed){const s=new TextEncoder().encode(r.value).length;s>this.requirement&&v(this,"bytes",r,n,{received:`${s}`})}return r}}}function dd(t,e){return{kind:"validation",type:"max_length",reference:dd,async:!1,expects:`<=${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.length>this.requirement&&v(this,"length",r,n,{received:`${r.value.length}`}),r}}}function fd(t,e){return{kind:"validation",type:"max_size",reference:fd,async:!1,expects:`<=${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.size>this.requirement&&v(this,"size",r,n,{received:`${r.value.size}`}),r}}}function hd(t,e){return{kind:"validation",type:"max_value",reference:hd,async:!1,expects:`<=${t instanceof Date?t.toJSON():Oe(t)}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value>this.requirement&&v(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():Oe(r.value)}),r}}}function yd(t,e){return{kind:"validation",type:"mime_type",reference:yd,async:!1,expects:t.map(r=>`"${r}"`).join(" | ")||"never",requirement:t,message:e,_run(r,n){return r.typed&&!this.requirement.includes(r.value.type)&&v(this,"MIME type",r,n,{received:`"${r.value.type}"`}),r}}}function gd(t,e){return{kind:"validation",type:"min_bytes",reference:gd,async:!1,expects:`>=${t}`,requirement:t,message:e,_run(r,n){if(r.typed){const s=new TextEncoder().encode(r.value).length;s<this.requirement&&v(this,"bytes",r,n,{received:`${s}`})}return r}}}function bd(t,e){return{kind:"validation",type:"min_length",reference:bd,async:!1,expects:`>=${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.length<this.requirement&&v(this,"length",r,n,{received:`${r.value.length}`}),r}}}function vd(t,e){return{kind:"validation",type:"min_size",reference:vd,async:!1,expects:`>=${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.size<this.requirement&&v(this,"size",r,n,{received:`${r.value.size}`}),r}}}function md(t,e){return{kind:"validation",type:"min_value",reference:md,async:!1,expects:`>=${t instanceof Date?t.toJSON():Oe(t)}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value<this.requirement&&v(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():Oe(r.value)}),r}}}function _d(t,e){return{kind:"validation",type:"multiple_of",reference:_d,async:!1,expects:`%${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value%this.requirement!==0&&v(this,"multiple",r,n),r}}}function wd(t){return{kind:"validation",type:"non_empty",reference:wd,async:!1,expects:"!0",message:t,_run(e,r){return e.typed&&e.value.length===0&&v(this,"length",e,r,{received:"0"}),e}}}function Od(t){return{kind:"transformation",type:"normalize",reference:Od,async:!1,form:t,_run(e){return e.value=e.value.normalize(this.form),e}}}function Sd(t,e){return{kind:"validation",type:"not_bytes",reference:Sd,async:!1,expects:`!${t}`,requirement:t,message:e,_run(r,n){if(r.typed){const s=new TextEncoder().encode(r.value).length;s===this.requirement&&v(this,"bytes",r,n,{received:`${s}`})}return r}}}function $d(t,e){return{kind:"validation",type:"not_length",reference:$d,async:!1,expects:`!${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.length===this.requirement&&v(this,"length",r,n,{received:`${r.value.length}`}),r}}}function kd(t,e){return{kind:"validation",type:"not_size",reference:kd,async:!1,expects:`!${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.size===this.requirement&&v(this,"size",r,n,{received:`${r.value.size}`}),r}}}function Ed(t,e){return{kind:"validation",type:"not_value",reference:Ed,async:!1,expects:t instanceof Date?`!${t.toJSON()}`:`!${Oe(t)}`,requirement:t,message:e,_run(r,n){return r.typed&&this.requirement<=r.value&&this.requirement>=r.value&&v(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():Oe(r.value)}),r}}}function jd(t){return{kind:"validation",type:"octal",reference:jd,async:!1,expects:null,requirement:Op,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"octal",e,r),e}}}function Td(t,e){var r;if(t.issues)for(const n of e)for(const s of t.issues){let i=!1;const a=Math.min(n.length,((r=s.path)==null?void 0:r.length)??0);for(let o=0;o<a;o++)if(n[o]!==s.path[o].key){i=!0;break}if(!i)return!1}return!0}function Pd(t,e,r){return{kind:"validation",type:"partial_check",reference:Pd,async:!1,expects:null,requirement:e,message:r,_run(n,s){return Td(n,t)&&!this.requirement(n.value)&&v(this,"input",n,s),n}}}function Id(t,e,r){return{kind:"validation",type:"partial_check",reference:Id,async:!0,expects:null,requirement:e,message:r,async _run(n,s){return Td(n,t)&&!await this.requirement(n.value)&&v(this,"input",n,s),n}}}function xd(t){return{kind:"validation",type:"raw_check",reference:xd,async:!1,expects:null,_run(e,r){return t({dataset:e,config:r,addIssue:n=>v(this,(n==null?void 0:n.label)??"input",e,r,n)}),e}}}function Cd(t){return{kind:"validation",type:"raw_check",reference:Cd,async:!0,expects:null,async _run(e,r){return await t({dataset:e,config:r,addIssue:n=>v(this,(n==null?void 0:n.label)??"input",e,r,n)}),e}}}function Ad(t){return{kind:"transformation",type:"raw_transform",reference:Ad,async:!1,_run(e,r){const n=t({dataset:e,config:r,addIssue:s=>v(this,(s==null?void 0:s.label)??"input",e,r,s),NEVER:null});return e.issues?e.typed=!1:e.value=n,e}}}function Md(t){return{kind:"transformation",type:"raw_transform",reference:Md,async:!0,async _run(e,r){const n=await t({dataset:e,config:r,addIssue:s=>v(this,(s==null?void 0:s.label)??"input",e,r,s),NEVER:null});return e.issues?e.typed=!1:e.value=n,e}}}function Nd(){return{kind:"transformation",type:"readonly",reference:Nd,async:!1,_run(t){return t}}}function Bd(t,e){return{kind:"transformation",type:"reduce_items",reference:Bd,async:!1,operation:t,initial:e,_run(r){return r.value=r.value.reduce(this.operation,this.initial),r}}}function Dd(t,e){return{kind:"validation",type:"regex",reference:Dd,async:!1,expects:`${t}`,requirement:t,message:e,_run(r,n){return r.typed&&!this.requirement.test(r.value)&&v(this,"format",r,n),r}}}function Ud(t){return{kind:"validation",type:"safe_integer",reference:Ud,async:!1,expects:null,requirement:Number.isSafeInteger,message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"safe integer",e,r),e}}}function Rd(t,e){return{kind:"validation",type:"size",reference:Rd,async:!1,expects:`${t}`,requirement:t,message:e,_run(r,n){return r.typed&&r.value.size!==this.requirement&&v(this,"size",r,n,{received:`${r.value.size}`}),r}}}function zd(t,e){return{kind:"validation",type:"some_item",reference:zd,async:!1,expects:null,requirement:t,message:e,_run(r,n){return r.typed&&!r.value.some(this.requirement)&&v(this,"item",r,n),r}}}function Vd(t){return{kind:"transformation",type:"sort_items",reference:Vd,async:!1,operation:t,_run(e){return e.value=e.value.sort(this.operation),e}}}function Ld(t,e){return{kind:"validation",type:"starts_with",reference:Ld,async:!1,expects:`"${t}"`,requirement:t,message:e,_run(r,n){return r.typed&&!r.value.startsWith(this.requirement)&&v(this,"start",r,n,{received:`"${r.value.slice(0,this.requirement.length)}"`}),r}}}function Fd(){return{kind:"transformation",type:"to_lower_case",reference:Fd,async:!1,_run(t){return t.value=t.value.toLowerCase(),t}}}function qd(t){return{kind:"transformation",type:"to_max_value",reference:qd,async:!1,requirement:t,_run(e){return e.value=e.value>this.requirement?this.requirement:e.value,e}}}function Gd(t){return{kind:"transformation",type:"to_min_value",reference:Gd,async:!1,requirement:t,_run(e){return e.value=e.value<this.requirement?this.requirement:e.value,e}}}function Wd(){return{kind:"transformation",type:"to_upper_case",reference:Wd,async:!1,_run(t){return t.value=t.value.toUpperCase(),t}}}function Jn(t){return{kind:"transformation",type:"transform",reference:Jn,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}function Jd(t){return{kind:"transformation",type:"transform",reference:Jd,async:!0,operation:t,async _run(e){return e.value=await this.operation(e.value),e}}}function Kd(){return{kind:"transformation",type:"trim",reference:Kd,async:!1,_run(t){return t.value=t.value.trim(),t}}}function Hd(){return{kind:"transformation",type:"trim_end",reference:Hd,async:!1,_run(t){return t.value=t.value.trimEnd(),t}}}function Xd(){return{kind:"transformation",type:"trim_start",reference:Xd,async:!1,_run(t){return t.value=t.value.trimStart(),t}}}function Yd(t){return{kind:"validation",type:"ulid",reference:Yd,async:!1,expects:null,requirement:Sp,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"ULID",e,r),e}}}function Zd(t){return{kind:"validation",type:"url",reference:Zd,async:!1,expects:null,requirement(e){try{return new URL(e),!0}catch{return!1}},message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&v(this,"URL",e,r),e}}}function Qd(t){return{kind:"validation",type:"uuid",reference:Qd,async:!1,expects:null,requirement:$p,message:t,_run(e,r){return e.typed&&!this.requirement.test(e.value)&&v(this,"UUID",e,r),e}}}function ef(t,e){return{kind:"validation",type:"value",reference:ef,async:!1,expects:t instanceof Date?t.toJSON():Oe(t),requirement:t,message:e,_run(r,n){return r.typed&&!(this.requirement<=r.value&&this.requirement>=r.value)&&v(this,"value",r,n,{received:r.value instanceof Date?r.value.toJSON():Oe(r.value)}),r}}}function Yw(t,e){return{...t,_run(r,n){return t._run(r,{...n,...e})}}}function Kn(t,e,r){return typeof t.fallback=="function"?t.fallback(e,r):t.fallback}function Zw(t,e){return{...t,fallback:e,_run(r,n){return t._run(r,n),r.issues?{typed:!0,value:Kn(this,r,n)}:r}}}function Qw(t,e){return{...t,fallback:e,async:!0,async _run(r,n){return t._run(r,n),r.issues?{typed:!0,value:await Kn(this,r,n)}:r}}}function eO(t){const e={};for(const r of t)if(r.path){const n=Tp(r);n?(e.nested||(e.nested={}),e.nested[n]?e.nested[n].push(r.message):e.nested[n]=[r.message]):e.other?e.other.push(r.message):e.other=[r.message]}else e.root?e.root.push(r.message):e.root=[r.message];return e}function tO(t,e){return{...t,_run(r,n){const s=r.issues&&[...r.issues];if(t._run(r,n),r.issues){for(const i of r.issues)if(!(s!=null&&s.includes(i))){let a=r.value;for(const o of e){const c=a[o],l={type:"unknown",origin:"value",input:a,key:o,value:c};if(i.path?i.path.push(l):i.path=[l],!c)break;a=c}}}return r}}}function rO(t,e){return{...t,async:!0,async _run(r,n){const s=r.issues&&[...r.issues];if(await t._run(r,n),r.issues){for(const i of r.issues)if(!(s!=null&&s.includes(i))){let a=r.value;for(const o of e){const c=a[o],l={type:"unknown",origin:"value",input:a,key:o,value:c};if(i.path?i.path.push(l):i.path=[l],!c)break;a=c}}}return r}}}function Tt(t,e,r){return typeof t.default=="function"?t.default(e,r):t.default}function Ri(t){if("entries"in t){const e={};for(const r in t.entries)e[r]=Ri(t.entries[r]);return e}return"items"in t?t.items.map(Ri):Tt(t)}async function zi(t){return"entries"in t?Object.fromEntries(await Promise.all(Object.entries(t.entries).map(async([e,r])=>[e,await zi(r)]))):"items"in t?Promise.all(t.items.map(zi)):Tt(t)}function Vi(t){if("entries"in t){const e={};for(const r in t.entries)e[r]=Vi(t.entries[r]);return e}return"items"in t?t.items.map(Vi):Kn(t)}async function Li(t){return"entries"in t?Object.fromEntries(await Promise.all(Object.entries(t.entries).map(async([e,r])=>[e,await Li(r)]))):"items"in t?Promise.all(t.items.map(Li)):Kn(t)}function Us(t,e){return!t._run({typed:!1,value:e},{abortEarly:!0}).issues}function tf(){return{kind:"schema",type:"any",reference:tf,expects:"any",async:!1,_run(t){return t.typed=!0,t}}}function I(t,e){return{kind:"schema",type:"array",reference:I,expects:"Array",async:!1,item:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<s.length;a++){const o=s[a],c=this.item._run({typed:!1,value:o},n);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else v(this,"type",r,n);return r}}}function rf(t,e){return{kind:"schema",type:"array",reference:rf,expects:"Array",async:!0,item:t,message:e,async _run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];const a=await Promise.all(s.map(o=>this.item._run({typed:!1,value:o},n)));for(let o=0;o<a.length;o++){const c=a[o];if(c.issues){const l={type:"array",origin:"value",input:s,key:o,value:s[o]};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else v(this,"type",r,n);return r}}}function ii(t){return{kind:"schema",type:"bigint",reference:ii,expects:"bigint",async:!1,message:t,_run(e,r){return typeof e.value=="bigint"?e.typed=!0:v(this,"type",e,r),e}}}function nf(t){return{kind:"schema",type:"blob",reference:nf,expects:"Blob",async:!1,message:t,_run(e,r){return e.value instanceof Blob?e.typed=!0:v(this,"type",e,r),e}}}function Hn(t){return{kind:"schema",type:"boolean",reference:Hn,expects:"boolean",async:!1,message:t,_run(e,r){return typeof e.value=="boolean"?e.typed=!0:v(this,"type",e,r),e}}}function sf(t,e){return{kind:"schema",type:"custom",reference:sf,expects:"unknown",async:!1,check:t,message:e,_run(r,n){return this.check(r.value)?r.typed=!0:v(this,"type",r,n),r}}}function af(t,e){return{kind:"schema",type:"custom",reference:af,expects:"unknown",async:!0,check:t,message:e,async _run(r,n){return await this.check(r.value)?r.typed=!0:v(this,"type",r,n),r}}}function of(t){return{kind:"schema",type:"date",reference:of,expects:"Date",async:!1,message:t,_run(e,r){return e.value instanceof Date?isNaN(e.value)?v(this,"type",e,r,{received:'"Invalid Date"'}):e.typed=!0:v(this,"type",e,r),e}}}function Fi(t,e){const r=Object.entries(t).filter(([n])=>isNaN(+n)).map(([,n])=>n);return{kind:"schema",type:"enum",reference:Fi,expects:r.map(Oe).join(" | ")||"never",async:!1,enum:t,options:r,message:e,_run(n,s){return this.options.includes(n.value)?n.typed=!0:v(this,"type",n,s),n}}}function cf(t){return{kind:"schema",type:"file",reference:cf,expects:"File",async:!1,message:t,_run(e,r){return e.value instanceof File?e.typed=!0:v(this,"type",e,r),e}}}function qi(t){return{kind:"schema",type:"function",reference:qi,expects:"Function",async:!1,message:t,_run(e,r){return typeof e.value=="function"?e.typed=!0:v(this,"type",e,r),e}}}function uf(t,e){return{kind:"schema",type:"instance",reference:uf,expects:t.name,async:!1,class:t,message:e,_run(r,n){return r.value instanceof this.class?r.typed=!0:v(this,"type",r,n),r}}}function Rs(t,e){if(typeof t==typeof e){if(t===e||t instanceof Date&&e instanceof Date&&+t==+e)return{value:t};if(t&&e&&t.constructor===Object&&e.constructor===Object){for(const r in e)if(r in t){const n=Rs(t[r],e[r]);if(n.issue)return n;t[r]=n.value}else t[r]=e[r];return{value:t}}if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length){for(let r=0;r<t.length;r++){const n=Rs(t[r],e[r]);if(n.issue)return n;t[r]=n.value}return{value:t}}}return{issue:!0}}function lf(t,e){return{kind:"schema",type:"intersect",reference:lf,expects:[...new Set(t.map(r=>r.expects))].join(" & ")||"never",async:!1,options:t,message:e,_run(r,n){if(this.options.length){const s=r.value;let i;r.typed=!0;for(const a of this.options){const o=a._run({typed:!1,value:s},n);if(o.issues&&(r.issues?r.issues.push(...o.issues):r.issues=o.issues,n.abortEarly)){r.typed=!1;break}o.typed||(r.typed=!1),r.typed&&(i?i.push(o.value):i=[o.value])}if(r.typed){r.value=i[0];for(let a=1;a<i.length;a++){const o=Rs(r.value,i[a]);if(o.issue){v(this,"type",r,n,{received:"unknown"});break}r.value=o.value}}}else v(this,"type",r,n);return r}}}function pf(t,e){return{kind:"schema",type:"intersect",reference:pf,expects:[...new Set(t.map(r=>r.expects))].join(" & ")||"never",async:!0,options:t,message:e,async _run(r,n){if(this.options.length){const s=r.value;let i;r.typed=!0;const a=await Promise.all(this.options.map(o=>o._run({typed:!1,value:s},n)));for(const o of a){if(o.issues&&(r.issues?r.issues.push(...o.issues):r.issues=o.issues,n.abortEarly)){r.typed=!1;break}o.typed||(r.typed=!1),r.typed&&(i?i.push(o.value):i=[o.value])}if(r.typed){r.value=i[0];for(let o=1;o<i.length;o++){const c=Rs(r.value,i[o]);if(c.issue){v(this,"type",r,n,{received:"unknown"});break}r.value=c.value}}}else v(this,"type",r,n);return r}}}function Dr(t){return{kind:"schema",type:"lazy",reference:Dr,expects:"unknown",async:!1,getter:t,_run(e,r){return this.getter(e.value)._run(e,r)}}}function df(t){return{kind:"schema",type:"lazy",reference:df,expects:"unknown",async:!0,getter:t,async _run(e,r){return(await this.getter(e.value))._run(e,r)}}}function C(t,e){return{kind:"schema",type:"literal",reference:C,expects:Oe(t),async:!1,literal:t,message:e,_run(r,n){return r.value===this.literal?r.typed=!0:v(this,"type",r,n),r}}}function ff(t,e){return{kind:"schema",type:"loose_object",reference:ff,expects:"Object",async:!1,entries:t,message:e,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const a in this.entries){const o=s[a],c=this.entries[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"object",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||a in s)&&(r.value[a]=c.value)}if(!r.issues||!n.abortEarly)for(const a in s)dr(s,a)&&!(a in this.entries)&&(r.value[a]=s[a])}else v(this,"type",r,n);return r}}}function hf(t,e){return{kind:"schema",type:"loose_object",reference:hf,expects:"Object",async:!0,entries:t,message:e,async _run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};const a=await Promise.all(Object.entries(this.entries).map(async([o,c])=>{const l=s[o];return[o,l,await c._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"object",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),(l.value!==void 0||o in s)&&(r.value[o]=l.value)}if(!r.issues||!n.abortEarly)for(const o in s)dr(s,o)&&!(o in this.entries)&&(r.value[o]=s[o])}else v(this,"type",r,n);return r}}}function yf(t,e){return{kind:"schema",type:"loose_tuple",reference:yf,expects:"Array",async:!1,items:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<this.items.length;a++){const o=s[a],c=this.items[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}if(!r.issues||!n.abortEarly)for(let a=this.items.length;a<s.length;a++)r.value.push(s[a])}else v(this,"type",r,n);return r}}}function gf(t,e){return{kind:"schema",type:"loose_tuple",reference:gf,expects:"Array",async:!0,items:t,message:e,async _run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];const a=await Promise.all(this.items.map(async(o,c)=>{const l=s[c];return[c,l,await o._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"array",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value.push(l.value)}if(!r.issues||!n.abortEarly)for(let o=this.items.length;o<s.length;o++)r.value.push(s[o])}else v(this,"type",r,n);return r}}}function bf(t,e,r){return{kind:"schema",type:"map",reference:bf,expects:"Map",async:!1,key:t,value:e,message:r,_run(n,s){var a,o;const i=n.value;if(i instanceof Map){n.typed=!0,n.value=new Map;for(const[c,l]of i){const u=this.key._run({typed:!1,value:c},s);if(u.issues){const f={type:"map",origin:"key",input:i,key:c,value:l};for(const h of u.issues)h.path?h.path.unshift(f):h.path=[f],(a=n.issues)==null||a.push(h);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}const p=this.value._run({typed:!1,value:l},s);if(p.issues){const f={type:"map",origin:"value",input:i,key:c,value:l};for(const h of p.issues)h.path?h.path.unshift(f):h.path=[f],(o=n.issues)==null||o.push(h);if(n.issues||(n.issues=p.issues),s.abortEarly){n.typed=!1;break}}(!u.typed||!p.typed)&&(n.typed=!1),n.value.set(u.value,p.value)}}else v(this,"type",n,s);return n}}}function vf(t,e,r){return{kind:"schema",type:"map",reference:vf,expects:"Map",async:!0,key:t,value:e,message:r,async _run(n,s){var a,o;const i=n.value;if(i instanceof Map){n.typed=!0,n.value=new Map;const c=await Promise.all([...i].map(([l,u])=>Promise.all([l,u,this.key._run({typed:!1,value:l},s),this.value._run({typed:!1,value:u},s)])));for(const[l,u,p,f]of c){if(p.issues){const h={type:"map",origin:"key",input:i,key:l,value:u};for(const y of p.issues)y.path?y.path.unshift(h):y.path=[h],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=p.issues),s.abortEarly){n.typed=!1;break}}if(f.issues){const h={type:"map",origin:"value",input:i,key:l,value:u};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(o=n.issues)==null||o.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}(!p.typed||!f.typed)&&(n.typed=!1),n.value.set(p.value,f.value)}}else v(this,"type",n,s);return n}}}function mf(t){return{kind:"schema",type:"nan",reference:mf,expects:"NaN",async:!1,message:t,_run(e,r){return Number.isNaN(e.value)?e.typed=!0:v(this,"type",e,r),e}}}function _f(t){return{kind:"schema",type:"never",reference:_f,expects:"never",async:!1,message:t,_run(e,r){return v(this,"type",e,r),e}}}function wf(t,e){return{kind:"schema",type:"non_nullable",reference:wf,expects:"!null",async:!1,wrapped:t,message:e,_run(r,n){return r.value===null?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function Of(t,e){return{kind:"schema",type:"non_nullable",reference:Of,expects:"!null",async:!0,wrapped:t,message:e,async _run(r,n){return r.value===null?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function Sf(t,e){return{kind:"schema",type:"non_nullish",reference:Sf,expects:"!null & !undefined",async:!1,wrapped:t,message:e,_run(r,n){return r.value===null||r.value===void 0?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function $f(t,e){return{kind:"schema",type:"non_nullish",reference:$f,expects:"!null & !undefined",async:!0,wrapped:t,message:e,async _run(r,n){return r.value===null||r.value===void 0?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function to(t,e){return{kind:"schema",type:"non_optional",reference:to,expects:"!undefined",async:!1,wrapped:t,message:e,_run(r,n){return r.value===void 0?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function ro(t,e){return{kind:"schema",type:"non_optional",reference:ro,expects:"!undefined",async:!0,wrapped:t,message:e,async _run(r,n){return r.value===void 0?(v(this,"type",r,n),r):this.wrapped._run(r,n)}}}function Gi(t){return{kind:"schema",type:"null",reference:Gi,expects:"null",async:!1,message:t,_run(e,r){return e.value===null?e.typed=!0:v(this,"type",e,r),e}}}function L(t,...e){const r={kind:"schema",type:"nullable",reference:L,expects:`${t.expects} | null`,async:!1,wrapped:t,_run(n,s){return n.value===null&&("default"in this&&(n.value=Tt(this,n,s)),n.value===null)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function kf(t,...e){const r={kind:"schema",type:"nullable",reference:kf,expects:`${t.expects} | null`,async:!0,wrapped:t,async _run(n,s){return n.value===null&&("default"in this&&(n.value=await Tt(this,n,s)),n.value===null)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function lr(t,...e){const r={kind:"schema",type:"nullish",reference:lr,expects:`${t.expects} | null | undefined`,async:!1,wrapped:t,_run(n,s){return(n.value===null||n.value===void 0)&&("default"in this&&(n.value=Tt(this,n,s)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function Ef(t,...e){const r={kind:"schema",type:"nullish",reference:Ef,expects:`${t.expects} | null | undefined`,async:!0,wrapped:t,async _run(n,s){return(n.value===null||n.value===void 0)&&("default"in this&&(n.value=await Tt(this,n,s)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function Q(t){return{kind:"schema",type:"number",reference:Q,expects:"number",async:!1,message:t,_run(e,r){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:v(this,"type",e,r),e}}}function O(t,e){return{kind:"schema",type:"object",reference:O,expects:"Object",async:!1,entries:t,message:e,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const a in this.entries){const o=s[a],c=this.entries[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"object",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||a in s)&&(r.value[a]=c.value)}}else v(this,"type",r,n);return r}}}function jf(t,e){return{kind:"schema",type:"object",reference:jf,expects:"Object",async:!0,entries:t,message:e,async _run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};const a=await Promise.all(Object.entries(this.entries).map(async([o,c])=>{const l=s[o];return[o,l,await c._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"object",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),(l.value!==void 0||o in s)&&(r.value[o]=l.value)}}else v(this,"type",r,n);return r}}}function Tf(t,e,r){return{kind:"schema",type:"object_with_rest",reference:Tf,expects:"Object",async:!1,entries:t,rest:e,message:r,_run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const c in this.entries){const l=i[c],u=this.entries[c]._run({typed:!1,value:l},s);if(u.issues){const p={type:"object",origin:"value",input:i,key:c,value:l};for(const f of u.issues)f.path?f.path.unshift(p):f.path=[p],(a=n.issues)==null||a.push(f);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),(u.value!==void 0||c in i)&&(n.value[c]=u.value)}if(!n.issues||!s.abortEarly){for(const c in i)if(dr(i,c)&&!(c in this.entries)){const l=i[c],u=this.rest._run({typed:!1,value:l},s);if(u.issues){const p={type:"object",origin:"value",input:i,key:c,value:l};for(const f of u.issues)f.path?f.path.unshift(p):f.path=[p],(o=n.issues)==null||o.push(f);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value[c]=u.value}}}else v(this,"type",n,s);return n}}}function Pf(t,e,r){return{kind:"schema",type:"object_with_rest",reference:Pf,expects:"Object",async:!0,entries:t,rest:e,message:r,async _run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};const[c,l]=await Promise.all([Promise.all(Object.entries(this.entries).map(async([u,p])=>{const f=i[u];return[u,f,await p._run({typed:!1,value:f},s)]})),Promise.all(Object.entries(i).filter(([u])=>dr(i,u)&&!(u in this.entries)).map(async([u,p])=>[u,p,await this.rest._run({typed:!1,value:p},s)]))]);for(const[u,p,f]of c){if(f.issues){const h={type:"object",origin:"value",input:i,key:u,value:p};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}f.typed||(n.typed=!1),(f.value!==void 0||u in i)&&(n.value[u]=f.value)}if(!n.issues||!s.abortEarly)for(const[u,p,f]of l){if(f.issues){const h={type:"object",origin:"value",input:i,key:u,value:p};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(o=n.issues)==null||o.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}f.typed||(n.typed=!1),n.value[u]=f.value}}else v(this,"type",n,s);return n}}}function de(t,...e){const r={kind:"schema",type:"optional",reference:de,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(n,s){return n.value===void 0&&("default"in this&&(n.value=Tt(this,n,s)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function no(t,...e){const r={kind:"schema",type:"optional",reference:no,expects:`${t.expects} | undefined`,async:!0,wrapped:t,async _run(n,s){return n.value===void 0&&("default"in this&&(n.value=await Tt(this,n,s)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function so(t,e){return{kind:"schema",type:"picklist",reference:so,expects:t.map(Oe).join(" | ")||"never",async:!1,options:t,message:e,_run(r,n){return this.options.includes(r.value)?r.typed=!0:v(this,"type",r,n),r}}}function If(t){return{kind:"schema",type:"promise",reference:If,expects:"Promise",async:!1,message:t,_run(e,r){return e.value instanceof Promise?e.typed=!0:v(this,"type",e,r),e}}}function Ur(t,e,r){return{kind:"schema",type:"record",reference:Ur,expects:"Object",async:!1,key:t,value:e,message:r,_run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const c in i)if(dr(i,c)){const l=i[c],u=this.key._run({typed:!1,value:c},s);if(u.issues){const f={type:"object",origin:"key",input:i,key:c,value:l};for(const h of u.issues)h.path=[f],(a=n.issues)==null||a.push(h);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}const p=this.value._run({typed:!1,value:l},s);if(p.issues){const f={type:"object",origin:"value",input:i,key:c,value:l};for(const h of p.issues)h.path?h.path.unshift(f):h.path=[f],(o=n.issues)==null||o.push(h);if(n.issues||(n.issues=p.issues),s.abortEarly){n.typed=!1;break}}(!u.typed||!p.typed)&&(n.typed=!1),u.typed&&(n.value[u.value]=p.value)}}else v(this,"type",n,s);return n}}}function xf(t,e,r){return{kind:"schema",type:"record",reference:xf,expects:"Object",async:!0,key:t,value:e,message:r,async _run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};const c=await Promise.all(Object.entries(i).filter(([l])=>dr(i,l)).map(([l,u])=>Promise.all([l,u,this.key._run({typed:!1,value:l},s),this.value._run({typed:!1,value:u},s)])));for(const[l,u,p,f]of c){if(p.issues){const h={type:"object",origin:"key",input:i,key:l,value:u};for(const y of p.issues)y.path=[h],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=p.issues),s.abortEarly){n.typed=!1;break}}if(f.issues){const h={type:"object",origin:"value",input:i,key:l,value:u};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(o=n.issues)==null||o.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}(!p.typed||!f.typed)&&(n.typed=!1),p.typed&&(n.value[p.value]=f.value)}}else v(this,"type",n,s);return n}}}function Cf(t,e){return{kind:"schema",type:"set",reference:Cf,expects:"Set",async:!1,value:t,message:e,_run(r,n){var i;const s=r.value;if(s instanceof Set){r.typed=!0,r.value=new Set;for(const a of s){const o=this.value._run({typed:!1,value:a},n);if(o.issues){const c={type:"set",origin:"value",input:s,key:null,value:a};for(const l of o.issues)l.path?l.path.unshift(c):l.path=[c],(i=r.issues)==null||i.push(l);if(r.issues||(r.issues=o.issues),n.abortEarly){r.typed=!1;break}}o.typed||(r.typed=!1),r.value.add(o.value)}}else v(this,"type",r,n);return r}}}function Af(t,e){return{kind:"schema",type:"set",reference:Af,expects:"Set",async:!0,value:t,message:e,async _run(r,n){var i;const s=r.value;if(s instanceof Set){r.typed=!0,r.value=new Set;const a=await Promise.all([...s].map(async o=>[o,await this.value._run({typed:!1,value:o},n)]));for(const[o,c]of a){if(c.issues){const l={type:"set",origin:"value",input:s,key:null,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.add(c.value)}}else v(this,"type",r,n);return r}}}function Mf(t,e){return{kind:"schema",type:"strict_object",reference:Mf,expects:"Object",async:!1,entries:t,message:e,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const a in this.entries){const o=s[a],c=this.entries[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"object",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||a in s)&&(r.value[a]=c.value)}if(!r.issues||!n.abortEarly){for(const a in s)if(!(a in this.entries)){const o=s[a];v(this,"type",r,n,{input:o,expected:"never",path:[{type:"object",origin:"value",input:s,key:a,value:o}]});break}}}else v(this,"type",r,n);return r}}}function Nf(t,e){return{kind:"schema",type:"strict_object",reference:Nf,expects:"Object",async:!0,entries:t,message:e,async _run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};const a=await Promise.all(Object.entries(this.entries).map(async([o,c])=>{const l=s[o];return[o,l,await c._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"object",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),(l.value!==void 0||o in s)&&(r.value[o]=l.value)}if(!r.issues||!n.abortEarly){for(const o in s)if(!(o in this.entries)){const c=s[o];v(this,"type",r,n,{input:c,expected:"never",path:[{type:"object",origin:"value",input:s,key:o,value:c}]});break}}}else v(this,"type",r,n);return r}}}function Bf(t,e){return{kind:"schema",type:"strict_tuple",reference:Bf,expects:"Array",async:!1,items:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<this.items.length;a++){const o=s[a],c=this.items[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}if(!(r.issues&&n.abortEarly)&&this.items.length<s.length){const a=s[t.length];v(this,"type",r,n,{input:a,expected:"never",path:[{type:"array",origin:"value",input:s,key:this.items.length,value:a}]})}}else v(this,"type",r,n);return r}}}function Df(t,e){return{kind:"schema",type:"strict_tuple",reference:Df,expects:"Array",async:!0,items:t,message:e,async _run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];const a=await Promise.all(this.items.map(async(o,c)=>{const l=s[c];return[c,l,await o._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"array",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value.push(l.value)}if(!(r.issues&&n.abortEarly)&&this.items.length<s.length){const o=s[t.length];v(this,"type",r,n,{input:o,expected:"never",path:[{type:"array",origin:"value",input:s,key:this.items.length,value:o}]})}}else v(this,"type",r,n);return r}}}function M(t){return{kind:"schema",type:"string",reference:M,expects:"string",async:!1,message:t,_run(e,r){return typeof e.value=="string"?e.typed=!0:v(this,"type",e,r),e}}}function Uf(t){return{kind:"schema",type:"symbol",reference:Uf,expects:"symbol",async:!1,message:t,_run(e,r){return typeof e.value=="symbol"?e.typed=!0:v(this,"type",e,r),e}}}function ai(t,e){return{kind:"schema",type:"tuple",reference:ai,expects:"Array",async:!1,items:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<this.items.length;a++){const o=s[a],c=this.items[a]._run({typed:!1,value:o},n);if(c.issues){const l={type:"array",origin:"value",input:s,key:a,value:o};for(const u of c.issues)u.path?u.path.unshift(l):u.path=[l],(i=r.issues)==null||i.push(u);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else v(this,"type",r,n);return r}}}function Rf(t,e){return{kind:"schema",type:"tuple",reference:Rf,expects:"Array",async:!0,items:t,message:e,async _run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];const a=await Promise.all(this.items.map(async(o,c)=>{const l=s[c];return[c,l,await o._run({typed:!1,value:l},n)]}));for(const[o,c,l]of a){if(l.issues){const u={type:"array",origin:"value",input:s,key:o,value:c};for(const p of l.issues)p.path?p.path.unshift(u):p.path=[u],(i=r.issues)==null||i.push(p);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value.push(l.value)}}else v(this,"type",r,n);return r}}}function zf(t,e,r){return{kind:"schema",type:"tuple_with_rest",reference:zf,expects:"Array",async:!1,items:t,rest:e,message:r,_run(n,s){var a,o;const i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];for(let c=0;c<this.items.length;c++){const l=i[c],u=this.items[c]._run({typed:!1,value:l},s);if(u.issues){const p={type:"array",origin:"value",input:i,key:c,value:l};for(const f of u.issues)f.path?f.path.unshift(p):f.path=[p],(a=n.issues)==null||a.push(f);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}if(!n.issues||!s.abortEarly)for(let c=this.items.length;c<i.length;c++){const l=i[c],u=this.rest._run({typed:!1,value:l},s);if(u.issues){const p={type:"array",origin:"value",input:i,key:c,value:l};for(const f of u.issues)f.path?f.path.unshift(p):f.path=[p],(o=n.issues)==null||o.push(f);if(n.issues||(n.issues=u.issues),s.abortEarly){n.typed=!1;break}}u.typed||(n.typed=!1),n.value.push(u.value)}}else v(this,"type",n,s);return n}}}function Vf(t,e,r){return{kind:"schema",type:"tuple_with_rest",reference:Vf,expects:"Array",async:!0,items:t,rest:e,message:r,async _run(n,s){var a,o;const i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];const[c,l]=await Promise.all([Promise.all(this.items.map(async(u,p)=>{const f=i[p];return[p,f,await u._run({typed:!1,value:f},s)]})),Promise.all(i.slice(this.items.length).map(async(u,p)=>[p+this.items.length,u,await this.rest._run({typed:!1,value:u},s)]))]);for(const[u,p,f]of c){if(f.issues){const h={type:"array",origin:"value",input:i,key:u,value:p};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(a=n.issues)==null||a.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}f.typed||(n.typed=!1),n.value.push(f.value)}if(!n.issues||!s.abortEarly)for(const[u,p,f]of l){if(f.issues){const h={type:"array",origin:"value",input:i,key:u,value:p};for(const y of f.issues)y.path?y.path.unshift(h):y.path=[h],(o=n.issues)==null||o.push(y);if(n.issues||(n.issues=f.issues),s.abortEarly){n.typed=!1;break}}f.typed||(n.typed=!1),n.value.push(f.value)}}else v(this,"type",n,s);return n}}}function Wi(t){return{kind:"schema",type:"undefined",reference:Wi,expects:"undefined",async:!1,message:t,_run(e,r){return e.value===void 0?e.typed=!0:v(this,"type",e,r),e}}}function zs(t){let e;if(t)for(const r of t)e?e.push(...r.issues):e=r.issues;return e}function he(t,e){return{kind:"schema",type:"union",reference:he,expects:[...new Set(t.map(r=>r.expects))].join(" | ")||"never",async:!1,options:t,message:e,_run(r,n){let s,i,a;for(const o of this.options){const c=o._run({typed:!1,value:r.value},n);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];v(this,"type",r,n,{issues:zs(i)}),r.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];v(this,"type",r,n,{issues:zs(a)})}return r}}}function Lf(t,e){return{kind:"schema",type:"union",reference:Lf,expects:[...new Set(t.map(r=>r.expects))].join(" | ")||"never",async:!0,options:t,message:e,async _run(r,n){let s,i,a;for(const o of this.options){const c=await o._run({typed:!1,value:r.value},n);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];v(this,"type",r,n,{issues:zs(i)}),r.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];v(this,"type",r,n,{issues:zs(a)})}return r}}}function Vt(){return{kind:"schema",type:"unknown",reference:Vt,expects:"unknown",async:!1,_run(t){return t.typed=!0,t}}}function io(t,e,r=new Set){for(const n of e)n.type==="variant"?io(t,n.options,r):r.add(n.entries[t].expects);return r}function Ff(t,e,r){let n;return{kind:"schema",type:"variant",reference:Ff,expects:"Object",async:!1,key:t,options:e,message:r,_run(s,i){const a=s.value;if(a&&typeof a=="object"){const o=a[this.key];if(this.key in a){let c;for(const l of this.options)if(l.type==="variant"||!l.entries[this.key]._run({typed:!1,value:o},i).issues){const u=l._run({typed:!1,value:a},i);if(!u.issues)return u;(!c||!c.typed&&u.typed)&&(c=u)}if(c)return c}n||(n=[...io(this.key,this.options)].join(" | ")||"never"),v(this,"type",s,i,{input:o,expected:n,path:[{type:"object",origin:"value",input:a,key:this.key,value:o}]})}else v(this,"type",s,i);return s}}}function qf(t,e,r){let n;return{kind:"schema",type:"variant",reference:qf,expects:"Object",async:!0,key:t,options:e,message:r,async _run(s,i){const a=s.value;if(a&&typeof a=="object"){const o=a[this.key];if(this.key in a){let c;for(const l of this.options)if(l.type==="variant"||!(await l.entries[this.key]._run({typed:!1,value:o},i)).issues){const u=await l._run({typed:!1,value:a},i);if(!u.issues)return u;(!c||!c.typed&&u.typed)&&(c=u)}if(c)return c}n||(n=[...io(this.key,this.options)].join(" | ")||"never"),v(this,"type",s,i,{input:o,expected:n,path:[{type:"object",origin:"value",input:a,key:this.key,value:o}]})}else v(this,"type",s,i);return s}}}function Ji(t){return{kind:"schema",type:"void",reference:Ji,expects:"void",async:!1,message:t,_run(e,r){return e.value===void 0?e.typed=!0:v(this,"type",e,r),e}}}function nO(t,e){return so(Object.keys(t.entries),e)}function sO(t,e){const r={...t.entries};for(const n of e)delete r[n];return{...t,entries:r}}function Y(t,e,r){const n=t._run({typed:!1,value:e},Wn(r));if(n.issues)throw new si(n.issues);return n.value}async function Gf(t,e,r){const n=await t._run({typed:!1,value:e},Wn(r));if(n.issues)throw new si(n.issues);return n.value}function iO(t,e){const r=n=>Y(t,n,e);return r.schema=t,r.config=e,r}function aO(t,e){const r=n=>Gf(t,n,e);return r.schema=t,r.config=e,r}function oO(t,e){const r={};for(const n in t.entries)r[n]=!e||e.includes(n)?de(t.entries[n]):t.entries[n];return{...t,entries:r}}function cO(t,e){const r={};for(const n in t.entries)r[n]=!e||e.includes(n)?no(t.entries[n]):t.entries[n];return{...t,entries:r}}function uO(t,e){const r={};for(const n of e)r[n]=t.entries[n];return{...t,entries:r}}function K(...t){return{...t[0],pipe:t,_run(e,r){for(let n=0;n<t.length;n++){if(e.issues&&(t[n].kind==="schema"||t[n].kind==="transformation")){e.typed=!1;break}(!e.issues||!r.abortEarly&&!r.abortPipeEarly)&&(e=t[n]._run(e,r))}return e}}}function lO(...t){return{...t[0],pipe:t,async:!0,async _run(e,r){for(let n=0;n<t.length;n++){if(e.issues&&(t[n].kind==="schema"||t[n].kind==="transformation")){e.typed=!1;break}(!e.issues||!r.abortEarly&&!r.abortPipeEarly)&&(e=await t[n]._run(e,r))}return e}}}function pO(t,e,r){const n=Array.isArray(e)?e:void 0,s=Array.isArray(e)?r:e,i={};for(const a in t.entries)i[a]=!n||n.includes(a)?to(t.entries[a],s):t.entries[a];return{...t,entries:i}}function dO(t,e,r){const n=Array.isArray(e)?e:void 0,s=Array.isArray(e)?r:e,i={};for(const a in t.entries)i[a]=!n||n.includes(a)?ro(t.entries[a],s):t.entries[a];return{...t,entries:i}}function Wf(t,e,r){const n=t._run({typed:!1,value:e},Wn(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}async function Jf(t,e,r){const n=await t._run({typed:!1,value:e},Wn(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}function fO(t,e){const r=n=>Wf(t,n,e);return r.schema=t,r.config=e,r}function hO(t,e){const r=n=>Jf(t,n,e);return r.schema=t,r.config=e,r}function yO(t){return t.wrapped}const gO=Object.freeze(Object.defineProperty({__proto__:null,BIC_REGEX:rp,CUID2_REGEX:np,DECIMAL_REGEX:sp,EMAIL_REGEX:ip,EMOJI_REGEX:ap,HEXADECIMAL_REGEX:op,HEX_COLOR_REGEX:cp,IMEI_REGEX:up,IPV4_REGEX:lp,IPV6_REGEX:pp,IP_REGEX:dp,ISO_DATE_REGEX:fp,ISO_DATE_TIME_REGEX:hp,ISO_TIMESTAMP_REGEX:bp,ISO_TIME_REGEX:yp,ISO_TIME_SECOND_REGEX:gp,ISO_WEEK_REGEX:vp,MAC48_REGEX:mp,MAC64_REGEX:_p,MAC_REGEX:wp,OCTAL_REGEX:Op,ULID_REGEX:Sp,UUID_REGEX:$p,ValiError:si,_addIssue:v,_isLuhnAlgo:eo,_isValidObjectKey:dr,_stringify:Oe,any:tf,array:I,arrayAsync:rf,awaitAsync:tp,bic:Pp,bigint:ii,blob:nf,boolean:Hn,brand:Ip,bytes:xp,check:Fr,checkAsync:Cp,checkItems:Ap,config:Yw,creditCard:Mp,cuid2:Np,custom:sf,customAsync:af,date:of,decimal:Bp,deleteGlobalConfig:Nw,deleteGlobalMessage:Dw,deleteSchemaMessage:Rw,deleteSpecificMessage:Vw,email:Dp,emoji:Up,empty:Rp,endsWith:zp,entriesFromList:Fw,enum:Fi,enum_:Fi,everyItem:Vp,excludes:Lp,fallback:Zw,fallbackAsync:Qw,file:cf,filterItems:Fp,findItem:qp,finite:Gp,flatten:eO,forward:tO,forwardAsync:rO,function:qi,function_:qi,getDefault:Tt,getDefaults:Ri,getDefaultsAsync:zi,getDotPath:Tp,getFallback:Kn,getFallbacks:Vi,getFallbacksAsync:Li,getGlobalConfig:Wn,getGlobalMessage:kp,getSchemaMessage:Ep,getSpecificMessage:jp,hash:Wp,hexColor:Kp,hexadecimal:Jp,imei:Hp,includes:Xp,instance:uf,integer:ee,intersect:lf,intersectAsync:pf,ip:Yp,ipv4:Zp,ipv6:Qp,is:Us,isOfKind:qw,isOfType:Gw,isValiError:Ww,isoDate:ed,isoDateTime:td,isoTime:rd,isoTimeSecond:nd,isoTimestamp:sd,isoWeek:id,keyof:nO,lazy:Dr,lazyAsync:df,length:ad,literal:C,looseObject:ff,looseObjectAsync:hf,looseTuple:yf,looseTupleAsync:gf,mac:od,mac48:cd,mac64:ud,map:bf,mapAsync:vf,mapItems:ld,maxBytes:pd,maxLength:dd,maxSize:fd,maxValue:hd,mimeType:yd,minBytes:gd,minLength:bd,minSize:vd,minValue:md,multipleOf:_d,nan:mf,never:_f,nonEmpty:wd,nonNullable:wf,nonNullableAsync:Of,nonNullish:Sf,nonNullishAsync:$f,nonOptional:to,nonOptionalAsync:ro,normalize:Od,notBytes:Sd,notLength:$d,notSize:kd,notValue:Ed,null:Gi,null_:Gi,nullable:L,nullableAsync:kf,nullish:lr,nullishAsync:Ef,number:Q,object:O,objectAsync:jf,objectWithRest:Tf,objectWithRestAsync:Pf,octal:jd,omit:sO,optional:de,optionalAsync:no,parse:Y,parseAsync:Gf,parser:iO,parserAsync:aO,partial:oO,partialAsync:cO,partialCheck:Pd,partialCheckAsync:Id,pick:uO,picklist:so,pipe:K,pipeAsync:lO,promise:If,rawCheck:xd,rawCheckAsync:Cd,rawTransform:Ad,rawTransformAsync:Md,readonly:Nd,record:Ur,recordAsync:xf,reduceItems:Bd,regex:Dd,required:pO,requiredAsync:dO,safeInteger:Ud,safeParse:Wf,safeParseAsync:Jf,safeParser:fO,safeParserAsync:hO,set:Cf,setAsync:Af,setGlobalConfig:Mw,setGlobalMessage:Bw,setSchemaMessage:Uw,setSpecificMessage:zw,size:Rd,someItem:zd,sortItems:Vd,startsWith:Ld,strictObject:Mf,strictObjectAsync:Nf,strictTuple:Bf,strictTupleAsync:Df,string:M,symbol:Uf,toLowerCase:Fd,toMaxValue:qd,toMinValue:Gd,toUpperCase:Wd,transform:Jn,transformAsync:Jd,trim:Kd,trimEnd:Hd,trimStart:Xd,tuple:ai,tupleAsync:Rf,tupleWithRest:zf,tupleWithRestAsync:Vf,ulid:Yd,undefined:Wi,undefined_:Wi,union:he,unionAsync:Lf,unknown:Vt,unwrap:yO,url:Zd,uuid:Qd,value:ef,variant:Ff,variantAsync:qf,void:Ji,void_:Ji},Symbol.toStringTag,{value:"Module"})),qt=fu(gO);var ao=Object.defineProperty,bO=Object.getOwnPropertyDescriptor,vO=Object.getOwnPropertyNames,mO=Object.prototype.hasOwnProperty,_O=(t,e)=>{for(var r in e)ao(t,r,{get:e[r],enumerable:!0})},wO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of vO(e))!mO.call(t,s)&&s!==r&&ao(t,s,{get:()=>e[s],enumerable:!(n=bO(e,s))||n.enumerable});return t},OO=t=>wO(ao({},"__esModule",{value:!0}),t),Kf={};_O(Kf,{$Intent:()=>Yf,Argument:()=>Ie,BCSBytes:()=>Nn,Command:()=>Zf,GasData:()=>Hf,JsonU64:()=>Lt,NormalizedCallArg:()=>EO,ObjectArg:()=>oo,ObjectID:()=>or,ObjectRef:()=>Vs,OpenMoveTypeSignature:()=>Xf,OpenMoveTypeSignatureBody:()=>Ls,StructTag:()=>SO,SuiAddress:()=>Xn,TransactionData:()=>jO,TransactionExpiration:()=>Qf,safeEnum:()=>Gr});var qr=OO(Kf),b=qt,mc=ke;function Gr(t){const e=Object.entries(t).map(([r,n])=>(0,b.object)({[r]:n}));return(0,b.pipe)((0,b.union)(e),(0,b.transform)(r=>({...r,$kind:Object.keys(r)[0]})))}const Xn=(0,b.pipe)((0,b.string)(),(0,b.transform)(t=>(0,mc.normalizeSuiAddress)(t)),(0,b.check)(mc.isValidSuiAddress)),or=Xn,Nn=(0,b.string)(),Lt=(0,b.pipe)((0,b.union)([(0,b.string)(),(0,b.pipe)((0,b.number)(),(0,b.integer)())]),(0,b.check)(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Vs=(0,b.object)({objectId:Xn,version:Lt,digest:(0,b.string)()}),Ie=(0,b.pipe)((0,b.union)([(0,b.object)({GasCoin:(0,b.literal)(!0)}),(0,b.object)({Input:(0,b.pipe)((0,b.number)(),(0,b.integer)()),type:(0,b.optional)((0,b.literal)("pure"))}),(0,b.object)({Input:(0,b.pipe)((0,b.number)(),(0,b.integer)()),type:(0,b.optional)((0,b.literal)("object"))}),(0,b.object)({Result:(0,b.pipe)((0,b.number)(),(0,b.integer)())}),(0,b.object)({NestedResult:(0,b.tuple)([(0,b.pipe)((0,b.number)(),(0,b.integer)()),(0,b.pipe)((0,b.number)(),(0,b.integer)())])})]),(0,b.transform)(t=>({...t,$kind:Object.keys(t)[0]}))),Hf=(0,b.object)({budget:(0,b.nullable)(Lt),price:(0,b.nullable)(Lt),owner:(0,b.nullable)(Xn),payment:(0,b.nullable)((0,b.array)(Vs))}),SO=(0,b.object)({address:(0,b.string)(),module:(0,b.string)(),name:(0,b.string)(),typeParams:(0,b.array)((0,b.string)())}),Ls=(0,b.union)([(0,b.literal)("address"),(0,b.literal)("bool"),(0,b.literal)("u8"),(0,b.literal)("u16"),(0,b.literal)("u32"),(0,b.literal)("u64"),(0,b.literal)("u128"),(0,b.literal)("u256"),(0,b.object)({vector:(0,b.lazy)(()=>Ls)}),(0,b.object)({datatype:(0,b.object)({package:(0,b.string)(),module:(0,b.string)(),type:(0,b.string)(),typeParameters:(0,b.array)((0,b.lazy)(()=>Ls))})}),(0,b.object)({typeParameter:(0,b.pipe)((0,b.number)(),(0,b.integer)())})]),Xf=(0,b.object)({ref:(0,b.nullable)((0,b.union)([(0,b.literal)("&"),(0,b.literal)("&mut")])),body:Ls}),$O=(0,b.object)({package:or,module:(0,b.string)(),function:(0,b.string)(),typeArguments:(0,b.array)((0,b.string)()),arguments:(0,b.array)(Ie),_argumentTypes:(0,b.optional)((0,b.nullable)((0,b.array)(Xf)))}),Yf=(0,b.object)({name:(0,b.string)(),inputs:(0,b.record)((0,b.string)(),(0,b.union)([Ie,(0,b.array)(Ie)])),data:(0,b.record)((0,b.string)(),(0,b.unknown)())}),Zf=Gr({MoveCall:$O,TransferObjects:(0,b.object)({objects:(0,b.array)(Ie),address:Ie}),SplitCoins:(0,b.object)({coin:Ie,amounts:(0,b.array)(Ie)}),MergeCoins:(0,b.object)({destination:Ie,sources:(0,b.array)(Ie)}),Publish:(0,b.object)({modules:(0,b.array)(Nn),dependencies:(0,b.array)(or)}),MakeMoveVec:(0,b.object)({type:(0,b.nullable)((0,b.string)()),elements:(0,b.array)(Ie)}),Upgrade:(0,b.object)({modules:(0,b.array)(Nn),dependencies:(0,b.array)(or),package:or,ticket:Ie}),$Intent:Yf}),oo=Gr({ImmOrOwnedObject:Vs,SharedObject:(0,b.object)({objectId:or,initialSharedVersion:Lt,mutable:(0,b.boolean)()}),Receiving:Vs}),kO=Gr({Object:oo,Pure:(0,b.object)({bytes:Nn}),UnresolvedPure:(0,b.object)({value:(0,b.unknown)()}),UnresolvedObject:(0,b.object)({objectId:or,version:(0,b.optional)((0,b.nullable)(Lt)),digest:(0,b.optional)((0,b.nullable)((0,b.string)())),initialSharedVersion:(0,b.optional)((0,b.nullable)(Lt))})}),EO=Gr({Object:oo,Pure:(0,b.object)({bytes:Nn})}),Qf=Gr({None:(0,b.literal)(!0),Epoch:Lt}),jO=(0,b.object)({version:(0,b.literal)(2),sender:(0,b.nullish)(Xn),expiration:(0,b.nullish)(Qf),gasData:Hf,inputs:(0,b.array)(kO),commands:(0,b.array)(Zf)});var co=Object.defineProperty,TO=Object.getOwnPropertyDescriptor,PO=Object.getOwnPropertyNames,IO=Object.prototype.hasOwnProperty,xO=(t,e)=>{for(var r in e)co(t,r,{get:e[r],enumerable:!0})},CO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of PO(e))!IO.call(t,s)&&s!==r&&co(t,s,{get:()=>e[s],enumerable:!(n=TO(e,s))||n.enumerable});return t},AO=t=>CO(co({},"__esModule",{value:!0}),t),eh={};xO(eh,{Commands:()=>MO,UpgradePolicy:()=>th});var uo=AO(eh),_c=ge,Qe=qt,wc=ke,et=qr,th=(t=>(t[t.COMPATIBLE=0]="COMPATIBLE",t[t.ADDITIVE=128]="ADDITIVE",t[t.DEP_ONLY=192]="DEP_ONLY",t))(th||{});const MO={MoveCall(t){const[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>(0,Qe.parse)(et.Argument,r)),address:(0,Qe.parse)(et.Argument,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:(0,Qe.parse)(et.Argument,t),amounts:e.map(r=>(0,Qe.parse)(et.Argument,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:(0,Qe.parse)(et.Argument,t),sources:e.map(r=>(0,Qe.parse)(et.Argument,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:(0,_c.toBase64)(new Uint8Array(r))),dependencies:e.map(r=>(0,wc.normalizeSuiObjectId)(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:(0,_c.toBase64)(new Uint8Array(s))),dependencies:e.map(s=>(0,wc.normalizeSuiObjectId)(s)),package:r,ticket:(0,Qe.parse)(et.Argument,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>(0,Qe.parse)(et.Argument,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,s])=>[n,Array.isArray(s)?s.map(i=>(0,Qe.parse)(et.Argument,i)):(0,Qe.parse)(et.Argument,s)])),data:r}}}};var lo=Object.defineProperty,NO=Object.getOwnPropertyDescriptor,BO=Object.getOwnPropertyNames,DO=Object.prototype.hasOwnProperty,UO=(t,e)=>{for(var r in e)lo(t,r,{get:e[r],enumerable:!0})},RO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of BO(e))!DO.call(t,s)&&s!==r&&lo(t,s,{get:()=>e[s],enumerable:!(n=NO(e,s))||n.enumerable});return t},zO=t=>RO(lo({},"__esModule",{value:!0}),t),rh={};UO(rh,{NormalizedCallArg:()=>Ki,ObjectRef:()=>Fs,SerializedTransactionDataV1:()=>e0,StructTag:()=>ah,TransactionArgument:()=>at,TypeTag:()=>oi,serializeV1TransactionData:()=>t0,transactionDataFromV1:()=>r0});var nh=zO(rh),Pr=ge,g=qt,sh=ot,On=qr;const Fs=(0,g.object)({digest:(0,g.string)(),objectId:(0,g.string)(),version:(0,g.union)([(0,g.pipe)((0,g.number)(),(0,g.integer)()),(0,g.string)(),(0,g.bigint)()])}),VO=(0,On.safeEnum)({ImmOrOwned:Fs,Shared:(0,g.object)({objectId:On.ObjectID,initialSharedVersion:On.JsonU64,mutable:(0,g.boolean)()}),Receiving:Fs}),Ki=(0,On.safeEnum)({Object:VO,Pure:(0,g.array)((0,g.pipe)((0,g.number)(),(0,g.integer)()))}),ih=(0,g.union)([(0,g.object)({kind:(0,g.literal)("Input"),index:(0,g.pipe)((0,g.number)(),(0,g.integer)()),value:(0,g.unknown)(),type:(0,g.optional)((0,g.literal)("object"))}),(0,g.object)({kind:(0,g.literal)("Input"),index:(0,g.pipe)((0,g.number)(),(0,g.integer)()),value:(0,g.unknown)(),type:(0,g.literal)("pure")})]),LO=(0,g.union)([(0,g.object)({Epoch:(0,g.pipe)((0,g.number)(),(0,g.integer)())}),(0,g.object)({None:(0,g.nullable)((0,g.literal)(!0))})]),Oc=(0,g.pipe)((0,g.union)([(0,g.number)(),(0,g.string)(),(0,g.bigint)()]),(0,g.check)(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),oi=(0,g.union)([(0,g.object)({bool:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u8:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u64:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u128:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({address:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({signer:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({vector:(0,g.lazy)(()=>oi)}),(0,g.object)({struct:(0,g.lazy)(()=>ah)}),(0,g.object)({u16:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u32:(0,g.nullable)((0,g.literal)(!0))}),(0,g.object)({u256:(0,g.nullable)((0,g.literal)(!0))})]),ah=(0,g.object)({address:(0,g.string)(),module:(0,g.string)(),name:(0,g.string)(),typeParams:(0,g.array)(oi)}),FO=(0,g.object)({budget:(0,g.optional)(Oc),price:(0,g.optional)(Oc),payment:(0,g.optional)((0,g.array)(Fs)),owner:(0,g.optional)((0,g.string)())}),qO=[ih,(0,g.object)({kind:(0,g.literal)("GasCoin")}),(0,g.object)({kind:(0,g.literal)("Result"),index:(0,g.pipe)((0,g.number)(),(0,g.integer)())}),(0,g.object)({kind:(0,g.literal)("NestedResult"),index:(0,g.pipe)((0,g.number)(),(0,g.integer)()),resultIndex:(0,g.pipe)((0,g.number)(),(0,g.integer)())})],at=(0,g.union)([...qO]),GO=(0,g.object)({kind:(0,g.literal)("MoveCall"),target:(0,g.pipe)((0,g.string)(),(0,g.check)(t=>t.split("::").length===3)),typeArguments:(0,g.array)((0,g.string)()),arguments:(0,g.array)(at)}),WO=(0,g.object)({kind:(0,g.literal)("TransferObjects"),objects:(0,g.array)(at),address:at}),JO=(0,g.object)({kind:(0,g.literal)("SplitCoins"),coin:at,amounts:(0,g.array)(at)}),KO=(0,g.object)({kind:(0,g.literal)("MergeCoins"),destination:at,sources:(0,g.array)(at)}),HO=(0,g.object)({kind:(0,g.literal)("MakeMoveVec"),type:(0,g.union)([(0,g.object)({Some:oi}),(0,g.object)({None:(0,g.nullable)((0,g.literal)(!0))})]),objects:(0,g.array)(at)}),XO=(0,g.object)({kind:(0,g.literal)("Publish"),modules:(0,g.array)((0,g.array)((0,g.pipe)((0,g.number)(),(0,g.integer)()))),dependencies:(0,g.array)((0,g.string)())}),YO=(0,g.object)({kind:(0,g.literal)("Upgrade"),modules:(0,g.array)((0,g.array)((0,g.pipe)((0,g.number)(),(0,g.integer)()))),dependencies:(0,g.array)((0,g.string)()),packageId:(0,g.string)(),ticket:at}),ZO=[GO,WO,JO,KO,XO,YO,HO],QO=(0,g.union)([...ZO]),e0=(0,g.object)({version:(0,g.literal)(1),sender:(0,g.optional)((0,g.string)()),expiration:(0,g.nullish)(LO),gasConfig:FO,inputs:(0,g.array)(ih),transactions:(0,g.array)(QO)});function t0(t){var r;const e=t.inputs.map((n,s)=>{if(n.Object)return{kind:"Input",index:s,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:s,value:{Pure:Array.from((0,Pr.fromBase64)(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((r=t.expiration)==null?void 0:r.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:sh.TypeTagSerializer.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(s=>ut(s,e))};if(n.MergeCoins)return{kind:"MergeCoins",destination:ut(n.MergeCoins.destination,e),sources:n.MergeCoins.sources.map(s=>ut(s,e))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(s=>ut(s,e))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(s=>Array.from((0,Pr.fromBase64)(s))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:ut(n.SplitCoins.coin,e),amounts:n.SplitCoins.amounts.map(s=>ut(s,e))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(s=>ut(s,e)),address:ut(n.TransferObjects.address,e)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(s=>Array.from((0,Pr.fromBase64)(s))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:ut(n.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function ut(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function r0(t){var e,r,n;return(0,g.parse)(On.TransactionData,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((r=t.gasConfig.price)==null?void 0:r.toString())??null,payment:((n=t.gasConfig.payment)==null?void 0:n.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if((0,g.is)(Ki,s.value)){const i=(0,g.parse)(Ki,s.value);if(i.Object){if(i.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:i.Object.ImmOrOwned.objectId,version:String(i.Object.ImmOrOwned.version),digest:i.Object.ImmOrOwned.digest}}};if(i.Object.Shared)return{Object:{SharedObject:{mutable:i.Object.Shared.mutable??null,initialSharedVersion:i.Object.Shared.initialSharedVersion,objectId:i.Object.Shared.objectId}}};if(i.Object.Receiving)return{Object:{Receiving:{digest:i.Object.Receiving.digest,version:String(i.Object.Receiving.version),objectId:i.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:(0,Pr.toBase64)(new Uint8Array(i.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?sh.TypeTagSerializer.tagToString(s.type.Some):null,elements:s.objects.map(i=>lt(i))}};case"MergeCoins":return{MergeCoins:{destination:lt(s.destination),sources:s.sources.map(i=>lt(i))}};case"MoveCall":{const[i,a,o]=s.target.split("::");return{MoveCall:{package:i,module:a,function:o,typeArguments:s.typeArguments,arguments:s.arguments.map(c=>lt(c))}}}case"Publish":return{Publish:{modules:s.modules.map(i=>(0,Pr.toBase64)(Uint8Array.from(i))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:lt(s.coin),amounts:s.amounts.map(i=>lt(i))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(i=>lt(i)),address:lt(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(i=>(0,Pr.toBase64)(Uint8Array.from(i))),dependencies:s.dependencies,package:s.packageId,ticket:lt(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function lt(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}var po=Object.defineProperty,n0=Object.getOwnPropertyDescriptor,s0=Object.getOwnPropertyNames,i0=Object.prototype.hasOwnProperty,a0=(t,e)=>{for(var r in e)po(t,r,{get:e[r],enumerable:!0})},o0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of s0(e))!i0.call(t,s)&&s!==r&&po(t,s,{get:()=>e[s],enumerable:!(n=n0(e,s))||n.enumerable});return t},c0=t=>o0(po({},"__esModule",{value:!0}),t),oh={};a0(oh,{SerializedTransactionDataV2:()=>b0});var u0=c0(oh),$=qt,ce=qr;function Yn(t){return(0,$.union)(Object.entries(t).map(([e,r])=>(0,$.object)({[e]:r})))}const Ue=Yn({GasCoin:(0,$.literal)(!0),Input:(0,$.pipe)((0,$.number)(),(0,$.integer)()),Result:(0,$.pipe)((0,$.number)(),(0,$.integer)()),NestedResult:(0,$.tuple)([(0,$.pipe)((0,$.number)(),(0,$.integer)()),(0,$.pipe)((0,$.number)(),(0,$.integer)())])}),l0=(0,$.object)({budget:(0,$.nullable)(ce.JsonU64),price:(0,$.nullable)(ce.JsonU64),owner:(0,$.nullable)(ce.SuiAddress),payment:(0,$.nullable)((0,$.array)(ce.ObjectRef))}),p0=(0,$.object)({package:ce.ObjectID,module:(0,$.string)(),function:(0,$.string)(),typeArguments:(0,$.array)((0,$.string)()),arguments:(0,$.array)(Ue)}),d0=(0,$.object)({name:(0,$.string)(),inputs:(0,$.record)((0,$.string)(),(0,$.union)([Ue,(0,$.array)(Ue)])),data:(0,$.record)((0,$.string)(),(0,$.unknown)())}),f0=Yn({MoveCall:p0,TransferObjects:(0,$.object)({objects:(0,$.array)(Ue),address:Ue}),SplitCoins:(0,$.object)({coin:Ue,amounts:(0,$.array)(Ue)}),MergeCoins:(0,$.object)({destination:Ue,sources:(0,$.array)(Ue)}),Publish:(0,$.object)({modules:(0,$.array)(ce.BCSBytes),dependencies:(0,$.array)(ce.ObjectID)}),MakeMoveVec:(0,$.object)({type:(0,$.nullable)((0,$.string)()),elements:(0,$.array)(Ue)}),Upgrade:(0,$.object)({modules:(0,$.array)(ce.BCSBytes),dependencies:(0,$.array)(ce.ObjectID),package:ce.ObjectID,ticket:Ue}),$Intent:d0}),h0=Yn({ImmOrOwnedObject:ce.ObjectRef,SharedObject:(0,$.object)({objectId:ce.ObjectID,initialSharedVersion:ce.JsonU64,mutable:(0,$.boolean)()}),Receiving:ce.ObjectRef}),y0=Yn({Object:h0,Pure:(0,$.object)({bytes:ce.BCSBytes}),UnresolvedPure:(0,$.object)({value:(0,$.unknown)()}),UnresolvedObject:(0,$.object)({objectId:ce.ObjectID,version:(0,$.optional)((0,$.nullable)(ce.JsonU64)),digest:(0,$.optional)((0,$.nullable)((0,$.string)())),initialSharedVersion:(0,$.optional)((0,$.nullable)(ce.JsonU64))})}),g0=Yn({None:(0,$.literal)(!0),Epoch:ce.JsonU64}),b0=(0,$.object)({version:(0,$.literal)(2),sender:(0,$.nullish)(ce.SuiAddress),expiration:(0,$.nullish)(g0),gasData:l0,inputs:(0,$.array)(y0),commands:(0,$.array)(f0)});var fo=Object.defineProperty,v0=Object.getOwnPropertyDescriptor,m0=Object.getOwnPropertyNames,_0=Object.prototype.hasOwnProperty,w0=(t,e)=>{for(var r in e)fo(t,r,{get:e[r],enumerable:!0})},O0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of m0(e))!_0.call(t,s)&&s!==r&&fo(t,s,{get:()=>e[s],enumerable:!(n=v0(e,s))||n.enumerable});return t},S0=t=>O0(fo({},"__esModule",{value:!0}),t),ch={};w0(ch,{getClient:()=>Wr,resolveTransactionData:()=>P0});var uh=S0(ch),$0=qt,Sc=ot,Hi=Ya,k0=qr,Sn=ni,wi=Zl;const E0=50,j0=1000n,T0=5e10;async function P0(t,e,r){return await M0(t,e),await A0(t,e),e.onlyTransactionKind||(await I0(t,e),await x0(t,e),await C0(t,e)),await N0(t),await r()}async function I0(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Wr(e).getReferenceGasPrice()))}async function x0(t,e){if(t.gasConfig.budget)return;const r=await Wr(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(T0),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=j0*BigInt(t.gasConfig.price||1n),s=BigInt(r.effects.gasUsed.computationCost)+n,i=s+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>s?i:s)}async function C0(t,e){if(!t.gasConfig.payment){const n=(await Wr(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:Hi.SUI_TYPE_ARG})).data.filter(s=>!t.inputs.find(a=>{var o;return(o=a.Object)!=null&&o.ImmOrOwnedObject?s.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(s=>(0,$0.parse)(k0.ObjectRef,s))}}async function A0(t,e){const r=t.inputs.filter(u=>{var p;return u.UnresolvedObject&&!(u.UnresolvedObject.version||(p=u.UnresolvedObject)!=null&&p.initialSharedVersion)}),n=[...new Set(r.map(u=>(0,Hi.normalizeSuiObjectId)(u.UnresolvedObject.objectId)))],s=n.length?R0(n,E0):[],i=(await Promise.all(s.map(u=>Wr(e).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat(),a=new Map(n.map((u,p)=>[u,i[p]])),o=Array.from(a).filter(([u,p])=>p.error).map(([u,p])=>JSON.stringify(p.error));if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=i.map(u=>{if(u.error||!u.data)throw new Error(`Failed to fetch object: ${u.error}`);const p=u.data.owner,f=p&&typeof p=="object"&&"Shared"in p?p.Shared.initial_shared_version:null;return{objectId:u.data.objectId,digest:u.data.digest,version:u.data.version,initialSharedVersion:f}}),l=new Map(n.map((u,p)=>[u,c[p]]));for(const[u,p]of t.inputs.entries()){if(!p.UnresolvedObject)continue;let f;const h=(0,Hi.normalizeSuiAddress)(p.UnresolvedObject.objectId),y=l.get(h);p.UnresolvedObject.initialSharedVersion??(y==null?void 0:y.initialSharedVersion)?f=Sn.Inputs.SharedObjectRef({objectId:h,initialSharedVersion:p.UnresolvedObject.initialSharedVersion||(y==null?void 0:y.initialSharedVersion),mutable:B0(t,u)}):D0(t,u)&&(f=Sn.Inputs.ReceivingRef({objectId:h,digest:p.UnresolvedObject.digest??(y==null?void 0:y.digest),version:p.UnresolvedObject.version??(y==null?void 0:y.version)})),t.inputs[t.inputs.indexOf(p)]=f??Sn.Inputs.ObjectRef({objectId:h,digest:p.UnresolvedObject.digest??(y==null?void 0:y.digest),version:p.UnresolvedObject.version??(y==null?void 0:y.version)})}}async function M0(t,e){const{inputs:r,commands:n}=t,s=[],i=new Set;n.forEach(o=>{if(o.MoveCall){if(o.MoveCall._argumentTypes)return;if(o.MoveCall.arguments.map(u=>u.$kind==="Input"?t.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${o.MoveCall.package}::${o.MoveCall.module}::${o.MoveCall.function}`;i.add(u),s.push(o.MoveCall)}}switch(o.$kind){case"SplitCoins":o.SplitCoins.amounts.forEach(c=>{$c(c,Sc.bcs.U64,t)});break;case"TransferObjects":$c(o.TransferObjects.address,Sc.bcs.Address,t);break}});const a=new Map;if(i.size>0){const o=Wr(e);await Promise.all([...i].map(async c=>{const[l,u,p]=c.split("::"),f=await o.getNormalizedMoveFunction({package:l,module:u,function:p});a.set(c,f.parameters.map(h=>(0,wi.normalizedTypeToMoveTypeSignature)(h)))}))}s.length&&await Promise.all(s.map(async o=>{const c=a.get(`${o.package}::${o.module}::${o.function}`);if(!c)return;const u=c.length>0&&(0,wi.isTxContext)(c.at(-1))?c.slice(0,c.length-1):c;o._argumentTypes=u})),n.forEach(o=>{if(!o.MoveCall)return;const c=o.MoveCall,l=`${c.package}::${c.module}::${c.function}`,u=c._argumentTypes;if(u){if(u.length!==o.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${l}`);u.forEach((p,f)=>{var x,q;const h=c.arguments[f];if(h.$kind!=="Input")return;const y=r[h.Input];if(!y.UnresolvedPure&&!y.UnresolvedObject)return;const w=((x=y.UnresolvedPure)==null?void 0:x.value)??((q=y.UnresolvedObject)==null?void 0:q.objectId),j=(0,wi.getPureBcsSchema)(p.body);if(j){h.type="pure",r[r.indexOf(y)]=Sn.Inputs.Pure(j.serialize(w));return}if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);h.type="object";const U=y.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:w}}:y;r[h.Input]=U})}})}function N0(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function $c(t,e,r){if(t.$kind!=="Input")return;const n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=Sn.Inputs.Pure(e.serialize(n.UnresolvedPure.value)))}function B0(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=s.MoveCall._argumentTypes[i].ref!=="&"||r}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(r=!0)}),r}function D0(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=U0(s.MoveCall._argumentTypes[i])||r}}),r}function U0(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function Wr(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function R0(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))}var ho=Object.defineProperty,z0=Object.getOwnPropertyDescriptor,V0=Object.getOwnPropertyNames,L0=Object.prototype.hasOwnProperty,F0=(t,e)=>{for(var r in e)ho(t,r,{get:e[r],enumerable:!0})},q0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of V0(e))!L0.call(t,s)&&s!==r&&ho(t,s,{get:()=>e[s],enumerable:!(n=z0(e,s))||n.enumerable});return t},G0=t=>q0(ho({},"__esModule",{value:!0}),t),lh={};F0(lh,{createObjectMethods:()=>W0});var ph=G0(lh);function W0(t){function e(r){return t(r)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e}var yo=Object.defineProperty,J0=Object.getOwnPropertyDescriptor,K0=Object.getOwnPropertyNames,H0=Object.prototype.hasOwnProperty,X0=(t,e)=>{for(var r in e)yo(t,r,{get:e[r],enumerable:!0})},Y0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of K0(e))!H0.call(t,s)&&s!==r&&yo(t,s,{get:()=>e[s],enumerable:!(n=J0(e,s))||n.enumerable});return t},Z0=t=>Y0(yo({},"__esModule",{value:!0}),t),dh={};X0(dh,{createPure:()=>eS});var fh=Z0(dh),Q0=ge,ae=ot;function eS(t){function e(r,n){if(typeof r=="string")return t($n(r).serialize(n));if(r instanceof Uint8Array||(0,Q0.isSerializedBcs)(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=r=>t(ae.bcs.U8.serialize(r)),e.u16=r=>t(ae.bcs.U16.serialize(r)),e.u32=r=>t(ae.bcs.U32.serialize(r)),e.u64=r=>t(ae.bcs.U64.serialize(r)),e.u128=r=>t(ae.bcs.U128.serialize(r)),e.u256=r=>t(ae.bcs.U256.serialize(r)),e.bool=r=>t(ae.bcs.Bool.serialize(r)),e.string=r=>t(ae.bcs.String.serialize(r)),e.address=r=>t(ae.bcs.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(ae.bcs.vector($n(r)).serialize(n)),e.option=(r,n)=>t(ae.bcs.option($n(r)).serialize(n)),e}function $n(t){switch(t){case"u8":return ae.bcs.u8();case"u16":return ae.bcs.u16();case"u32":return ae.bcs.u32();case"u64":return ae.bcs.u64();case"u128":return ae.bcs.u128();case"u256":return ae.bcs.u256();case"bool":return ae.bcs.bool();case"string":return ae.bcs.string();case"id":case"address":return ae.bcs.Address}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[r,n]=e.slice(1);return r==="vector"?ae.bcs.vector($n(n)):ae.bcs.option($n(n))}throw new Error(`Invalid Pure type name: ${t}`)}var go=Object.defineProperty,tS=Object.getOwnPropertyDescriptor,rS=Object.getOwnPropertyNames,nS=Object.prototype.hasOwnProperty,sS=(t,e)=>{for(var r in e)go(t,r,{get:e[r],enumerable:!0})},iS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of rS(e))!nS.call(t,s)&&s!==r&&go(t,s,{get:()=>e[s],enumerable:!(n=tS(e,s))||n.enumerable});return t},aS=t=>iS(go({},"__esModule",{value:!0}),t),hh={};sS(hh,{hashTypedData:()=>uS});var oS=aS(hh),cS=Kl;function uS(t,e){const r=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),(0,cS.blake2b)(n,{dkLen:32})}var bo=Object.defineProperty,lS=Object.getOwnPropertyDescriptor,pS=Object.getOwnPropertyNames,dS=Object.prototype.hasOwnProperty,fS=(t,e)=>{for(var r in e)bo(t,r,{get:e[r],enumerable:!0})},hS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of pS(e))!dS.call(t,s)&&s!==r&&bo(t,s,{get:()=>e[s],enumerable:!(n=lS(e,s))||n.enumerable});return t},yS=t=>hS(bo({},"__esModule",{value:!0}),t),yh={};fS(yh,{TransactionDataBuilder:()=>_S});var vo=yS(yh),gS=ge,Oi=qt,is=ot,bS=ke,Si=qr,vS=nh,mS=oS;function kc(t){return(0,bS.normalizeSuiAddress)(t).replace("0x","")}let _S=class wr{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const n=is.bcs.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return wr.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){const r=is.bcs.TransactionData.parse(e),n=r==null?void 0:r.V1,s=n.kind.ProgrammableTransaction;if(!n||!s)throw new Error("Unable to deserialize from bytes.");return wr.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new wr((0,Oi.parse)(Si.TransactionData,e)):new wr((0,Oi.parse)(Si.TransactionData,(0,vS.transactionDataFromV1)(e)))}static getDigestFromBytes(e){const r=(0,mS.hashTypedData)("TransactionData",e);return(0,gS.toBase58)(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const s=this.inputs,i=this.commands,a={ProgrammableTransaction:{inputs:s,commands:i}};if(n)return is.bcs.TransactionKind.serialize(a,{maxSize:e}).toBytes();const o=(r==null?void 0:r.expiration)??this.expiration,c=(r==null?void 0:r.sender)??this.sender,l={...this.gasData,...r==null?void 0:r.gasConfig,...r==null?void 0:r.gasData};if(!c)throw new Error("Missing transaction sender");if(!l.budget)throw new Error("Missing gas budget");if(!l.payment)throw new Error("Missing gas payment");if(!l.price)throw new Error("Missing gas price");const u={sender:kc(c),expiration:o||{None:!0},gasData:{payment:l.payment,owner:kc(this.gasData.owner??c),price:BigInt(l.price),budget:BigInt(l.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:i}}};return is.bcs.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,r){const n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,s)=>(n.$kind==="Input"&&n.Input===e&&r(n,s),n))}mapArguments(e){for(const r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(s=>e(s,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(s=>e(s,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(s=>e(s,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(s=>e(s,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(s=>e(s,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":const n=r.$Intent.inputs;r.$Intent.inputs={};for(const[s,i]of Object.entries(n))r.$Intent.inputs[s]=Array.isArray(i)?i.map(a=>e(a,r)):e(i,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}const n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>e&&(s.Result+=n);break;case"NestedResult":s.NestedResult[0]>e&&(s.NestedResult[0]+=n);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return wr.getDigestFromBytes(e)}snapshot(){return(0,Oi.parse)(Si.TransactionData,this)}};var mo=Object.defineProperty,wS=Object.getOwnPropertyDescriptor,OS=Object.getOwnPropertyNames,SS=Object.prototype.hasOwnProperty,$S=(t,e)=>{for(var r in e)mo(t,r,{get:e[r],enumerable:!0})},kS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of OS(e))!SS.call(t,s)&&s!==r&&mo(t,s,{get:()=>e[s],enumerable:!(n=wS(e,s))||n.enumerable});return t},ES=t=>kS(mo({},"__esModule",{value:!0}),t),gh={};$S(gh,{extractMutableReference:()=>bh,extractReference:()=>vh,extractStructTag:()=>TS,getIdFromCallArg:()=>PS});var jS=ES(gh),Xr=ke;function bh(t){return typeof t=="object"&&"MutableReference"in t?t.MutableReference:void 0}function vh(t){return typeof t=="object"&&"Reference"in t?t.Reference:void 0}function TS(t){if(typeof t=="object"&&"Struct"in t)return t;const e=vh(t),r=bh(t);if(typeof e=="object"&&"Struct"in e)return e;if(typeof r=="object"&&"Struct"in r)return r}function PS(t){if(typeof t=="string")return(0,Xr.normalizeSuiAddress)(t);if(t.Object)return t.Object.ImmOrOwnedObject?(0,Xr.normalizeSuiAddress)(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?(0,Xr.normalizeSuiAddress)(t.Object.Receiving.objectId):(0,Xr.normalizeSuiAddress)(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return(0,Xr.normalizeSuiAddress)(t.UnresolvedObject.objectId)}var _o=Object.defineProperty,IS=Object.getOwnPropertyDescriptor,xS=Object.getOwnPropertyNames,CS=Object.prototype.hasOwnProperty,mh=t=>{throw TypeError(t)},AS=(t,e)=>{for(var r in e)_o(t,r,{get:e[r],enumerable:!0})},MS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of xS(e))!CS.call(t,s)&&s!==r&&_o(t,s,{get:()=>e[s],enumerable:!(n=IS(e,s))||n.enumerable});return t},NS=t=>MS(_o({},"__esModule",{value:!0}),t),wo=(t,e,r)=>e.has(t)||mh("Cannot "+r),B=(t,e,r)=>(wo(t,e,"read from private field"),r?r.call(t):e.get(t)),Yr=(t,e,r)=>e.has(t)?mh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Gt=(t,e,r,n)=>(wo(t,e,"write to private field"),e.set(t,r),r),yt=(t,e,r)=>(wo(t,e,"access private method"),r),_h={};AS(_h,{Transaction:()=>FS,isTransaction:()=>Oh});var ci=NS(_h),vs=ge,Ut=qt,BS=ke,Wt=uo,nr=qr,Ec=nh,DS=u0,as=ni,US=uh,RS=ph,zS=fh,Zr=vo,jc=jS,pn,kn,Yt,R,Re,ms,Oo,Xi,So;function VS(t){const e={$kind:"Result",Result:t},r=[],n=s=>r[s]??(r[s]={$kind:"NestedResult",NestedResult:[t,s]});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,i){if(i in s)return Reflect.get(s,i);if(i===Symbol.iterator)return function*(){let o=0;for(;;)yield n(o),o++};if(typeof i=="symbol")return;const a=parseInt(i,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}const wh=Symbol.for("@mysten/transaction");function Oh(t){return!!t&&typeof t=="object"&&t[wh]===!0}const Tc={buildPlugins:new Map,serializationPlugins:new Map},$i=Symbol.for("@mysten/transaction/registry");function Qr(){try{const t=globalThis;return t[$i]||(t[$i]=Tc),t[$i]}catch{return Tc}}const LS=class Yi{constructor(){Yr(this,Re),Yr(this,pn),Yr(this,kn),Yr(this,Yt,new Map),Yr(this,R),this.object=(0,RS.createObjectMethods)(r=>{var i,a;if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&(0,Ut.is)(nr.Argument,r))return r;const n=(0,jc.getIdFromCallArg)(r),s=B(this,R).inputs.find(o=>n===(0,jc.getIdFromCallArg)(o));return(i=s==null?void 0:s.Object)!=null&&i.SharedObject&&typeof r=="object"&&((a=r.Object)!=null&&a.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||r.Object.SharedObject.mutable),s?{$kind:"Input",Input:B(this,R).inputs.indexOf(s),type:"object"}:B(this,R).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:(0,BS.normalizeSuiAddress)(r)}}:r)});const e=Qr();Gt(this,R,new Zr.TransactionDataBuilder),Gt(this,kn,[...e.buildPlugins.values()]),Gt(this,pn,[...e.serializationPlugins.values()])}static fromKind(e){const r=new Yi;return Gt(r,R,Zr.TransactionDataBuilder.fromKindBytes(typeof e=="string"?(0,vs.fromBase64)(e):e)),r}static from(e){const r=new Yi;return Oh(e)?Gt(r,R,new Zr.TransactionDataBuilder(e.getData())):typeof e!="string"||!e.startsWith("{")?Gt(r,R,Zr.TransactionDataBuilder.fromBytes(typeof e=="string"?(0,vs.fromBase64)(e):e)):Gt(r,R,Zr.TransactionDataBuilder.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){Qr().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){Qr().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){Qr().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){Qr().buildPlugins.delete(e)}addSerializationPlugin(e){B(this,pn).push(e)}addBuildPlugin(e){B(this,kn).push(e)}addIntentResolver(e,r){if(B(this,Yt).has(e)&&B(this,Yt).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);B(this,Yt).set(e,r)}setSender(e){B(this,R).sender=e}setSenderIfNotSet(e){B(this,R).sender||(B(this,R).sender=e)}setExpiration(e){B(this,R).expiration=e?(0,Ut.parse)(nr.TransactionExpiration,e):null}setGasPrice(e){B(this,R).gasConfig.price=String(e)}setGasBudget(e){B(this,R).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){B(this,R).gasData.budget==null&&(B(this,R).gasConfig.budget=String(e))}setGasOwner(e){B(this,R).gasConfig.owner=e}setGasPayment(e){B(this,R).gasConfig.payment=e.map(r=>(0,Ut.parse)(nr.ObjectRef,r))}get blockData(){return(0,Ec.serializeV1TransactionData)(B(this,R).snapshot())}getData(){return B(this,R).snapshot()}get[wh](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:(0,zS.createPure)(e=>(0,vs.isSerializedBcs)(e)?B(this,R).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):B(this,R).addInput("pure",(0,Ut.is)(nr.NormalizedCallArg,e)?(0,Ut.parse)(nr.NormalizedCallArg,e):e instanceof Uint8Array?as.Inputs.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(as.Inputs.ObjectRef(...e))}receivingRef(...e){return this.object(as.Inputs.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(as.Inputs.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const r=B(this,R).commands.push(e);return VS(r-1)}splitCoins(e,r){return this.add(Wt.Commands.SplitCoins(typeof e=="string"?this.object(e):yt(this,Re,Oo).call(this,e),r.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):yt(this,Re,ms).call(this,n))))}mergeCoins(e,r){return this.add(Wt.Commands.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(Wt.Commands.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:s}){return this.add(Wt.Commands.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(s)}))}moveCall({arguments:e,...r}){return this.add(Wt.Commands.MoveCall({...r,arguments:e==null?void 0:e.map(n=>yt(this,Re,ms).call(this,n))}))}transferObjects(e,r){return this.add(Wt.Commands.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):yt(this,Re,ms).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(Wt.Commands.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify((0,Ec.serializeV1TransactionData)(B(this,R).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify((0,Ut.parse)(DS.SerializedTransactionDataV2,B(this,R).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){const{signer:r,...n}=e,s=await this.build(n);return r.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await yt(this,Re,Xi).call(this,e),B(this,R).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await yt(this,Re,Xi).call(this,e),B(this,R).getDigest()}async prepareForSerialization(e){var s;const r=new Set;for(const i of B(this,R).commands)i.$Intent&&r.add(i.$Intent.name);const n=[...B(this,pn)];for(const i of r)if(!((s=e.supportedIntents)!=null&&s.includes(i))){if(!B(this,Yt).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(B(this,Yt).get(i))}await yt(this,Re,So).call(this,n,e)}};pn=new WeakMap;kn=new WeakMap;Yt=new WeakMap;R=new WeakMap;Re=new WeakSet;ms=function(t){return(0,vs.isSerializedBcs)(t)?this.pure(t):yt(this,Re,Oo).call(this,t)};Oo=function(t){return typeof t=="function"?(0,Ut.parse)(nr.Argument,t(this)):(0,Ut.parse)(nr.Argument,t)};Xi=async function(t){if(!t.onlyTransactionKind&&!B(this,R).sender)throw new Error("Missing transaction sender");await yt(this,Re,So).call(this,[...B(this,kn),US.resolveTransactionData],t)};So=async function(t,e){const r=n=>{if(n>=t.length)return()=>{};const s=t[n];return async()=>{const i=r(n+1);let a=!1,o=!1;if(await s(B(this,R),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);a=!0,await i(),o=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!o)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()};let FS=LS;var $o=Object.defineProperty,qS=Object.getOwnPropertyDescriptor,GS=Object.getOwnPropertyNames,WS=Object.prototype.hasOwnProperty,Sh=t=>{throw TypeError(t)},JS=(t,e)=>{for(var r in e)$o(t,r,{get:e[r],enumerable:!0})},KS=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of GS(e))!WS.call(t,s)&&s!==r&&$o(t,s,{get:()=>e[s],enumerable:!(n=qS(e,s))||n.enumerable});return t},HS=t=>KS($o({},"__esModule",{value:!0}),t),$h=(t,e,r)=>e.has(t)||Sh("Cannot "+r),pe=(t,e,r)=>($h(t,e,"read from private field"),r?r.call(t):e.get(t)),kh=(t,e,r)=>e.has(t)?Sh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),XS=(t,e,r,n)=>($h(t,e,"write to private field"),e.set(t,r),r),Eh={};JS(Eh,{AsyncCache:()=>Th,InMemoryCache:()=>Ph,ObjectCache:()=>YS});var jh=HS(Eh),ki=ke,Zt,ye;class Th{async getObject(e){const[r,n]=await Promise.all([this.get("OwnedObject",e),this.get("SharedOrImmutableObject",e)]);return r??n??null}async getObjects(e){return Promise.all([...e.map(r=>this.getObject(r))])}async addObject(e){return e.owner?await this.set("OwnedObject",e.objectId,e):await this.set("SharedOrImmutableObject",e.objectId,e),e}async addObjects(e){await Promise.all(e.map(async r=>this.addObject(r)))}async deleteObject(e){await Promise.all([this.delete("OwnedObject",e),this.delete("SharedOrImmutableObject",e)])}async deleteObjects(e){await Promise.all(e.map(r=>this.deleteObject(r)))}async getMoveFunctionDefinition(e){const r=`${(0,ki.normalizeSuiAddress)(e.package)}::${e.module}::${e.function}`;return this.get("MoveFunction",r)}async addMoveFunctionDefinition(e){const r=(0,ki.normalizeSuiAddress)(e.package),n=`${r}::${e.module}::${e.function}`,s={...e,package:r};return await this.set("MoveFunction",n,s),s}async deleteMoveFunctionDefinition(e){const r=`${(0,ki.normalizeSuiAddress)(e.package)}::${e.module}::${e.function}`;await this.delete("MoveFunction",r)}async getCustom(e){return this.get("Custom",e)}async setCustom(e,r){return this.set("Custom",e,r)}async deleteCustom(e){return this.delete("Custom",e)}}class Ph extends Th{constructor(){super(...arguments),kh(this,Zt,{OwnedObject:new Map,SharedOrImmutableObject:new Map,MoveFunction:new Map,Custom:new Map})}async get(e,r){return pe(this,Zt)[e].get(r)??null}async set(e,r,n){pe(this,Zt)[e].set(r,n)}async delete(e,r){pe(this,Zt)[e].delete(r)}async clear(e){if(e)pe(this,Zt)[e].clear();else for(const r of Object.values(pe(this,Zt)))r.clear()}}Zt=new WeakMap;class YS{constructor({cache:e=new Ph}){kh(this,ye),XS(this,ye,e)}asPlugin(){return async(e,r,n)=>{const s=e.inputs.filter(o=>o.UnresolvedObject).map(o=>o.UnresolvedObject.objectId),i=(await pe(this,ye).getObjects(s)).filter(o=>o!==null),a=new Map(i.map(o=>[o.objectId,o]));for(const o of e.inputs){if(!o.UnresolvedObject)continue;const c=a.get(o.UnresolvedObject.objectId);c&&(c.initialSharedVersion&&!o.UnresolvedObject.initialSharedVersion?o.UnresolvedObject.initialSharedVersion=c.initialSharedVersion:(c.version&&!o.UnresolvedObject.version&&(o.UnresolvedObject.version=c.version),c.digest&&!o.UnresolvedObject.digest&&(o.UnresolvedObject.digest=c.digest)))}await Promise.all(e.commands.map(async o=>{if(o.MoveCall){const c=await this.getMoveFunctionDefinition({package:o.MoveCall.package,module:o.MoveCall.module,function:o.MoveCall.function});c&&(o.MoveCall._argumentTypes=c.parameters)}})),await n(),await Promise.all(e.commands.map(async o=>{var c;(c=o.MoveCall)!=null&&c._argumentTypes&&await pe(this,ye).addMoveFunctionDefinition({package:o.MoveCall.package,module:o.MoveCall.module,function:o.MoveCall.function,parameters:o.MoveCall._argumentTypes})}))}}async clear(){await pe(this,ye).clear()}async getMoveFunctionDefinition(e){return pe(this,ye).getMoveFunctionDefinition(e)}async getObjects(e){return pe(this,ye).getObjects(e)}async deleteObjects(e){return pe(this,ye).deleteObjects(e)}async clearOwnedObjects(){await pe(this,ye).clear("OwnedObject")}async clearCustom(){await pe(this,ye).clear("Custom")}async getCustom(e){return pe(this,ye).getCustom(e)}async setCustom(e,r){return pe(this,ye).setCustom(e,r)}async deleteCustom(e){return pe(this,ye).deleteCustom(e)}async applyEffects(e){if(!e.V2)throw new Error(`Unsupported transaction effects version ${e.$kind}`);const{lamportVersion:r,changedObjects:n}=e.V2,s=[],i=[];n.map(async([a,o])=>{var c;if(o.outputState.NotExist)await pe(this,ye).deleteObject(a);else if(o.outputState.ObjectWrite){const[l,u]=o.outputState.ObjectWrite;i.push({objectId:a,digest:l,version:r,owner:u.AddressOwner??u.ObjectOwner??null,initialSharedVersion:((c=u.Shared)==null?void 0:c.initialSharedVersion)??null})}}),await Promise.all([pe(this,ye).addObjects(i),pe(this,ye).deleteObjects(s)])}}ye=new WeakMap;var ko=Object.defineProperty,ZS=Object.getOwnPropertyDescriptor,QS=Object.getOwnPropertyNames,e$=Object.prototype.hasOwnProperty,Ih=t=>{throw TypeError(t)},t$=(t,e)=>{for(var r in e)ko(t,r,{get:e[r],enumerable:!0})},r$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of QS(e))!e$.call(t,s)&&s!==r&&ko(t,s,{get:()=>e[s],enumerable:!(n=ZS(e,s))||n.enumerable});return t},n$=t=>r$(ko({},"__esModule",{value:!0}),t),xh=(t,e,r)=>e.has(t)||Ih("Cannot "+r),en=(t,e,r)=>(xh(t,e,"read from private field"),r?r.call(t):e.get(t)),Pc=(t,e,r)=>e.has(t)?Ih("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ei=(t,e,r,n)=>(xh(t,e,"write to private field"),e.set(t,r),r),Ch={};t$(Ch,{CachingTransactionExecutor:()=>o$});var Ah=n$(Ch),s$=ot,i$=jh,a$=ci,Or,Sr;class o${constructor({client:e,...r}){Pc(this,Or),Pc(this,Sr,null),Ei(this,Or,e),this.cache=new i$.ObjectCache(r)}async reset(){await Promise.all([this.cache.clearOwnedObjects(),this.cache.clearCustom(),this.waitForLastTransaction()])}async buildTransaction({transaction:e,...r}){return e.addBuildPlugin(this.cache.asPlugin()),e.build({client:en(this,Or),...r})}async executeTransaction({transaction:e,options:r,...n}){const s=(0,a$.isTransaction)(e)?await this.buildTransaction({transaction:e}):e,i=await en(this,Or).executeTransactionBlock({...n,transactionBlock:s,options:{...r,showRawEffects:!0}});if(i.rawEffects){const a=s$.bcs.TransactionEffects.parse(Uint8Array.from(i.rawEffects));await this.applyEffects(a)}return i}async signAndExecuteTransaction({options:e,transaction:r,...n}){r.setSenderIfNotSet(n.signer.toSuiAddress());const s=await this.buildTransaction({transaction:r}),{signature:i}=await n.signer.signTransaction(s);return await this.executeTransaction({transaction:s,signature:i,options:e})}async applyEffects(e){var r;Ei(this,Sr,((r=e.V2)==null?void 0:r.transactionDigest)??null),await this.cache.applyEffects(e)}async waitForLastTransaction(){en(this,Sr)&&(await en(this,Or).waitForTransaction({digest:en(this,Sr)}),Ei(this,Sr,null))}}Or=new WeakMap;Sr=new WeakMap;var Eo=Object.defineProperty,c$=Object.getOwnPropertyDescriptor,u$=Object.getOwnPropertyNames,l$=Object.prototype.hasOwnProperty,Mh=t=>{throw TypeError(t)},p$=(t,e)=>{for(var r in e)Eo(t,r,{get:e[r],enumerable:!0})},d$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of u$(e))!l$.call(t,s)&&s!==r&&Eo(t,s,{get:()=>e[s],enumerable:!(n=c$(e,s))||n.enumerable});return t},f$=t=>d$(Eo({},"__esModule",{value:!0}),t),h$=(t,e,r)=>e.has(t)||Mh("Cannot "+r),Fe=(t,e,r)=>(h$(t,e,"read from private field"),r?r.call(t):e.get(t)),Nh=(t,e,r)=>e.has(t)?Mh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Bh={};p$(Bh,{ParallelQueue:()=>g$,SerialQueue:()=>y$});var Dh=f$(Bh),Nt,Qt;class y${constructor(){Nh(this,Nt,[])}async runTask(e){return new Promise((r,n)=>{Fe(this,Nt).push(()=>{e().finally(()=>{Fe(this,Nt).shift(),Fe(this,Nt).length>0&&Fe(this,Nt)[0]()}).then(r,n)}),Fe(this,Nt).length===1&&Fe(this,Nt)[0]()})}}Nt=new WeakMap;class g${constructor(e){Nh(this,Qt,[]),this.activeTasks=0,this.maxTasks=e}runTask(e){return new Promise((r,n)=>{this.activeTasks<this.maxTasks?(this.activeTasks++,e().finally(()=>{Fe(this,Qt).length>0?Fe(this,Qt).shift()():this.activeTasks--}).then(r,n)):Fe(this,Qt).push(()=>{e().finally(()=>{Fe(this,Qt).length>0?Fe(this,Qt).shift()():this.activeTasks--}).then(r,n)})})}}Qt=new WeakMap;var jo=Object.defineProperty,b$=Object.getOwnPropertyDescriptor,v$=Object.getOwnPropertyNames,m$=Object.prototype.hasOwnProperty,Uh=t=>{throw TypeError(t)},_$=(t,e)=>{for(var r in e)jo(t,r,{get:e[r],enumerable:!0})},w$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of v$(e))!m$.call(t,s)&&s!==r&&jo(t,s,{get:()=>e[s],enumerable:!(n=b$(e,s))||n.enumerable});return t},O$=t=>w$(jo({},"__esModule",{value:!0}),t),Rh=(t,e,r)=>e.has(t)||Uh("Cannot "+r),ve=(t,e,r)=>(Rh(t,e,"read from private field"),r?r.call(t):e.get(t)),gr=(t,e,r)=>e.has(t)?Uh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ji=(t,e,r,n)=>(Rh(t,e,"write to private field"),e.set(t,r),r),zh={};_$(zh,{SerialTransactionExecutor:()=>j$,getGasCoinFromEffects:()=>Lh});var Vh=O$(zh),S$=ge,$$=ot,Ic=ci,k$=Ah,E$=Dh,_s,dn,Be,ws,Zi,Os;class j${constructor({signer:e,defaultGasBudget:r=50000000n,...n}){gr(this,_s,new E$.SerialQueue),gr(this,dn),gr(this,Be),gr(this,ws),gr(this,Zi,async s=>{if(!s.V2)return;const i=Lh(s).ref;i?ve(this,Be).cache.setCustom("gasCoin",i):ve(this,Be).cache.deleteCustom("gasCoin")}),gr(this,Os,async s=>{const i=await ve(this,Be).cache.getCustom("gasCoin"),a=Ic.Transaction.from(s);return i&&a.setGasPayment([i]),a.setGasBudgetIfNotSet(ve(this,ws)),a.setSenderIfNotSet(ve(this,dn).toSuiAddress()),ve(this,Be).buildTransaction({transaction:a})}),ji(this,dn,e),ji(this,ws,r),ji(this,Be,new k$.CachingTransactionExecutor({client:n.client,cache:n.cache}))}async applyEffects(e){return Promise.all([ve(this,Zi).call(this,e),ve(this,Be).cache.applyEffects(e)])}async buildTransaction(e){return ve(this,_s).runTask(()=>ve(this,Os).call(this,e))}resetCache(){return ve(this,Be).reset()}waitForLastTransaction(){return ve(this,Be).waitForLastTransaction()}executeTransaction(e,r){return ve(this,_s).runTask(async()=>{const n=(0,Ic.isTransaction)(e)?await ve(this,Os).call(this,e):e,{signature:s}=await ve(this,dn).signTransaction(n),i=await ve(this,Be).executeTransaction({signature:s,transaction:n,options:r}).catch(async c=>{throw await this.resetCache(),c}),a=Uint8Array.from(i.rawEffects),o=$$.bcs.TransactionEffects.parse(a);return await this.applyEffects(o),{digest:i.digest,effects:(0,S$.toBase64)(a),data:i}})}}_s=new WeakMap;dn=new WeakMap;Be=new WeakMap;ws=new WeakMap;Zi=new WeakMap;Os=new WeakMap;function Lh(t){if(!t.V2)throw new Error("Unexpected effects version");const e=t.V2.changedObjects[t.V2.gasObjectIndex];if(!e)throw new Error("Gas object not found in effects");const[r,{outputState:n}]=e;if(!n.ObjectWrite)throw new Error("Unexpected gas object state");const[s,i]=n.ObjectWrite;return{ref:{objectId:r,digest:s,version:t.V2.lamportVersion},owner:i.AddressOwner||i.ObjectOwner}}var To=Object.defineProperty,T$=Object.getOwnPropertyDescriptor,P$=Object.getOwnPropertyNames,I$=Object.prototype.hasOwnProperty,Fh=t=>{throw TypeError(t)},x$=(t,e)=>{for(var r in e)To(t,r,{get:e[r],enumerable:!0})},C$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of P$(e))!I$.call(t,s)&&s!==r&&To(t,s,{get:()=>e[s],enumerable:!(n=T$(e,s))||n.enumerable});return t},A$=t=>C$(To({},"__esModule",{value:!0}),t),Po=(t,e,r)=>e.has(t)||Fh("Cannot "+r),E=(t,e,r)=>(Po(t,e,"read from private field"),r?r.call(t):e.get(t)),le=(t,e,r)=>e.has(t)?Fh("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ne=(t,e,r,n)=>(Po(t,e,"write to private field"),e.set(t,r),r),Me=(t,e,r)=>(Po(t,e,"access private method"),r),xc=(t,e,r,n)=>({set _(s){ne(t,e,s)},get _(){return E(t,e,n)}}),qh={};x$(qh,{ParallelTransactionExecutor:()=>R$});var M$=A$(qh),N$=ge,Gh=ot,B$=ci,D$=vo,U$=Ah,Cc=Dh,Wh=Vh,Rt,it,qs,Bn,En,Dn,Gs,Ir,_e,zt,cr,sr,Io,Ss,Un,jr,Rr,bt,Se,Jh,Kh,Rn,xo,Hh,Qi,Xh;const tn={coinBatchSize:20,initialCoinBalance:200000000n,minimumCoinBalance:50000000n,maxPoolSize:50,epochBoundaryWindow:1e3};class R${constructor(e){le(this,Se),le(this,Rt),le(this,it),le(this,qs),le(this,Bn),le(this,En),le(this,Dn),le(this,Gs),le(this,Ir),le(this,_e),le(this,zt,[]),le(this,cr),le(this,sr,new Map),le(this,Io,new Cc.SerialQueue),le(this,Ss),le(this,Un,null),le(this,jr,null),le(this,Rr,0),le(this,bt,null),ne(this,Rt,e.signer),ne(this,it,e.client),ne(this,qs,e.coinBatchSize??tn.coinBatchSize),ne(this,Bn,e.initialCoinBalance??tn.initialCoinBalance),ne(this,En,e.minimumCoinBalance??tn.minimumCoinBalance),ne(this,Gs,e.defaultGasBudget??E(this,En)),ne(this,Dn,e.epochBoundaryWindow??tn.epochBoundaryWindow),ne(this,Ir,e.maxPoolSize??tn.maxPoolSize),ne(this,cr,new U$.CachingTransactionExecutor({client:e.client,cache:e.cache})),ne(this,Ss,new Cc.ParallelQueue(E(this,Ir))),ne(this,_e,e.sourceCoins?new Map(e.sourceCoins.map(r=>[r,null])):null)}resetCache(){return ne(this,bt,null),Me(this,Se,Rn).call(this,()=>E(this,cr).reset())}async waitForLastTransaction(){await Me(this,Se,Rn).call(this,()=>Me(this,Se,xo).call(this))}async executeTransaction(e,r){const{promise:n,resolve:s,reject:i}=z$(),a=await Me(this,Se,Jh).call(this,e),o=()=>{E(this,Ss).runTask(()=>Me(this,Se,Kh).call(this,e,a,r).then(s,i))},c=new Set;return a.forEach(l=>{E(this,sr).get(l)?(c.add(l),E(this,sr).get(l).push(()=>{c.delete(l),c.size===0&&o()})):E(this,sr).set(l,[])}),c.size===0&&o(),n}}Rt=new WeakMap;it=new WeakMap;qs=new WeakMap;Bn=new WeakMap;En=new WeakMap;Dn=new WeakMap;Gs=new WeakMap;Ir=new WeakMap;_e=new WeakMap;zt=new WeakMap;cr=new WeakMap;sr=new WeakMap;Io=new WeakMap;Ss=new WeakMap;Un=new WeakMap;jr=new WeakMap;Rr=new WeakMap;bt=new WeakMap;Se=new WeakSet;Jh=async function(t){const e=new Set;let r=!1;return t.addSerializationPlugin(async(n,s,i)=>{await i(),!r&&(r=!0,n.inputs.forEach(a=>{var o,c,l,u,p;(c=(o=a.Object)==null?void 0:o.ImmOrOwnedObject)!=null&&c.objectId?e.add(a.Object.ImmOrOwnedObject.objectId):(u=(l=a.Object)==null?void 0:l.Receiving)!=null&&u.objectId?e.add(a.Object.Receiving.objectId):(p=a.UnresolvedObject)!=null&&p.objectId&&!a.UnresolvedObject.initialSharedVersion&&e.add(a.UnresolvedObject.objectId)}))}),await t.prepareForSerialization({client:E(this,it)}),e};Kh=async function(t,e,r){var s;let n;try{t.setSenderIfNotSet(E(this,Rt).toSuiAddress()),await E(this,Io).runTask(async()=>{t.getData().gasData.price||t.setGasPrice(await Me(this,Se,Qi).call(this)),t.setGasBudgetIfNotSet(E(this,Gs)),await Me(this,Se,Rn).call(this),n=await Me(this,Se,Hh).call(this),xc(this,Rr)._++,t.setGasPayment([{objectId:n.id,version:n.version,digest:n.digest}]),await E(this,cr).buildTransaction({transaction:t,onlyTransactionKind:!0})});const i=await t.build({client:E(this,it)}),{signature:a}=await E(this,Rt).signTransaction(i),o=await E(this,cr).executeTransaction({transaction:i,signature:a,options:{...r,showEffects:!0}}),c=Uint8Array.from(o.rawEffects),l=Gh.bcs.TransactionEffects.parse(c),u=(0,Wh.getGasCoinFromEffects)(l),p=(s=l.V2)==null?void 0:s.gasUsed;if(n&&p&&u.owner===E(this,Rt).toSuiAddress()){const f=BigInt(p.computationCost)+BigInt(p.storageCost)+BigInt(p.storageCost)-BigInt(p.storageRebate);let h=!1;new D$.TransactionDataBuilder(t.getData()).mapArguments(y=>(y.$kind==="GasCoin"&&(h=!0),y)),!h&&n.balance>=E(this,En)?E(this,zt).push({id:u.ref.objectId,version:u.ref.version,digest:u.ref.digest,balance:n.balance-f}):(E(this,_e)||ne(this,_e,new Map),E(this,_e).set(u.ref.objectId,u.ref))}return ne(this,Un,o.digest),{digest:o.digest,effects:(0,N$.toBase64)(c),data:o}}catch(i){throw n&&(E(this,_e)||ne(this,_e,new Map),E(this,_e).set(n.id,null)),await Me(this,Se,Rn).call(this,async()=>{await Promise.all([E(this,cr).cache.deleteObjects([...e]),Me(this,Se,xo).call(this)])}),i}finally{e.forEach(i=>{const a=E(this,sr).get(i);a&&a.length>0?a.shift()():a&&E(this,sr).delete(i)}),xc(this,Rr)._--}};Rn=async function(t){E(this,jr)&&await E(this,jr),ne(this,jr,(t==null?void 0:t().then(()=>{ne(this,jr,null)},()=>{}))??null)};xo=async function(){const t=E(this,Un);t&&(ne(this,Un,null),await E(this,it).waitForTransaction({digest:t}))};Hh=async function(){if(E(this,zt).length===0&&E(this,Rr)<=E(this,Ir)&&await Me(this,Se,Xh).call(this),E(this,zt).length===0)throw new Error("No coins available");return E(this,zt).shift()};Qi=async function(){if((E(this,bt)?E(this,bt).expiration-E(this,Dn)-Date.now():0)>0)return E(this,bt).price;if(E(this,bt)){const r=Math.max(E(this,bt).expiration+E(this,Dn)-Date.now(),1e3);await new Promise(n=>setTimeout(n,r))}const e=await E(this,it).getLatestSuiSystemState();return ne(this,bt,{price:BigInt(e.referenceGasPrice),expiration:Number.parseInt(e.epochStartTimestampMs,10)+Number.parseInt(e.epochDurationMs,10)}),Me(this,Se,Qi).call(this)};Xh=async function(){var l;const t=Math.min(E(this,qs),E(this,Ir)-(E(this,zt).length+E(this,Rr))+1);if(t===0)return;const e=new B$.Transaction,r=E(this,Rt).toSuiAddress();if(e.setSender(r),E(this,_e)){const u=[],p=[];for(const[f,h]of E(this,_e))h?u.push(h):p.push(f);if(p.length>0){const f=await E(this,it).multiGetObjects({ids:p});u.push(...f.filter(h=>h.data!==null).map(({data:h})=>({objectId:h.objectId,version:h.version,digest:h.digest})))}e.setGasPayment(u),ne(this,_e,new Map)}const n=new Array(t).fill(E(this,Bn)),s=e.splitCoins(e.gas,n),i=[];for(let u=0;u<n.length;u++)i.push(s[u]);e.transferObjects(i,r),await this.waitForLastTransaction();const a=await E(this,it).signAndExecuteTransaction({transaction:e,signer:E(this,Rt),options:{showRawEffects:!0}}),o=Gh.bcs.TransactionEffects.parse(Uint8Array.from(a.rawEffects));(l=o.V2)==null||l.changedObjects.forEach(([u,{outputState:p}],f)=>{var h;f===((h=o.V2)==null?void 0:h.gasObjectIndex)||!p.ObjectWrite||E(this,zt).push({id:u,version:o.V2.lamportVersion,digest:p.ObjectWrite[0],balance:BigInt(E(this,Bn))})}),E(this,_e)||ne(this,_e,new Map);const c=(0,Wh.getGasCoinFromEffects)(o).ref;E(this,_e).set(c.objectId,c),await E(this,it).waitForTransaction({digest:a.digest})};function z$(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}}var Co=Object.defineProperty,V$=Object.getOwnPropertyDescriptor,L$=Object.getOwnPropertyNames,F$=Object.prototype.hasOwnProperty,q$=(t,e)=>{for(var r in e)Co(t,r,{get:e[r],enumerable:!0})},G$=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of L$(e))!F$.call(t,s)&&s!==r&&Co(t,s,{get:()=>e[s],enumerable:!(n=V$(e,s))||n.enumerable});return t},W$=t=>G$(Co({},"__esModule",{value:!0}),t),Yh={};q$(Yh,{coinWithBalance:()=>X$});var J$=W$(Yh),$s=qt,K$=ot,Zh=ke,ea=uo,Ac=ni,H$=uh;const Ws="CoinWithBalance",Mc=(0,Zh.normalizeStructTag)("0x2::sui::SUI");function X$({type:t=Mc,balance:e,useGasCoin:r=!0}){return n=>{n.addIntentResolver(Ws,Z$);const s=t==="gas"?t:(0,Zh.normalizeStructTag)(t);return n.add(ea.Commands.Intent({name:Ws,inputs:{},data:{type:s===Mc&&r?"gas":s,balance:BigInt(e)}}))}}const Y$=(0,$s.object)({type:(0,$s.string)(),balance:(0,$s.bigint)()});async function Z$(t,e,r){var l,u;const n=new Set,s=new Map;if(!t.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const p of t.commands)if(p.$kind==="$Intent"&&p.$Intent.name===Ws){const{type:f,balance:h}=(0,$s.parse)(Y$,p.$Intent.data);f!=="gas"&&n.add(f),s.set(f,(s.get(f)??0n)+h)}const i=new Set;for(const p of t.inputs)(l=p.Object)!=null&&l.ImmOrOwnedObject&&i.add(p.Object.ImmOrOwnedObject.objectId),(u=p.UnresolvedObject)!=null&&u.objectId&&i.add(p.UnresolvedObject.objectId);const a=new Map,o=(0,H$.getClient)(e);await Promise.all([...n].map(async p=>{a.set(p,await Q$({coinType:p,balance:s.get(p),client:o,owner:t.sender,usedIds:i}))}));const c=new Map;c.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[p,f]of t.commands.entries()){if(f.$kind!=="$Intent"||f.$Intent.name!==Ws)continue;const{type:h,balance:y}=f.$Intent.data,w=[];if(!c.has(h)){const[j,...U]=a.get(h).map(x=>t.addInput("object",Ac.Inputs.ObjectRef({objectId:x.coinObjectId,digest:x.digest,version:x.version})));U.length>0&&w.push(ea.Commands.MergeCoins(j,U)),c.set(h,j)}w.push(ea.Commands.SplitCoins(c.get(h),[t.addInput("pure",Ac.Inputs.Pure(K$.bcs.u64().serialize(y)))])),t.replaceCommand(p,w),t.mapArguments(j=>j.$kind==="Result"&&j.Result===p?{$kind:"NestedResult",NestedResult:[p+w.length-1,0]}:j)}return r()}async function Q$({coinType:t,balance:e,client:r,owner:n,usedIds:s}){let i=e;const a=[];return o();async function o(c=null){const{data:l,hasNextPage:u,nextCursor:p}=await r.getCoins({owner:n,coinType:t,cursor:c}),f=l.sort((h,y)=>Number(BigInt(y.balance)-BigInt(h.balance)));for(const h of f){if(s.has(h.coinObjectId))continue;const y=BigInt(h.balance);if(a.push(h),i-=y,i<=0)return a}if(u)return o(p);throw new Error(`Not enough coins of type ${t} to satisfy requested balance`)}}var Ao=Object.defineProperty,ek=Object.getOwnPropertyDescriptor,tk=Object.getOwnPropertyNames,rk=Object.prototype.hasOwnProperty,nk=(t,e)=>{for(var r in e)Ao(t,r,{get:e[r],enumerable:!0})},sk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of tk(e))!rk.call(t,s)&&s!==r&&Ao(t,s,{get:()=>e[s],enumerable:!(n=ek(e,s))||n.enumerable});return t},ik=t=>sk(Ao({},"__esModule",{value:!0}),t),Qh={};nk(Qh,{Arguments:()=>uk});var ak=ik(Qh),ok=ph,ck=fh;const uk={pure:(0,ck.createPure)(t=>e=>e.pure(t)),object:(0,ok.createObjectMethods)(t=>e=>e.object(t)),sharedObjectRef:(...t)=>e=>e.sharedObjectRef(...t),objectRef:(...t)=>e=>e.objectRef(...t),receivingRef:(...t)=>e=>e.receivingRef(...t)};var Mo=Object.defineProperty,lk=Object.getOwnPropertyDescriptor,pk=Object.getOwnPropertyNames,dk=Object.prototype.hasOwnProperty,fk=(t,e)=>{for(var r in e)Mo(t,r,{get:e[r],enumerable:!0})},hk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of pk(e))!dk.call(t,s)&&s!==r&&Mo(t,s,{get:()=>e[s],enumerable:!(n=lk(e,s))||n.enumerable});return t},yk=t=>hk(Mo({},"__esModule",{value:!0}),t),ey={};fk(ey,{findTransactionBlockNames:()=>bk,listToRequests:()=>mk,replaceNames:()=>vk});var gk=yk(ey),ty=ql;const jn="/",bk=t=>{var n;const e=new Set,r=new Set;for(const s of t.commands){if((n=s.MakeMoveVec)!=null&&n.type){Nc([s.MakeMoveVec.type]).forEach(o=>{r.add(o)});continue}if(!("MoveCall"in s))continue;const i=s.MoveCall;if(!i)continue;const a=i.package.split("::")[0];if(a.includes(jn)){if(!(0,ty.isValidNamedPackage)(a))throw new Error(`Invalid package name: ${a}`);e.add(a)}Nc(i.typeArguments??[]).forEach(o=>{r.add(o)})}return{packages:[...e],types:[...r]}};function Nc(t){const e=new Set;for(const r of t)if(r.includes(jn)){if(!(0,ty.isValidNamedType)(r))throw new Error(`Invalid type with names: ${r}`);e.add(r)}return[...e]}const vk=(t,e)=>{var r;for(const n of t.commands){if((r=n.MakeMoveVec)!=null&&r.type){if(!n.MakeMoveVec.type.includes(jn))continue;if(!e.types[n.MakeMoveVec.type])throw new Error(`No resolution found for type: ${n.MakeMoveVec.type}`);n.MakeMoveVec.type=e.types[n.MakeMoveVec.type]}const s=n.MoveCall;if(!s)continue;const i=s.package.split("::"),a=i[0];if(a.includes(jn)&&!e.packages[a])throw new Error(`No address found for package: ${a}`);i[0]=e.packages[a],s.package=i.join("::");const o=s.typeArguments;if(o){for(let c=0;c<o.length;c++)if(o[c].includes(jn)){if(!e.types[o[c]])throw new Error(`No resolution found for type: ${o[c]}`);o[c]=e.types[o[c]]}s.typeArguments=o}}},mk=(t,e)=>{const r=[],n=Bc(t.packages),s=Bc(t.types);for(const[i,a]of n.entries())r.push({id:i,type:"package",name:a});for(const[i,a]of s.entries())r.push({id:i+n.length,type:"moveType",name:a});return _k(r,e)},Bc=t=>[...new Set(t)],_k=(t,e)=>{const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r};var No=Object.defineProperty,wk=Object.getOwnPropertyDescriptor,Ok=Object.getOwnPropertyNames,Sk=Object.prototype.hasOwnProperty,$k=(t,e)=>{for(var r in e)No(t,r,{get:e[r],enumerable:!0})},kk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ok(e))!Sk.call(t,s)&&s!==r&&No(t,s,{get:()=>e[s],enumerable:!(n=wk(e,s))||n.enumerable});return t},Ek=t=>kk(No({},"__esModule",{value:!0}),t),ry={};$k(ry,{namedPackagesPlugin:()=>Tk});var jk=Ek(ry),Ti=gk;const Tk=({suiGraphQLClient:t,pageSize:e=10,overrides:r={packages:{},types:{}}})=>{const n={packages:{...r.packages},types:{...r.types}};return async(i,a,o)=>{const c=(0,Ti.findTransactionBlockNames)(i),l=(0,Ti.listToRequests)({packages:c.packages.filter(u=>!n.packages[u]),types:c.types.filter(u=>!n.types[u])},e);(await Promise.all(l.map(u=>s(t,u)))).forEach(u=>{Object.assign(n.types,u.types),Object.assign(n.packages,u.packages)}),(0,Ti.replaceNames)(i,n),await o()};async function s(i,a){const o={packages:{},types:{}};if(a.length===0)return o;const c=`{
        ${a.map(u=>{const p=u.type==="package"?"packageByName":"typeByName",f=u.type==="package"?"address":"repr";return`${Dc(u.id)}: ${p}(name:"${u.name}") {
                    ${f}
                }`})}
    }`,l=await i.query({query:c,variables:void 0});if(l.errors)throw new Error(JSON.stringify({query:c,errors:l.errors}));for(const u of a){const p=Dc(u.id);if(!l.data||!l.data[p])throw new Error(`No result found for: ${u.name}`);const f=l.data[p];u.type==="package"&&(o.packages[u.name]=f.address),u.type==="moveType"&&(o.types[u.name]=f.repr)}return o}},Dc=t=>`key_${t}`;var Bo=Object.defineProperty,Pk=Object.getOwnPropertyDescriptor,Ik=Object.getOwnPropertyNames,xk=Object.prototype.hasOwnProperty,Ck=(t,e)=>{for(var r in e)Bo(t,r,{get:e[r],enumerable:!0})},Ak=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ik(e))!xk.call(t,s)&&s!==r&&Bo(t,s,{get:()=>e[s],enumerable:!(n=Pk(e,s))||n.enumerable});return t},Mk=t=>Ak(Bo({},"__esModule",{value:!0}),t),ny={};Ck(ny,{Arguments:()=>zk.Arguments,AsyncCache:()=>Vc.AsyncCache,Commands:()=>Rc.Commands,Inputs:()=>Nk.Inputs,ObjectCache:()=>Vc.ObjectCache,ParallelTransactionExecutor:()=>Uk.ParallelTransactionExecutor,SerialTransactionExecutor:()=>Dk.SerialTransactionExecutor,Transaction:()=>zc.Transaction,TransactionDataBuilder:()=>Bk.TransactionDataBuilder,UpgradePolicy:()=>Rc.UpgradePolicy,coinWithBalance:()=>Rk.coinWithBalance,getPureBcsSchema:()=>Uc.getPureBcsSchema,isTransaction:()=>zc.isTransaction,namedPackagesPlugin:()=>Vk.namedPackagesPlugin,normalizedTypeToMoveTypeSignature:()=>Uc.normalizedTypeToMoveTypeSignature});var sy=Mk(ny),Uc=Zl,Nk=ni,Rc=uo,zc=ci,Bk=vo,Vc=jh,Dk=Vh,Uk=M$,Rk=J$,zk=ak,Vk=jk,iy={exports:{}},Do=Object.defineProperty,Lk=Object.getOwnPropertyDescriptor,Fk=Object.getOwnPropertyNames,qk=Object.prototype.hasOwnProperty,Gk=(t,e)=>{for(var r in e)Do(t,r,{get:e[r],enumerable:!0})},Wk=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Fk(e))!qk.call(t,s)&&s!==r&&Do(t,s,{get:()=>e[s],enumerable:!(n=Lk(e,s))||n.enumerable});return t},Jk=t=>Wk(Do({},"__esModule",{value:!0}),t),ay={};Gk(ay,{PACKAGE_VERSION:()=>Hk,TARGETED_RPC_VERSION:()=>Xk});var Kk=Jk(ay);const Hk="1.12.0",Xk="1.36.0";var Uo=Object.defineProperty,Yk=Object.getOwnPropertyDescriptor,Zk=Object.getOwnPropertyNames,Qk=Object.prototype.hasOwnProperty,eE=(t,e)=>{for(var r in e)Uo(t,r,{get:e[r],enumerable:!0})},tE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Zk(e))!Qk.call(t,s)&&s!==r&&Uo(t,s,{get:()=>e[s],enumerable:!(n=Yk(e,s))||n.enumerable});return t},rE=t=>tE(Uo({},"__esModule",{value:!0}),t),oy={};eE(oy,{JsonRpcError:()=>sE,SuiHTTPStatusError:()=>iE,SuiHTTPTransportError:()=>zo});var Ro=rE(oy);const nE={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};let zo=class extends Error{},sE=class extends zo{constructor(e,r){super(e),this.code=r,this.type=nE[r]??"ServerError"}},iE=class extends zo{constructor(e,r,n){super(e),this.status=r,this.statusText=n}};var Vo=Object.defineProperty,aE=Object.getOwnPropertyDescriptor,oE=Object.getOwnPropertyNames,cE=Object.prototype.hasOwnProperty,cy=t=>{throw TypeError(t)},uE=(t,e)=>{for(var r in e)Vo(t,r,{get:e[r],enumerable:!0})},lE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of oE(e))!cE.call(t,s)&&s!==r&&Vo(t,s,{get:()=>e[s],enumerable:!(n=aE(e,s))||n.enumerable});return t},pE=t=>lE(Vo({},"__esModule",{value:!0}),t),Lo=(t,e,r)=>e.has(t)||cy("Cannot "+r),se=(t,e,r)=>(Lo(t,e,"read from private field"),r?r.call(t):e.get(t)),Jt=(t,e,r)=>e.has(t)?cy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),xr=(t,e,r,n)=>(Lo(t,e,"write to private field"),e.set(t,r),r),uy=(t,e,r)=>(Lo(t,e,"access private method"),r),dE=(t,e,r,n)=>({set _(s){xr(t,e,s)},get _(){return se(t,e,n)}}),ly={};uE(ly,{DEFAULT_CLIENT_OPTIONS:()=>fy,WebsocketClient:()=>gE});var fE=pE(ly),hE=Ro,er,Tn,vt,ir,zn,Cr,Js,py,dy;function yE(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const fy={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};let gE=class{constructor(e,r={}){if(Jt(this,Js),Jt(this,er,0),Jt(this,Tn,0),Jt(this,vt,null),Jt(this,ir,null),Jt(this,zn,new Set),Jt(this,Cr,new Map),this.endpoint=e,this.options={...fy,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=yE(this.endpoint))}async makeRequest(e,r){const n=await uy(this,Js,py).call(this);return new Promise((s,i)=>{xr(this,er,se(this,er)+1),se(this,Cr).set(se(this,er),{resolve:s,reject:i,timeout:setTimeout(()=>{se(this,Cr).delete(se(this,er)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:se(this,er),method:e,params:r}))}).then(({error:s,result:i})=>{if(s)throw new hE.JsonRpcError(s.message,s.code);return i})}async subscribe(e){const r=new bE(e);return se(this,zn).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}};er=new WeakMap;Tn=new WeakMap;vt=new WeakMap;ir=new WeakMap;zn=new WeakMap;Cr=new WeakMap;Js=new WeakSet;py=function(){return se(this,ir)?se(this,ir):(xr(this,ir,new Promise(t=>{var e;(e=se(this,vt))==null||e.close(),xr(this,vt,new this.options.WebSocketConstructor(this.endpoint)),se(this,vt).addEventListener("open",()=>{xr(this,Tn,0),t(se(this,vt))}),se(this,vt).addEventListener("close",()=>{dE(this,Tn)._++,se(this,Tn)<=this.options.maxReconnects&&setTimeout(()=>{uy(this,Js,dy).call(this)},this.options.reconnectTimeout)}),se(this,vt).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(s){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:s}));return}if("id"in n&&n.id!=null&&se(this,Cr).has(n.id)){const{resolve:s,timeout:i}=se(this,Cr).get(n.id);clearTimeout(i),s(n)}else if("params"in n){const{params:s}=n;se(this,zn).forEach(i=>{i.subscriptionId===s.subscription&&s.subscription===i.subscriptionId&&i.onMessage(s.result)})}})})),se(this,ir))};dy=async function(){var t;return(t=se(this,vt))==null||t.close(),xr(this,ir,null),Promise.allSettled([...se(this,zn)].map(e=>e.subscribe(this)))};let bE=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}};var Fo=Object.defineProperty,vE=Object.getOwnPropertyDescriptor,mE=Object.getOwnPropertyNames,_E=Object.prototype.hasOwnProperty,hy=t=>{throw TypeError(t)},wE=(t,e)=>{for(var r in e)Fo(t,r,{get:e[r],enumerable:!0})},OE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of mE(e))!_E.call(t,s)&&s!==r&&Fo(t,s,{get:()=>e[s],enumerable:!(n=vE(e,s))||n.enumerable});return t},SE=t=>OE(Fo({},"__esModule",{value:!0}),t),qo=(t,e,r)=>e.has(t)||hy("Cannot "+r),Ce=(t,e,r)=>(qo(t,e,"read from private field"),r?r.call(t):e.get(t)),os=(t,e,r)=>e.has(t)?hy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ta=(t,e,r,n)=>(qo(t,e,"write to private field"),e.set(t,r),r),$E=(t,e,r)=>(qo(t,e,"access private method"),r),yy={};wE(yy,{SuiHTTPTransport:()=>EE});var gy=SE(yy),Lc=Kk,Fc=Ro,kE=fE,fn,qe,Pn,ra,by;let EE=class{constructor(e){os(this,ra),os(this,fn,0),os(this,qe),os(this,Pn),ta(this,qe,e)}fetch(e,r){const n=Ce(this,qe).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var s,i;ta(this,fn,Ce(this,fn)+1);const r=await this.fetch(((s=Ce(this,qe).rpc)==null?void 0:s.url)??Ce(this,qe).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Lc.PACKAGE_VERSION,"Client-Target-Api-Version":Lc.TARGETED_RPC_VERSION,...(i=Ce(this,qe).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:Ce(this,fn),method:e.method,params:e.params})});if(!r.ok)throw new Fc.SuiHTTPStatusError(`Unexpected status code: ${r.status}`,r.status,r.statusText);const n=await r.json();if("error"in n&&n.error!=null)throw new Fc.JsonRpcError(n.error.message,n.error.code);return n.result}async subscribe(e){const r=await $E(this,ra,by).call(this).subscribe(e);return async()=>!!await r()}};fn=new WeakMap;qe=new WeakMap;Pn=new WeakMap;ra=new WeakSet;by=function(){var t;if(!Ce(this,Pn)){const e=Ce(this,qe).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");ta(this,Pn,new kE.WebsocketClient(((t=Ce(this,qe).websocket)==null?void 0:t.url)??Ce(this,qe).url,{WebSocketConstructor:e,...Ce(this,qe).websocket}))}return Ce(this,Pn)};var Go=Object.defineProperty,jE=Object.getOwnPropertyDescriptor,TE=Object.getOwnPropertyNames,PE=Object.prototype.hasOwnProperty,IE=(t,e)=>{for(var r in e)Go(t,r,{get:e[r],enumerable:!0})},xE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of TE(e))!PE.call(t,s)&&s!==r&&Go(t,s,{get:()=>e[s],enumerable:!(n=jE(e,s))||n.enumerable});return t},CE=t=>xE(Go({},"__esModule",{value:!0}),t),vy={};IE(vy,{getFullnodeUrl:()=>ME});var AE=CE(vy);function ME(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}var my={exports:{}},_y=Object.defineProperty,NE=Object.getOwnPropertyDescriptor,BE=Object.getOwnPropertyNames,DE=Object.prototype.hasOwnProperty,UE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of BE(e))!DE.call(t,s)&&s!==r&&_y(t,s,{get:()=>e[s],enumerable:!(n=NE(e,s))||n.enumerable});return t},RE=t=>UE(_y({},"__esModule",{value:!0}),t),zE={},VE=RE(zE),wy=Object.defineProperty,LE=Object.getOwnPropertyDescriptor,FE=Object.getOwnPropertyNames,qE=Object.prototype.hasOwnProperty,GE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of FE(e))!qE.call(t,s)&&s!==r&&wy(t,s,{get:()=>e[s],enumerable:!(n=LE(e,s))||n.enumerable});return t},WE=t=>GE(wy({},"__esModule",{value:!0}),t),JE={},KE=WE(JE),Oy=Object.defineProperty,HE=Object.getOwnPropertyDescriptor,XE=Object.getOwnPropertyNames,YE=Object.prototype.hasOwnProperty,ZE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of XE(e))!YE.call(t,s)&&s!==r&&Oy(t,s,{get:()=>e[s],enumerable:!(n=HE(e,s))||n.enumerable});return t},QE=t=>ZE(Oy({},"__esModule",{value:!0}),t),ej={},tj=QE(ej),Sy=Object.defineProperty,rj=Object.getOwnPropertyDescriptor,nj=Object.getOwnPropertyNames,sj=Object.prototype.hasOwnProperty,ij=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of nj(e))!sj.call(t,s)&&s!==r&&Sy(t,s,{get:()=>e[s],enumerable:!(n=rj(e,s))||n.enumerable});return t},aj=t=>ij(Sy({},"__esModule",{value:!0}),t),oj={},cj=aj(oj),$y=Object.defineProperty,uj=Object.getOwnPropertyDescriptor,lj=Object.getOwnPropertyNames,pj=Object.prototype.hasOwnProperty,dj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of lj(e))!pj.call(t,s)&&s!==r&&$y(t,s,{get:()=>e[s],enumerable:!(n=uj(e,s))||n.enumerable});return t},fj=t=>dj($y({},"__esModule",{value:!0}),t),hj={},yj=fj(hj),ky=Object.defineProperty,gj=Object.getOwnPropertyDescriptor,bj=Object.getOwnPropertyNames,vj=Object.prototype.hasOwnProperty,mj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of bj(e))!vj.call(t,s)&&s!==r&&ky(t,s,{get:()=>e[s],enumerable:!(n=gj(e,s))||n.enumerable});return t},_j=t=>mj(ky({},"__esModule",{value:!0}),t),wj={},Oj=_j(wj);(function(t){var e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i=(l,u,p,f)=>{if(u&&typeof u=="object"||typeof u=="function")for(let h of n(u))!s.call(l,h)&&h!==p&&e(l,h,{get:()=>u[h],enumerable:!(f=r(u,h))||f.enumerable});return l},a=(l,u,p)=>(i(l,u,"default"),p&&i(p,u,"default")),o=l=>i(e({},"__esModule",{value:!0}),l),c={};t.exports=o(c),a(c,VE,t.exports),a(c,KE,t.exports),a(c,tj,t.exports),a(c,cj,t.exports),a(c,yj,t.exports),a(c,Oj,t.exports)})(my);var Sj=my.exports,Wo=Object.defineProperty,$j=Object.getOwnPropertyDescriptor,kj=Object.getOwnPropertyNames,Ej=Object.prototype.hasOwnProperty,jj=(t,e)=>{for(var r in e)Wo(t,r,{get:e[r],enumerable:!0})},Tj=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of kj(e))!Ej.call(t,s)&&s!==r&&Wo(t,s,{get:()=>e[s],enumerable:!(n=$j(e,s))||n.enumerable});return t},Pj=t=>Tj(Wo({},"__esModule",{value:!0}),t),Ey={};jj(Ey,{SuiClient:()=>Nj,isSuiClient:()=>Mj});var Ij=Pj(Ey),br=ge,xj=sy,re=ke,Cj=Wa,Aj=gy;const jy=Symbol.for("@mysten/SuiClient");function Mj(t){return typeof t=="object"&&t!==null&&t[jy]===!0}let Nj=class{get[jy](){return!0}constructor(e){this.transport=e.transport??new Aj.SuiHTTPTransport({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!(0,re.isValidSuiObjectId)((0,re.normalizeSuiObjectId)(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!(0,re.isValidSuiObjectId)((0,re.normalizeSuiObjectId)(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!(0,re.isValidTransactionDigest)(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!(0,re.isValidTransactionDigest)(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:s}){const i=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:(0,br.toBase64)(e),Array.isArray(r)?r:[r],n]});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:i.digest})}catch{}return i}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(r.toSuiAddress()),s=await e.build({client:this}));const{signature:i,bytes:a}=await r.signTransaction(s);return this.executeTransactionBlock({transactionBlock:a,signature:i,...n})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!(0,re.isValidSuiAddress)((0,re.normalizeSuiAddress)(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!(0,re.isValidSuiObjectId)((0,re.normalizeSuiObjectId)(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var n;let r;if((0,xj.isTransaction)(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=(0,br.toBase64)(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=(0,br.toBase64)(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,(n=e.gasPrice)==null?void 0:n.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:(0,br.toBase64)(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!(0,re.isValidSuiObjectId)((0,re.normalizeSuiObjectId)(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),r=(0,br.fromBase58)(e.digest);return(0,br.toHex)(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){const{nextCursor:n,hasNextPage:s,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:s,nextCursor:n,data:i.map(a=>(0,Cj.normalizeSuiNSName)(a,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...s}){const i=AbortSignal.timeout(r),a=new Promise((o,c)=>{i.addEventListener("abort",()=>c(i.reason))});for(a.catch(()=>{});!i.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}};(function(t){var e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,i=(y,w)=>{for(var j in w)e(y,j,{get:w[j],enumerable:!0})},a=(y,w,j,U)=>{if(w&&typeof w=="object"||typeof w=="function")for(let x of n(w))!s.call(y,x)&&x!==j&&e(y,x,{get:()=>w[x],enumerable:!(U=r(w,x))||U.enumerable});return y},o=(y,w,j)=>(a(y,w,"default"),j&&a(j,w,"default")),c=y=>a(e({},"__esModule",{value:!0}),y),l={};i(l,{JsonRpcError:()=>h.JsonRpcError,SuiClient:()=>f.SuiClient,SuiHTTPStatusError:()=>h.SuiHTTPStatusError,SuiHTTPTransport:()=>u.SuiHTTPTransport,SuiHTTPTransportError:()=>h.SuiHTTPTransportError,getFullnodeUrl:()=>p.getFullnodeUrl,isSuiClient:()=>f.isSuiClient}),t.exports=c(l);var u=gy,p=AE;o(l,Sj,t.exports);var f=Ij,h=Ro})(iy);var Bj=iy.exports,rn=As&&As.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{l(n.next(u))}catch(p){a(p)}}function c(u){try{l(n.throw(u))}catch(p){a(p)}}function l(u){u.done?i(u.value):s(u.value).then(o,c)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(qn,"__esModule",{value:!0});qn.OKXSuiProvider=void 0;const At=Lg(),Dj=sy,Uj=Ya,qc=Bj;class Ty{get defaultNetwork(){return this.provider.requestDefaultChainWithNamespace(At.NameSpaceKeySui)}get suiClient(){var e;let r=(0,qc.getFullnodeUrl)(this.defaultNetwork),n=(e=this.provider.session)===null||e===void 0?void 0:e.namespaces[At.NameSpaceKeySui];if(n&&n.rpcMap){let s=n.rpcMap[this.currentChainId];s!==void 0?(r=s,console.log("use custom rpc======> ",r)):console.log("use mainnet rpc======> ",r)}else console.log("use mainnet rpc======> ",r);return new qc.SuiClient({url:r})}get currentChainId(){return`sui:${this.defaultNetwork}`}constructor(e){this.provider=e}getAccount(){var e,r,n,s,i,a,o;let c=At.NameSpaceKeySui,l=(r=(e=this.provider.session)===null||e===void 0?void 0:e.namespaces[c])===null||r===void 0?void 0:r.accounts[0];if(console.log("====> getAccount"),console.log(l),!l)return;const u=l.split(":"),p=l.split(":")[2];console.log("sui_publicKey",(s=(n=this.provider.session)===null||n===void 0?void 0:n.namespaces[c])===null||s===void 0?void 0:s.extra);let f=(o=(a=(i=this.provider.session)===null||i===void 0?void 0:i.namespaces[c])===null||a===void 0?void 0:a.extra)===null||o===void 0?void 0:o[`${u[0]}:${u[1]}`],h="";if(f!=null&&(h=f.publicKey,console.log("sui_publicKey",h)),!!p)return{address:p,publicKey:h}}signTransaction(e){return rn(this,void 0,void 0,function*(){const[r,n]=yield this.generateTsBytesAndSerizlize(e),s=yield this.provider.request({method:"sui_signTransactionBlock",params:{txBytes:r,txSerialize:n}},this.currentChainId);return"result"in s?{signature:s.result,transactionBlockBytes:r}:s.error})}signAndExecuteTransaction(e){return rn(this,void 0,void 0,function*(){const[r,n]=yield this.generateTsBytesAndSerizlize(e);let s=yield this.provider.request({method:"sui_signAndExecuteTransactionBlock",params:{txBytes:r,txSerialize:n}},this.currentChainId);return"result"in s?{confirmedLocalExecution:!1,digest:s.result,txBytes:r}:s.error})}signMessage(e){return rn(this,void 0,void 0,function*(){console.log("====> signMessage:"),console.log(e);const r=new TextDecoder("utf8"),n=btoa(r.decode(e.message)),s=atob(n),i=yield this.provider.request({method:"sui_signMessage",params:{message:s}},this.currentChainId);if("result"in i){let a=i;console.log("====> signAction result"),console.log(i);const o=a.result;return{messageBytes:n,signature:o}}else return console.log("====> signAction result error"),i.error})}signPersonalMessage(e){return rn(this,void 0,void 0,function*(){console.log("====> signPersonalMessage："),console.log(e);const r=new TextDecoder("utf8"),n=btoa(r.decode(e.message)),s=atob(n),i=yield this.provider.request({method:"sui_signPersonalMessage",params:{message:s}},this.currentChainId);if("result"in i){let a=i;console.log("====> signAction result"),console.log(i);const o=a.result;return{bytes:n,signature:o}}else return console.log("====> signAction result error"),i.error})}generateTsBytesAndSerizlize(e){return rn(this,void 0,void 0,function*(){let r=["",""];if("txBytes"in e&&e.txBytes.length>0&&"txSerialize"in e&&e.txSerialize.length>0&&(r=[e.txBytes,e.txSerialize]),!("transactionBlock"in e))throw new At.OKXConnectError(At.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"params doesn't contains transactionBlock");let n=this.provider.requestAccountsWithNamespace(At.NameSpaceKeySui);if(n.length==0)throw new At.OKXConnectError(At.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"there is no sui account");e.transactionBlock.setSender(n[0]);const s=yield e.transactionBlock.build({client:this.suiClient}),i=(0,Uj.toBase64)(s),a=yield Dj.Transaction.from(i).toJSON();return r=[i,a],new Promise(o=>{o(r)})})}}qn.OKXSuiProvider=Ty;qn.default=Ty;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OKXSuiProvider=void 0;var e=qn;Object.defineProperty(t,"OKXSuiProvider",{enumerable:!0,get:function(){return e.OKXSuiProvider}})})(mu);const Rj="1.16.1",zj="1.40.0",Vj={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class Py extends Error{}class Iy extends Py{constructor(e,r){super(e),this.code=r,this.type=Vj[r]??"ServerError"}}class Lj extends Py{constructor(e,r,n){super(e),this.status=r,this.statusText=n}}var xy=t=>{throw TypeError(t)},Jo=(t,e,r)=>e.has(t)||xy("Cannot "+r),ie=(t,e,r)=>(Jo(t,e,"read from private field"),r?r.call(t):e.get(t)),Kt=(t,e,r)=>e.has(t)?xy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ar=(t,e,r,n)=>(Jo(t,e,"write to private field"),e.set(t,r),r),Cy=(t,e,r)=>(Jo(t,e,"access private method"),r),Fj=(t,e,r,n)=>({set _(s){Ar(t,e,s)},get _(){return ie(t,e,n)}}),tr,In,mt,ar,Vn,Mr,Ks,Ay,My;function qj(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const Gj={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Wj{constructor(e,r={}){if(Kt(this,Ks),Kt(this,tr,0),Kt(this,In,0),Kt(this,mt,null),Kt(this,ar,null),Kt(this,Vn,new Set),Kt(this,Mr,new Map),this.endpoint=e,this.options={...Gj,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=qj(this.endpoint))}async makeRequest(e,r){const n=await Cy(this,Ks,Ay).call(this);return new Promise((s,i)=>{Ar(this,tr,ie(this,tr)+1),ie(this,Mr).set(ie(this,tr),{resolve:s,reject:i,timeout:setTimeout(()=>{ie(this,Mr).delete(ie(this,tr)),i(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n.send(JSON.stringify({jsonrpc:"2.0",id:ie(this,tr),method:e,params:r}))}).then(({error:s,result:i})=>{if(s)throw new Iy(s.message,s.code);return i})}async subscribe(e){const r=new Jj(e);return ie(this,Vn).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}}tr=new WeakMap;In=new WeakMap;mt=new WeakMap;ar=new WeakMap;Vn=new WeakMap;Mr=new WeakMap;Ks=new WeakSet;Ay=function(){return ie(this,ar)?ie(this,ar):(Ar(this,ar,new Promise(t=>{var e;(e=ie(this,mt))==null||e.close(),Ar(this,mt,new this.options.WebSocketConstructor(this.endpoint)),ie(this,mt).addEventListener("open",()=>{Ar(this,In,0),t(ie(this,mt))}),ie(this,mt).addEventListener("close",()=>{Fj(this,In)._++,ie(this,In)<=this.options.maxReconnects&&setTimeout(()=>{Cy(this,Ks,My).call(this)},this.options.reconnectTimeout)}),ie(this,mt).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(s){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:s}));return}if("id"in n&&n.id!=null&&ie(this,Mr).has(n.id)){const{resolve:s,timeout:i}=ie(this,Mr).get(n.id);clearTimeout(i),s(n)}else if("params"in n){const{params:s}=n;ie(this,Vn).forEach(i=>{i.subscriptionId===s.subscription&&s.subscription===i.subscriptionId&&i.onMessage(s.result)})}})})),ie(this,ar))};My=async function(){var t;return(t=ie(this,mt))==null||t.close(),Ar(this,ar,null),Promise.allSettled([...ie(this,Vn)].map(e=>e.subscribe(this)))};class Jj{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params);this.subscribed&&(this.subscriptionId=r)}}var Ny=t=>{throw TypeError(t)},Ko=(t,e,r)=>e.has(t)||Ny("Cannot "+r),Ae=(t,e,r)=>(Ko(t,e,"read from private field"),r?r.call(t):e.get(t)),cs=(t,e,r)=>e.has(t)?Ny("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),na=(t,e,r,n)=>(Ko(t,e,"write to private field"),e.set(t,r),r),Kj=(t,e,r)=>(Ko(t,e,"access private method"),r),hn,Ge,xn,sa,By;class Hj{constructor(e){cs(this,sa),cs(this,hn,0),cs(this,Ge),cs(this,xn),na(this,Ge,e)}fetch(e,r){const n=Ae(this,Ge).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var s,i;na(this,hn,Ae(this,hn)+1);const r=await this.fetch(((s=Ae(this,Ge).rpc)==null?void 0:s.url)??Ae(this,Ge).url,{method:"POST",headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Rj,"Client-Target-Api-Version":zj,"Client-Request-Method":e.method,...(i=Ae(this,Ge).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:Ae(this,hn),method:e.method,params:e.params})});if(!r.ok)throw new Lj(`Unexpected status code: ${r.status}`,r.status,r.statusText);const n=await r.json();if("error"in n&&n.error!=null)throw new Iy(n.error.message,n.error.code);return n.result}async subscribe(e){const r=await Kj(this,sa,By).call(this).subscribe(e);return async()=>!!await r()}}hn=new WeakMap;Ge=new WeakMap;xn=new WeakMap;sa=new WeakSet;By=function(){var t;if(!Ae(this,xn)){const e=Ae(this,Ge).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");na(this,xn,new Wj(((t=Ae(this,Ge).websocket)==null?void 0:t.url)??Ae(this,Ge).url,{WebSocketConstructor:e,...Ae(this,Ge).websocket}))}return Ae(this,xn)};function Xj(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),p=u.charCodeAt(0);if(e[p]!==255)throw new TypeError(u+" is ambiguous");e[p]=l}const r=t.length,n=t.charAt(0),s=Math.log(r)/Math.log(256),i=Math.log(256)/Math.log(r);function a(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,p=0,f=0;const h=l.length;for(;f!==h&&l[f]===0;)f++,u++;const y=(h-f)*i+1>>>0,w=new Uint8Array(y);for(;f!==h;){let x=l[f],q=0;for(let W=y-1;(x!==0||q<p)&&W!==-1;W--,q++)x+=256*w[W]>>>0,w[W]=x%r>>>0,x=x/r>>>0;if(x!==0)throw new Error("Non-zero carry");p=q,f++}let j=y-p;for(;j!==y&&w[j]===0;)j++;let U=n.repeat(u);for(;j<y;++j)U+=t.charAt(w[j]);return U}function o(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,p=0,f=0;for(;l[u]===n;)p++,u++;const h=(l.length-u)*s+1>>>0,y=new Uint8Array(h);for(;l[u];){let x=e[l.charCodeAt(u)];if(x===255)return;let q=0;for(let W=h-1;(x!==0||q<f)&&W!==-1;W--,q++)x+=r*y[W]>>>0,y[W]=x%256>>>0,x=x/256>>>0;if(x!==0)throw new Error("Non-zero carry");f=q,u++}let w=h-f;for(;w!==h&&y[w]===0;)w++;const j=new Uint8Array(p+(h-w));let U=p;for(;w!==h;)j[U++]=y[w++];return j}function c(l){const u=o(l);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:a,decodeUnsafe:o,decode:c}}var Yj="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Dy=Xj(Yj),ui=t=>Dy.encode(t),Ln=t=>Dy.decode(t);function fe(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const Pi=8192;function H(t){if(t.length<Pi)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=Pi){const n=t.slice(r,r+Pi);e+=String.fromCharCode(...n)}return btoa(e)}function Uy(t){var s;const e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,n=((s=r.match(/[0-9a-fA-F]{2}/g))==null?void 0:s.map(i=>parseInt(i,16)))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(n)}function zr(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}function Ho(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function Zj(t){let e=0,r=0,n=0;for(;;){let s=t[n];if(n+=1,e|=(s&127)<<r,!(s&128))break;r+=7}return{value:e,length:n}}class Qj{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:s}=Zj(r);return this.shift(s),n}readVec(e){let r=this.readULEB(),n=[];for(let s=0;s<r;s++)n.push(e(this,s,r));return n}}function e1(t,e){switch(e){case"base58":return ui(t);case"base64":return H(t);case"hex":return zr(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function t1(t,e=["<",">"]){const[r,n]=e,s=[];let i="",a=0;for(let o=0;o<t.length;o++){const c=t[o];if(c===r&&a++,c===n&&a--,a===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}class r1{constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Ii(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return Ii(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return Ii(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return Ho(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,s)=>r(this,n,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return e1(this.toBytes(),e)}}function Ii(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Ry=t=>{throw TypeError(t)},zy=(t,e,r)=>e.has(t)||Ry("Cannot "+r),We=(t,e,r)=>(zy(t,e,"read from private field"),r?r.call(t):e.get(t)),Hs=(t,e,r)=>e.has(t)?Ry("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Xs=(t,e,r,n)=>(zy(t,e,"write to private field"),e.set(t,r),r),$r,yn,ks,Bt;const n1=class Vy{constructor(e){Hs(this,$r),Hs(this,yn),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Xs(this,$r,e.write),Xs(this,yn,e.serialize??((r,n)=>{const s=new r1({initialSize:this.serializedSize(r)??void 0,...n});return We(this,$r).call(this,r,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),We(this,$r).call(this,e,r)}serialize(e,r){return this.validate(e),new s1(this,We(this,yn).call(this,e,r))}parse(e){const r=new Qj(e);return this.read(r)}fromHex(e){return this.parse(Uy(e))}fromBase58(e){return this.parse(Ln(e))}fromBase64(e){return this.parse(fe(e))}transform({name:e,input:r,output:n,validate:s}){return new Vy({name:e??this.name,read:i=>n(this.read(i)),write:(i,a)=>We(this,$r).call(this,r(i),a),serializedSize:i=>this.serializedSize(r(i)),serialize:(i,a)=>We(this,yn).call(this,r(i),a),validate:i=>{s==null||s(i),this.validate(r(i))}})}};$r=new WeakMap;yn=new WeakMap;let wt=n1;const Ly=Symbol.for("@mysten/serialized-bcs");function Xo(t){return!!t&&typeof t=="object"&&t[Ly]===!0}class s1{constructor(e,r){Hs(this,ks),Hs(this,Bt),Xs(this,ks,e),Xs(this,Bt,r)}get[Ly](){return!0}toBytes(){return We(this,Bt)}toHex(){return zr(We(this,Bt))}toBase64(){return H(We(this,Bt))}toBase58(){return ui(We(this,Bt))}parse(){return We(this,ks).parse(We(this,Bt))}}ks=new WeakMap;Bt=new WeakMap;function Ys({size:t,...e}){return new wt({...e,serializedSize:()=>t})}function xi({readMethod:t,writeMethod:e,...r}){return Ys({...r,read:n=>n[t](),write:(n,s)=>s[e](n),validate:n=>{var s;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(s=r.validate)==null||s.call(r,n)}})}function Ci({readMethod:t,writeMethod:e,...r}){return Ys({...r,read:n=>n[t](),write:(n,s)=>s[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function i1({serialize:t,...e}){const r=new wt({...e,serialize:t,write:(n,s)=>{for(const i of r.serialize(n).toBytes())s.write8(i)}});return r}function a1({toBytes:t,fromBytes:e,...r}){return new wt({...r,read:n=>{const s=n.readULEB(),i=n.readBytes(s);return e(i)},write:(n,s)=>{const i=t(n);s.writeULEB(i.length);for(let a=0;a<i.length;a++)s.write8(i[a])},serialize:n=>{const s=t(n),i=Ho(s.length),a=new Uint8Array(i.length+s.length);return a.set(i,0),a.set(s,i.length),a},validate:n=>{var s;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(s=r.validate)==null||s.call(r,n)}})}function o1(t){let e=null;function r(){return e||(e=t()),e}return new wt({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,s)=>r().write(n,s),serialize:(n,s)=>r().serialize(n,s).toBytes()})}const d={u8(t){return xi({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return xi({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return xi({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Ci({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Ci({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Ci({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Ys({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return i1({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Ho(e)),...t})},bytes(t,e){return Ys({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{const s=new Uint8Array(r);for(let i=0;i<t;i++)n.write8(s[i]??0)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},string(t){return a1({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new wt({name:`${e.name}[${t}]`,read:n=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(n);return s},write:(n,s)=>{for(const i of n)e.write(i,s)},...r,validate:n=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return d.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new wt({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),s=new Array(n);for(let i=0;i<n;i++)s[i]=t.read(r);return s},write:(r,n)=>{n.writeULEB(r.length);for(const s of r)t.write(s,n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new wt({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let s=0;s<t.length;s++){const i=t[s].serializedSize(r[s]);if(i==null)return null;n+=i}return n},read:r=>{const n=[];for(const s of t)n.push(s.read(r));return n},write:(r,n)=>{for(let s=0;s<t.length;s++)t[s].write(r[s],n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new wt({name:t,serializedSize:s=>{let i=0;for(const[a,o]of n){const c=o.serializedSize(s[a]);if(c==null)return null;i+=c}return i},read:s=>{const i={};for(const[a,o]of n)i[a]=o.read(s);return i},write:(s,i)=>{for(const[a,o]of n)o.write(s[a],i)},...r,validate:s=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,r){const n=Object.entries(e);return new wt({name:t,read:s=>{const i=s.readULEB(),a=n[i];if(!a)throw new TypeError(`Unknown value ${i} for enum ${t}`);const[o,c]=a;return{[o]:(c==null?void 0:c.read(s))??!0,$kind:o}},write:(s,i)=>{const[a,o]=Object.entries(s).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<n.length;c++){const[l,u]=n[c];if(l===a){i.writeULEB(c),u==null||u.write(o,i);return}}},...r,validate:s=>{var o;if((o=r==null?void 0:r.validate)==null||o.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s).filter(c=>s[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);const[a]=i;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(t,e){return d.vector(d.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[s,i]of r)n.set(s,i);return n}})},lazy(t){return o1(t)}},c1=32;function Gc(t){try{return Ln(t).length===c1}catch{return!1}}const Zn=32;function _t(t){return u1(t)&&l1(t)===Zn}function us(t){return _t(t)}function F(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(Zn*2,"0")}`}function Ot(t,e=!1){return F(t,e)}function u1(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function l1(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const p1=/^vector<(.+)>$/,d1=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class nt{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(p1);if(n)return{vector:nt.parseFromStr(n[1],r)};const s=e.match(d1);if(s)return{struct:{address:r?F(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:nt.parseStructTypeArgs(s[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return t1(e).map(n=>nt.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${nt.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(nt.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}function f1(t){return d.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function h1(t){return d.enum("Option",{None:null,Some:t})}const te=d.bytes(Zn).transform({validate:t=>{const e=typeof t=="string"?t:zr(t);if(!e||!_t(F(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?Uy(F(t)):t,output:t=>F(zr(t))}),He=d.vector(d.u8()).transform({name:"ObjectDigest",input:t=>Ln(t),output:t=>ui(new Uint8Array(t)),validate:t=>{if(Ln(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),xe=d.struct("SuiObjectRef",{objectId:te,version:d.u64(),digest:He}),Fy=d.struct("SharedObjectRef",{objectId:te,initialSharedVersion:d.u64(),mutable:d.bool()}),qy=d.enum("ObjectArg",{ImmOrOwnedObject:xe,SharedObject:Fy,Receiving:xe}),Gy=d.enum("CallArg",{Pure:d.struct("Pure",{bytes:d.vector(d.u8()).transform({input:t=>typeof t=="string"?fe(t):t,output:t=>H(new Uint8Array(t))})}),Object:qy}),Yo=d.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:d.lazy(()=>Yo),struct:d.lazy(()=>Yy),u16:null,u32:null,u256:null}),Zo=Yo.transform({input:t=>typeof t=="string"?nt.parseFromStr(t,!0):t,output:t=>nt.tagToString(t)}),rt=d.enum("Argument",{GasCoin:null,Input:d.u16(),Result:d.u16(),NestedResult:d.tuple([d.u16(),d.u16()])}),Wy=d.struct("ProgrammableMoveCall",{package:te,module:d.string(),function:d.string(),typeArguments:d.vector(Zo),arguments:d.vector(rt)}),Jy=d.enum("Command",{MoveCall:Wy,TransferObjects:d.struct("TransferObjects",{objects:d.vector(rt),address:rt}),SplitCoins:d.struct("SplitCoins",{coin:rt,amounts:d.vector(rt)}),MergeCoins:d.struct("MergeCoins",{destination:rt,sources:d.vector(rt)}),Publish:d.struct("Publish",{modules:d.vector(d.vector(d.u8()).transform({input:t=>typeof t=="string"?fe(t):t,output:t=>H(new Uint8Array(t))})),dependencies:d.vector(te)}),MakeMoveVec:d.struct("MakeMoveVec",{type:h1(Zo).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:d.vector(rt)}),Upgrade:d.struct("Upgrade",{modules:d.vector(d.vector(d.u8()).transform({input:t=>typeof t=="string"?fe(t):t,output:t=>H(new Uint8Array(t))})),dependencies:d.vector(te),package:te,ticket:rt})}),Ky=d.struct("ProgrammableTransaction",{inputs:d.vector(Gy),commands:d.vector(Jy)}),Hy=d.enum("TransactionKind",{ProgrammableTransaction:Ky,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Xy=d.enum("TransactionExpiration",{None:null,Epoch:f1()}),Yy=d.struct("StructTag",{address:te,module:d.string(),name:d.string(),typeParams:d.vector(Yo)}),Zy=d.struct("GasData",{payment:d.vector(xe),owner:te,price:d.u64(),budget:d.u64()}),Qy=d.struct("TransactionDataV1",{kind:Hy,sender:te,gasData:Zy,expiration:Xy}),eg=d.enum("TransactionData",{V1:Qy}),tg=d.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),rg=d.enum("IntentVersion",{V0:null}),ng=d.enum("AppId",{Sui:null}),sg=d.struct("Intent",{scope:tg,version:rg,appId:ng});function ig(t){return d.struct(`IntentMessage<${t.name}>`,{intent:sg,value:t})}const ag=d.enum("CompressedSignature",{ED25519:d.fixedArray(64,d.u8()),Secp256k1:d.fixedArray(64,d.u8()),Secp256r1:d.fixedArray(64,d.u8()),ZkLogin:d.vector(d.u8())}),og=d.enum("PublicKey",{ED25519:d.fixedArray(32,d.u8()),Secp256k1:d.fixedArray(33,d.u8()),Secp256r1:d.fixedArray(33,d.u8()),ZkLogin:d.vector(d.u8())}),cg=d.struct("MultiSigPkMap",{pubKey:og,weight:d.u8()}),ug=d.struct("MultiSigPublicKey",{pk_map:d.vector(cg),threshold:d.u16()}),y1=d.struct("MultiSig",{sigs:d.vector(ag),bitmap:d.u16(),multisig_pk:ug}),g1=d.vector(d.u8()).transform({input:t=>typeof t=="string"?fe(t):t,output:t=>H(new Uint8Array(t))}),lg=d.struct("SenderSignedTransaction",{intentMessage:ig(eg),txSignatures:d.vector(g1)}),b1=d.vector(lg,{name:"SenderSignedData"}),v1=d.enum("PackageUpgradeError",{UnableToFetchPackage:d.struct("UnableToFetchPackage",{packageId:te}),NotAPackage:d.struct("NotAPackage",{objectId:te}),IncompatibleUpgrade:null,DigestDoesNotMatch:d.struct("DigestDoesNotMatch",{digest:d.vector(d.u8())}),UnknownUpgradePolicy:d.struct("UnknownUpgradePolicy",{policy:d.u8()}),PackageIDDoesNotMatch:d.struct("PackageIDDoesNotMatch",{packageId:te,ticketId:te})}),m1=d.struct("ModuleId",{address:te,name:d.string()}),Wc=d.struct("MoveLocation",{module:m1,function:d.u16(),instruction:d.u16(),functionName:d.option(d.string())}),_1=d.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:d.struct("IndexOutOfBounds",{idx:d.u16()}),SecondaryIndexOutOfBounds:d.struct("SecondaryIndexOutOfBounds",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidResultArity:d.struct("InvalidResultArity",{resultIdx:d.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),w1=d.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),O1=d.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:d.struct("MoveObjectTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),MovePackageTooBig:d.struct("MovePackageTooBig",{objectSize:d.u64(),maxObjectSize:d.u64()}),CircularObjectOwnership:d.struct("CircularObjectOwnership",{object:te}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:d.option(Wc),MoveAbort:d.tuple([Wc,d.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:d.struct("CommandArgumentError",{argIdx:d.u16(),kind:_1}),TypeArgumentError:d.struct("TypeArgumentError",{argumentIdx:d.u16(),kind:w1}),UnusedValueWithoutDrop:d.struct("UnusedValueWithoutDrop",{resultIdx:d.u16(),secondaryIdx:d.u16()}),InvalidPublicFunctionReturnType:d.struct("InvalidPublicFunctionReturnType",{idx:d.u16()}),InvalidTransferObject:null,EffectsTooLarge:d.struct("EffectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:d.struct("PackageUpgradeError",{upgradeError:v1}),WrittenObjectsTooLarge:d.struct("WrittenObjectsTooLarge",{currentSize:d.u64(),maxSize:d.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:d.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:d.vector(te)}),AddressDeniedForCoin:d.struct("AddressDeniedForCoin",{address:te,coinType:d.string()}),CoinTypeGlobalPause:d.struct("CoinTypeGlobalPause",{coinType:d.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),pg=d.enum("ExecutionStatus",{Success:null,Failed:d.struct("ExecutionFailed",{error:O1,command:d.option(d.u64())})}),dg=d.struct("GasCostSummary",{computationCost:d.u64(),storageCost:d.u64(),storageRebate:d.u64(),nonRefundableStorageFee:d.u64()}),Tr=d.enum("Owner",{AddressOwner:te,ObjectOwner:te,Shared:d.struct("Shared",{initialSharedVersion:d.u64()}),Immutable:null}),S1=d.struct("TransactionEffectsV1",{status:pg,executedEpoch:d.u64(),gasUsed:dg,modifiedAtVersions:d.vector(d.tuple([te,d.u64()])),sharedObjects:d.vector(xe),transactionDigest:He,created:d.vector(d.tuple([xe,Tr])),mutated:d.vector(d.tuple([xe,Tr])),unwrapped:d.vector(d.tuple([xe,Tr])),deleted:d.vector(xe),unwrappedThenDeleted:d.vector(xe),wrapped:d.vector(xe),gasObject:d.tuple([xe,Tr]),eventsDigest:d.option(He),dependencies:d.vector(He)}),Qo=d.tuple([d.u64(),He]),$1=d.enum("ObjectIn",{NotExist:null,Exist:d.tuple([Qo,Tr])}),k1=d.enum("ObjectOut",{NotExist:null,ObjectWrite:d.tuple([He,Tr]),PackageWrite:Qo}),E1=d.enum("IDOperation",{None:null,Created:null,Deleted:null}),j1=d.struct("EffectsObjectChange",{inputState:$1,outputState:k1,idOperation:E1}),T1=d.enum("UnchangedSharedKind",{ReadOnlyRoot:Qo,MutateDeleted:d.u64(),ReadDeleted:d.u64(),Cancelled:d.u64(),PerEpochConfig:null}),P1=d.struct("TransactionEffectsV2",{status:pg,executedEpoch:d.u64(),gasUsed:dg,transactionDigest:He,gasObjectIndex:d.option(d.u32()),eventsDigest:d.option(He),dependencies:d.vector(He),lamportVersion:d.u64(),changedObjects:d.vector(d.tuple([te,j1])),unchangedSharedObjects:d.vector(d.tuple([te,T1])),auxDataDigest:d.option(He)}),I1=d.enum("TransactionEffects",{V1:S1,V2:P1}),T={...d,U8:d.u8(),U16:d.u16(),U32:d.u32(),U64:d.u64(),U128:d.u128(),U256:d.u256(),ULEB128:d.uleb128(),Bool:d.bool(),String:d.string(),Address:te,AppId:ng,Argument:rt,CallArg:Gy,CompressedSignature:ag,GasData:Zy,Intent:sg,IntentMessage:ig,IntentScope:tg,IntentVersion:rg,MultiSig:y1,MultiSigPkMap:cg,MultiSigPublicKey:ug,ObjectArg:qy,ObjectDigest:He,ProgrammableMoveCall:Wy,ProgrammableTransaction:Ky,PublicKey:og,SenderSignedData:b1,SenderSignedTransaction:lg,SharedObjectRef:Fy,StructTag:Yy,SuiObjectRef:xe,Command:Jy,TransactionData:eg,TransactionDataV1:Qy,TransactionExpiration:Xy,TransactionKind:Hy,TypeTag:Zo,TransactionEffects:I1},x1=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,C1=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i;function A1(t,e="at"){const r=t.toLowerCase();let n;if(r.includes("@")){if(!x1.test(r))throw new Error(`Invalid SuiNS name ${t}`);const[s,i]=r.split("@");n=[...s?s.split("."):[],i]}else{if(!C1.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}BigInt(1e9);const M1="0x1",fg="0x2";Ot("0x6");const N1=`${fg}::sui::SUI`;Ot("0x5");const B1="object",D1="ID",U1="ascii",R1="String",z1="string",V1="String",L1="option",F1="Option";function q1(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&F(e.package)===F("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function ia(t){if(typeof t=="string")switch(t){case"address":return T.Address;case"bool":return T.Bool;case"u8":return T.U8;case"u16":return T.U16;case"u32":return T.U32;case"u64":return T.U64;case"u128":return T.U128;case"u256":return T.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return T.vector(T.U8).transform({input:r=>typeof r=="string"?new TextEncoder().encode(r):r,output:r=>r});const e=ia(t.vector);return e?T.vector(e):null}if("datatype"in t){const e=F(t.datatype.package);if(e===F(M1)){if(t.datatype.module===U1&&t.datatype.type===R1||t.datatype.module===z1&&t.datatype.type===V1)return T.String;if(t.datatype.module===L1&&t.datatype.type===F1){const r=ia(t.datatype.typeParameters[0]);return r?T.vector(r):null}}if(e===F(fg)&&t.datatype.module===B1&&t.datatype.type===D1)return T.Address}return null}function G1(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Cn(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Cn(t.MutableReference)}:{ref:null,body:Cn(t)}}function Cn(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Cn(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Cn)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function W1(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?H(t):t.toBase64()}}}const St={Pure:W1,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:F(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:F(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:F(t)}}}}};function fr(t){const e=Object.entries(t).map(([r,n])=>O({[r]:n}));return K(he(e),Jn(r=>({...r,$kind:Object.keys(r)[0]})))}const Jr=K(M(),Jn(t=>F(t)),Fr(_t)),Ee=Jr,pr=M(),$e=K(he([M(),K(Q(),ee())]),Fr(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Ft=O({objectId:Jr,version:$e,digest:M()}),Z=K(he([O({GasCoin:C(!0)}),O({Input:K(Q(),ee()),type:de(C("pure"))}),O({Input:K(Q(),ee()),type:de(C("object"))}),O({Result:K(Q(),ee())}),O({NestedResult:ai([K(Q(),ee()),K(Q(),ee())])})]),Jn(t=>({...t,$kind:Object.keys(t)[0]}))),J1=O({budget:L($e),price:L($e),owner:L(Jr),payment:L(I(Ft))}),aa=he([C("address"),C("bool"),C("u8"),C("u16"),C("u32"),C("u64"),C("u128"),C("u256"),O({vector:Dr(()=>aa)}),O({datatype:O({package:M(),module:M(),type:M(),typeParameters:I(Dr(()=>aa))})}),O({typeParameter:K(Q(),ee())})]),K1=O({ref:L(he([C("&"),C("&mut")])),body:aa}),H1=O({package:Ee,module:M(),function:M(),typeArguments:I(M()),arguments:I(Z),_argumentTypes:de(L(I(K1)))}),X1=O({name:M(),inputs:Ur(M(),he([Z,I(Z)])),data:Ur(M(),Vt())}),Y1=fr({MoveCall:H1,TransferObjects:O({objects:I(Z),address:Z}),SplitCoins:O({coin:Z,amounts:I(Z)}),MergeCoins:O({destination:Z,sources:I(Z)}),Publish:O({modules:I(pr),dependencies:I(Ee)}),MakeMoveVec:O({type:L(M()),elements:I(Z)}),Upgrade:O({modules:I(pr),dependencies:I(Ee),package:Ee,ticket:Z}),$Intent:X1}),hg=fr({ImmOrOwnedObject:Ft,SharedObject:O({objectId:Ee,initialSharedVersion:$e,mutable:Hn()}),Receiving:Ft}),Z1=fr({Object:hg,Pure:O({bytes:pr}),UnresolvedPure:O({value:Vt()}),UnresolvedObject:O({objectId:Ee,version:de(L($e)),digest:de(L(M())),initialSharedVersion:de(L($e))})}),Jc=fr({Object:hg,Pure:O({bytes:pr})}),yg=fr({None:C(!0),Epoch:$e}),Es=O({version:C(2),sender:lr(Jr),expiration:lr(yg),gasData:J1,inputs:I(Z1),commands:I(Y1)}),Ht={MoveCall(t){const[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>Y(Z,r)),address:Y(Z,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:Y(Z,t),amounts:e.map(r=>Y(Z,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:Y(Z,t),sources:e.map(r=>Y(Z,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:H(new Uint8Array(r))),dependencies:e.map(r=>Ot(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:H(new Uint8Array(s))),dependencies:e.map(s=>Ot(s)),package:r,ticket:Y(Z,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>Y(Z,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,s])=>[n,Array.isArray(s)?s.map(i=>Y(Z,i)):Y(Z,s)])),data:r}}}},oa=O({digest:M(),objectId:M(),version:he([K(Q(),ee()),M(),ii()])}),Q1=fr({ImmOrOwned:oa,Shared:O({objectId:Ee,initialSharedVersion:$e,mutable:Hn()}),Receiving:oa}),Kc=fr({Object:Q1,Pure:I(K(Q(),ee()))}),gg=he([O({kind:C("Input"),index:K(Q(),ee()),value:Vt(),type:de(C("object"))}),O({kind:C("Input"),index:K(Q(),ee()),value:Vt(),type:C("pure")})]),eT=he([O({Epoch:K(Q(),ee())}),O({None:L(C(!0))})]),Hc=K(he([Q(),M(),ii()]),Fr(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),ec=he([O({bool:L(C(!0))}),O({u8:L(C(!0))}),O({u64:L(C(!0))}),O({u128:L(C(!0))}),O({address:L(C(!0))}),O({signer:L(C(!0))}),O({vector:Dr(()=>ec)}),O({struct:Dr(()=>tT)}),O({u16:L(C(!0))}),O({u32:L(C(!0))}),O({u256:L(C(!0))})]),tT=O({address:M(),module:M(),name:M(),typeParams:I(ec)}),rT=O({budget:de(Hc),price:de(Hc),payment:de(I(oa)),owner:de(M())}),nT=[gg,O({kind:C("GasCoin")}),O({kind:C("Result"),index:K(Q(),ee())}),O({kind:C("NestedResult"),index:K(Q(),ee()),resultIndex:K(Q(),ee())})],jt=he([...nT]),sT=O({kind:C("MoveCall"),target:K(M(),Fr(t=>t.split("::").length===3)),typeArguments:I(M()),arguments:I(jt)}),iT=O({kind:C("TransferObjects"),objects:I(jt),address:jt}),aT=O({kind:C("SplitCoins"),coin:jt,amounts:I(jt)}),oT=O({kind:C("MergeCoins"),destination:jt,sources:I(jt)}),cT=O({kind:C("MakeMoveVec"),type:he([O({Some:ec}),O({None:L(C(!0))})]),objects:I(jt)}),uT=O({kind:C("Publish"),modules:I(I(K(Q(),ee()))),dependencies:I(M())}),lT=O({kind:C("Upgrade"),modules:I(I(K(Q(),ee()))),dependencies:I(M()),packageId:M(),ticket:jt}),pT=[sT,iT,aT,oT,uT,lT,cT],dT=he([...pT]);O({version:C(1),sender:de(M()),expiration:lr(eT),gasConfig:rT,inputs:I(gg),transactions:I(dT)});function Xc(t){var r;const e=t.inputs.map((n,s)=>{if(n.Object)return{kind:"Input",index:s,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(fe(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((r=t.expiration)==null?void 0:r.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:nt.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(s=>pt(s,e))};if(n.MergeCoins)return{kind:"MergeCoins",destination:pt(n.MergeCoins.destination,e),sources:n.MergeCoins.sources.map(s=>pt(s,e))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(s=>pt(s,e))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(s=>Array.from(fe(s))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:pt(n.SplitCoins.coin,e),amounts:n.SplitCoins.amounts.map(s=>pt(s,e))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(s=>pt(s,e)),address:pt(n.TransferObjects.address,e)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(s=>Array.from(fe(s))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:pt(n.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function pt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function fT(t){var e,r,n;return Y(Es,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((r=t.gasConfig.price)==null?void 0:r.toString())??null,payment:((n=t.gasConfig.payment)==null?void 0:n.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if(Us(Kc,s.value)){const i=Y(Kc,s.value);if(i.Object){if(i.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:i.Object.ImmOrOwned.objectId,version:String(i.Object.ImmOrOwned.version),digest:i.Object.ImmOrOwned.digest}}};if(i.Object.Shared)return{Object:{SharedObject:{mutable:i.Object.Shared.mutable??null,initialSharedVersion:i.Object.Shared.initialSharedVersion,objectId:i.Object.Shared.objectId}}};if(i.Object.Receiving)return{Object:{Receiving:{digest:i.Object.Receiving.digest,version:String(i.Object.Receiving.version),objectId:i.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:H(new Uint8Array(i.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?nt.tagToString(s.type.Some):null,elements:s.objects.map(i=>dt(i))}};case"MergeCoins":return{MergeCoins:{destination:dt(s.destination),sources:s.sources.map(i=>dt(i))}};case"MoveCall":{const[i,a,o]=s.target.split("::");return{MoveCall:{package:i,module:a,function:o,typeArguments:s.typeArguments,arguments:s.arguments.map(c=>dt(c))}}}case"Publish":return{Publish:{modules:s.modules.map(i=>H(Uint8Array.from(i))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:dt(s.coin),amounts:s.amounts.map(i=>dt(i))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(i=>dt(i)),address:dt(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(i=>H(Uint8Array.from(i))),dependencies:s.dependencies,package:s.packageId,ticket:dt(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function dt(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function Qn(t){return he(Object.entries(t).map(([e,r])=>O({[e]:r})))}const ze=Qn({GasCoin:C(!0),Input:K(Q(),ee()),Result:K(Q(),ee()),NestedResult:ai([K(Q(),ee()),K(Q(),ee())])}),hT=O({budget:L($e),price:L($e),owner:L(Jr),payment:L(I(Ft))}),yT=O({package:Ee,module:M(),function:M(),typeArguments:I(M()),arguments:I(ze)}),gT=O({name:M(),inputs:Ur(M(),he([ze,I(ze)])),data:Ur(M(),Vt())}),bT=Qn({MoveCall:yT,TransferObjects:O({objects:I(ze),address:ze}),SplitCoins:O({coin:ze,amounts:I(ze)}),MergeCoins:O({destination:ze,sources:I(ze)}),Publish:O({modules:I(pr),dependencies:I(Ee)}),MakeMoveVec:O({type:L(M()),elements:I(ze)}),Upgrade:O({modules:I(pr),dependencies:I(Ee),package:Ee,ticket:ze}),$Intent:gT}),vT=Qn({ImmOrOwnedObject:Ft,SharedObject:O({objectId:Ee,initialSharedVersion:$e,mutable:Hn()}),Receiving:Ft}),mT=Qn({Object:vT,Pure:O({bytes:pr}),UnresolvedPure:O({value:Vt()}),UnresolvedObject:O({objectId:Ee,version:de(L($e)),digest:de(L(M())),initialSharedVersion:de(L($e))})}),_T=Qn({None:C(!0),Epoch:$e}),wT=O({version:C(2),sender:lr(Jr),expiration:lr(_T),gasData:hT,inputs:I(mT),commands:I(bT)}),OT=50,ST=1000n,$T=5e10;async function kT(t,e,r){return await IT(t,e),await PT(t,e),e.onlyTransactionKind||(await ET(t,e),await jT(t,e),await TT(t,e)),await xT(t),await r()}async function ET(t,e){t.gasConfig.price||(t.gasConfig.price=String(await es(e).getReferenceGasPrice()))}async function jT(t,e){if(t.gasConfig.budget)return;const r=await es(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String($T),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=ST*BigInt(t.gasConfig.price||1n),s=BigInt(r.effects.gasUsed.computationCost)+n,i=s+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>s?i:s)}async function TT(t,e){if(!t.gasConfig.payment){const n=(await es(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:N1})).data.filter(s=>!t.inputs.find(a=>{var o;return(o=a.Object)!=null&&o.ImmOrOwnedObject?s.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(s=>Y(Ft,s))}}async function PT(t,e){const r=t.inputs.filter(u=>{var p;return u.UnresolvedObject&&!(u.UnresolvedObject.version||(p=u.UnresolvedObject)!=null&&p.initialSharedVersion)}),n=[...new Set(r.map(u=>Ot(u.UnresolvedObject.objectId)))],s=n.length?NT(n,OT):[],i=(await Promise.all(s.map(u=>es(e).multiGetObjects({ids:u,options:{showOwner:!0}})))).flat(),a=new Map(n.map((u,p)=>[u,i[p]])),o=Array.from(a).filter(([u,p])=>p.error).map(([u,p])=>JSON.stringify(p.error));if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=i.map(u=>{if(u.error||!u.data)throw new Error(`Failed to fetch object: ${u.error}`);const p=u.data.owner,f=p&&typeof p=="object"&&"Shared"in p?p.Shared.initial_shared_version:null;return{objectId:u.data.objectId,digest:u.data.digest,version:u.data.version,initialSharedVersion:f}}),l=new Map(n.map((u,p)=>[u,c[p]]));for(const[u,p]of t.inputs.entries()){if(!p.UnresolvedObject)continue;let f;const h=F(p.UnresolvedObject.objectId),y=l.get(h);p.UnresolvedObject.initialSharedVersion??(y==null?void 0:y.initialSharedVersion)?f=St.SharedObjectRef({objectId:h,initialSharedVersion:p.UnresolvedObject.initialSharedVersion||(y==null?void 0:y.initialSharedVersion),mutable:CT(t,u)}):AT(t,u)&&(f=St.ReceivingRef({objectId:h,digest:p.UnresolvedObject.digest??(y==null?void 0:y.digest),version:p.UnresolvedObject.version??(y==null?void 0:y.version)})),t.inputs[t.inputs.indexOf(p)]=f??St.ObjectRef({objectId:h,digest:p.UnresolvedObject.digest??(y==null?void 0:y.digest),version:p.UnresolvedObject.version??(y==null?void 0:y.version)})}}async function IT(t,e){const{inputs:r,commands:n}=t,s=[],i=new Set;n.forEach(o=>{if(o.MoveCall){if(o.MoveCall._argumentTypes)return;if(o.MoveCall.arguments.map(u=>u.$kind==="Input"?t.inputs[u.Input]:null).some(u=>(u==null?void 0:u.UnresolvedPure)||(u==null?void 0:u.UnresolvedObject))){const u=`${o.MoveCall.package}::${o.MoveCall.module}::${o.MoveCall.function}`;i.add(u),s.push(o.MoveCall)}}switch(o.$kind){case"SplitCoins":o.SplitCoins.amounts.forEach(c=>{Yc(c,T.U64,t)});break;case"TransferObjects":Yc(o.TransferObjects.address,T.Address,t);break}});const a=new Map;if(i.size>0){const o=es(e);await Promise.all([...i].map(async c=>{const[l,u,p]=c.split("::"),f=await o.getNormalizedMoveFunction({package:l,module:u,function:p});a.set(c,f.parameters.map(h=>G1(h)))}))}s.length&&await Promise.all(s.map(async o=>{const c=a.get(`${o.package}::${o.module}::${o.function}`);if(!c)return;const u=c.length>0&&q1(c.at(-1))?c.slice(0,c.length-1):c;o._argumentTypes=u})),n.forEach(o=>{if(!o.MoveCall)return;const c=o.MoveCall,l=`${c.package}::${c.module}::${c.function}`,u=c._argumentTypes;if(u){if(u.length!==o.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${l}`);u.forEach((p,f)=>{var x,q;const h=c.arguments[f];if(h.$kind!=="Input")return;const y=r[h.Input];if(!y.UnresolvedPure&&!y.UnresolvedObject)return;const w=((x=y.UnresolvedPure)==null?void 0:x.value)??((q=y.UnresolvedObject)==null?void 0:q.objectId),j=ia(p.body);if(j){h.type="pure",r[r.indexOf(y)]=St.Pure(j.serialize(w));return}if(typeof w!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(w,null,2)}`);h.type="object";const U=y.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:w}}:y;r[h.Input]=U})}})}function xT(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function Yc(t,e,r){if(t.$kind!=="Input")return;const n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=St.Pure(e.serialize(n.UnresolvedPure.value)))}function CT(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=s.MoveCall._argumentTypes[i].ref!=="&"||r}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(r=!0)}),r}function AT(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=MT(s.MoveCall._argumentTypes[i])||r}}),r}function MT(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function es(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function NT(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,n*e+e))}function BT(t){function e(r){return t(r)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:n})=>s=>s.moveCall({typeArguments:[r],target:`0x1::option::${n===null?"none":"some"}`,arguments:n===null?[]:[s.object(n)]}),e}function DT(t){function e(r,n){if(typeof r=="string")return t(An(r).serialize(n));if(r instanceof Uint8Array||Xo(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=r=>t(T.U8.serialize(r)),e.u16=r=>t(T.U16.serialize(r)),e.u32=r=>t(T.U32.serialize(r)),e.u64=r=>t(T.U64.serialize(r)),e.u128=r=>t(T.U128.serialize(r)),e.u256=r=>t(T.U256.serialize(r)),e.bool=r=>t(T.Bool.serialize(r)),e.string=r=>t(T.String.serialize(r)),e.address=r=>t(T.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(T.vector(An(r)).serialize(n)),e.option=(r,n)=>t(T.option(An(r)).serialize(n)),e}function An(t){switch(t){case"u8":return T.u8();case"u16":return T.u16();case"u32":return T.u32();case"u64":return T.u64();case"u128":return T.u128();case"u256":return T.u256();case"bool":return T.bool();case"string":return T.string();case"id":case"address":return T.Address}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[r,n]=e.slice(1);return r==="vector"?T.vector(An(n)):T.option(An(n))}throw new Error(`Invalid Pure type name: ${t}`)}function UT(t,e){const r=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),ur(n,{dkLen:32})}function Zc(t){return F(t).replace("0x","")}class Ke{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const n=T.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return Ke.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){const r=T.TransactionData.parse(e),n=r==null?void 0:r.V1,s=n.kind.ProgrammableTransaction;if(!n||!s)throw new Error("Unable to deserialize from bytes.");return Ke.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new Ke(Y(Es,e)):new Ke(Y(Es,fT(e)))}static getDigestFromBytes(e){const r=UT("TransactionData",e);return ui(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const s=this.inputs,i=this.commands,a={ProgrammableTransaction:{inputs:s,commands:i}};if(n)return T.TransactionKind.serialize(a,{maxSize:e}).toBytes();const o=(r==null?void 0:r.expiration)??this.expiration,c=(r==null?void 0:r.sender)??this.sender,l={...this.gasData,...r==null?void 0:r.gasConfig,...r==null?void 0:r.gasData};if(!c)throw new Error("Missing transaction sender");if(!l.budget)throw new Error("Missing gas budget");if(!l.payment)throw new Error("Missing gas payment");if(!l.price)throw new Error("Missing gas price");const u={sender:Zc(c),expiration:o||{None:!0},gasData:{payment:l.payment,owner:Zc(this.gasData.owner??c),price:BigInt(l.price),budget:BigInt(l.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:i}}};return T.TransactionData.serialize({V1:u},{maxSize:e}).toBytes()}addInput(e,r){const n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,s)=>(n.$kind==="Input"&&n.Input===e&&r(n,s),n))}mapArguments(e){for(const r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(s=>e(s,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(s=>e(s,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(s=>e(s,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(s=>e(s,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(s=>e(s,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":const n=r.$Intent.inputs;r.$Intent.inputs={};for(const[s,i]of Object.entries(n))r.$Intent.inputs[s]=Array.isArray(i)?i.map(a=>e(a,r)):e(i,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}const n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>e&&(s.Result+=n);break;case"NestedResult":s.NestedResult[0]>e&&(s.NestedResult[0]+=n);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return Ke.getDigestFromBytes(e)}snapshot(){return Y(Es,this)}}function Qc(t){if(typeof t=="string")return F(t);if(t.Object)return t.Object.ImmOrOwnedObject?F(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?F(t.Object.Receiving.objectId):F(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return F(t.UnresolvedObject.objectId)}var bg=t=>{throw TypeError(t)},tc=(t,e,r)=>e.has(t)||bg("Cannot "+r),D=(t,e,r)=>(tc(t,e,"read from private field"),r?r.call(t):e.get(t)),nn=(t,e,r)=>e.has(t)?bg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Xt=(t,e,r,n)=>(tc(t,e,"write to private field"),e.set(t,r),r),gt=(t,e,r)=>(tc(t,e,"access private method"),r),gn,Mn,rr,z,Ve,js,rc,ca,nc;function RT(t){const e={$kind:"Result",Result:t},r=[],n=s=>r[s]??(r[s]={$kind:"NestedResult",NestedResult:[t,s]});return new Proxy(e,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,i){if(i in s)return Reflect.get(s,i);if(i===Symbol.iterator)return function*(){let o=0;for(;;)yield n(o),o++};if(typeof i=="symbol")return;const a=parseInt(i,10);if(!(Number.isNaN(a)||a<0))return n(a)}})}const vg=Symbol.for("@mysten/transaction");function mg(t){return!!t&&typeof t=="object"&&t[vg]===!0}const eu={buildPlugins:new Map,serializationPlugins:new Map},Ai=Symbol.for("@mysten/transaction/registry");function sn(){try{const t=globalThis;return t[Ai]||(t[Ai]=eu),t[Ai]}catch{return eu}}const zT=class ua{constructor(){nn(this,Ve),nn(this,gn),nn(this,Mn),nn(this,rr,new Map),nn(this,z),this.object=BT(r=>{var i,a;if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Us(Z,r))return r;const n=Qc(r),s=D(this,z).inputs.find(o=>n===Qc(o));return(i=s==null?void 0:s.Object)!=null&&i.SharedObject&&typeof r=="object"&&((a=r.Object)!=null&&a.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||r.Object.SharedObject.mutable),s?{$kind:"Input",Input:D(this,z).inputs.indexOf(s),type:"object"}:D(this,z).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:F(r)}}:r)});const e=sn();Xt(this,z,new Ke),Xt(this,Mn,[...e.buildPlugins.values()]),Xt(this,gn,[...e.serializationPlugins.values()])}static fromKind(e){const r=new ua;return Xt(r,z,Ke.fromKindBytes(typeof e=="string"?fe(e):e)),r}static from(e){const r=new ua;return mg(e)?Xt(r,z,new Ke(e.getData())):typeof e!="string"||!e.startsWith("{")?Xt(r,z,Ke.fromBytes(typeof e=="string"?fe(e):e)):Xt(r,z,Ke.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){sn().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){sn().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){sn().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){sn().buildPlugins.delete(e)}addSerializationPlugin(e){D(this,gn).push(e)}addBuildPlugin(e){D(this,Mn).push(e)}addIntentResolver(e,r){if(D(this,rr).has(e)&&D(this,rr).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);D(this,rr).set(e,r)}setSender(e){D(this,z).sender=e}setSenderIfNotSet(e){D(this,z).sender||(D(this,z).sender=e)}setExpiration(e){D(this,z).expiration=e?Y(yg,e):null}setGasPrice(e){D(this,z).gasConfig.price=String(e)}setGasBudget(e){D(this,z).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){D(this,z).gasData.budget==null&&(D(this,z).gasConfig.budget=String(e))}setGasOwner(e){D(this,z).gasConfig.owner=e}setGasPayment(e){D(this,z).gasConfig.payment=e.map(r=>Y(Ft,r))}get blockData(){return Xc(D(this,z).snapshot())}getData(){return D(this,z).snapshot()}get[vg](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:DT(e=>Xo(e)?D(this,z).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):D(this,z).addInput("pure",Us(Jc,e)?Y(Jc,e):e instanceof Uint8Array?St.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(St.ObjectRef(...e))}receivingRef(...e){return this.object(St.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(St.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const r=D(this,z).commands.push(e);return RT(r-1)}splitCoins(e,r){return this.add(Ht.SplitCoins(typeof e=="string"?this.object(e):gt(this,Ve,rc).call(this,e),r.map(n=>typeof n=="number"||typeof n=="bigint"||typeof n=="string"?this.pure.u64(n):gt(this,Ve,js).call(this,n))))}mergeCoins(e,r){return this.add(Ht.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(Ht.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:s}){return this.add(Ht.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(s)}))}moveCall({arguments:e,...r}){return this.add(Ht.MoveCall({...r,arguments:e==null?void 0:e.map(n=>gt(this,Ve,js).call(this,n))}))}transferObjects(e,r){return this.add(Ht.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):gt(this,Ve,js).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(Ht.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify(Xc(D(this,z).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(Y(wT,D(this,z).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){const{signer:r,...n}=e,s=await this.build(n);return r.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await gt(this,Ve,ca).call(this,e),D(this,z).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await gt(this,Ve,ca).call(this,e),D(this,z).getDigest()}async prepareForSerialization(e){var s;const r=new Set;for(const i of D(this,z).commands)i.$Intent&&r.add(i.$Intent.name);const n=[...D(this,gn)];for(const i of r)if(!((s=e.supportedIntents)!=null&&s.includes(i))){if(!D(this,rr).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(D(this,rr).get(i))}await gt(this,Ve,nc).call(this,n,e)}};gn=new WeakMap;Mn=new WeakMap;rr=new WeakMap;z=new WeakMap;Ve=new WeakSet;js=function(t){return Xo(t)?this.pure(t):gt(this,Ve,rc).call(this,t)};rc=function(t){return typeof t=="function"?Y(Z,t(this)):Y(Z,t)};ca=async function(t){if(!t.onlyTransactionKind&&!D(this,z).sender)throw new Error("Missing transaction sender");await gt(this,Ve,nc).call(this,[...D(this,Mn),kT],t)};nc=async function(t,e){const r=n=>{if(n>=t.length)return()=>{};const s=t[n];return async()=>{const i=r(n+1);let a=!1,o=!1;if(await s(D(this,z),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);a=!0,await i(),o=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!o)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()};let an=zT;const VT=Symbol.for("@mysten/SuiClient");class LT{get[VT](){return!0}constructor(e){this.transport=e.transport??new Hj({url:e.url})}async getRpcApiVersion(){return(await this.transport.request({method:"rpc.discover",params:[]})).info.version}async getCoins(e){if(!e.owner||!_t(F(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit]})}async getAllCoins(e){if(!e.owner||!_t(F(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit]})}async getBalance(e){if(!e.owner||!_t(F(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType]})}async getAllBalances(e){if(!e.owner||!_t(F(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner]})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType]})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType]})}async call(e,r){return await this.transport.request({method:e,params:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function]})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package]})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module]})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function]})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct]})}async getOwnedObjects(e){if(!e.owner||!_t(F(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit]})}async getObject(e){if(!e.id||!us(Ot(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options]})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options]})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!us(Ot(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options]})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"]})}async getTransactionBlock(e){if(!Gc(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options]})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Gc(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options]})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:s}){const i=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:H(e),Array.isArray(r)?r:[r],n]});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:i.digest})}catch{}return i}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(r.toSuiAddress()),s=await e.build({client:this}));const{signature:i,bytes:a}=await r.signTransaction(s);return this.executeTransactionBlock({transactionBlock:a,signature:i,...n})}async getTotalTransactionBlocks(){const e=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[]});return BigInt(e)}async getReferenceGasPrice(){const e=await this.transport.request({method:"suix_getReferenceGasPrice",params:[]});return BigInt(e)}async getStakes(e){if(!e.owner||!_t(F(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner]})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!us(Ot(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds]})}async getLatestSuiSystemState(){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[]})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"]})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage})}async devInspectTransactionBlock(e){var n;let r;if(mg(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=H(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=H(e.transactionBlock);else throw new Error("Unknown transaction block format.");return await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,(n=e.gasPrice)==null?void 0:n.toString(),e.epoch]})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:H(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!us(Ot(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit]})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name]})}async getLatestCheckpointSequenceNumber(){const e=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[]});return String(e)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id]})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder]})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch]})}async getNetworkMetrics(){return await this.transport.request({method:"suix_getNetworkMetrics",params:[]})}async getAddressMetrics(){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[]})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder]})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder]})}async getMoveCallMetrics(){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[]})}async getCurrentEpoch(){return await this.transport.request({method:"suix_getCurrentEpoch",params:[]})}async getValidatorsApy(){return await this.transport.request({method:"suix_getValidatorsApy",params:[]})}async getChainIdentifier(){const e=await this.getCheckpoint({id:"0"}),r=Ln(e.digest);return zr(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name]})}async resolveNameServiceNames({format:e="dot",...r}){const{nextCursor:n,hasNextPage:s,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit]});return{hasNextPage:s,nextCursor:n,data:i.map(a=>A1(a,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version]})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...s}){const i=AbortSignal.timeout(r),a=new Promise((o,c)=>{i.addEventListener("abort",()=>c(i.reason))});for(a.catch(()=>{});!i.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}}function _g(t,e){return T.IntentMessage(T.fixedArray(e.length,T.u8())).serialize({intent:{scope:{[t]:!0},version:{V0:!0},appId:{Sui:!0}},value:e}).toBytes()}function Vr(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}class ts{equals(e){return Vr(this.toRawBytes(),e.toRawBytes())}toBase64(){return H(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return H(e)}verifyWithIntent(e,r,n){const s=_g(n,e),i=ur(s,{dkLen:32});return this.verify(i,r)}verifyPersonalMessage(e,r){return this.verifyWithIntent(T.vector(T.u8()).serialize(e).toBytes(),r,"PersonalMessage")}verifyTransaction(e,r){return this.verifyWithIntent(e,r,"TransactionData")}toSuiBytes(){const e=this.toRawBytes(),r=new Uint8Array(e.length+1);return r.set([this.flag()]),r.set(e,1),r}toSuiAddress(){return F(ba(ur(this.toSuiBytes(),{dkLen:32})).slice(0,Zn*2))}}const Et={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5},FT={ED25519:32,Secp256k1:33,Secp256r1:33},wg={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin"};function qT(t,e){if(!!!t)throw new Error(e)}const Og={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},GT=new Set(Object.keys(Og));function tu(t){const e=t==null?void 0:t.kind;return typeof e=="string"&&GT.has(e)}var ru;(function(t){t.QUERY="query",t.MUTATION="mutation",t.SUBSCRIPTION="subscription"})(ru||(ru={}));var la;(function(t){t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.VARIABLE="Variable",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.DIRECTIVE_DEFINITION="DirectiveDefinition",t.SCHEMA_EXTENSION="SchemaExtension",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(la||(la={}));function nu(t){return t===9||t===32}function WT(t,e){const r=t.replace(/"""/g,'\\"""'),n=r.split(/\r\n|[\n\r]/g),s=n.length===1,i=n.length>1&&n.slice(1).every(h=>h.length===0||nu(h.charCodeAt(0))),a=r.endsWith('\\"""'),o=t.endsWith('"')&&!a,c=t.endsWith("\\"),l=o||c,u=!s||t.length>70||l||i||a;let p="";const f=s&&nu(t.charCodeAt(0));return(u&&!f||i)&&(p+=`
`),p+=r,(u||l)&&(p+=`
`),'"""'+p+'"""'}const JT=10,Sg=2;function KT(t){return li(t,[])}function li(t,e){switch(typeof t){case"string":return JSON.stringify(t);case"function":return t.name?`[function ${t.name}]`:"[function]";case"object":return HT(t,e);default:return String(t)}}function HT(t,e){if(t===null)return"null";if(e.includes(t))return"[Circular]";const r=[...e,t];if(XT(t)){const n=t.toJSON();if(n!==t)return typeof n=="string"?n:li(n,r)}else if(Array.isArray(t))return ZT(t,r);return YT(t,r)}function XT(t){return typeof t.toJSON=="function"}function YT(t,e){const r=Object.entries(t);return r.length===0?"{}":e.length>Sg?"["+QT(t)+"]":"{ "+r.map(([s,i])=>s+": "+li(i,e)).join(", ")+" }"}function ZT(t,e){if(t.length===0)return"[]";if(e.length>Sg)return"[Array]";const r=Math.min(JT,t.length),n=t.length-r,s=[];for(let i=0;i<r;++i)s.push(li(t[i],e));return n===1?s.push("... 1 more item"):n>1&&s.push(`... ${n} more items`),"["+s.join(", ")+"]"}function QT(t){const e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){const r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function eP(t){return`"${t.replace(tP,rP)}"`}const tP=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function rP(t){return nP[t.charCodeAt(0)]}const nP=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],sP=Object.freeze({});function iP(t,e,r=Og){const n=new Map;for(const U of Object.values(la))n.set(U,aP(e,U));let s,i=Array.isArray(t),a=[t],o=-1,c=[],l=t,u,p;const f=[],h=[];do{o++;const U=o===a.length,x=U&&c.length!==0;if(U){if(u=h.length===0?void 0:f[f.length-1],l=p,p=h.pop(),x)if(i){l=l.slice();let W=0;for(const[di,oc]of c){const cc=di-W;oc===null?(l.splice(cc,1),W++):l[cc]=oc}}else{l=Object.defineProperties({},Object.getOwnPropertyDescriptors(l));for(const[W,di]of c)l[W]=di}o=s.index,a=s.keys,c=s.edits,i=s.inArray,s=s.prev}else if(p){if(u=i?o:a[o],l=p[u],l==null)continue;f.push(u)}let q;if(!Array.isArray(l)){var y,w;tu(l)||qT(!1,`Invalid AST Node: ${KT(l)}.`);const W=U?(y=n.get(l.kind))===null||y===void 0?void 0:y.leave:(w=n.get(l.kind))===null||w===void 0?void 0:w.enter;if(q=W==null?void 0:W.call(e,l,u,p,f,h),q===sP)break;if(q===!1){if(!U){f.pop();continue}}else if(q!==void 0&&(c.push([u,q]),!U))if(tu(q))l=q;else{f.pop();continue}}if(q===void 0&&x&&c.push([u,l]),U)f.pop();else{var j;s={inArray:i,index:o,keys:a,edits:c,prev:s},i=Array.isArray(l),a=i?l:(j=r[l.kind])!==null&&j!==void 0?j:[],o=-1,c=[],p&&h.push(p),p=l}}while(s!==void 0);return c.length!==0?c[c.length-1][1]:t}function aP(t,e){const r=t[e];return typeof r=="object"?r:typeof r=="function"?{enter:r,leave:void 0}:{enter:t.enter,leave:t.leave}}function oP(t){return iP(t,uP)}const cP=80,uP={Name:{leave:t=>t.value},Variable:{leave:t=>"$"+t.name},Document:{leave:t=>k(t.definitions,`

`)},OperationDefinition:{leave(t){const e=N("(",k(t.variableDefinitions,", "),")"),r=k([t.operation,k([t.name,e]),k(t.directives," ")]," ");return(r==="query"?"":r+" ")+t.selectionSet}},VariableDefinition:{leave:({variable:t,type:e,defaultValue:r,directives:n})=>t+": "+e+N(" = ",r)+N(" ",k(n," "))},SelectionSet:{leave:({selections:t})=>Ne(t)},Field:{leave({alias:t,name:e,arguments:r,directives:n,selectionSet:s}){const i=N("",t,": ")+e;let a=i+N("(",k(r,", "),")");return a.length>cP&&(a=i+N(`(
`,Ts(k(r,`
`)),`
)`)),k([a,k(n," "),s]," ")}},Argument:{leave:({name:t,value:e})=>t+": "+e},FragmentSpread:{leave:({name:t,directives:e})=>"..."+t+N(" ",k(e," "))},InlineFragment:{leave:({typeCondition:t,directives:e,selectionSet:r})=>k(["...",N("on ",t),k(e," "),r]," ")},FragmentDefinition:{leave:({name:t,typeCondition:e,variableDefinitions:r,directives:n,selectionSet:s})=>`fragment ${t}${N("(",k(r,", "),")")} on ${e} ${N("",k(n," ")," ")}`+s},IntValue:{leave:({value:t})=>t},FloatValue:{leave:({value:t})=>t},StringValue:{leave:({value:t,block:e})=>e?WT(t):eP(t)},BooleanValue:{leave:({value:t})=>t?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:t})=>t},ListValue:{leave:({values:t})=>"["+k(t,", ")+"]"},ObjectValue:{leave:({fields:t})=>"{"+k(t,", ")+"}"},ObjectField:{leave:({name:t,value:e})=>t+": "+e},Directive:{leave:({name:t,arguments:e})=>"@"+t+N("(",k(e,", "),")")},NamedType:{leave:({name:t})=>t},ListType:{leave:({type:t})=>"["+t+"]"},NonNullType:{leave:({type:t})=>t+"!"},SchemaDefinition:{leave:({description:t,directives:e,operationTypes:r})=>N("",t,`
`)+k(["schema",k(e," "),Ne(r)]," ")},OperationTypeDefinition:{leave:({operation:t,type:e})=>t+": "+e},ScalarTypeDefinition:{leave:({description:t,name:e,directives:r})=>N("",t,`
`)+k(["scalar",e,k(r," ")]," ")},ObjectTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:s})=>N("",t,`
`)+k(["type",e,N("implements ",k(r," & ")),k(n," "),Ne(s)]," ")},FieldDefinition:{leave:({description:t,name:e,arguments:r,type:n,directives:s})=>N("",t,`
`)+e+(su(r)?N(`(
`,Ts(k(r,`
`)),`
)`):N("(",k(r,", "),")"))+": "+n+N(" ",k(s," "))},InputValueDefinition:{leave:({description:t,name:e,type:r,defaultValue:n,directives:s})=>N("",t,`
`)+k([e+": "+r,N("= ",n),k(s," ")]," ")},InterfaceTypeDefinition:{leave:({description:t,name:e,interfaces:r,directives:n,fields:s})=>N("",t,`
`)+k(["interface",e,N("implements ",k(r," & ")),k(n," "),Ne(s)]," ")},UnionTypeDefinition:{leave:({description:t,name:e,directives:r,types:n})=>N("",t,`
`)+k(["union",e,k(r," "),N("= ",k(n," | "))]," ")},EnumTypeDefinition:{leave:({description:t,name:e,directives:r,values:n})=>N("",t,`
`)+k(["enum",e,k(r," "),Ne(n)]," ")},EnumValueDefinition:{leave:({description:t,name:e,directives:r})=>N("",t,`
`)+k([e,k(r," ")]," ")},InputObjectTypeDefinition:{leave:({description:t,name:e,directives:r,fields:n})=>N("",t,`
`)+k(["input",e,k(r," "),Ne(n)]," ")},DirectiveDefinition:{leave:({description:t,name:e,arguments:r,repeatable:n,locations:s})=>N("",t,`
`)+"directive @"+e+(su(r)?N(`(
`,Ts(k(r,`
`)),`
)`):N("(",k(r,", "),")"))+(n?" repeatable":"")+" on "+k(s," | ")},SchemaExtension:{leave:({directives:t,operationTypes:e})=>k(["extend schema",k(t," "),Ne(e)]," ")},ScalarTypeExtension:{leave:({name:t,directives:e})=>k(["extend scalar",t,k(e," ")]," ")},ObjectTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>k(["extend type",t,N("implements ",k(e," & ")),k(r," "),Ne(n)]," ")},InterfaceTypeExtension:{leave:({name:t,interfaces:e,directives:r,fields:n})=>k(["extend interface",t,N("implements ",k(e," & ")),k(r," "),Ne(n)]," ")},UnionTypeExtension:{leave:({name:t,directives:e,types:r})=>k(["extend union",t,k(e," "),N("= ",k(r," | "))]," ")},EnumTypeExtension:{leave:({name:t,directives:e,values:r})=>k(["extend enum",t,k(e," "),Ne(r)]," ")},InputObjectTypeExtension:{leave:({name:t,directives:e,fields:r})=>k(["extend input",t,k(e," "),Ne(r)]," ")}};function k(t,e=""){var r;return(r=t==null?void 0:t.filter(n=>n).join(e))!==null&&r!==void 0?r:""}function Ne(t){return N(`{
`,Ts(k(t,`
`)),`
}`)}function N(t,e,r=""){return e!=null&&e!==""?t+e+r:""}function Ts(t){return N("  ",t.replace(/\n/g,`
  `))}function su(t){var e;return(e=t==null?void 0:t.some(r=>r.includes(`
`)))!==null&&e!==void 0?e:!1}var $g=t=>{throw TypeError(t)},kg=(t,e,r)=>e.has(t)||$g("Cannot "+r),ls=(t,e,r)=>(kg(t,e,"read from private field"),r?r.call(t):e.get(t)),ps=(t,e,r)=>e.has(t)?$g("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ds=(t,e,r,n)=>(kg(t,e,"write to private field"),e.set(t,r),r),Ps,Is,xs,Cs;class lP extends Error{}class pP{constructor({url:e,fetch:r=fetch,headers:n={},queries:s={}}){ps(this,Ps),ps(this,Is),ps(this,xs),ps(this,Cs),ds(this,Ps,e),ds(this,Is,s),ds(this,xs,n),ds(this,Cs,(...i)=>r(...i))}async query(e){const r=await ls(this,Cs).call(this,ls(this,Ps),{method:"POST",headers:{"Content-Type":"application/json",...ls(this,xs)},body:JSON.stringify({query:typeof e.query=="string"?String(e.query):oP(e.query),variables:e.variables,extensions:e.extensions,operationName:e.operationName})});if(!r.ok)throw new lP(`GraphQL request failed: ${r.statusText} (${r.status})`);return await r.json()}async execute(e,r){return this.query({...r,query:ls(this,Is)[e]})}}Ps=new WeakMap;Is=new WeakMap;xs=new WeakMap;Cs=new WeakMap;var fs={NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType"};class dP extends Error{constructor(e,r,n,s,i,a,o){super(e),this.name="GraphQLError",this.message=e,i&&(this.path=i),r&&(this.nodes=Array.isArray(r)?r:[r]),n&&(this.source=n),s&&(this.positions=s),a&&(this.originalError=a);var c=o;if(!c&&a){var l=a.extensions;l&&typeof l=="object"&&(c=l)}this.extensions=c||{}}toJSON(){return{...this,message:this.message}}toString(){return this.message}get[Symbol.toStringTag](){return"GraphQLError"}}var V,P;function oe(t){return new dP(`Syntax Error: Unexpected token at ${P} in ${t}`)}function je(t){if(t.lastIndex=P,t.test(V))return V.slice(P,P=t.lastIndex)}var hs=/ +(?=[^\s])/y;function fP(t){for(var e=t.split(`
`),r="",n=0,s=0,i=e.length-1,a=0;a<e.length;a++)hs.lastIndex=0,hs.test(e[a])&&(a&&(!n||hs.lastIndex<n)&&(n=hs.lastIndex),s=s||a,i=a);for(var o=s;o<=i;o++)o!==s&&(r+=`
`),r+=e[o].slice(n).replace(/\\"""/g,'"""');return r}function A(){for(var t=0|V.charCodeAt(P++);t===9||t===10||t===13||t===32||t===35||t===44||t===65279;t=0|V.charCodeAt(P++))if(t===35)for(;(t=V.charCodeAt(P++))!==10&&t!==13;);P--}var we=/[_A-Za-z]\w*/y,Mi=new RegExp("(?:(null|true|false)|\\$("+we.source+')|(-?\\d+)((?:\\.\\d+)?[eE][+-]?\\d+|\\.\\d+)?|("""(?:"""|(?:[\\s\\S]*?[^\\\\])"""))|("(?:"|[^\\r\\n]*?[^\\\\]"))|('+we.source+"))","y"),Dt=function(t){return t[t.Const=1]="Const",t[t.Var=2]="Var",t[t.Int=3]="Int",t[t.Float=4]="Float",t[t.BlockString=5]="BlockString",t[t.String=6]="String",t[t.Enum=7]="Enum",t}(Dt||{}),hP=/\\/;function Zs(t){var e,r;if(Mi.lastIndex=P,V.charCodeAt(P)===91){P++,A();for(var n=[];V.charCodeAt(P)!==93;)n.push(Zs(t));return P++,A(),{kind:"ListValue",values:n}}else if(V.charCodeAt(P)===123){P++,A();for(var s=[];V.charCodeAt(P)!==125;){if((e=je(we))==null||(A(),V.charCodeAt(P++)!==58))throw oe("ObjectField");A(),s.push({kind:"ObjectField",name:{kind:"Name",value:e},value:Zs(t)})}return P++,A(),{kind:"ObjectValue",fields:s}}else if((r=Mi.exec(V))!=null){if(P=Mi.lastIndex,A(),(e=r[Dt.Const])!=null)return e==="null"?{kind:"NullValue"}:{kind:"BooleanValue",value:e==="true"};if((e=r[Dt.Var])!=null){if(t)throw oe("Variable");return{kind:"Variable",name:{kind:"Name",value:e}}}else if((e=r[Dt.Int])!=null){var i;return(i=r[Dt.Float])!=null?{kind:"FloatValue",value:e+i}:{kind:"IntValue",value:e}}else{if((e=r[Dt.BlockString])!=null)return{kind:"StringValue",value:fP(e.slice(3,-3)),block:!0};if((e=r[Dt.String])!=null)return{kind:"StringValue",value:hP.test(e)?JSON.parse(e):e.slice(1,-1),block:!1};if((e=r[Dt.Enum])!=null)return{kind:"EnumValue",value:e}}}throw oe("Value")}function Eg(t){if(V.charCodeAt(P)===40){var e=[];P++,A();var r;do{if((r=je(we))==null||(A(),V.charCodeAt(P++)!==58))throw oe("Argument");A(),e.push({kind:"Argument",name:{kind:"Name",value:r},value:Zs(t)})}while(V.charCodeAt(P)!==41);return P++,A(),e}}function Nr(t){if(V.charCodeAt(P)===64){var e=[],r;do{if(P++,(r=je(we))==null)throw oe("Directive");A(),e.push({kind:"Directive",name:{kind:"Name",value:r},arguments:Eg(t)})}while(V.charCodeAt(P)===64);return e}}function yP(){for(var t,e=0;V.charCodeAt(P)===91;)e++,P++,A();if((t=je(we))==null)throw oe("NamedType");A();var r={kind:"NamedType",name:{kind:"Name",value:t}};do if(V.charCodeAt(P)===33&&(P++,A(),r={kind:"NonNullType",type:r}),e){if(V.charCodeAt(P++)!==93)throw oe("NamedType");A(),r={kind:"ListType",type:r}}while(e--);return r}var Ni=new RegExp("(?:(\\.{3})|("+we.source+"))","y"),pa=function(t){return t[t.Spread=1]="Spread",t[t.Name=2]="Name",t}(pa||{});function Qs(){var t=[],e,r;do if(Ni.lastIndex=P,(r=Ni.exec(V))!=null){if(P=Ni.lastIndex,r[pa.Spread]!=null){A();var n=je(we);if(n!=null&&n!=="on")A(),t.push({kind:"FragmentSpread",name:{kind:"Name",value:n},directives:Nr(!1)});else{if(A(),n==="on"){if((n=je(we))==null)throw oe("NamedType");A()}var s=Nr(!1);if(V.charCodeAt(P++)!==123)throw oe("InlineFragment");A(),t.push({kind:"InlineFragment",typeCondition:n?{kind:"NamedType",name:{kind:"Name",value:n}}:void 0,directives:s,selectionSet:Qs()})}}else if((e=r[pa.Name])!=null){var i=void 0;if(A(),V.charCodeAt(P)===58){if(P++,A(),i=e,(e=je(we))==null)throw oe("Field");A()}var a=Eg(!1);A();var o=Nr(!1),c=void 0;V.charCodeAt(P)===123&&(P++,A(),c=Qs()),t.push({kind:"Field",alias:i?{kind:"Name",value:i}:void 0,name:{kind:"Name",value:e},arguments:a,directives:o,selectionSet:c})}}else throw oe("SelectionSet");while(V.charCodeAt(P)!==125);return P++,A(),{kind:"SelectionSet",selections:t}}function gP(){var t,e;if((t=je(we))==null||(A(),je(we)!=="on")||(A(),(e=je(we))==null))throw oe("FragmentDefinition");A();var r=Nr(!1);if(V.charCodeAt(P++)!==123)throw oe("FragmentDefinition");return A(),{kind:"FragmentDefinition",name:{kind:"Name",value:t},typeCondition:{kind:"NamedType",name:{kind:"Name",value:e}},directives:r,selectionSet:Qs()}}var bP=/(?:query|mutation|subscription|fragment)/y;function vP(t){var e,r,n;if(t&&(A(),e=je(we),r=function(){if(A(),V.charCodeAt(P)===40){var i=[];P++,A();var a;do{if(V.charCodeAt(P++)!==36||(a=je(we))==null)throw oe("Variable");if(A(),V.charCodeAt(P++)!==58)throw oe("VariableDefinition");A();var o=yP(),c=void 0;V.charCodeAt(P)===61&&(P++,A(),c=Zs(!0)),A(),i.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:a}},type:o,defaultValue:c,directives:Nr(!0)})}while(V.charCodeAt(P)!==41);return P++,A(),i}}(),n=Nr(!1)),V.charCodeAt(P)===123)return P++,A(),{kind:"OperationDefinition",operation:t||"query",name:e?{kind:"Name",value:e}:void 0,variableDefinitions:r,directives:n,selectionSet:Qs()}}function mP(t,e){return P=0,function(n,s){var i,a;A();var o=[];do if((i=je(bP))==="fragment")A(),o.push(gP());else if((a=vP(i))!=null)o.push(a);else throw oe("Document");while(P<n.length);{var c;return{kind:"Document",definitions:o,set loc(l){c=l},get loc(){return c||(c={start:0,end:n.length,startToken:void 0,endToken:void 0,source:{body:n,name:"graphql.web",locationOffset:{line:1,column:1}}}),c}}}}(V=typeof t.body=="string"?t.body:t)}var iu=0,Bi=new Set;function jg(){function t(e,r){var n=mP(e).definitions,s=new Set;for(var i of r||[])for(var a of i.definitions)a.kind===fs.FRAGMENT_DEFINITION&&!s.has(a)&&(n.push(a),s.add(a));var o;(o=n[0].kind===fs.FRAGMENT_DEFINITION)&&n[0].directives&&(n[0].directives=n[0].directives.filter(l=>l.name.value!=="_unmask"));var c;return{kind:fs.DOCUMENT,definitions:n,get loc(){if(!c&&o){var l=e+function(p){try{iu++;var f="";for(var h of p)if(!Bi.has(h)){Bi.add(h);var{loc:y}=h;y&&(f+=y.source.body)}return f}finally{--iu==0&&Bi.clear()}}(r||[]);return{start:0,end:l.length,source:{body:l,name:"GraphQLTada",locationOffset:{line:1,column:1}}}}return c},set loc(l){c=l}}}return t.scalar=function(r,n){return n},t.persisted=function(r,n){return{kind:fs.DOCUMENT,definitions:n?n.definitions:[],documentId:r}},t}jg();const _P=jg();function wP(t){if(t.length!==1)throw new Error("Invalid base64Url character: "+t);const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t);if(r===-1)throw new Error("Invalid base64Url character: "+t);const n=r.toString(2).padStart(6,"0");return Array.from(n).map(Number)}function OP(t){let e=[];for(let r=0;r<t.length;r++){const n=t.charAt(r),s=wP(n);e=e.concat(s)}return e}function SP(t,e){if(t.length<2)throw new Error(`Input (s = ${t}) is not tightly packed because s.length < 2`);let r=OP(t);const n=e%4;if(n!==0)if(n===1)r=r.slice(2);else if(n===2)r=r.slice(4);else throw new Error(`Input (s = ${t}) is not tightly packed because i%4 = 3 (i = ${e}))`);const s=(e+t.length-1)%4;if(s!==3)if(s===2)r=r.slice(0,r.length-2);else if(s===1)r=r.slice(0,r.length-4);else throw new Error(`Input (s = ${t}) is not tightly packed because (i + s.length - 1)%4 = 0 (i = ${e}))`);if(r.length%8!==0)throw new Error("We should never reach here...");const i=new Uint8Array(Math.floor(r.length/8));let a=0;for(let o=0;o<r.length;o+=8){const c=r.slice(o,o+8),l=parseInt(c.join(""),2);i[a++]=l}return new TextDecoder().decode(i)}function $P(t){if(!(t.slice(-1)==="}"||t.slice(-1)===","))throw new Error("Invalid claim");const e=JSON.parse("{"+t.slice(0,-1)+"}");if(Object.keys(e).length!==1)throw new Error("Invalid claim");const r=Object.keys(e)[0];return[r,e[r]]}function kP(t,e){const r=SP(t.value,t.indexMod4),[n,s]=$P(r);if(n!==e)throw new Error(`Invalid field name: found ${n} expected ${e}`);return s}const EP=d.struct("ZkLoginSignature",{inputs:d.struct("ZkLoginSignatureInputs",{proofPoints:d.struct("ZkLoginSignatureInputsProofPoints",{a:d.vector(d.string()),b:d.vector(d.vector(d.string())),c:d.vector(d.string())}),issBase64Details:d.struct("ZkLoginSignatureInputsClaim",{value:d.string(),indexMod4:d.u8()}),headerBase64:d.string(),addressSeed:d.string()}),maxEpoch:d.u64(),userSignature:d.vector(d.u8())});function jP(t){return EP.parse(typeof t=="string"?fe(t):t)}function TP(t){for(let e=0;e<t.length;e++)if(t[e]!==0)return e;return-1}function sc(t,e){const r=t.toString(16);return Xg(r.padStart(e*2,"0").slice(-e*2))}function PP(t,e){const r=sc(t,e),n=TP(r);return n===-1?new Uint8Array([0]):r.slice(n)}var Tg=t=>{throw TypeError(t)},Pg=(t,e,r)=>e.has(t)||Tg("Cannot "+r),ft=(t,e,r)=>(Pg(t,e,"read from private field"),r?r.call(t):e.get(t)),Di=(t,e,r)=>e.has(t)?Tg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),vr=(t,e,r,n)=>(Pg(t,e,"write to private field"),e.set(t,r),r),De,bn,vn;const IP=class da extends ts{constructor(e,{client:r}={}){super(),Di(this,De),Di(this,bn),Di(this,vn),vr(this,bn,r),typeof e=="string"?vr(this,De,fe(e)):e instanceof Uint8Array?vr(this,De,e):vr(this,De,Uint8Array.from(e)),vr(this,vn,ft(this,De).length!==ft(this,De)[0]+1+32),ft(this,vn)&&vr(this,De,au(ft(this,De)))}equals(e){return super.equals(e)}toSuiAddress(){if(ft(this,vn)){const e=au(ft(this,De),!0),r=new Uint8Array(e.length+1);return r[0]=this.flag(),r.set(e,1),F(ba(ur(r,{dkLen:32})).slice(0,Zn*2))}return super.toSuiAddress()}toRawBytes(){return ft(this,De)}flag(){return Et.ZkLogin}async verify(e,r){throw Error("does not support")}verifyPersonalMessage(e,r){const n=fa(r),s=new da(n.publicKey).toSuiAddress();return ou({address:s,bytes:H(e),signature:n.serializedSignature,intentScope:"PERSONAL_MESSAGE",client:ft(this,bn)})}verifyTransaction(e,r){const n=fa(r),s=new da(n.publicKey).toSuiAddress();return ou({address:s,bytes:H(e),signature:n.serializedSignature,intentScope:"TRANSACTION_DATA",client:ft(this,bn)})}};De=new WeakMap;bn=new WeakMap;vn=new WeakMap;let Ig=IP;function xg(t,e,r){const n=sc(t,32),s=new TextEncoder().encode(e),i=new Uint8Array(1+s.length+n.length);return i.set([s.length],0),i.set(s,1),i.set(n,1+s.length),new Ig(i,r)}const xP=_P(`
	query Zklogin(
		$bytes: Base64!
		$signature: Base64!
		$intentScope: ZkLoginIntentScope!
		$author: SuiAddress!
	) {
		verifyZkloginSignature(
			bytes: $bytes
			signature: $signature
			intentScope: $intentScope
			author: $author
		) {
			success
			errors
		}
	}
`);function au(t,e=!1){const r=t[0]+1,n=BigInt(`0x${zr(t.slice(r))}`),s=e?PP(n,32):sc(n,32),i=new Uint8Array(r+s.length);return i.set(t.slice(0,r),0),i.set(s,r),i}async function ou({address:t,bytes:e,signature:r,intentScope:n,client:s=new pP({url:"https://sui-mainnet.mystenlabs.com/graphql"})}){var a,o;const i=await s.query({query:xP,variables:{bytes:e,signature:r,intentScope:n,author:t}});return((a=i.data)==null?void 0:a.verifyZkloginSignature.success)===!0&&((o=i.data)==null?void 0:o.verifyZkloginSignature.errors.length)===0}function fa(t){const e=typeof t=="string"?fe(t):t;if(e[0]!==Et.ZkLogin)throw new Error("Invalid signature scheme");const r=e.slice(1),{inputs:n,maxEpoch:s,userSignature:i}=jP(r),{issBase64Details:a,addressSeed:o}=n,c=kP(a,"iss"),l=xg(BigInt(o),c);return{serializedSignature:H(e),signatureScheme:"ZkLogin",zkLogin:{inputs:n,maxEpoch:s,userSignature:i,iss:c,addressSeed:BigInt(o)},signature:e,publicKey:l.toRawBytes()}}function CP({signature:t,signatureScheme:e,publicKey:r}){if(!r)throw new Error("`publicKey` is required");const n=r.toRawBytes(),s=new Uint8Array(1+t.length+n.length);return s.set([Et[e]]),s.set(t,1),s.set(n,1+t.length),H(s)}function Lr(t){const e=fe(t),r=wg[e[0]];switch(r){case"MultiSig":const n=T.MultiSig.parse(e.slice(1));return{serializedSignature:t,signatureScheme:r,multisig:n,bytes:e};case"ZkLogin":return fa(t);case"ED25519":case"Secp256k1":case"Secp256r1":const s=FT[r],i=e.slice(1,e.length-s),a=e.slice(1+i.length);return{serializedSignature:t,signatureScheme:r,signature:i,publicKey:a,bytes:e};default:throw new Error("Unsupported signature scheme")}}var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.bech32m=Fn.bech32=void 0;const ei="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Cg={};for(let t=0;t<ei.length;t++){const e=ei.charAt(t);Cg[e]=t}function Br(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function cu(t){let e=1;for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Br(e)^n>>5}e=Br(e);for(let r=0;r<t.length;++r){const n=t.charCodeAt(r);e=Br(e)^n&31}return e}function ic(t,e,r,n){let s=0,i=0;const a=(1<<r)-1,o=[];for(let c=0;c<t.length;++c)for(s=s<<e|t[c],i+=e;i>=r;)i-=r,o.push(s>>i&a);if(n)i>0&&o.push(s<<r-i&a);else{if(i>=e)return"Excess padding";if(s<<r-i&a)return"Non-zero padding"}return o}function AP(t){return ic(t,8,5,!0)}function MP(t){const e=ic(t,5,8,!1);if(Array.isArray(e))return e}function NP(t){const e=ic(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function Ag(t){let e;t==="bech32"?e=1:e=734539939;function r(a,o,c){if(c=c||90,a.length+7+o.length>c)throw new TypeError("Exceeds length limit");a=a.toLowerCase();let l=cu(a);if(typeof l=="string")throw new Error(l);let u=a+"1";for(let p=0;p<o.length;++p){const f=o[p];if(f>>5)throw new Error("Non 5-bit word");l=Br(l)^f,u+=ei.charAt(f)}for(let p=0;p<6;++p)l=Br(l);l^=e;for(let p=0;p<6;++p){const f=l>>(5-p)*5&31;u+=ei.charAt(f)}return u}function n(a,o){if(o=o||90,a.length<8)return a+" too short";if(a.length>o)return"Exceeds length limit";const c=a.toLowerCase(),l=a.toUpperCase();if(a!==c&&a!==l)return"Mixed-case string "+a;a=c;const u=a.lastIndexOf("1");if(u===-1)return"No separator character for "+a;if(u===0)return"Missing prefix for "+a;const p=a.slice(0,u),f=a.slice(u+1);if(f.length<6)return"Data too short";let h=cu(p);if(typeof h=="string")return h;const y=[];for(let w=0;w<f.length;++w){const j=f.charAt(w),U=Cg[j];if(U===void 0)return"Unknown character "+j;h=Br(h)^U,!(w+6>=f.length)&&y.push(U)}return h!==e?"Invalid checksum for "+a:{prefix:p,words:y}}function s(a,o){const c=n(a,o);if(typeof c=="object")return c}function i(a,o){const c=n(a,o);if(typeof c=="object")return c;throw new Error(c)}return{decodeUnsafe:s,decode:i,encode:r,toWords:AP,fromWordsUnsafe:MP,fromWords:NP}}Fn.bech32=Ag("bech32");Fn.bech32m=Ag("bech32m");class BP{async signWithIntent(e,r){const n=_g(r,e),s=ur(n,{dkLen:32});return{signature:CP({signature:await this.sign(s),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:H(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){const{signature:r}=await this.signWithIntent(d.vector(d.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:H(e),signature:r}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}const ha=32;class Mg extends ts{constructor(e){if(super(),typeof e=="string"?this.data=fe(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==ha)throw new Error(`Invalid public key input. Expected ${ha} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Et.ED25519}async verify(e,r){let n;if(typeof r=="string"){const s=Lr(r);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!Vr(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return Fg.sign.detached.verify(e,n,this.toRawBytes())}}Mg.SIZE=ha;const ya=33;class Ng extends ts{constructor(e){if(super(),typeof e=="string"?this.data=fe(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==ya)throw new Error(`Invalid public key input. Expected ${ya} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Et.Secp256k1}async verify(e,r){let n;if(typeof r=="string"){const s=Lr(r);if(s.signatureScheme!=="Secp256k1")throw new Error("Invalid signature scheme");if(!Vr(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return dc.verify(dc.Signature.fromCompact(n),vu(e),this.toRawBytes())}}Ng.SIZE=ya;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bg=Yg(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),DP=Bg.create(BigInt("-3")),UP=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),RP=Zg({a:DP,b:UP,Fp:Bg,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Qg),uu=RP,ga=33;class Dg extends ts{constructor(e){if(super(),typeof e=="string"?this.data=fe(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==ga)throw new Error(`Invalid public key input. Expected ${ga} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return Et.Secp256r1}async verify(e,r){let n;if(typeof r=="string"){const s=Lr(r);if(s.signatureScheme!=="Secp256r1")throw new Error("Invalid signature scheme");if(!Vr(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");n=s.signature}else n=r;return uu.verify(uu.Signature.fromCompact(n),vu(e),this.toRawBytes())}}Dg.SIZE=ga;var Ug=t=>{throw TypeError(t)},Rg=(t,e,r)=>e.has(t)||Ug("Cannot "+r),on=(t,e,r)=>(Rg(t,e,"read from private field"),r?r.call(t):e.get(t)),lu=(t,e,r)=>e.has(t)?Ug("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),pu=(t,e,r,n)=>(Rg(t,e,"write to private field"),e.set(t,r),r),kr,mn;class zP extends BP{constructor(e,r=[]){var a;super(),lu(this,kr),lu(this,mn),pu(this,kr,e),pu(this,mn,r);let n=new Set,s=0;const i=e.getPublicKeys().map(({weight:o,publicKey:c})=>({weight:o,address:c.toSuiAddress()}));for(let o of r){const c=o.toSuiAddress();if(n.has(c))throw new Error("Can't create MultiSigSigner with duplicate signers");n.add(c);const l=(a=i.find(u=>u.address===c))==null?void 0:a.weight;if(!l)throw new Error(`Signer ${c} is not part of the MultiSig public key`);s+=l}if(s<e.getThreshold())throw new Error("Combined weight of signers is less than threshold")}getKeyScheme(){return"MultiSig"}getPublicKey(){return on(this,kr)}sign(e){throw new Error("MultiSigSigner does not support signing directly. Use signTransaction or signPersonalMessage instead")}signData(e){throw new Error("MultiSigSigner does not support signing directly. Use signTransaction or signPersonalMessage instead")}async signTransaction(e){return{signature:on(this,kr).combinePartialSignatures(await Promise.all(on(this,mn).map(async n=>(await n.signTransaction(e)).signature))),bytes:H(e)}}async signPersonalMessage(e){return{signature:on(this,kr).combinePartialSignatures(await Promise.all(on(this,mn).map(async n=>(await n.signPersonalMessage(e)).signature))),bytes:H(e)}}}kr=new WeakMap;mn=new WeakMap;const cn=10,du=1;class pi extends ts{constructor(e,r={}){if(super(),typeof e=="string"?(this.rawBytes=fe(e),this.multisigPublicKey=T.MultiSigPublicKey.parse(this.rawBytes)):e instanceof Uint8Array?(this.rawBytes=e,this.multisigPublicKey=T.MultiSigPublicKey.parse(this.rawBytes)):(this.multisigPublicKey=e,this.rawBytes=T.MultiSigPublicKey.serialize(e).toBytes()),this.multisigPublicKey.threshold<1)throw new Error("Invalid threshold");const n=new Set;this.publicKeys=this.multisigPublicKey.pk_map.map(({pubKey:i,weight:a})=>{const[o,c]=Object.entries(i).filter(([u])=>u!=="$kind")[0],l=Uint8Array.from(c).toString();if(n.has(l))throw new Error("Multisig does not support duplicate public keys");if(n.add(l),a<1)throw new Error("Invalid weight");return{publicKey:ac(o,Uint8Array.from(c),r),weight:a}});const s=this.publicKeys.reduce((i,{weight:a})=>i+a,0);if(this.multisigPublicKey.threshold>s)throw new Error("Unreachable threshold");if(this.publicKeys.length>cn)throw new Error(`Max number of signers in a multisig is ${cn}`);if(this.publicKeys.length<du)throw new Error(`Min number of signers in a multisig is ${du}`)}static fromPublicKeys({threshold:e,publicKeys:r}){return new pi({pk_map:r.map(({publicKey:n,weight:s})=>({pubKey:{[wg[n.flag()]]:Array.from(n.toRawBytes())},weight:s})),threshold:e})}equals(e){return super.equals(e)}toRawBytes(){return this.rawBytes}getPublicKeys(){return this.publicKeys}getThreshold(){return this.multisigPublicKey.threshold}getSigner(...e){return new zP(this,e)}toSuiAddress(){const e=1+65*cn+2,r=new Uint8Array(e);r.set([Et.MultiSig]),r.set(T.u16().serialize(this.multisigPublicKey.threshold).toBytes(),1);let n=3;for(const{publicKey:s,weight:i}of this.publicKeys){const a=s.toSuiBytes();r.set(a,n),n+=a.length,r.set([i],n++)}return F(ba(ur(r.slice(0,n),{dkLen:32})))}flag(){return Et.MultiSig}async verify(e,r){const n=Lr(r);if(n.signatureScheme!=="MultiSig")throw new Error("Invalid signature scheme");const{multisig:s}=n;let i=0;if(!Vr(T.MultiSigPublicKey.serialize(this.multisigPublicKey).toBytes(),T.MultiSigPublicKey.serialize(s.multisig_pk).toBytes()))return!1;for(const{publicKey:a,weight:o,signature:c}of VP(s)){if(!await a.verify(e,c))return!1;i+=o}return i>=this.multisigPublicKey.threshold}combinePartialSignatures(e){var o,c;if(e.length>cn)throw new Error(`Max number of signatures in a multisig is ${cn}`);let r=0;const n=new Array(e.length);for(let l=0;l<e.length;l++){let u=Lr(e[l]);if(u.signatureScheme==="MultiSig")throw new Error("MultiSig is not supported inside MultiSig");let p;u.signatureScheme==="ZkLogin"?p=xg((o=u.zkLogin)==null?void 0:o.addressSeed,(c=u.zkLogin)==null?void 0:c.iss).toRawBytes():p=u.publicKey,n[l]={[u.signatureScheme]:Array.from(u.signature.map(h=>Number(h)))};let f;for(let h=0;h<this.publicKeys.length;h++)if(Vr(p,this.publicKeys[h].publicKey.toRawBytes())){if(r&1<<h)throw new Error("Received multiple signatures from the same public key");f=h;break}if(f===void 0)throw new Error("Received signature from unknown public key");r|=1<<f}let s={sigs:n,bitmap:r,multisig_pk:this.multisigPublicKey};const i=T.MultiSig.serialize(s,{maxSize:8192}).toBytes();let a=new Uint8Array(i.length+1);return a.set([Et.MultiSig]),a.set(i,1),H(a)}}function VP(t,e={}){let r=new Array(t.sigs.length);for(let n=0;n<t.sigs.length;n++){const[s,i]=Object.entries(t.sigs[n]).filter(([u])=>u!=="$kind")[0],a=LP(t.bitmap).at(n),o=t.multisig_pk.pk_map[a],c=Uint8Array.from(Object.values(o.pubKey)[0]);if(s==="MultiSig")throw new Error("MultiSig is not supported inside MultiSig");const l=ac(s,c,e);r[n]={signatureScheme:s,signature:Uint8Array.from(i),publicKey:l,weight:o.weight}}return r}function LP(t){if(t<0||t>1024)throw new Error("Invalid bitmap");let e=[];for(let r=0;r<10;r++)t&1<<r&&e.push(r);return Uint8Array.from(e)}async function FP(t,e,r={}){const n=qP(e,r);if(!await n.publicKey.verifyPersonalMessage(t,n.serializedSignature))throw new Error("Signature is not valid for the provided message");return n.publicKey}function qP(t,e={}){const r=Lr(t);if(r.signatureScheme==="MultiSig")return{...r,publicKey:new pi(r.multisig.multisig_pk)};const n=ac(r.signatureScheme,r.publicKey,e);return{...r,publicKey:n}}function ac(t,e,r={}){switch(t){case"ED25519":return new Mg(e);case"Secp256k1":return new Ng(e);case"Secp256r1":return new Dg(e);case"MultiSig":return new pi(e);case"ZkLogin":return new Ig(e,r);default:throw new Error(`Unsupported signature scheme ${t}`)}}const GP=hu({props:{chainId:{type:String,required:!0},chainName:String},setup(t){const e=t.chainId,r=lc({}),n=lc("");return{chainId:e,chainNamespaces:{sui:{chains:[e],defaultChain:e}},chainName:t.chainName,transaction:r,transactionResult:n,suiProvider:void 0}},components:{ConnectLayout:qg},methods:{getProvider(){if(!Kr.provider)throw alert("Please connect a wallet first"),Error("No provider");this.suiProvider||(this.suiProvider=new mu.OKXSuiProvider(Kr.provider))},async sui_verifySignature(t){let e=!1,r="";try{const n=this.suiProvider.getAccount();console.log(`Account中获取的address：${n==null?void 0:n.address}`);let s=await FP(this.transaction.message,t.signature),i=s.toSuiAddress();console.log(`验签结果计算得到address：${i}`),console.log(`account pubkey: ${n==null?void 0:n.publicKey}`),console.log(`result pubkey: ${s.toBase64()}`),e=(n==null?void 0:n.address)===i&&(n==null?void 0:n.publicKey)===s.toBase64(),r=`address verify: ${(n==null?void 0:n.address)===i}
publicKey verify: ${(n==null?void 0:n.publicKey)===s.toBase64()}`,console.log("signature verify success: ",s)}catch(n){console.log("signature verify failed: ",n)}return{result:e,msg:r}},sui_getAccount(){try{this.getProvider()}catch(t){console.error(t.message);return}try{const t=this.suiProvider.getAccount();this.transactionResult=t?JSON.stringify(t):""}catch(t){console.log("Sui error:",t),this.transactionResult=JSON.stringify(t)}},async sui_signMessage(){try{this.getProvider()}catch(r){console.error(r.message);return}const t=[76,111,103,105,110,32,119,105,116,104,32,66,108,117,101,109,111,118,101],e=new Uint8Array(t);this.transaction={message:e};try{const r=await this.suiProvider.signMessage(this.transaction);this.transactionResult=r?JSON.stringify(r):"",r&&"signature"in r&&this.sui_verifySignature(r).then(n=>{this.transactionResult=JSON.stringify(n)})}catch(r){console.log("Sui error:",r),this.transactionResult=JSON.stringify(r)}},async sui_signPersonalMessage(){try{this.getProvider()}catch(r){console.error(r.message);return}const t=[76,111,103,105,110,32,119,105,116,104,32,66,108,117,101,109,111,118,101],e=new Uint8Array(t);this.transaction={message:e};try{const r=await this.suiProvider.signPersonalMessage(this.transaction);this.transactionResult=r?JSON.stringify(r):"",r&&"signature"in r&&this.sui_verifySignature(r).then(n=>{this.transactionResult=JSON.stringify(n)})}catch(r){console.log("Sui error:",r),this.transactionResult=JSON.stringify(r)}},async sui_signTransaction2(){try{this.getProvider()}catch(i){console.error(i.message);return}const t=109,e="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",r=new an,[n]=r.splitCoins(r.gas,[t]);r.transferObjects([n],e);const s={transactionBlock:r,account:{},chain:"sui:mainnet",options:{showEffects:!0}};this.transaction={...s,transactionBlock:JSON.stringify(r)};try{const i=await this.suiProvider.signTransaction(s);this.transactionResult=i?JSON.stringify(i):""}catch(i){console.log("Sui error:",i),this.transactionResult=JSON.stringify(i)}},async sui_requestRpc(){try{this.getProvider()}catch(t){console.error(t.message);return}Kr.provider.setDefaultChain("sui:mainnet","https://fullnode.mainnet.sui.io:443"),this.transaction={method:"suix_getBalance",params:["0x51ceab2edc89f74730e683ebee65578cb3bc9237ba6fca019438a9737cf156ae","0x168da5bf1f48dafc111b0a488fa454aca95e0b5e::usdc::USDC"]};try{const t=await Kr.provider.request(this.transaction,this.chainId);this.transactionResult=t?JSON.stringify(t):""}catch(t){console.log("Sui error:",t),this.transactionResult=JSON.stringify(t)}},async sui_signTransaction_pre_execution(){try{this.getProvider()}catch(o){console.error(o.message);return}const t=102,e="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",r=new an,[n]=r.splitCoins(r.gas,[t]);r.transferObjects([n],e);const s={transactionBlock:r,options:{showEffects:!0}},[i,a]=await this.generateTsBytesAndSerialize(s);Object.assign(s,{txBytes:i,txSerialize:a}),this.transaction={...s,transactionBlock:JSON.stringify(r)};try{const o=await this.suiProvider.signTransaction(s);this.transactionResult=o?JSON.stringify(o):""}catch(o){console.log("Sui error:",o),this.transactionResult=JSON.stringify(o)}},async sui_signAndExecuteTransaction_pre_execution(){try{this.getProvider()}catch(o){console.error(o.message);return}const t=115,e="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",r=new an,[n]=r.splitCoins(r.gas,[t]);r.transferObjects([n],e);const s={transactionBlock:r,options:{showEffects:!0}},[i,a]=await this.generateTsBytesAndSerialize(s);Object.assign(s,{txBytes:i,txSerialize:a}),this.transaction={...s,transactionBlock:JSON.stringify(r)};try{const o=await this.suiProvider.signAndExecuteTransaction(s);this.transactionResult=o?JSON.stringify(o):""}catch(o){console.log("Sui error:",o),this.transactionResult=JSON.stringify(o)}},async generateTsBytesAndSerialize(t){let e=["",""];if(!("transactionBlock"in t))return new Promise(n=>{n(e)});const r=Kr.provider.requestAccountsWithNamespace("sui");if(r.length==0)return new Promise(n=>{n(e)});try{const n="https://www.okx.com/fullnode/sui/discover/rpc",s=new LT({url:n});t.transactionBlock.setSender(r[0]);const i=await t.transactionBlock.build({client:s}),a=Gg.from(i).toString("base64"),o=await an.from(a).toJSON();e=[a,o]}catch{return new Promise(s=>{s(e)})}return new Promise(n=>{n(e)})},async sui_signAndExecuteTransaction(){try{this.getProvider()}catch(i){console.error(i.message);return}const t=115,e="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",r=new an,[n]=r.splitCoins(r.gas,[t]);r.transferObjects([n],e);const s={transactionBlock:r,account:{},chain:"sui:mainnet",options:{showEffects:!0}};this.transaction={...s,transactionBlock:JSON.stringify(r)};try{const i=await this.suiProvider.signAndExecuteTransaction(s);this.transactionResult=i?JSON.stringify(i):""}catch(i){console.log("Sui error:",i),this.transactionResult=JSON.stringify(i)}}}});function WP(t,e,r,n,s,i){const a=un("el-button"),o=un("el-col"),c=un("el-card"),l=un("ConnectLayout");return gu(),bu(l,{chainId:t.chainId,chainNamespaces:t.chainNamespaces,transaction:t.transaction,transactionResult:t.transactionResult},{default:Te(()=>[Xe(c,null,{header:Te(()=>[fi("div",null,Wg(t.chainName||"SUI")+" methods",1)]),default:Te(()=>[Xe(a,{type:"primary",onClick:e[0]||(e[0]=u=>t.sui_getAccount())},{default:Te(()=>e[7]||(e[7]=[Pt("sui_getAccount")])),_:1}),Xe(a,{type:"primary",onClick:e[1]||(e[1]=u=>t.sui_signMessage())},{default:Te(()=>e[8]||(e[8]=[Pt("sui_signMessage")])),_:1}),Xe(a,{type:"primary",onClick:e[2]||(e[2]=u=>t.sui_signPersonalMessage())},{default:Te(()=>e[9]||(e[9]=[Pt(" sui_signPersonalMessage ")])),_:1}),Xe(a,{type:"primary",onClick:e[3]||(e[3]=u=>t.sui_signTransaction2())},{default:Te(()=>e[10]||(e[10]=[Pt(" sui_signTransaction ")])),_:1}),Xe(a,{type:"primary",onClick:e[4]||(e[4]=u=>t.sui_signAndExecuteTransaction())},{default:Te(()=>e[11]||(e[11]=[Pt(" sui_signAndExecuteTransaction ")])),_:1}),Xe(o,null,{default:Te(()=>[Xe(a,{type:"primary",onClick:t.sui_requestRpc},{default:Te(()=>e[12]||(e[12]=[Pt(" RPC_getBalance ")])),_:1},8,["onClick"]),e[13]||(e[13]=fi("div",{style:{"font-size":"12px",color:"gray"}},"get USDC balance of address:",-1)),e[14]||(e[14]=fi("div",{style:{"font-size":"12px",color:"gray"}},"0x51ceab2edc89f74730e683ebee65578cb3bc9237ba6fca019438a9737cf156ae",-1))]),_:1}),Xe(a,{type:"primary",onClick:e[5]||(e[5]=u=>t.sui_signTransaction_pre_execution())},{default:Te(()=>e[15]||(e[15]=[Pt(" sui_signTransaction (prepared data) ")])),_:1}),Xe(a,{type:"primary",onClick:e[6]||(e[6]=u=>t.sui_signAndExecuteTransaction_pre_execution())},{default:Te(()=>e[16]||(e[16]=[Pt(" sui_signAndExecuteTransaction (prepared data) ")])),_:1})]),_:1})]),_:1},8,["chainId","chainNamespaces","transaction","transactionResult"])}const JP=yu(GP,[["render",WP]]),KP=hu({components:{SuiBaseView:JP},setup(){return{chainId:"sui:mainnet"}}});function HP(t,e,r,n,s,i){const a=un("SuiBaseView");return gu(),bu(a,{chainId:t.chainId},null,8,["chainId"])}const lI=yu(KP,[["render",HP]]);export{lI as default};
