{"version":3,"sources":["webpack:///./src/App.vue?2077","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///src/components/TGSDK.vue","webpack:///./src/components/TGSDK.vue?2132","webpack:///./src/components/TGSDK.vue","webpack:///./src/lib/wallet.js","webpack:///src/App.vue"],"names":["selectortype_template_index_0_src_App","render","_vm","this","_h","$createElement","_c","_self","attrs","id","_m","_v","ref","directives","name","rawName","value","loaded","expression","address","length","type","on","click","pasteFromClick","_s","path","staticStyle","position","top","mnemonicList","_l","item","key","icon","generateProxy","importWallet","cleanStage","sendSignRequest","rows","placeholder","model","callback","$$v","signResult","staticRenderFns","background-color","width","height","src","__vue_styles__","ssrContext","__webpack_require__","src_App","normalizeComponent","App","Vue","use","lib_default","a","size","el","h","TGSDK","props","uid","String","methods","hideLinkButton","hide","Telegram","WebApp","MainButton","show","saveGeneratedWallet","mnemonic","initDataUnsafe","user","console","log","CloudStorage","removeItem","toString","err","res","setItem","resumeWalletInfo","result","getItem","split","cleanStorage","mounted","webApp","ready","onEvent","document","documentElement","className","colorScheme","setParams","text","onClick","currentWallet","phrase","replaceAll","window","open","showPopup","body","setAttribute","backgroundColor","components_TGSDK","Component","__webpack_exports__","ethers","require","module","exports","generateEVM","chain","index","accountIndex","Number","Math","pow","walletAccount","Wallet","createRandom","importEVM","fromMnemonic","data","waitingResult","connected","created","_this","addEventListener","visibilityState","userInfo","client_id","global","ws","WebSocket","onopen","onmessage","event","$message","message","eventSource","EventSource","coords","JSON","parse","signSave","fetch","then","response","json","onerror","error","close","_this2","inputParam","start_param","$confirm","confirmButtonText","cancelButtonText","walletInfo","Object","__WEBPACK_IMPORTED_MODULE_1__lib_wallet__","map","word","idx","$refs","tg","catch","walletInfoList","_this3","generateWallet","generate","$alert","action","_this4","components","__WEBPACK_IMPORTED_MODULE_0__components_TGSDK__"],"mappings":"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","file":"static/js/app.931820272dca1b099703.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_vm._m(0),_vm._v(\" \"),_c('TGSDK',{ref:\"tg\"}),_vm._v(\" \"),_c('el-container',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(!!!_vm.loaded),expression:\"!!!loaded\"}]},[_c('el-header',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.address && _vm.address.length),expression:\"address && address.length\"}]},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.pasteFromClick}},[_vm._v(_vm._s(_vm.address))])],1),_vm._v(\" \"),_c('el-main',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.path && _vm.path.length),expression:\"path && path.length\"}]},[_c('div',{staticStyle:{\"position\":\"relative\",\"top\":\"20px\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.path)+\"\\n      \")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mnemonicList && _vm.mnemonicList.length),expression:\"mnemonicList && mnemonicList.length\"}],staticStyle:{\"position\":\"relative\",\"top\":\"20px\"}},_vm._l((_vm.mnemonicList),function(item){return _c('el-tag',{key:item},[_vm._v(_vm._s(item))])}),1)]),_vm._v(\" \"),_c('el-footer',[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-refresh\"},on:{\"click\":_vm.generateProxy}},[_vm._v(\"生成钱包\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm.importWallet}},[_vm._v(\"导入钱包\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-download\"},on:{\"click\":_vm.cleanStage}},[_vm._v(\"重置状态\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":_vm.sendSignRequest}},[_vm._v(\"请求签名\")]),_vm._v(\" \"),_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":5,\"placeholder\":\"signResult\"},model:{value:(_vm.signResult),callback:function ($$v) {_vm.signResult=$$v},expression:\"signResult\"}})],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"background-color\":\"black\"}},[_c('img',{attrs:{\"width\":\"82\",\"height\":\"36\",\"src\":\"data:image/png;base64,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\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6f8b1eed\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6f8b1eed\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6f8b1eed\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport Element from 'element-ui'\nimport App from './App.vue'\n\nVue.use(Element, {size: 'small'})\n\nnew Vue({\n  el: '#app',\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n</template>\n\n<script>\n\n\nexport default {\n    name:'TGSDK',\n    props: {\n        uid: String\n    },\n    methods: {\n        hideLinkButton(hide) {\n            if (hide) {\n                Telegram.WebApp.MainButton.hide()\n            } else {\n                Telegram.WebApp.MainButton.show()\n            }\n        },\n        saveGeneratedWallet(mnemonic, address, path) {\n            var uid = Telegram.WebApp.initDataUnsafe.user.id\n            console.log(`with current login tg user:${uid} phrase:${mnemonic}`)\n            Telegram.WebApp.CloudStorage.removeItem(uid.toString(), (err, res)=>{\n                Telegram.WebApp.CloudStorage.setItem(uid.toString(), mnemonic+'&'+address+'&'+path)\n            })\n        },\n        resumeWalletInfo(result)\n        {\n            if (!Telegram.WebApp.initDataUnsafe.user) {\n                return result(false, '')\n            }\n            var uid = Telegram.WebApp.initDataUnsafe.user.id\n            console.log(`with current login tg user:${uid}`)\n            Telegram.WebApp.CloudStorage.getItem(uid.toString(), (err, res)=>{\n                if (!err) {\n                    // get mnemonic\n                    console.log(`get cached wallet:${res}`)\n                    return result(false, res.split('&'))\n                } else {\n                    // no cache\n                    console.log('no cached wallet')\n                    return result(true, [uid])\n                }\n            })\n        },\n        cleanStorage(result)\n        {\n            var uid = Telegram.WebApp.initDataUnsafe.user.id\n            Telegram.WebApp.CloudStorage.removeItem(uid.toString(), (err, res)=>{\n                console.log('clean storage finished')\n                result(err, res)\n            })\n\n        }\n    },\n    mounted(){\n        var webApp = Telegram.WebApp\n        // Init TWA\n        Telegram.WebApp.ready()\n        // Event occurs whenever theme settings are changed in the user's Telegram app (including switching to night mode).\n        Telegram.WebApp.onEvent('themeChanged', function() {\n            document.documentElement.className = Telegram.WebApp.colorScheme;\n        })\n        // Show main button\n        Telegram.WebApp.MainButton.setParams({\n            text: 'Link OKX'\n        })\n        Telegram.WebApp.MainButton.onClick(function () {\n            // Telegram.WebApp.showAlert('Main Button was clicked')\n            // Use deeplink\n\n            if (currentWallet.mnemonic) {\n                var uid = webApp.initDataUnsafe.user.id\n                var phrase = currentWallet.mnemonic.phrase.replaceAll(\" \", \"_\")\n                console.log(`try open:${phrase}`);\n                // window.open(`okex://metaX/wallet/home/tgImport?idx=${uid}&mn=${phrase}`);\n                window.open(`file://`);\n                // window.open(`googlechrome://`);\n                // window.open(`okex://main/wc?uri=wc:bd1a5f9aef5dffc5a61d51eefe23e5d79dae3f7847b4960f60a8767e41aff487@2?relay-protocol=irn&symKey=d870213fc4767652ef9c20f85b6feab6021fe07d0459d09d644a904137fa5250`)\n            } else {\n                Telegram.WebApp.showPopup(\"Notice\", \"create a wallet first plz\");\n            }\n        })\n\n        // 增删查\n        Telegram.WebApp.onEvent('themeChanged', function() {\n            document.body.setAttribute('style', '--bg-color:' + Telegram.WebApp.backgroundColor)\n        })\n    }\n}\n</script>\n\n\n// WEBPACK FOOTER //\n// src/components/TGSDK.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c(\"div\")}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cdd23000\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/TGSDK.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TGSDK.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./TGSDK.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cdd23000\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./TGSDK.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/TGSDK.vue\n// module id = null\n// module chunks = ","'use strict'\nconst ethers = require('ethers')\n\nfunction makeEVMWallet (chain, index) {\n  let uidNumber = Number(index);\n  let accountIndex = (uidNumber % Math.pow(2, 32)).toString();\n  console.log(index + \"->\" + accountIndex);\n  const path = `m/44'/${chain}'/0'/0/${accountIndex}`\n  var walletAccount = ethers.Wallet.createRandom({path: path})\n  var mnemonic = walletAccount.mnemonic\n  return {\n    mnemonic: mnemonic,\n    path: path,\n    address: walletAccount.address\n  }\n}\n\nfunction importEVMWallet(chain, index, mnemonic) {\n  let uidNumber = Number(index);\n  let accountIndex = (uidNumber % Math.pow(2, 32)).toString();\n  console.log(index + \"->\" + accountIndex);\n  const path = `m/44'/${chain}'/0'/0/${accountIndex}`\n  var walletAccount = ethers.Wallet.fromMnemonic(mnemonic, path)\n  var mnemonic = walletAccount.mnemonic\n  return {\n    mnemonic: mnemonic,\n    path: path,\n    address: walletAccount.address\n  }\n}\n\nmodule.exports = {\n  generateEVM: makeEVMWallet,\n  importEVM: importEVMWallet\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/wallet.js","<template>\n  <div id=\"app\">\n    <div style=\"background-color: black;\">\n      <img width=\"82\" height=\"36\" src=\"data:image/png;base64,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\">\n    </div>\n    <TGSDK ref=\"tg\"/>\n    <el-container v-loading=\"!!!loaded\">\n      <el-header v-show=\"address && address.length\">\n        <el-button @click=\"pasteFromClick\" type=\"text\">{{address}}</el-button>\n      </el-header>\n      <el-main v-show=\"path && path.length\">\n        <div style=\"position: relative;top: 20px;\">\n          {{path}}\n        </div>\n        <div style=\"position: relative;top: 20px;\" v-show=\"mnemonicList && mnemonicList.length\">\n          <el-tag v-for=\"item of mnemonicList\" v-bind:key=\"item\">{{item}}</el-tag>\n        </div>\n      </el-main>\n      <el-footer>\n        <el-button v-show=\"loaded\" type=\"primary\" icon=\"el-icon-refresh\" @click=\"generateProxy\">生成钱包</el-button>\n        <el-button v-show=\"loaded\" type=\"primary\" icon=\"el-icon-download\" @click=\"importWallet\">导入钱包</el-button>\n        <el-button v-show=\"loaded\" type=\"primary\" icon=\"el-icon-download\" @click=\"cleanStage\">重置状态</el-button>\n        <el-button v-show=\"loaded\" type=\"primary\" icon=\"el-icon-edit\" @click=\"sendSignRequest\">请求签名</el-button>\n        <el-input type=\"textarea\" :rows=\"5\" placeholder=\"signResult\" v-model=\"signResult\"></el-input>\n      </el-footer>\n    </el-container>\n  </div>\n</template>\n\n\n<script>\nimport TGSDK from './components/TGSDK'\nimport {generateEVM, importEVM} from './lib/wallet'\nexport default {\n  name: 'App',\n  data () {\n    return {\n      signResult: '',\n      waitingResult: false,\n      connected: false,\n      loaded: false,\n      address: '',\n      mnemonic: '',\n      mnemonicList:[],\n      path:''\n    }\n  },\n  created(){\n    //TODO: \n    console.log('app created!!!!!!')\n    // visible change\n    document.addEventListener('visibilitychange', ()=>{\n      if (document.visibilityState == 'visible') {\n        console.log('visible again!')\n      }\n    })\n    // uid\n    var userInfo = Telegram.WebApp.initDataUnsafe.user\n    if (!userInfo) {\n      userInfo = {id: '123'}\n    }\n    let client_id = userInfo.id\n    global.ws = new WebSocket(`ws://134.175.70.190/pchan/ws/${client_id}`)\n    ws.onopen = ()=>{\n      console.log('连接ws成功')\n      // this.$message({\n      //     type: 'success',\n      //     message: '连接ws成功'\n      //   })\n    }\n    ws.onmessage = (event)=>{\n      this.connected = true\n      this.$message({\n          type: 'success',\n          message: `收到推送${event}`\n        })\n    }\n\n\n    const eventSource = new EventSource(`http://134.175.70.190/pchan/sse?uid=${client_id}`);\n    eventSource.onopen = () => {\n      console.log(`content update info:${client_id}`)\n    }\n\n    eventSource.addEventListener(\"signIncome\", (event)=>{\n      console.log(event.data)\n      let coords = JSON.parse(event.data);\n      console.log('LocationUpdate', coords);\n      this.signResult = coords.signSave\n      if (this.waitingResult && this.signResult.length) {\n        fetch(`http://134.175.70.190/pchan/consumeSign?uid=${client_id}`) // api for the get request\n        .then(response => response.json())\n        .then(data => {\n          console.log(data)\n          if (data.signSave && data.signSave.length) {\n            this.signResult = data.signSave\n            this.waitingResult = false;\n            this.$message({\n              type: 'success',\n              message: `获得签名结果: ${data.signSave}`\n            })\n          }\n        });\n      }\n    })\n\n    eventSource.onerror = (error) => {\n      console.error('EventSource failed', error)\n      eventSource.close()\n    }\n\n    function sendMessage(event) {\n      var userInfo = Telegram.WebApp.initDataUnsafe.user\n      if (!userInfo) {\n        userInfo = {id: '123'}\n      }\n      let uid = userInfo.id\n      ws.send(`${uid}`)\n    }\n  },\n  mounted(){\n    const inputParam = Telegram.WebApp.initDataUnsafe.start_param\n    var userInfo = Telegram.WebApp.initDataUnsafe.user\n    if (!userInfo) {\n      userInfo = {id: '123'}\n    }\n    // 0. pull signed result\n    //let interval = setInterval(() => {\n    //  if (this.waitingResult) {\n    //    // send request \n    //    fetch(`http://134.175.70.190/pchan/querySign?uid=${userInfo.id}`) // api for the get request\n    //    .then(response => response.json())\n    //    .then(data => {\n    //      console.log(data)\n    //      if (data.signSave && data.signSave.length) {\n    //        clearInterval(interval);\n    //        this.signResult = data.signSave\n    //        this.waitingResult = false;\n    //        this.$message({\n    //          type: 'success',\n    //          message: `获得签名结果: ${data.signSave}`\n    //        })\n    //      }\n    //    });\n    //  }\n    //}, 1000);\n\n    // 1. check init data first\n    console.log(Telegram.WebApp.initDataUnsafe)\n    if (userInfo && inputParam && inputParam.length) {\n      console.log(`get input wallet phrases:${inputParam}`)\n      this.$confirm(`导入钱包将替换掉当前tg内生成的HD钱包(如果已生成过tg hd钱包)，是否继续?`, '注意', {\n        confirmButtonText: '导入',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(()=>{\n        let mnemonic = inputParam.replaceAll('_', ' ')\n        var uid = userInfo.id\n        var walletInfo = importEVM(\"60\", uid, mnemonic)\n        this.loaded = true\n        this.mnemonic = walletInfo.mnemonic.phrase\n        this.address = walletInfo.address\n        this.path = walletInfo.mnemonic.path\n        this.mnemonicList = this.mnemonic.split(' ').map((word, idx)=>(idx+1).toString() + \".\" + word)\n        this.$refs.tg.saveGeneratedWallet(this.mnemonic, this.address, this.path)\n        this.$message({\n          type: 'success',\n          message: '导入成功'\n        })\n        this.$refs.tg.hideLinkButton(false)\n      }).catch((err)=>{\n        this.$message({\n          type:'info',\n          message: `取消导入钱包:${err}`\n        })\n      })\n      return\n    }\n    \n    this.$refs.tg.resumeWalletInfo((err, walletInfoList)=>{\n      this.loaded = true\n      if (err) {\n        console.log(`no wallet for currentUser:${walletInfoList[0]}`)\n        return\n      }\n        this.mnemonic = walletInfoList[0]\n        this.address = walletInfoList[1]\n        this.path = walletInfoList[2]\n        this.mnemonicList = this.mnemonic.split(' ').map((word, idx)=>(idx+1).toString() + \".\" + word)\n        global.currentWallet = {\n          mnemonic: {\n            phrase: this.mnemonic,\n            path: this.path\n          },\n          address: this.address\n        }\n      this.$refs.tg.hideLinkButton(false)\n    })\n    this.$refs.tg.hideLinkButton(true)\n  },\n  methods: {\n    generateProxy() {\n      let generateWallet = ()=>{\n        console.log('wallet generate called')\n        let generate = (uid) => {\n          var walletInfo = generateEVM('60', uid)\n          global.currentWallet = walletInfo\n          this.mnemonic = walletInfo.mnemonic.phrase\n          this.address = walletInfo.address\n          this.path = walletInfo.mnemonic.path\n          this.mnemonicList = this.mnemonic.split(' ').map((word, idx)=>(idx+1).toString() + \".\" + word)\n          this.$refs.tg.saveGeneratedWallet(this.mnemonic, this.address, this.path)\n          console.log(walletInfo)\n          return walletInfo\n        }\n\n        if (Telegram.WebApp.initDataUnsafe.user) {\n          var uid = Telegram.WebApp.initDataUnsafe.user.id\n          generate(uid)\n        } else {\n          this.$alert('!!!!NOT IN TELEGRAM EVN!!!!','WARNING',{\n            confirmButtonText: 'CONTINUE',\n            callback: action => {\n              this.$message(\n                {type: 'info', message:`action:${action}`}\n              )\n              var uid = \"123456\"\n              generate(uid)\n            },\n          })\n        }\n        this.$refs.tg.hideLinkButton(false)\n      }\n\n      if (this.address && this.address.length) {\n          this.$alert('!WILL CLEAN CURRENT WALLET IN TG!\\n','WARNING',{\n            confirmButtonText: 'GET A NEW ONE',\n            callback: action => {\n              generateWallet()\n            },\n          })\n        } else {\n          generateWallet()\n        }\n    },\n    importWallet () {\n      this.$message(\n              {type: 'Guide', message:`LCQ Okx测试包中点击账号的发送按钮，通过deeplink会拉回到telegram中,实现钱包导入`}\n            )\n    },\n    cleanStage() {\n      this.$refs.tg.cleanStorage((err, res)=>{\n        currentWallet = null\n        this.path = \"\"\n        this.address = \"\"\n        this.mnemonic = \"\"\n        this.mnemonicList = []\n        console.log(\"clean storage\")\n      })\n      this.$refs.tg.hideLinkButton(true)\n    },\n    pasteFromClick() {\n        this.$message({\n          type: 'success',\n          message: '钱包信息已复制到剪贴板'\n        })\n    },\n    sendSignRequest() {\n      var userInfo = Telegram.WebApp.initDataUnsafe.user\n      if (!!!userInfo) {\n        userInfo = {\n          uid: '123'\n        }\n      }\n      var uid = userInfo.id\n      this.signResult = ''\n      window.open(`okx://wallet/nft/featured?jumpType=testTGLink&uid=${uid}`)\n      this.waitingResult = true\n      // 0. pull signed result\n      //let interval = setInterval(() => {\n      //  if (this.waitingResult) {\n      //    // send request \n      //    fetch(`http://134.175.70.190/pchan/querySign?uid=${userInfo.id}`) // api for the get request\n      //    .then(response => response.json())\n      //    .then(data => {\n      //      console.log(data)\n      //      if (data.signSave && data.signSave.length) {\n      //        clearInterval(interval);\n      //        this.signResult = data.signSave\n      //        this.waitingResult = false;\n      //        this.$message({\n      //          type: 'success',\n      //          message: `获得签名结果: ${data.signSave}`\n      //        })\n      //      }\n      //    });\n      //  }\n      //}, 1000);\n    }\n  },\n  components: {\n    TGSDK\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: black;\n  margin-top: 60px;\n}\n.el-header, .el-footer {\n    background-color: #B3C0D1;\n    color: #333;\n    text-align: center;\n    line-height: 60px;\n  }\n  .el-aside {\n    background-color: #D3DCE6;\n    color: #333;\n    text-align: center;\n    line-height: 200px;\n  }\n  .el-row {\n    margin-bottom: 20px;\n  }\n  .el-main {\n    background-color: #E9EEF3;\n    color: #333;\n  }\n  body > .el-container {\n    margin-bottom: 40px;\n  }\n  \n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue"],"sourceRoot":""}