webpackJsonp([1],{0:function(e,n){},Kaj8:function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});t("tvR6");var a=t("qBF2"),o=t.n(a),s=t("7+uW"),i=t("xJD8"),r={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[e._m(0),e._v(" "),t("TGSDK",{ref:"tg"}),e._v(" "),t("el-container",{directives:[{name:"loading",rawName:"v-loading",value:!e.loaded,expression:"!!!loaded"}]},[t("el-header",{directives:[{name:"show",rawName:"v-show",value:e.address&&e.address.length,expression:"address && address.length"}]},[t("el-button",{attrs:{type:"text"},on:{click:e.pasteFromClick}},[e._v(e._s(e.address))])],1),e._v(" "),t("el-main",{directives:[{name:"show",rawName:"v-show",value:e.path&&e.path.length,expression:"path && path.length"}]},[t("div",{staticStyle:{position:"relative",top:"20px"}},[e._v("\n        "+e._s(e.path)+"\n      ")]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.mnemonicList&&e.mnemonicList.length,expression:"mnemonicList && mnemonicList.length"}],staticStyle:{position:"relative",top:"20px"}},e._l(e.mnemonicList,function(n){return t("el-tag",{key:n},[e._v(e._s(n))])}),1)]),e._v(" "),t("el-footer",[t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:e.generateProxy}},[e._v("生成钱包")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.importWallet}},[e._v("导入钱包")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],attrs:{type:"primary",icon:"el-icon-download"},on:{click:e.cleanStage}},[e._v("重置状态")]),e._v(" "),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.loaded,expression:"loaded"}],attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.sendSignRequest}},[e._v("请求签名")]),e._v(" "),t("el-input",{attrs:{type:"textarea",rows:5,placeholder:"signResult"},model:{value:e.signResult,callback:function(n){e.signResult=n},expression:"signResult"}})],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticStyle:{"background-color":"black"}},[n("img",{attrs:{width:"82",height:"36",src:"data:image/png;base64,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"}})])}]};var l=function(e){t("Kaj8")},c=t("VU/8")(i.a,r,!1,l,null,null).exports;s.default.use(o.a,{size:"small"}),new s.default({el:"#app",render:function(e){return e(c)}})},YoKA:function(e,n,t){"use strict";var a={name:"TGSDK",props:{uid:String},methods:{hideLinkButton:function(e){e?Telegram.WebApp.MainButton.hide():Telegram.WebApp.MainButton.show()},saveGeneratedWallet:function(e,n,t){var a=Telegram.WebApp.initDataUnsafe.user.id;console.log("with current login tg user:"+a+" phrase:"+e),Telegram.WebApp.CloudStorage.removeItem(a.toString(),function(o,s){Telegram.WebApp.CloudStorage.setItem(a.toString(),e+"&"+n+"&"+t)})},resumeWalletInfo:function(e){if(!Telegram.WebApp.initDataUnsafe.user)return e(!1,"");var n=Telegram.WebApp.initDataUnsafe.user.id;console.log("with current login tg user:"+n),Telegram.WebApp.CloudStorage.getItem(n.toString(),function(t,a){return t?(console.log("no cached wallet"),e(!0,[n])):(console.log("get cached wallet:"+a),e(!1,a.split("&")))})},cleanStorage:function(e){var n=Telegram.WebApp.initDataUnsafe.user.id;Telegram.WebApp.CloudStorage.removeItem(n.toString(),function(n,t){console.log("clean storage finished"),e(n,t)})}},mounted:function(){var e=Telegram.WebApp;Telegram.WebApp.ready(),Telegram.WebApp.onEvent("themeChanged",function(){document.documentElement.className=Telegram.WebApp.colorScheme}),Telegram.WebApp.MainButton.setParams({text:"Link OKX"}),Telegram.WebApp.MainButton.onClick(function(){if(currentWallet.mnemonic){e.initDataUnsafe.user.id;var n=currentWallet.mnemonic.phrase.replaceAll(" ","_");console.log("try open:"+n),window.open("file://")}else Telegram.WebApp.showPopup("Notice","create a wallet first plz")}),Telegram.WebApp.onEvent("themeChanged",function(){document.body.setAttribute("style","--bg-color:"+Telegram.WebApp.backgroundColor)})}},o={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},s=t("VU/8")(a,o,!1,null,null,null);n.a=s.exports},cVh2:function(e,n,t){"use strict";var a=t("QjMU");e.exports={generateEVM:function(e,n){var t=(Number(n)%Math.pow(2,32)).toString();console.log(n+"->"+t);var o="m/44'/"+e+"'/0'/0/"+t,s=a.Wallet.createRandom({path:o});return{mnemonic:s.mnemonic,path:o,address:s.address}},importEVM:function(e,n,t){var o=(Number(n)%Math.pow(2,32)).toString();console.log(n+"->"+o);var s="m/44'/"+e+"'/0'/0/"+o,i=a.Wallet.fromMnemonic(t,s);return{mnemonic:t=i.mnemonic,path:s,address:i.address}}}},tvR6:function(e,n){},xJD8:function(e,n,t){"use strict";(function(e){var a=t("YoKA"),o=t("cVh2");t.n(o);n.a={name:"App",data:function(){return{signResult:"",waitingResult:!1,connected:!1,loaded:!1,address:"",mnemonic:"",mnemonicList:[],path:""}},created:function(){var n=this;console.log("app created!!!!!!"),document.addEventListener("visibilitychange",function(){"visible"==document.visibilityState&&console.log("visible again!")});var t=Telegram.WebApp.initDataUnsafe.user;t||(t={id:"123"});var a=t.id;e.ws=new WebSocket("ws://134.175.70.190/pchan/ws/"+a),ws.onopen=function(){console.log("连接ws成功")},ws.onmessage=function(e){n.connected=!0,n.$message({type:"success",message:"收到推送"+e})};var o=new EventSource("http://134.175.70.190/pchan/sse?uid="+a);o.onopen=function(){console.log("content update info:"+a)},o.addEventListener("signIncome",function(e){console.log(e.data);var t=JSON.parse(e.data);console.log("LocationUpdate",t),n.signResult=t.signSave,n.waitingResult&&n.signResult.length&&fetch("http://134.175.70.190/pchan/consumeSign?uid="+a).then(function(e){return e.json()}).then(function(e){console.log(e),e.signSave&&e.signSave.length&&(n.signResult=e.signSave,n.waitingResult=!1,n.$message({type:"success",message:"获得签名结果: "+e.signSave}))})}),o.onerror=function(e){console.error("EventSource failed",e),o.close()}},mounted:function(){var n=this,t=Telegram.WebApp.initDataUnsafe.start_param,a=Telegram.WebApp.initDataUnsafe.user;if(a||(a={id:"123"}),console.log(Telegram.WebApp.initDataUnsafe),a&&t&&t.length)return console.log("get input wallet phrases:"+t),void this.$confirm("导入钱包将替换掉当前tg内生成的HD钱包(如果已生成过tg hd钱包)，是否继续?","注意",{confirmButtonText:"导入",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.replaceAll("_"," "),s=a.id,i=Object(o.importEVM)("60",s,e);n.loaded=!0,n.mnemonic=i.mnemonic.phrase,n.address=i.address,n.path=i.mnemonic.path,n.mnemonicList=n.mnemonic.split(" ").map(function(e,n){return(n+1).toString()+"."+e}),n.$refs.tg.saveGeneratedWallet(n.mnemonic,n.address,n.path),n.$message({type:"success",message:"导入成功"}),n.$refs.tg.hideLinkButton(!1)}).catch(function(e){n.$message({type:"info",message:"取消导入钱包:"+e})});this.$refs.tg.resumeWalletInfo(function(t,a){n.loaded=!0,t?console.log("no wallet for currentUser:"+a[0]):(n.mnemonic=a[0],n.address=a[1],n.path=a[2],n.mnemonicList=n.mnemonic.split(" ").map(function(e,n){return(n+1).toString()+"."+e}),e.currentWallet={mnemonic:{phrase:n.mnemonic,path:n.path},address:n.address},n.$refs.tg.hideLinkButton(!1))}),this.$refs.tg.hideLinkButton(!0)},methods:{generateProxy:function(){var n=this,t=function(){console.log("wallet generate called");var t=function(t){var a=Object(o.generateEVM)("60",t);return e.currentWallet=a,n.mnemonic=a.mnemonic.phrase,n.address=a.address,n.path=a.mnemonic.path,n.mnemonicList=n.mnemonic.split(" ").map(function(e,n){return(n+1).toString()+"."+e}),n.$refs.tg.saveGeneratedWallet(n.mnemonic,n.address,n.path),console.log(a),a};if(Telegram.WebApp.initDataUnsafe.user){var a=Telegram.WebApp.initDataUnsafe.user.id;t(a)}else n.$alert("!!!!NOT IN TELEGRAM EVN!!!!","WARNING",{confirmButtonText:"CONTINUE",callback:function(e){n.$message({type:"info",message:"action:"+e});t("123456")}});n.$refs.tg.hideLinkButton(!1)};this.address&&this.address.length?this.$alert("!WILL CLEAN CURRENT WALLET IN TG!\n","WARNING",{confirmButtonText:"GET A NEW ONE",callback:function(e){t()}}):t()},importWallet:function(){this.$message({type:"Guide",message:"LCQ Okx测试包中点击账号的发送按钮，通过deeplink会拉回到telegram中,实现钱包导入"})},cleanStage:function(){var e=this;this.$refs.tg.cleanStorage(function(n,t){currentWallet=null,e.path="",e.address="",e.mnemonic="",e.mnemonicList=[],console.log("clean storage")}),this.$refs.tg.hideLinkButton(!0)},pasteFromClick:function(){this.$message({type:"success",message:"钱包信息已复制到剪贴板"})},sendSignRequest:function(){var e=Telegram.WebApp.initDataUnsafe.user;e||(e={uid:"123"});var n=e.id;this.signResult="",window.open("okx://wallet/nft/featured?jumpType=testTGLink&uid="+n),this.waitingResult=!0}},components:{TGSDK:a.a}}}).call(n,t("DuR2"))}},["NHnr"]);
//# sourceMappingURL=app.931820272dca1b099703.js.map