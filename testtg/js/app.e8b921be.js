(function(){var e={80385:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_METHOD_BATCH_FETCHMSG=t.CONNECT_METHOD_FETCHMSG=t.CONNECT_METHOD_RECEIVE=t.CONNECT_METHOD_UNSUB=t.CONNECT_METHOD_SUB=t.CONNECT_METHOD_PUBLISH=t.CONNECT_METHOD_LOGIN=t.CONNECT_METHOD_PUSH=void 0,t.CONNECT_METHOD_PUSH="push",t.CONNECT_METHOD_LOGIN="login",t.CONNECT_METHOD_PUBLISH="publish",t.CONNECT_METHOD_SUB="subscribe",t.CONNECT_METHOD_UNSUB="unsubscribe",t.CONNECT_METHOD_RECEIVE="receive",t.CONNECT_METHOD_FETCHMSG="fetchMessages",t.CONNECT_METHOD_BATCH_FETCHMSG="batchFetchMessages"},86209:function(e,t,n){"use strict";n(37008),n(24671),n(73074),n(37008),n(24671),n(73074);var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function r(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXWalletConnector=void 0;const r=n(61174),c=n(64321),l=n(43138),d=n(31364),u=n(57837),g=n(55282),f=i(n(23902)),p=n(60075),h=n(66708),b=(0,u.resolveWebSocketImplementation)();class _{constructor(e){if(this.events=new g.EventEmitter,this.state=r.ConnectorState.InitState,this.selectedUrlIndex=0,this.retryCount=0,this.timeOutLimit=8e3,!(0,u.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,this.heartbeatTimer=null,this.connectionTimeoutTimer=null,this.connectURLStorage=new l.Storage(c.OKXCONNECTOR_CACHE_KEY+c.OKXCONNECTOR_CACHE_KEY)}get connecting(){return this.state==r.ConnectorState.Connecting}onPayload(e){if("undefined"!==typeof e.data){if(f.logDebug("get received data"),f.logDebug(e),"string"===typeof e.data){let t=e.data;if("pong"===t)return void f.logDebug(`CONNECT: receive pong ${Date.now().toString()}`)}this.events.emit("payload",e.data)}}onClose(e){var t;f.logDebug("socket get closed: ",null===(t=this.socket)||void 0===t?void 0:t.url,e.code),this.socket=void 0,this.events.emit("close",e)}onError(e,t){const n={id:e,msg:t.toString()};this.events.emit("payload",n)}onopen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.state=r.ConnectorState.Connected,this.events.emit("open")}emitError(e){this.events.emit("fail",e)}heartbeat(){return a(this,void 0,void 0,(function*(){if(this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.state==r.ConnectorState.Connected||this.state==r.ConnectorState.OnError){if(this.socket){if(this.socket.readyState===WebSocket.OPEN)f.logDebug(`send ping heart beat: ${Date.now().toString()}, ${this.socket}`),this.socket.send("ping"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3);else if(f.logDebug("socket not ready"),this.state==r.ConnectorState.Connected||this.state==r.ConnectorState.OnError){f.logDebug("socket reconnect by heartbeat with state",this.state,this.socket.readyState);try{yield this.tryRegistOpen()}catch(e){f.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else if(f.logDebug("socket not exist"),this.state==r.ConnectorState.Connected||this.state==r.ConnectorState.OnError){f.logDebug("socket reconnect by heartbeat");try{yield this.tryRegistOpen()}catch(e){f.logError("regist open failed"),this.heartbeatTimer=setTimeout(this.heartbeat.bind(this),5e3)}}}else f.logDebug("heart beat close")}))}registOpen(e=this.url,t=!1){if(!(0,u.checkWSUrl)(e))throw new Error(`CONNECTOR: invalid url ${e}`);this.url=e,t||f.logDebug("Connection connect:",this.url,(new Date).toUTCString()),this.state=r.ConnectorState.Connecting;new URLSearchParams(e).get("origin");return new Promise(((t,n)=>{const o=new b(e,[]);f.logDebug("Connection connect Begin:",this.url,(new Date).toUTCString()),this.startTimeOutTimer(o),(0,u.hasBuiltInWebSocket)()?(f.logDebug("Add socket error handler"),o.onerror=()=>{n(new Error("socket error")),o.close()}):(f.logDebug("Add socket error handler"),o.on("error",(()=>{n(new Error("socket error")),o.close()}))),o.onopen=()=>{f.logDebug("socket opened"),this.resetTimeOutTimer(r.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.FINISHED),this.onopen(o),this.heartbeat(),t(o)}}))}checkMaxRetry(){return f.logDebug("current retry count:",this.retryCount,"of",r.OKXCONNECTOR_WS_URL_LIST.length),this.retryCount>3*r.OKXCONNECTOR_WS_URL_LIST.length}connectionTryNext(){return a(this,void 0,void 0,(function*(){if(!this.checkMaxRetry()){this.retryCount+=1;let e=this.getNextSelectUrl();return f.logDebug("Connection retry:",e,(new Date).toUTCString()),this.registOpen(e,!0)}f.logDebug("Max Connection retry ",this.retryCount,(new Date).toUTCString())}))}startTimeOutTimer(e){this.connectionTimeoutTimer&&this.resetTimeOutTimer(r.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.CANCELED),this.pendingSocket=e,this.connectionTimeoutTimer=setTimeout((()=>{this.pendingSocket&&this.resetTimeOutTimer(r.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)}),this.timeOutLimit)}resetTimeOutTimer(e){var t;if(e==r.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE.TIME_OUT)throw clearTimeout(this.connectionTimeoutTimer),null===(t=this.pendingSocket)||void 0===t||t.close(),this.pendingSocket=void 0,f.reportEvent(h.OKXReportType.LOG,"timeout",this.retryCount.toString()),new Error("socket timeout");this.pendingSocket=void 0,clearTimeout(this.connectionTimeoutTimer)}cacheSuccessUrlSelect(){this.connectURLStorage.saveContent(this.selectedUrlIndex.toString(),c.OKXCONNECTOR_CACHE_KEY)}getNextSelectUrl(){return this.selectedUrlIndex+=1,this.selectedUrlIndex=this.selectedUrlIndex%r.OKXCONNECTOR_WS_URL_LIST.length,r.OKXCONNECTOR_WS_URL_LIST[this.selectedUrlIndex]}onVisibleChanged(){return a(this,void 0,void 0,(function*(){if("visible"!==document.visibilityState||(f.logDebug(`get changed ${this.state}, ${this.socket}`),this.state!=r.ConnectorState.Connected||"undefined"!==typeof this.socket));else{f.logDebug("CONNECTION need reopen");try{yield this.tryRegistOpen()}catch(e){f.logError("regist open failed")}}}))}tryRegistOpen(){return a(this,arguments,void 0,(function*(e=this.url){if(this.connecting)return f.logDebug("tryRegistOpen => connecting state"),new Promise(((e,t)=>{this.events.once("fail",(e=>(f.logDebug("tryRegistOpen => connecting fail listener",e),t(e)))),this.events.once("open",(()=>"undefined"==typeof this.socket?t(new Error("Connect lost")):e(this.socket)))}));f.logDebug("tryRegistOpen => try registOpen until retry limit is hit");let t=!1;while(!this.checkMaxRetry()&&!this.socket)try{f.logDebug("tryRegistOpen => call registOpen, try count:",this.retryCount,t),yield this.registOpen(e,t)}catch(n){f.logDebug("tryRegistOpen => registOpen failed",n),this.retryCount+=1,e=this.getNextSelectUrl(),t=!0}if(f.logDebug("tryRegistOpen => exit while loop",this.retryCount,this.socket),!this.socket&&this.checkMaxRetry())throw f.logDebug("tryRegistOpen => failed to open a socket",this.retryCount,this.socket),this.retryCount=0,this.state=r.ConnectorState.OnError,this.emitError(new Error("tryRegistOpen failed")),new p.OKXConnectError(p.OKX_CONNECT_ERROR_CODES.CONNECTION_ERROR,"Failed to connect")}))}connect(){return a(this,void 0,void 0,(function*(){try{yield this.tryRegistOpen(),document.removeEventListener("visibilitychange",this.onVisibleChanged.bind(this)),document.addEventListener("visibilitychange",this.onVisibleChanged.bind(this))}catch(e){throw f.logDebug("connect => failed to connect",e),e}}))}disconnect(){return a(this,void 0,void 0,(function*(){return this.state=r.ConnectorState.Disconnected,new Promise(((e,t)=>{"undefined"!==typeof this.socket?(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close(),this.heartbeatTimer&&clearTimeout(this.heartbeatTimer)):e()}))}))}currentStatus(){return{state:this.state,url:this.url}}addListener(e,t,n,o){this.listenPayloadHandler&&this.events.removeListener("payload",this.listenPayloadHandler),this.listenPayloadHandler=s=>{var i;f.logDebug(`<<< get payload ${s}`);let a=(0,d.safeJsonParse)(s);if(a.params&&a.params.data){let r=null===(i=a.params.data)||void 0===i?void 0:i.message;if(r)try{let s=t(r);void 0===s?(f.logDebug("CONNECT: decrypt undefined"),o(e,"Decrypt undefined")):n(e,s)}catch(s){f.logDebug(`CONNECT: decrypt failed: ${s}`),o(e,s.message)}}},this.events.on("payload",this.listenPayloadHandler),this.failHandler&&this.events.removeListener("fail",this.failHandler),this.failHandler=t=>{t?(f.logDebug(`CONNECT failed: ${t}`),o(e,t.message)):o(e,"Unkonow error")},this.events.on("fail",this.failHandler)}addPackageParse(e){this.payloadHandler&&this.events.removeListener("payload",this.payloadHandler),this.payloadHandler=t=>a(this,void 0,void 0,(function*(){f.logDebug(`CONNECTION @[${(new Date).toUTCString()}] <<<< received e:${t}`);let n=(0,d.safeJsonParse)(t);yield e(n)})),this.events.on("payload",this.payloadHandler)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}send(e,t){return a(this,void 0,void 0,(function*(){try{"undefined"===typeof this.socket&&(f.logDebug(`>>> send payload undefined ${t}`),yield e()),f.logDebug(`CONNECTION @[${(new Date).toUTCString()}]>>> send payload ${(0,d.safeJsonStringify)(t)}`),this.socket&&this.socket.send((0,d.safeJsonStringify)(t))}catch(n){this.onError(t.id,n)}}))}getMsgPayloadFromHistory(e){return a(this,void 0,void 0,(function*(){if("undefined"===typeof e)return;let t={params:{data:e}},n=(0,d.safeJsonStringify)(e);f.logDebug("get received data from history"),f.logDebug(n),n=(0,d.safeJsonStringify)(t),this.events.emit("payload",n)}))}onOpen(e){this.openHandler&&this.events.removeListener("open",this.openHandler),this.openHandler=()=>a(this,void 0,void 0,(function*(){f.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> ws opened: `),yield e()})),this.events.on("open",this.openHandler),this.cacheSuccessUrlSelect()}}t.OKXWalletConnector=_},9908:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function r(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionManager=void 0;const r=n(86209),c=n(80385),l=n(64321),d=n(27125),u=n(61174),g=n(55282),f=n(43138),p=n(57837),h=n(97737),b=n(40742),_=n(60529),m=i(n(23902)),y=n(23902),C=n(66708),v=n(95821);class O{constructor(e=void 0){this.events=new g.EventEmitter,this.connectStorage=new f.Storage(l.OKXCONNECTOR_CACHE_KEY_DAPP+e,l.OKXCONNECTOR_CACHE_KEY_DAPP),this.crypto=new h.SessionCrypto;let t=(0,v.isInTMA)();if((0,y.logDebug)("do init:",t),m.reportLog("connection manager do init"),t){const e=this.getCachedCryptoKeyPair();(0,y.logDebug)("use same pk:",e),this.crypto=new h.SessionCrypto(e)}this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new r.OKXWalletConnector(u.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.connectedWalletPK="",this.currentTopic="",m.logDebug(`this.connectedWalletPK  constructor   ${this.connectedWalletPK}`)}refreshPackageId(){this.packageId=Date.now()}saveCryptoKeyPair(e){let t=(0,_.safeJsonStringify)(e);this.connectStorage.encryptStoreMsg(t,l.OKXCONNECTOR_CRYPTO_KEY)}getCachedCryptoKeyPair(){const e=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_CRYPTO_KEY),t=e;if("string"==typeof t){m.logDebug("get cached crypto key:"),m.logDebug(t);let e=(0,_.safeJsonParse)(t);return e}return this.connectStorage.clearCache(),null}saveJWTKeyPair(e){var t={publicKey:(0,p.toHexString)(e.publicKey),secretKey:(0,p.toHexString)(e.secretKey)};m.logDebug("save jwt kp");let n=(0,_.safeJsonStringify)(t);m.logDebug(n),this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_JWT_KEY)}getCachedJWTKeyPair(){const e=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_JWT_KEY),t=e;if("string"==typeof t){m.logDebug("get cached jwt kp:"),m.logDebug(t);let e=(0,_.safeJsonParse)(t);m.logDebug("save jwt kp"),m.logDebug(e);var n={publicKey:(0,p.hexToByteArray)(e.publicKey),secretKey:(0,p.hexToByteArray)(e.secretKey)};return n}return(0,b.generateKeyPair)()}isWalletPKReady(){return m.logDebug(`isWalletPKReady  ===> ${this.connectedWalletPK}`),this.connectedWalletPK.length>0}makeJWT(e){return a(this,void 0,void 0,(function*(){return yield(0,b.signJWT)(e,d.OKXCONNECTOR_JWT_SIDE,d.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parsePackage(e){return a(this,arguments,void 0,(function*(e,t=!1){var n,o,s,i,a;if(this.events.emit(e.id,e),!t){yield this.sendACK(e.id,!0);let t=null===(n=this.connectStorage.getItem(l.OKXCONNECTOR_TOKEN_CACHE))||void 0===n?void 0:n.content;if(t){let n=e;(null===(s=null===(o=n.params)||void 0===o?void 0:o.data)||void 0===s?void 0:s.messageId)&&(this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(a=null===(i=n.params)||void 0===i?void 0:i.data)||void 0===a?void 0:a.messageId,t))}}}))}restoreConnect(e){return a(this,void 0,void 0,(function*(){if(m.reportLog("connection manager restore connection"),m.logDebug(`connectionManager  restoreConenct   ${e}`),"string"!==typeof e||0===e.length)throw new Error("CONNECTION: invalid topic");m.logDebug("connectionManager  restoreConenct   disconnect"),yield this.disconnect(!0),this.connectStorage.saveContent(e,l.OKXCONNECTOR_TOKEN_CACHE),m.logDebug("connectionManager  restoreConenct   conect"),yield this.connect(!0)}))}getConnectInfo(){var e=(0,p.generateTopic)();m.logDebug(`generate topic token: ${e}`),m.reportLog("connection manager generate connection info"),this.currentTopic=e;const t={channelId:e,clientId:this.crypto.stringifyKeypair().publicKey};return t}connect(){return a(this,arguments,void 0,(function*(e=!1){this.timeLog=(new Date).getTime(),(0,y.logDebug)("ConnectTime---enter->",this.timeLog),m.reportLog("connection manager begin connect");let t=this.connectStorage.getItem(l.OKXCONNECTOR_TOKEN_CACHE);var n=this.currentTopic;if(m.logDebug(`generate topic token: ${n}`),e){"undefined"!==typeof t&&null!==t&&(m.logDebug(`read last connect id: ${t}`),n=t.content);var o=this.connectStorage.getItem(l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE);o&&(this.connectedWalletPK=o.content,(0,y.logDebug)(`connectionManager connect() this.connectedWalletPK : ${this.connectedWalletPK}`)),m.reportLog("connection manager do restore connection")}if(e){const e=this.getCachedCryptoKeyPair();e&&(this.crypto=new h.SessionCrypto(e))}m.logDebug(`use crypto client id: ${this.crypto.stringifyKeypair().publicKey}`),this.connectStorage.saveContent(n,l.OKXCONNECTOR_TOKEN_CACHE);var s=yield this.makeJWT(n);return m.logDebug(`generate jwt token: ${s}`),this.connectStorage.saveContent(s,"jwt"),new Promise(((e,t)=>{this.connector.onOpen((()=>a(this,void 0,void 0,(function*(){m.logDebug("1. connector on open"),m.reportLog("1. connect ws open");const o=(new Date).getTime();(0,y.logDebug)("ConnectTime---open->",o-this.timeLog),this.events.once(this.packageId.toString(),(o=>a(this,void 0,void 0,(function*(){if(o&&o.error){m.logError("failed when login"),m.reportLog("2. connect login failed"),yield this.connector.disconnect();var s=new Error;s.message=o.error.message,s.name=o.error.code.toString(),t(s)}this.refreshPackageId(),this.events.once(this.packageId.toString(),(o=>a(this,void 0,void 0,(function*(){if(o&&o.error){m.logError("failed when subscribe"),m.reportLog("3. connect subscribe failed"),yield this.connector.disconnect();var s=new Error;s.message=o.error.message,s.name=o.error.code.toString(),t(s)}this.refreshPackageId(),m.logDebug(`4. subscribe callback then send fetch: ${this.packageId}`),m.reportLog("4. subscribe callback then send fetch");const i=(new Date).getTime();(0,y.logDebug)("ConnectTime--subscribe callback->",i-this.timeLog),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),n),e()})))),m.logDebug(`3. login callback then send subscribe: ${this.packageId}`),m.reportLog("3. connect subscribe failed");const i=(new Date).getTime();(0,y.logDebug)("ConnectTime---login callback->",i-this.timeLog),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),t(e)}))}))),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_SUB,params:{topic:n}})})))),m.logDebug("2. login called"),m.reportLog("2. connection manager connect call login"),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),t(e)}))}))),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_LOGIN,params:{token:s}}),this.connector.addPackageParse((e=>{var t;if(m.logDebug("connect: parse package"),m.logDebug(e),!("params"in e)||!("data"in e["params"]))return void this.parsePackage(e,!0);let n=null===(t=e.params.data)||void 0===t?void 0:t.message;if("undefined"!==typeof n){n=n.replace(/'/g,'"');let e=(0,_.safeJsonParse)(n);"string"!==typeof e&&"clientId"in e&&e.clientId&&e.clientId.length>0&&(this.connectedWalletPK=e.clientId,m.logDebug(`this.connectedWalletPK  addPackageParse   ${this.connectedWalletPK}`),this.connectStorage.saveContent(this.connectedWalletPK,l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.saveCryptoKeyPair(this.crypto.stringifyKeypair()))}this.parsePackage(e,e.method===c.CONNECT_METHOD_RECEIVE)}))})))),this.connector.connect().catch((e=>{(0,y.logDebug)("ConnectionManager connect error",e),t(e)}))}))}))}disconnect(){return a(this,arguments,void 0,(function*(e=!1){yield this.connector.disconnect(),m.reportLog("connect disconnect"),this.connectStorage.clearCache(l.OKXCONNECTOR_TOKEN_CACHE),e||(this.connectStorage.clearCache(l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),this.connectedWalletPK="",(0,y.logDebug)(`connectionManager disconnect() this.connectedWalletPK : ${this.connectedWalletPK}`))}))}addListener(e,t,n){this.connector.addListener((0,_.safeJsonStringify)(e),(e=>{if(e=e.replace(/'/g,'"'),m.logDebug(`addListener ===> ${e}`),"undefined"!==typeof e){var t=(0,_.safeJsonParse)(e),n=t.message;let o;return n.trimStart().startsWith("{")?o=n:(t.clientId&&t.clientId.length>0&&(this.connectedWalletPK=t.clientId,this.connectStorage.saveContent(this.connectedWalletPK,l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE),m.logDebug(`this.connectedWalletPK  addListener   ${this.connectedWalletPK}`),m.logDebug(`this.cryptoKey  addListener   ${(0,p.toHexString)(this.crypto.keyPair.publicKey)}`),this.saveCryptoKeyPair(this.crypto.stringifyKeypair())),o=this.crypto.decrypt(n,this.connectedWalletPK)),m.logDebug(`addListener ===> ${o}`),o}}),t,n)}sendRaw(e){return a(this,void 0,void 0,(function*(){m.logDebug(`message send =====> ${e}`),m.reportLog("connect send raw msg");let t=e;m.logDebug(`message send =====encrypt message.length>>>> ${t.length}`);let n=this.connectStorage.getItem(l.OKXCONNECTOR_TOKEN_CACHE);m.logDebug(`message send =====topic>>>> ${null===n||void 0===n?void 0:n.content}`),this.refreshPackageId();const o={id:this.packageId.toString(),method:c.CONNECT_METHOD_PUBLISH,jsonrpc:u.CONNECT_JSONRPC_VER,params:{message:{topic:null===n||void 0===n?void 0:n.content,message:t,ttl:u.OKXCONNECTOR_MESSAGE_TTL}}};return this.events.once(this.packageId.toString(),(e=>a(this,void 0,void 0,(function*(){e&&e.error?m.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&m.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o),this.packageId}))}send(e){return a(this,arguments,void 0,(function*(e,t=u.OKXCONNECTOR_MESSAGE_TTL){if(m.logDebug(`message send =====> ${e}`),m.reportLog("connect send msg"),!this.isWalletPKReady())throw new Error("connection not finish");let n=this.crypto.encrypt(e,this.connectedWalletPK);m.logDebug(`message send =====encrypt message.length>>>> ${n.length}`),m.reportEvent(C.OKXReportType.LOG,"msg_size",n.length.toString());let o=this.connectStorage.getItem(l.OKXCONNECTOR_TOKEN_CACHE);m.logDebug(`message send =====topic>>>> ${null===o||void 0===o?void 0:o.content}`),this.refreshPackageId();const s={id:this.packageId.toString(),method:c.CONNECT_METHOD_PUBLISH,jsonrpc:u.CONNECT_JSONRPC_VER,params:{message:{topic:null===o||void 0===o?void 0:o.content,message:n,ttl:t}}};return this.events.once(this.packageId.toString(),(e=>a(this,void 0,void 0,(function*(){e&&e.error?m.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&m.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),s),this.packageId}))}sendACK(e,t){return a(this,arguments,void 0,(function*(e,t,n=void 0){if(!0===t){const t={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(n){const t={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,error:{code:n.code,message:n.message}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}))}sendReceive(e,t,n){return a(this,void 0,void 0,(function*(){const o={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}sendConnectSessionInfo(e,t,n,o){return a(this,void 0,void 0,(function*(){}))}sendFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,(function*(){this.events.once(e,(e=>a(this,void 0,void 0,(function*(){var n,o;if(e.result){var s=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let n=i[e];if(n&&n.topic==t){let e=n.messageId;m.reportLog("5. get fetch result"),yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}s&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else m.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(o=e.error)||void 0===o?void 0:o.message}`)})))),m.logDebug("5. send fetch more"),m.reportLog("5. send fetch more");const n=(new Date).getTime();(0,y.logDebug)("ConnectTime---5->",n-this.timeLog);const o={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return m.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}cleanCache(){return a(this,void 0,void 0,(function*(){m.reportLog("connection cache clean called"),this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(l.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,_.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t){let e=(0,_.safeJsonParse)(t);return e}}getCurrentConnectionReady(){return this.isWalletPKReady()}}t.ConnectionManager=O},61174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorState=t.CONNECT_JSONRPC_VER=t.OKXCONNECTOR_MESSAGE_TTL=t.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE=t.OKXCONNECTOR_WS_URL_LIST=t.OKXCONNECTOR_WS_URL_IDX_KEY=t.OKXCONNECTOR_WS_URL_3=t.OKXCONNECTOR_WS_URL_2=t.OKXCONNECTOR_WS_URL_1=t.EVENT_EMITTER_MAX_LISTENERS=void 0,t.EVENT_EMITTER_MAX_LISTENERS=10,t.OKXCONNECTOR_WS_URL_1="wss://wsdexpri.okx.com/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_2="wss://wsdexpri.okx.ac/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_3="wss://wsdexpri.coinall.ltd/ws/v1/wallet-connect-relay",t.OKXCONNECTOR_WS_URL_IDX_KEY="wuik",t.OKXCONNECTOR_WS_URL_LIST=[t.OKXCONNECTOR_WS_URL_1,t.OKXCONNECTOR_WS_URL_2,t.OKXCONNECTOR_WS_URL_3],t.OKXCONNECTOR_WS_URL_PENDING_CLOSE_CODE={TIME_OUT:3990,CANCELED:3991,FINISHED:3992},t.OKXCONNECTOR_MESSAGE_TTL=3e5,t.CONNECT_JSONRPC_VER="2.0",t.ConnectorState={InitState:0,Connecting:1,Connected:2,Disconnected:3,OnError:4}},24269:function(e,t,n){"use strict";n(41011),n(71433),n(99938),n(70354),n(27618),n(41011),n(71433),n(99938),n(70354),n(27618);var o=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function r(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Engine=void 0;const s=n(60529),i=n(23902),a=n(60075),r=n(31364),c=n(31364),l=n(594),d=n(95821);class u{constructor(e){this.pendingRequests=new Map,this.disconnectListener=[],this.connectionManager=e,(0,i.getDefaultReporter)().beginReport(),this.connectionManager.addListener("sdk_response",((e,t)=>{var n=(0,s.safeJsonParse)(t);(0,i.logDebug)(`Engine ==>> addListener ==> success ==> ${n}`),this.handleResponse(e,n)}),(function(){}))}addDisconnectListener(e){this.disconnectListener.push(e)}setSessionConnectingListener(e){this.sessionConnectingListener=e}disconnect(){(0,i.logDebug)("Engine ==>> disconnect"),this.pendingRequests.clear()}getRequestId(){const e=Date.now().toString();return(0,i.logDebug)("Engine ==>> getRequestId ==>",e),e}bindRequestForPromise(e,t){this.pendingRequests.set(e,t)}send(e,t,n,a){return o(this,void 0,void 0,(function*(){(0,i.logDebug)("Engine ==>> send  request==>",JSON.stringify(e));const n=this.getRequestId();try{let o=yield this.connectionManager.send(JSON.stringify(Object.assign(Object.assign({},e),{requestId:n})),a);this.connectionManager.events.once(o.toString(),(e=>{var n;(0,i.logDebug)(`Engine ==> send => onAck => ${(0,s.safeJsonStringify)(e)}`),e&&e.result&&(null===(n=t.onAck)||void 0===n||n.call(t))})),t.resolve&&this.bindRequestForPromise(n,t.resolve)}catch(o){return Promise.reject(o)}}))}sendSession(e){return o(this,void 0,void 0,(function*(){(0,i.logDebug)("[Connect] sendSession called:",e);const t=this.getRequestId();let n={method:"session_info",params:{sessionInfo:e}};yield this.connectionManager.sendRaw(JSON.stringify(Object.assign(Object.assign({},n),{requestId:t})))}))}handleResponse(e,t){if((0,i.logDebug)(`Engine ==>> handleResponse_1  ======>response: ${(0,s.safeJsonStringify)(t)}`,e),"requestId"in t){(0,i.logDebug)("Engine ==>> handleResponse_2  ===> in response");let e=t.requestId;const n=this.pendingRequests.get(e);n?((0,i.logDebug)("Engine ==>> handleResponse_3  ===> find resolve:",n),n(t),this.pendingRequests.delete(e)):((0,i.logDebug)("Engine ==>> handleResponse_3  ===> not find resolve:"),"disconnect"===t.method?(this.disconnectListener.forEach((e=>e())),this.disconnectListener=[],this.disconnect()):"session_connecting"===t.method&&((0,i.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener"),this.sessionConnectingListener&&((0,i.logDebug)("Engine ==>> handleResponse_4  ===> sessionConnectingListener not null"),this.sessionConnectingListener(),this.sessionConnectingListener=void 0)))}}restoreconnect(e,t){return o(this,void 0,void 0,(function*(){var n;yield null===(n=this.connectionManager)||void 0===n?void 0:n.restoreConnect(e.topic),t(e)}))}conect(e,t,n){return o(this,void 0,void 0,(function*(){var o,s;const l=this.connectionManager.getConnectInfo(),d=this.getRequestId();let u=null!==(o=t.openUniversalUrl)&&void 0!==o&&o;const g={protocolVer:Number(a.tonConnectSdkVersion),topic:l.channelId,clientId:l.clientId,requestId:d,dAppInfo:t.dappInfo,requests:e},f=JSON.stringify(g),p=(new TextEncoder).encode(f),h=btoa(String.fromCharCode(...p)),b=`${a.standardDeeplink}?param=${h}`;(0,i.logDebug)("engine ==>> connect ==>>deeplinkUrl:",b);const _=(0,c.isIos)();(0,i.logDebug)(`engine ==>> connect ==>>isIOS: ${_}   openUniversalLink: ${u}`),_&&u&&((0,i.logDebug)("bridge-provider ==>> connect_3"),(0,r.openOKXDeeplinkWithFallback)(b)),yield null===(s=this.connectionManager)||void 0===s?void 0:s.disconnect(!1),this.bindRequestForPromise(d,(e=>{let o=this.onConnect(e,t,l.channelId);n(o,e)}));try{yield this.connectionManager.connect()}catch(m){throw(0,i.logDebug)("Engine conect error",m),m}return!_&&u&&((0,i.logDebug)("bridge-provider ==>> connect_4"),(0,r.openOKXDeeplinkWithFallback)(b)),{connectInfo:l,deeplinkUrl:(0,r.getUniversalLink)(b)}}))}onConnect(e,t,n){if("connect"==e.method){let o=(0,l.buildNameSpacesByConnectResponse)(e);if(o){let e={topic:n,sessionConfig:t,namespaces:o};return e}}return null}universalConnect(e,t,n){return o(this,void 0,void 0,(function*(){return new Promise(((s,u)=>o(this,void 0,void 0,(function*(){var o,g,f,p;try{(0,i.logDebug)("engine universalConnect request :",JSON.stringify(e)),(0,i.logDebug)("engine universalConnect sessionConfig :",JSON.stringify(t));let _=[];e.forEach((e=>{let t=e.name;(t.startsWith("requestAccounts")||t.startsWith("ton"))&&_.push(e)})),(0,i.logDebug)("engine universalConnect universalRequest :",JSON.stringify(_));const m=this.connectionManager.getConnectInfo(),y=this.getRequestId();let C=null!==(o=t.openUniversalUrl)&&void 0!==o&&o;const v={protocolVer:Number(a.tonConnectSdkVersion),topic:m.channelId,clientId:m.clientId,requestId:y,dAppInfo:t.dappInfo,requests:_,redirect:null!==(g=null===t||void 0===t?void 0:t.redirect)&&void 0!==g?g:"none"},O=(0,d.encodeConnectParams)(v);v.redirect=null!==(f=null===t||void 0===t?void 0:t.redirect)&&void 0!==f?f:"none",(0,i.logDebug)("engine universalConnect ==>>universalConnectRequest:",JSON.stringify(v));var h="";C&&(h=(0,d.getOKXLink)(v,t.useMini,t.tmaReturnUrl),(0,i.logDebug)("engine universalConnect ==>>openOKXLink:",h));const k=()=>t.useMini?(0,d.openOKXTMAWalletlinkWithFallback)(h):(0,r.useShortLink)()?(0,r.openOKXUniversalLink)(h):(0,r.openOKXDeeplinkWithFallback)(h);(0,i.logDebug)("engine universalConnect ==>>openOKXLink:",h);const T=(0,c.isIos)();T&&C&&((0,i.logDebug)(`engine universalConnect ==>>isIOS: ${T}   openUniversalLink: ${C}`),k()),yield null===(p=this.connectionManager)||void 0===p?void 0:p.disconnect(!1),this.bindRequestForPromise(y,(e=>{var n,o,r,c;try{let d=e;if("connect"==d.method){(0,i.logDebug)("engin  universalConnect success connectResponse:>>>",JSON.stringify(d));let e=(0,l.buildNameSpacesByConnectResponse)(d);if(!e)throw new a.OKXConnectError(a.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR);{let a;(null===(o=null===(n=d.payload)||void 0===n?void 0:n.responses)||void 0===o?void 0:o[0])&&"walletName"in d.payload.responses[0]&&(a=d.payload.responses[0]["walletName"]);let c={topic:m.channelId,sessionConfig:t,namespaces:e,wallet:Object.assign(Object.assign({},null===(r=d.payload)||void 0===r?void 0:r.wallet),{walletName:a})},l=d.payload.responses.find((e=>"requestAccounts"===e.name));l&&l.connectRequestMethods&&(c.signResponse=l.connectRequestMethods),(0,i.logDebug)("engin  universalConnect success session:>>>",JSON.stringify(c)),s(c)}}else if("connect_error"==d.method&&(null===(c=d.payload)||void 0===c?void 0:c.code))throw new a.OKXConnectError(d.payload.code)}catch(d){u(d)}}));try{yield this.connectionManager.connect()}catch(b){throw(0,i.logDebug)("Engine universalConnect error",b),b}if(!T&&C&&k(),(0,i.logDebug)("engin  universalConnect ==>> connectInfoAndUrl:",n),this.sendSession(O),n){const e={connectRequest:v,redirect:t.redirect,tmaReturnUrl:t.tmaReturnUrl};(0,i.logDebug)("universalConnect connectInfoAndUrl info :",JSON.stringify(e)),n(e)}}catch(_){(0,i.logDebug)("Engine universalConnect catch error",_),u(_)}}))))}))}}t.Engine=u},94643:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.Engine=t.WalletConnectionManager=t.ConnectionManager=t.OKXWalletConnector=void 0;var o=n(86209);Object.defineProperty(t,"OKXWalletConnector",{enumerable:!0,get:function(){return o.OKXWalletConnector}});var s=n(9908);Object.defineProperty(t,"ConnectionManager",{enumerable:!0,get:function(){return s.ConnectionManager}});var i=n(57519);Object.defineProperty(t,"WalletConnectionManager",{enumerable:!0,get:function(){return i.WalletConnectionManager}});var a=n(24269);Object.defineProperty(t,"Engine",{enumerable:!0,get:function(){return a.Engine}});var r=n(43138);Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return r.Storage}})},40742:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function r(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MULTICODEC_ED25519_LENGTH=t.MULTICODEC_ED25519_HEADER=t.MULTICODEC_ED25519_BASE=t.MULTICODEC_ED25519_ENCODING=t.DID_METHOD=t.DID_PREFIX=t.DID_DELIMITER=t.KEY_PAIR_SEED_LENGTH=t.DATA_ENCODING=t.JSON_ENCODING=t.JWT_ENCODING=t.JWT_DELIMITER=t.JWT_IRIDIUM_TYP=t.JWT_IRIDIUM_ALG=t.JWTHeaderType=void 0,t.generateKeyPair=p,t.decodeJSON=h,t.encodeJSON=b,t.encodeIss=_,t.decodeIss=m,t.encodeSig=y,t.decodeSig=C,t.encodeData=v,t.decodeData=O,t.encodeJWT=k,t.decodeJWT=T,t.signJWT=w,t.verifyJWT=E;const c=i(n(25806)),l=n(60529),d=n(57837),u=r(n(77361)),g=i(n(23902)),f=n(98650);function p(){return u.default.sign.keyPair()}function h(e){return(0,l.safeJsonParse)((0,f.okxtoString)((0,f.okxfromString)(e,t.JWT_ENCODING),t.JSON_ENCODING))}function b(e){return(0,f.okxtoString)((0,f.okxfromString)((0,l.safeJsonStringify)(e),t.JSON_ENCODING),t.JWT_ENCODING)}function _(e){g.logDebug(`publicKey: ${(0,d.toHexString)(e)}`);var n=(0,f.okxtoString)(e,t.MULTICODEC_ED25519_ENCODING);return[t.DID_PREFIX,t.DID_METHOD,n].join(t.DID_DELIMITER)}function m(e){const[n,o,s]=e.split(t.DID_DELIMITER);if(n!==t.DID_PREFIX||o!==t.DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(void 0===s)throw new Error("multicodec is undefined");const i=(0,f.okxfromString)(s,t.MULTICODEC_ED25519_ENCODING);if(void 0===i||i.length!==t.MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return i}function y(e){return(0,f.okxtoString)(e,t.JWT_ENCODING)}function C(e){return(0,f.okxfromString)(e,t.JWT_ENCODING)}function v(e){return(0,f.okxfromString)([b(e.header),b(e.payload)].join(t.JWT_DELIMITER),t.DATA_ENCODING)}function O(e){var n,o;const s=(0,f.okxtoString)(e,t.DATA_ENCODING).split(t.JWT_DELIMITER),i=h(null!==(n=s[0])&&void 0!==n?n:"{}"),a=h(null!==(o=s[1])&&void 0!==o?o:"{}");return{header:i,payload:a}}function k(e){return[b(e.header),b(e.payload),y(e.signature)].join(t.JWT_DELIMITER)}function T(e){var n,o,s;const i=e.split(t.JWT_DELIMITER),a=h(null!==(n=i[0])&&void 0!==n?n:"{}"),r=h(null!==(o=i[1])&&void 0!==o?o:"{}"),c=C(null!==(s=i[2])&&void 0!==s?s:"{}"),l=(0,f.okxfromString)(i.slice(0,2).join(t.JWT_DELIMITER),t.DATA_ENCODING);return{header:a,payload:r,signature:c,data:l}}function w(e,n,o,s){return a(this,arguments,void 0,(function*(e,n,o,s,i=Math.floor(Date.now())){const a={alg:t.JWT_IRIDIUM_ALG,typ:t.JWT_IRIDIUM_TYP},r=_(s.publicKey),c=i+o,l="authenticate user",d={iss:r,sub:e,aud:n,act:l,iat:i,exp:c},f=v({header:a,payload:d});g.logDebug(`get sec kp: ${s.secretKey} {${s.secretKey.length}}`);const p=u.default.sign.detached(f,s.secretKey);return k({header:a,payload:d,signature:p})}))}function E(e){return a(this,void 0,void 0,(function*(){const{header:n,payload:o,data:s,signature:i}=T(e);if(n.alg!==t.JWT_IRIDIUM_ALG||n.typ!==t.JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const a=m(o.iss);return c.verify(a,s,i)}))}t.JWTHeaderType="dapp",t.JWT_IRIDIUM_ALG="EdDSA",t.JWT_IRIDIUM_TYP="JWT",t.JWT_DELIMITER=".",t.JWT_ENCODING="base64url",t.JSON_ENCODING="utf8",t.DATA_ENCODING="utf8",t.KEY_PAIR_SEED_LENGTH=32,t.DID_DELIMITER=":",t.DID_PREFIX="did",t.DID_METHOD="key",t.MULTICODEC_ED25519_ENCODING="base58btc",t.MULTICODEC_ED25519_BASE="z",t.MULTICODEC_ED25519_HEADER="K36",t.MULTICODEC_ED25519_LENGTH=32},27125:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_JWT_TTL=t.OKXCONNECTOR_JWT_WALLET_SIDE=t.OKXCONNECTOR_JWT_SIDE=void 0,t.OKXCONNECTOR_JWT_SIDE="wallet",t.OKXCONNECTOR_JWT_WALLET_SIDE="dapp",t.OKXCONNECTOR_JWT_TTL=864e5},594:function(e,t,n){"use strict";n(41011),n(71433),n(99938),n(70354),n(41011),n(71433),n(99938),n(70354),Object.defineProperty(t,"__esModule",{value:!0}),t.buildNameSpacesByConnectResponse=s,t.buildRequestAccountNameSpacesByConnectResponse=i;const o=n(23902);function s(e){let t=i(e);return t}function i(e){let t={};(0,o.logDebug)("buildRequestAccountNameSpacesByConnectResponse start connectResponse111>>",JSON.stringify(e));let n=e.payload.responses.find((e=>"requestAccounts"===e.name));if(n&&n.accounts){let e=[];for(const t of n.accounts)"ton"===t.namespace?t.data&&t.data.ton_addr&&t.data.ton_addr.address&&t.data.ton_addr.address.length>0&&((0,o.logDebug)("buildRequestAccountNameSpacesByConnectResponse start TON>>",JSON.stringify(t)),e.push(t)):((0,o.logDebug)("buildRequestAccountNameSpacesByConnectResponse start other>>",JSON.stringify(t)),e.push(t));n.accounts=e}const s=e.payload.responses.find((e=>"ton_addr"===e.name)),i=e.payload.responses.find((e=>"ton_proof"===e.name));if(s&&!n){(0,o.logDebug)("buildRequestAccountNameSpacesByConnectResponse adapt ton data >>");let e=s.address;e="ton:"+s.network+":"+e;let t={ton_addr:s};i&&(t.ton_proof=i),n={name:"requestAccounts",accounts:[{namespace:"ton",addresses:[e],methods:["ton_sendTransaction"],extra:{},data:t}]}}return(0,o.logDebug)("buildRequestAccountNameSpacesByConnectResponse end universalResponse>>>",JSON.stringify(n)),n.accounts.forEach((e=>{var n=[],s=[];e.addresses.forEach((e=>{var t=e.split(":");if((0,o.logDebug)("buildRequestAccountNameSpacesByConnectResponse addressArr>>",t.length),t.length>=3){let i=t.slice(0,2).join(":");n.push(i),s.push(e),(0,o.logDebug)("buildRequestAccountNameSpacesByConnectResponse chain:>>",i,"addressItem:",e)}})),e.data&&e.data.ton_addr&&(e.data.ton_addr.name="ton_addr"),e.data&&e.data.ton_proof&&(e.data.ton_proof.name="ton_proof"),t[e.namespace]={chains:n,accounts:s,methods:e.methods,extra:e.extra,payload:e.data},(0,o.logDebug)("buildRequestAccountNameSpacesByConnectResponse result>>",JSON.stringify(t))})),t}},43138:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;const r=n(64321),c=a(n(77361)),l=n(57837),d=n(31364),u=i(n(23902)),g=n(31364),f=n(50054);class p{constructor(e,t=void 0){const n=(0,l.resolveLocalStorage)();u.logDebug("------ update before cache ------"),t&&this.checkAndUpgradeCache(t,e),this.storeKey="",this.cipherIV="",this.subKey=e,u.logDebug("--------get current local storage --------"),u.logDebug(n);const o=n.getItem(p.cacheKey+e);if("undefined"===typeof o||null===o)return u.logDebug("with no cache"),void(this.cache={});if(u.logDebug(o),(null===o||void 0===o?void 0:o.length)>0){var s=(0,d.safeJsonParse)(o);this.cache=s}u.logDebug(`get cache obj: ${this.cache}`),"undefined"!==typeof this.cache&&null!=this.cache||(this.cache={})}checkAndUpgradeCache(e,t){if(e&&e.length>0&&t&&t.length>0){u.logDebug("--------get current local storage --------"),u.logDebug(localStorage);const n=localStorage.getItem(p.cacheKey+e);if("undefined"===typeof n||null===n)return void u.logDebug("no pre cache content");u.logDebug(n),(null===n||void 0===n?void 0:n.length)>0&&(u.logDebug("write in cache content: ",e,"->",t),localStorage.setItem(p.cacheKey+t,n),u.logDebug("clean in cache content: ",e),localStorage.removeItem(p.cacheKey+e))}else u.logDebug("no pre cache key:",e)}saveContent(e,t,n="-"){let o={id:n,timestamp:Date.now().toString(),content:e};this.saveItem(o,t)}saveItem(e,t){let n=p.cacheKey+this.subKey;const o=(0,l.resolveLocalStorage)();u.logDebug(this.cache),u.logDebug(`get cache obj: ${this.cache}, ${t}, ${e}`),this.cache[t]=e;let s=(0,d.safeJsonStringify)(this.cache);u.logDebug(`STORAGE: ${t} @ ${this.cache}`),o.setItem(n,s)}getItem(e){return u.logDebug(`STORAGE >> getItem: ${e} @ ${this.cache}`),this.cache[e]}getCachedPBKDF2InfoKey(){var e,t,n,o;const s=32,i=24;if(this.storeKey.length>0&&(null===(e=this.cipherIV)||void 0===e?void 0:e.length)>0)return{pw:this.storeKey,iv:this.cipherIV};let a=null===(t=this.getItem(r.OKXCONNECTOR_STORAGER_CRYPTO_SALT))||void 0===t?void 0:t.content;a||(a=(0,l.toHexString)(c.default.randomBytes(i)),this.saveContent(a,r.OKXCONNECTOR_STORAGER_CRYPTO_SALT));let d=null===(n=this.getItem(r.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD))||void 0===n?void 0:n.content;d||(d=(0,l.toHexString)(c.default.randomBytes(s)),this.saveContent(d,r.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD));let u=null===(o=this.getItem(r.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV))||void 0===o?void 0:o.content;if(!u){let e=c.default.randomBytes(16);u=(0,l.toHexString)(e),this.saveContent(u,r.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV)}return this.cipherIV=u,this.storeKey=(0,f.PBKDF2)(d,a,{iterations:10}).toString(),{pw:this.storeKey,iv:this.cipherIV}}encryptStoreMsg(e,t){(0,g.logDebug)(`encryptStoreMsg  encryptStoreMsg start ${Date.now()}`);let n=this.getCachedPBKDF2InfoKey();(0,g.logDebug)(`encryptStoreMsg  encryptStoreMsg mid ${Date.now()}`);var o=f.AES.encrypt(e,n.pw).toString();this.saveContent(o,t),(0,g.logDebug)(`encryptStoreMsg  encryptStoreMsg end ${Date.now()}`)}getAndDecrypt(e){(0,g.logDebug)(`encryptStoreMsg  getAndDecrypt start ${Date.now()}`);let t=this.getItem(e);if(t&&t.content){let e=this.getCachedPBKDF2InfoKey();(0,g.logDebug)(`encryptStoreMsg  getAndDecrypt mid ${Date.now()}`);let n=f.AES.decrypt(t.content,e.pw).toString(f.enc.Utf8);return(0,g.logDebug)(`encryptStoreMsg  getAndDecrypt end ${Date.now()}`),n}return null}clearCache(e=void 0){if(void 0===e){this.cache={};let e=p.cacheKey+this.subKey;localStorage.setItem(e,"")}else{let t=p.cacheKey+this.subKey;const n=(0,l.resolveLocalStorage)();u.logDebug(this.cache),this.cache[e]=null;let o=(0,d.safeJsonStringify)(this.cache);u.logDebug(`STORAGE: clean key ${e} @ ${this.cache}`),n.setItem(t,o)}}}t.Storage=p,p.cacheKey="OKXStorageKey"},64321:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKXCONNECTOR_STORAGE_CIPHER_METHOD=t.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV=t.OKXCONNECTOR_STORAGER_CRYPTO_SALT=t.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD=t.OKXCONNECTOR_TON_KEY=t.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE=t.OKXCONNECTOR_TOKEN_CACHE=t.OKXCONNECTOR_JWT_KEY=t.OKXCONNECTOR_SESSION_PREFIX_KEY=t.OKXCONNECTOR_CRYPTO_KEY=t.OKXCONNECTOR_CACHE_KEY_DAPP=t.OKXCONNECTOR_CACHE_KEY=void 0,t.OKXCONNECTOR_CACHE_KEY="ck",t.OKXCONNECTOR_CACHE_KEY_DAPP="ck_dapp",t.OKXCONNECTOR_CRYPTO_KEY="cck_k",t.OKXCONNECTOR_SESSION_PREFIX_KEY="cspk_",t.OKXCONNECTOR_JWT_KEY="cjk_k",t.OKXCONNECTOR_TOKEN_CACHE="ct",t.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE="csp",t.OKXCONNECTOR_TON_KEY="OKXStorage_ctc",t.OKXCONNECTOR_STORAGE_CRYPTO_PASSWORD="scp",t.OKXCONNECTOR_STORAGER_CRYPTO_SALT="scs",t.OKXCONNECTOR_STORAGE_CRYPTO_CIPHERIV="scpc",t.OKXCONNECTOR_STORAGE_CIPHER_METHOD="aes-256-cbc"},90465:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnectionManagerEvent=t.WalletConnectionManagerTopicInfoCacheKey=void 0,t.WalletConnectionManagerTopicInfoCacheKey="wcmtic",t.WalletConnectionManagerEvent={RECEIVE_REQUEST:"payload"}},57519:function(e,t,n){"use strict";n(41011),n(41011);var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return s(t,e),t},a=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function r(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletConnectionManager=void 0;const r=n(86209),c=n(80385),l=n(64321),d=n(27125),u=n(61174),g=n(90465),f=n(55282),p=n(43138),h=n(57837),b=n(97737),_=n(40742),m=n(60529),y=i(n(23902)),C=n(23902),v=n(31364);class O{constructor(){this.events=new f.EventEmitter,this.communicateEvents=new f.EventEmitter,y.logDebug("connect manager construct"),this.connectStorage=new p.Storage(l.OKXCONNECTOR_CACHE_KEY),this.jwtKeyPair=this.getCachedJWTKeyPair(),this.saveJWTKeyPair(this.jwtKeyPair),this.connector=new r.OKXWalletConnector(u.OKXCONNECTOR_WS_URL_1),this.packageId=Date.now(),this.sessionCryptoInfoMap=new Map,this.inLogin=!1,this.isLogined=!1}refreshPackageId(e=0){this.packageId=Date.now()+e}saveCryptoKeyPair(e,t){let n=(0,m.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_CRYPTO_KEY+e)}getCachedCryptoKeyPair(e){const t=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_CRYPTO_KEY+e),n=t;if("string"==typeof n){y.logDebug("get cached crypto key:"),y.logDebug(n);let e=(0,m.safeJsonParse)(n);return e}return this.connectStorage.clearCache(),null}saveJWTKeyPair(e){var t={publicKey:(0,h.toHexString)(e.publicKey),secretKey:(0,h.toHexString)(e.secretKey)};y.logDebug("save jwt kp");let n=(0,m.safeJsonStringify)(t);y.logDebug(n),this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_JWT_KEY),y.logDebug("after save jwt kp")}getCachedJWTKeyPair(){const e=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_JWT_KEY),t=e;if("string"==typeof t){y.logDebug("get cached jwt kp:"),y.logDebug(t);let e=(0,m.safeJsonParse)(t);y.logDebug("save jwt kp"),y.logDebug(e);var n={publicKey:(0,h.hexToByteArray)(e.publicKey),secretKey:(0,h.hexToByteArray)(e.secretKey)};return n}return(0,_.generateKeyPair)()}isTopicPublicKeyExist(e){return y.logDebug(`isTopicPublicKeyExist  ===> ${e}`),this.sessionCryptoInfoMap.get(e)}makeJWT(e){return a(this,void 0,void 0,(function*(){return yield(0,_.signJWT)(e,d.OKXCONNECTOR_JWT_WALLET_SIDE,d.OKXCONNECTOR_JWT_TTL,this.jwtKeyPair)}))}parseInternalMsg(e){try{let t=(0,m.safeJsonParse)(e),n=t["ivur-igbfft-ptjip"];if(n&&n.length>0){let e=(0,v.base64decode)(n,!0);return e.toString()}}catch(t){y.logError("parse internal msg",t)}}updateClientId(e,t){let n=this.sessionCryptoInfoMap.get(e);if((0,C.logDebug)("updateClientId",n,e,t),n&&t&&t.length>0){if(n.cid){let o=(0,h.getLastSixMd5Hash)(t);n.cid==o?n.dappPublicKey=t:y.logError("cid check failed",n,e,t)}else n.dappPublicKey=t;this.syncCacheSessionInfo()}return!1}parsePackage(e,t){return a(this,arguments,void 0,(function*(e,t,n=!1){var o,s,i,a,r,c,l,d,u,g,f;this.events.emit(t.id,t);let p=this.sessionCryptoInfoMap.get(e);if(y.logDebug("get sessionInfo for decrypt topic:",e),y.logDebug("get sessionInfo for decrypt:",t.id,e,p,this.sessionCryptoInfoMap),p&&t.params.data&&(null===(o=t.params.data)||void 0===o?void 0:o.message))if(null===(s=t.params.data)||void 0===s?void 0:s.isInternalData){let e=null===(i=t.params.data)||void 0===i?void 0:i.message,n=null===(a=t.params.data)||void 0===a?void 0:a.topic,o=this.parseInternalMsg(e);(0,C.logDebug)("parse internal origin: ",o),o&&o.length>0&&this.communicateEvents.emit("origin",o,n)}else try{let n=null===(r=t.params.data)||void 0===r?void 0:r.message;if(n.trimStart().startsWith("{")){let t=(0,m.safeJsonParse)(n);if(t.method){if("session_info"==t.method){let n=t.params.sessionInfo,o=(0,v.base64decode)(n,!1);(0,C.logDebug)("wallet connection manager requset base64Content:",o),(0,C.logDebug)("base64Content:"+o);let s=o.toObject();this.updateClientId(e,s.clientId)}(0,C.logDebug)("<<< parse raw msg:",e,t),this.communicateEvents.emit(e,n)}}else{let n=p.crypto.decryptWallet(null===(c=t.params.data)||void 0===c?void 0:c.message,p.dappPublicKey);(0,C.logDebug)("<<< receive msg:",e,n),this.communicateEvents.emit(e,n)}}catch(h){let n=p.crypto.decryptWallet(null===(l=t.params.data)||void 0===l?void 0:l.message,p.dappPublicKey);(0,C.logDebug)("<<< receive msg:",e,n),this.communicateEvents.emit(e,n)}if(!n&&(yield this.sendACK(t.id,!0),e)){let n=t;(null===(u=null===(d=n.params)||void 0===d?void 0:d.data)||void 0===u?void 0:u.messageId)&&(this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),null===(f=null===(g=n.params)||void 0===g?void 0:g.data)||void 0===f?void 0:f.messageId,e))}}))}recovrySessionInfoFromCache(){let e=this.connectStorage.getAndDecrypt(g.WalletConnectionManagerTopicInfoCacheKey);if(y.logDebug("get cached sessionInfos:",e),e){let t=(0,m.safeJsonParse)(e);for(let e in t){let n=t[e];y.logDebug("make topicItem:",n);let o={topic:e,crypto:new b.SessionCrypto({publicKey:n.cryptoKeyPair.publicKey,secretKey:n.cryptoKeyPair.secretKey}),dappPublicKey:n.dappPublicKey,cid:n.cid};this.sessionCryptoInfoMap.set(e,o)}}y.logDebug("get cached sessionInfos map:",this.sessionCryptoInfoMap)}syncCacheSessionInfo(){let e={};for(let[n,o]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",n),o&&(e[n]={cryptoKeyPair:o.crypto.stringifyKeypair(),dappPublicKey:o.dappPublicKey,cid:o.cid});let t=(0,m.safeJsonStringify)(e);y.logDebug("sync cache sessionInfos:",t),this.connectStorage.encryptStoreMsg(t,g.WalletConnectionManagerTopicInfoCacheKey)}cacheSessionInfo(e,t,n=!0){let o=t.dappPublicKey,s=[];for(let[i,a]of this.sessionCryptoInfoMap)y.logDebug("for each Keys",i),a.dappPublicKey==o&&(y.logDebug("duplicated dapp public key:",i,o),s.push(i));for(let[i,a]of this.sessionCryptoInfoMap)s.includes(i)&&this.sessionCryptoInfoMap.delete(i);return y.logDebug("cleaned connect session cache:",this.sessionCryptoInfoMap),this.sessionCryptoInfoMap.set(e,t),y.logDebug("cache sessionInfo:",e,t,this.sessionCryptoInfoMap),n&&this.syncCacheSessionInfo(),s}appendTopic(e,t,n){return a(this,void 0,void 0,(function*(){return(0,C.logDebug)("4.1. get append Topic:",e),new Promise(((o,s)=>a(this,void 0,void 0,(function*(){if(!this.isLogined){var i=new Error;return i.message="connection is not logined",i.name="append error",void s(i)}let a={topic:e,crypto:new b.SessionCrypto,dappPublicKey:t||"",cid:n},r=this.cacheSessionInfo(e,a,!1);yield this.subscribeTopics(Array.from([e])),this.refreshPackageId(),y.logDebug(`5. subscribe callback then fetch append message: ${this.packageId}, ${e}`),y.reportLog("5. subscribe callback then fetch append message");const c=(new Date).getTime();(0,C.logDebug)("Append --subscribe callback->",c-this.timeLog),o(r)}))))}))}confirmAppendingTopics(){this.syncCacheSessionInfo()}connect(){return a(this,void 0,void 0,(function*(){this.timeLog=(new Date).getTime(),(0,C.logDebug)("[Wallet] ConnectTime---enter->",this.timeLog),y.reportLog("wallet connect connect called");let e=Date.now().toString();var t=yield this.makeJWT(e);return y.logDebug(`generate jwt token: ${t}`),this.connectStorage.saveContent(t,"jwt"),this.recovrySessionInfoFromCache(),new Promise(((e,n)=>{this.inLogin=!0,this.connector.onOpen((()=>a(this,void 0,void 0,(function*(){y.logDebug("1. connector on open"),y.reportLog("1. wallet connect connect on open");const o=(new Date).getTime();(0,C.logDebug)("ConnectTime---open->",o-this.timeLog),this.events.once(this.packageId.toString(),(t=>a(this,void 0,void 0,(function*(){if(t&&t.error){y.logError("failed when login"),yield this.connector.disconnect();var o=new Error;o.message=t.error.message,o.name=t.error.code.toString(),n(o)}else this.isLogined=!0,e(),y.logDebug("3. subscribe cached topics",this.sessionCryptoInfoMap),y.reportLog("3. wallet connect connect subscribe cached topics"),this.sessionCryptoInfoMap.size>0&&(yield this.subscribeTopics(Array.from(this.sessionCryptoInfoMap.keys())))})))),y.logDebug("2. login called"),y.reportLog("2. wallet connect login called"),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_LOGIN,params:{token:t}})})))),this.connector.connect().catch((e=>{(0,C.logDebug)("WalletConnectionManager connect error",e),n(e)})),this.connector.addPackageParse((e=>{var t,n;y.logDebug("connect: parse package"),y.logDebug(e),"params"in e&&"data"in e["params"]?(null===(t=e.params.data)||void 0===t?void 0:t.topic)&&this.parsePackage(null===(n=e.params.data)||void 0===n?void 0:n.topic,e,e.method===c.CONNECT_METHOD_RECEIVE):this.parsePackage("",e,!0)}))}))}))}getSessionPublicKey(e){if(this.isTopicPublicKeyExist(e)){let t=this.sessionCryptoInfoMap.get(e);if(t)return(0,h.toHexString)(t.crypto.keyPair.publicKey)}}getCurrentCachedTopicIdList(){return Array.from(this.sessionCryptoInfoMap.keys())}disconnect(){return a(this,arguments,void 0,(function*(e=!1){yield this.connector.disconnect(),this.connectStorage.clearCache(l.OKXCONNECTOR_TOKEN_CACHE),e||this.connectStorage.clearCache(l.OKXCONNECTOR_CRYPTO_SENDER_PK_CACHE)}))}send(e,t){return a(this,arguments,void 0,(function*(e,t,n=!1,o=u.OKXCONNECTOR_MESSAGE_TTL,s=!1){var i,r;if(y.logDebug(`message send =====> ${t}`),!this.isTopicPublicKeyExist(e))throw new Error("connection not finish");let l,d=null===(i=this.sessionCryptoInfoMap.get(e))||void 0===i?void 0:i.dappPublicKey,g=null===(r=this.sessionCryptoInfoMap.get(e))||void 0===r?void 0:r.crypto;if(s&&(l={message:t}),g&&d&&!s){let e=g.encryptWallet(t,d);l={message:e}}if(l){n&&g&&(l.clientId=(0,h.toHexString)(g.keyPair.publicKey)),this.refreshPackageId();const t={id:this.packageId.toString(),method:c.CONNECT_METHOD_PUBLISH,jsonrpc:u.CONNECT_JSONRPC_VER,params:{message:{topic:e,message:(0,m.safeJsonStringify)(l),ttl:o}}};return this.events.once(this.packageId.toString(),(e=>a(this,void 0,void 0,(function*(){e&&e.error?y.logError(`@${(new Date).toUTCString()} >>> failed when send msg`):e&&!e.error&&y.logDebug(`CONNECTION @[${(new Date).toUTCString()}] >>> send msg with id ${this.packageId} successed`)})))),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t),this.packageId}}))}sendACK(e,t){return a(this,arguments,void 0,(function*(e,t,n=void 0){if(!0===t){const t={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,result:!0};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}else if(n){const t={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,error:{code:n.code,message:n.message}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),t)}}))}sendReceive(e,t,n){return a(this,void 0,void 0,(function*(){const o={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_RECEIVE,params:{data:{messageId:t,topic:n}}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}sendUnsubscribe(e){return a(this,void 0,void 0,(function*(){yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_UNSUB,params:{topic:e}}),this.sessionCryptoInfoMap.delete(e),this.syncCacheSessionInfo()}))}sendFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,(function*(){this.events.once(e,(e=>a(this,void 0,void 0,(function*(){var n,o;if(e.result){var s=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let n=i[e];if(n&&n.topic==t){let e=n.messageId;yield this.connector.getMsgPayloadFromHistory(n),this.refreshPackageId(),yield this.sendReceive(this.packageId.toString(),e,t)}}s&&(this.refreshPackageId(),yield this.sendFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(o=e.error)||void 0===o?void 0:o.message}`)})))),y.logDebug("5. send fetch more");const n=(new Date).getTime();(0,C.logDebug)("ConnectTime---5->",n-this.timeLog);const o={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_FETCHMSG,params:{data:{topic:t}}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}sendBatchFetchAndConsumeMessages(e,t){return a(this,void 0,void 0,(function*(){this.events.once(e,(e=>a(this,void 0,void 0,(function*(){var n,o;if(e.result){var s=e.result.hasMore,i=e.result.data;if(i)for(let e=0;e<i.length;e++){let t=i[e];if(t&&t.topic){let n=t.messageId;yield this.connector.getMsgPayloadFromHistory(t),this.refreshPackageId(e),yield this.sendReceive(this.packageId.toString(),n,t.topic)}}s&&(this.refreshPackageId(),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),t))}else y.logDebug(`CONNECT: get error rsp ${null===(n=e.error)||void 0===n?void 0:n.code} : ${null===(o=e.error)||void 0===o?void 0:o.message}`)})))),y.logDebug("5. send fetch more"),y.reportLog("5. send fetch more");const n=(new Date).getTime();(0,C.logDebug)("ConnectTime---5->",n-this.timeLog);const o={id:e,jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_BATCH_FETCHMSG,params:{topics:t,withInternalData:!0}};yield this.connector.send((()=>a(this,void 0,void 0,(function*(){y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),o)}))}cleanCache(){return a(this,void 0,void 0,(function*(){this.connectStorage.clearCache()}))}saveSessionContent(e,t){t||this.connectStorage.clearCache(l.OKXCONNECTOR_SESSION_PREFIX_KEY+e);let n=(0,m.safeJsonStringify)(t);this.connectStorage.encryptStoreMsg(n,l.OKXCONNECTOR_SESSION_PREFIX_KEY+e)}getSessionContent(e){let t=this.connectStorage.getAndDecrypt(l.OKXCONNECTOR_SESSION_PREFIX_KEY+e);if(t){let e=(0,m.safeJsonParse)(t);return e}}subscribeTopics(e){return a(this,void 0,void 0,(function*(){(0,C.logDebug)("4. topicid list",e),y.reportLog("4. topicid list"),this.refreshPackageId();const t=(new Date).getTime();return(0,C.logDebug)("ConnectTime--subscribe callback->",t-this.timeLog),new Promise(((t,n)=>a(this,void 0,void 0,(function*(){let n=0;for(let o=0;o<e.length;++o){let s=e[o];this.refreshPackageId(o),this.events.once(this.packageId.toString(),(i=>a(this,void 0,void 0,(function*(){if(i&&i.error){y.logError("failed when subscribe"),yield this.connector.disconnect();var a=new Error;a.message=i.error.message,a.name=i.error.code.toString(),n+=1,n==e.length&&t()}this.refreshPackageId(o);const r=(new Date).getTime();(0,C.logDebug)("ConnectTime--subscribe callback->",r-this.timeLog),n+=1,n==e.length&&(y.logDebug(`5. send fetch msg: ${this.packageId}, ${s}`),yield this.sendBatchFetchAndConsumeMessages(this.packageId.toString(),e),t())})))),y.logDebug(`3. login callback then send subscribe: ${this.packageId}, ${s}`),y.reportLog("3. login callback then send subscribe");const i=(new Date).getTime();(0,C.logDebug)("ConnectTime---login callback->",i-this.timeLog),yield this.connector.send((()=>a(this,void 0,void 0,(function*(){return y.logDebug("CONNECT: reconnect before send"),yield this.connector.connect()}))),{id:this.packageId.toString(),jsonrpc:u.CONNECT_JSONRPC_VER,method:c.CONNECT_METHOD_SUB,params:{topic:s}})}}))))}))}}t.WalletConnectionManager=O},97737:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionCrypto=void 0;const s=o(n(77361)),i=n(57837);class a{constructor(e=void 0){this.nonceLength=24,this.sessionKeyPair=e?this.createKeypairFromString(e):this.createKeypair()}createKeypair(){return s.default.box.keyPair()}createKeypairFromString(e){return{publicKey:(0,i.hexToByteArray)(e.publicKey),secretKey:(0,i.hexToByteArray)(e.secretKey)}}createNonce(){return s.default.randomBytes(this.nonceLength)}get keyPair(){return this.sessionKeyPair}encrypt(e,t){const n=(new TextEncoder).encode(e),o=this.createNonce(),a=s.default.box(n,o,(0,i.hexToByteArray)(t),this.keyPair.secretKey);let r=(0,i.concatUint8Arrays)(o,a);var c=(0,i.toHexString)(r),l=(new TextEncoder).encode(c);return(0,i.base64encode)(l,!1)}encryptWallet(e,t){const n=(new TextEncoder).encode(e),o=this.createNonce(),a=s.default.box(n,o,(0,i.hexToByteArray)(t),this.keyPair.secretKey);let r=(0,i.concatUint8Arrays)(o,a);return(0,i.base64encode)(r,!1)}decrypt(e,t){let n=(0,i.base64decode)(e,!0),o=n.toUint8Array();const[a,r]=(0,i.splitToUint8Arrays)(o,this.nonceLength),c=s.default.box.open(r,a,(0,i.hexToByteArray)(t),this.keyPair.secretKey);if(!c)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,i.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,i.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(c)}decryptWallet(e,t){let n=(0,i.base64decode)(e,!0),o=(0,i.hexToByteArray)(n.toString());const[a,r]=(0,i.splitToUint8Arrays)(o,this.nonceLength),c=s.default.box.open(r,a,(0,i.hexToByteArray)(t),this.keyPair.secretKey);if(!c)throw new Error(`Decryption error: \n message: ${e.toString()} \n sender pubkey: ${t.toString()} \n keypair pubkey: ${(0,i.toHexString)(this.keyPair.publicKey)} \n keypair secretkey: ${(0,i.toHexString)(this.keyPair.secretKey)}`);return(new TextDecoder).decode(c)}stringifyKeypair(){return{publicKey:(0,i.toHexString)(this.keyPair.publicKey),secretKey:(0,i.toHexString)(this.keyPair.secretKey)}}}t.SessionCrypto=a},65418:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(94643),t),s(n(60075),t),s(n(31364),t)},41414:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.IEngine=t.ISignClient=t.ISignClientEvents=t.IEngineEvents=void 0;const s=o(n(55282));class i extends s.default{constructor(){super()}}t.IEngineEvents=i;class a extends s.default{constructor(){super()}}t.ISignClientEvents=a;class r{constructor(e){this.data=e}}t.ISignClient=r;class c{constructor(e){this.client=e}}t.IEngine=c},11250:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.creatOKXMiniAppWalletInfo=t.creatOKXWalletInfo=t.ISignClientEvents=t.IEngine=t.IEngineEvents=t.ISignClient=t.getBigIntRpcId=t.formatJsonRpcRequest=t.isJsonRpcError=t.isJsonRpcResponse=t.parseConnectionError=t.isHttpUrl=t.formatJsonRpcError=void 0;var i=n(34196);Object.defineProperty(t,"formatJsonRpcError",{enumerable:!0,get:function(){return i.formatJsonRpcError}}),Object.defineProperty(t,"isHttpUrl",{enumerable:!0,get:function(){return i.isHttpUrl}}),Object.defineProperty(t,"parseConnectionError",{enumerable:!0,get:function(){return i.parseConnectionError}}),Object.defineProperty(t,"isJsonRpcResponse",{enumerable:!0,get:function(){return i.isJsonRpcResponse}}),Object.defineProperty(t,"isJsonRpcError",{enumerable:!0,get:function(){return i.isJsonRpcError}}),Object.defineProperty(t,"formatJsonRpcRequest",{enumerable:!0,get:function(){return i.formatJsonRpcRequest}}),Object.defineProperty(t,"getBigIntRpcId",{enumerable:!0,get:function(){return i.getBigIntRpcId}});var a=n(41414);Object.defineProperty(t,"ISignClient",{enumerable:!0,get:function(){return a.ISignClient}}),Object.defineProperty(t,"IEngineEvents",{enumerable:!0,get:function(){return a.IEngineEvents}}),Object.defineProperty(t,"IEngine",{enumerable:!0,get:function(){return a.IEngine}}),Object.defineProperty(t,"ISignClientEvents",{enumerable:!0,get:function(){return a.ISignClientEvents}}),s(n(72136),t);var r=n(65746);Object.defineProperty(t,"creatOKXWalletInfo",{enumerable:!0,get:function(){return r.creatOKXWalletInfo}}),Object.defineProperty(t,"creatOKXMiniAppWalletInfo",{enumerable:!0,get:function(){return r.creatOKXMiniAppWalletInfo}})},34196:function(e,t,n){"use strict";n(92806),n(53287),n(70039),n(70144),n(86823),n(51204),n(71433),n(99938),n(92806),n(53287),n(70039),n(70144),n(86823),n(51204),n(71433),n(99938);var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};function s(e){return"object"===typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function i(e){return s(e)&&"method"in e}function a(e){return s(e)&&(r(e)||c(e))}function r(e){return"result"in e}function c(e){return"error"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.isJsonRpcPayload=s,t.isJsonRpcRequest=i,t.isJsonRpcResponse=a,t.isJsonRpcResult=r,t.isJsonRpcError=c,t.payloadId=p,t.getBigIntRpcId=h,t.formatJsonRpcRequest=b,t.formatJsonRpcResult=_,t.formatJsonRpcError=m,t.isReservedErrorCode=y,t.getError=C,t.getErrorByCode=v,t.formatErrorMessage=O,t.isHttpUrl=w,t.isWsUrl=E,t.parseConnectionError=S;const l=n(40375),d=o(n(77361));class u{constructor(e){this.i=1;8===e?new Uint8Array(1):16===e?new Uint16Array(1):new Uint32Array(1);this.initialValue=e?d.default.randomBytes(e/8)[0]:0}getNextValue(){return this.initialValue+this.i++}}const g=new u(8),f=new u(16);function p(){const e=1e3*Date.now(),t=g.getNextValue();return e+t}function h(){const e=BigInt(Date.now())*BigInt(1e6),t=BigInt(f.getNextValue());return e+t}function b(e,t,n){return{id:n||p(),jsonrpc:"2.0",method:e,params:t}}function _(e,t){return{id:e,jsonrpc:"2.0",result:t}}function m(e,t,n){return{id:e,jsonrpc:"2.0",error:O(t,n)}}function y(e){return l.RESERVED_ERROR_CODES.includes(e)}function C(e){return Object.keys(l.STANDARD_ERROR_MAP).includes(e)?l.STANDARD_ERROR_MAP[e]:l.STANDARD_ERROR_MAP[l.DEFAULT_ERROR]}function v(e){const t=Object.values(l.STANDARD_ERROR_MAP).find((t=>t.code===e));return t||l.STANDARD_ERROR_MAP[l.DEFAULT_ERROR]}function O(e,t){return"undefined"===typeof e?C(l.INTERNAL_ERROR):("string"===typeof e&&(e=Object.assign(Object.assign({},C(l.SERVER_ERROR)),{message:e})),"undefined"!==typeof t&&(e.data=t),y(e.code)&&(e=v(e.code)),e)}function k(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}function T(e,t){const n=k(e);return"undefined"!==typeof n&&new RegExp(t).test(n)}function w(e){return T(e,"^https?:")}function E(e){return T(e,"^wss?:")}function S(e,t,n){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${t}`):e}},94419:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_ITEM_ERROR_CODES=void 0,function(e){e[e["UNKNOWN_ERROR"]=0]="UNKNOWN_ERROR",e[e["METHOD_NOT_SUPPORTED"]=400]="METHOD_NOT_SUPPORTED"}(n||(t.CONNECT_ITEM_ERROR_CODES=n={}))},2386:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TONCHAIN=void 0,function(e){e["MAINNET"]="-239"}(n||(t.TONCHAIN=n={}))},72136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONNECT_ITEM_ERROR_CODES=t.TONCHAIN=void 0;var o=n(2386);Object.defineProperty(t,"TONCHAIN",{enumerable:!0,get:function(){return o.TONCHAIN}});var s=n(94419);Object.defineProperty(t,"CONNECT_ITEM_ERROR_CODES",{enumerable:!0,get:function(){return s.CONNECT_ITEM_ERROR_CODES}})},65746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.creatOKXWalletInfo=s,t.creatOKXMiniAppWalletInfo=i;const o=n(2510);function s(){return{appName:"okxAppWallet",name:o.OKX_APP_WALLET_NAME,imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:o.downloadUrl,universalLink:o.standardUniversalLink,deepLink:o.standardDeeplink,platforms:["ios","android"]}}function i(){return{appName:"okxMiniApp",name:o.OKX_MINI_WALLET_NAME,imageUrl:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",aboutUrl:o.downloadUrl,universalLink:`https://t.me/${o.tgwalletName}/start`,deepLink:"",platforms:["ios","android","macos","windows"]}}},2510:function(e,t){"use strict";function n(){return window.okxTesttwaUrl}function o(){return window.okxTestTgtwaUrl}Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_MINI_WALLET_NAME=t.OKX_APP_WALLET_NAME=t.tgwalletAppName=t.tgwalletName=t.tonConnectSdkVersion=t.shortUniversalLink=t.standardDeeplink=t.downloadUrl=t.standardUniversalLink=t.okxDeeplink=void 0,t.getTestTwaUrl=n,t.getTestTgTwaUrl=o,t.okxDeeplink="okx://web3",t.standardUniversalLink="undefined"!==typeof window&&window.location.hostname.includes("okx.com")?"https://link.okx.com/download":"https://www.okx.com/download",t.downloadUrl="https://www.okx.com/download",t.standardDeeplink=`${t.okxDeeplink}/wallet/connect`,t.shortUniversalLink="https://www.okx.com/ul/connect",t.tonConnectSdkVersion="1",t.tgwalletName="OKX_WALLET_BOT",t.tgwalletAppName="start",t.OKX_APP_WALLET_NAME="OKX Wallet",t.OKX_MINI_WALLET_NAME="OKX Mini Wallet"},91306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_CONNECT_ERROR_CODES=t.OKXConnectError=void 0;var o=n(40375);Object.defineProperty(t,"OKXConnectError",{enumerable:!0,get:function(){return o.OKXConnectError}}),Object.defineProperty(t,"OKX_CONNECT_ERROR_CODES",{enumerable:!0,get:function(){return o.OKX_CONNECT_ERROR_CODES}})},40375:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ERROR=t.STANDARD_ERROR_MAP=t.SERVER_ERROR_CODE_RANGE=t.RESERVED_ERROR_CODES=t.SERVER_ERROR=t.INTERNAL_ERROR=t.INVALID_PARAMS=t.METHOD_NOT_FOUND=t.INVALID_REQUEST=t.PARSE_ERROR=t.OKX_CONNECT_ERROR_CODES=t.OKXConnectError=void 0;class n extends Error{constructor(e,t){void 0==t&&(t=o(e)),super(t),this.code=e,this.message=`${n.prefix} ${t?"\n"+t:""}`,Object.setPrototypeOf(this,n.prototype)}toJSON(){return{message:this.message,code:this.code}}}function o(e){return e==s.UNKNOWN_ERROR?"unknown error":e==s.BAD_REQUEST_ERROR?"bad request error":e==s.ALREADY_CONNECTED_ERROR?"already connected error":e==s.NOT_CONNECTED_ERROR?"not connected error":e==s.UNKNOWN_APP_ERROR?"unknown app error":e==s.USER_REJECTS_ERROR?"user rejects error":e==s.USER_REJECTS_ERROR_CAUSE_REGISTER?"wallet address are registering":e==s.METHOD_NOT_SUPPORTED?"method not supported":e==s.CONNECTION_ERROR?"connect error":e==s.CHAIN_NOT_SUPPORTED?"chain not supported":"unknown error"}var s;t.OKXConnectError=n,n.prefix="[OKX_CONNECT_SDK_ERROR]",function(e){e[e["UNKNOWN_ERROR"]=0]="UNKNOWN_ERROR",e[e["BAD_REQUEST_ERROR"]=1]="BAD_REQUEST_ERROR",e[e["ALREADY_CONNECTED_ERROR"]=11]="ALREADY_CONNECTED_ERROR",e[e["NOT_CONNECTED_ERROR"]=12]="NOT_CONNECTED_ERROR",e[e["UNKNOWN_APP_ERROR"]=100]="UNKNOWN_APP_ERROR",e[e["USER_REJECTS_ERROR"]=300]="USER_REJECTS_ERROR",e[e["USER_REJECTS_ERROR_CAUSE_REGISTER"]=301]="USER_REJECTS_ERROR_CAUSE_REGISTER",e[e["METHOD_NOT_SUPPORTED"]=400]="METHOD_NOT_SUPPORTED",e[e["CHAIN_NOT_SUPPORTED"]=500]="CHAIN_NOT_SUPPORTED",e[e["WALLET_NOT_SUPPORTED"]=600]="WALLET_NOT_SUPPORTED",e[e["CONNECTION_ERROR"]=700]="CONNECTION_ERROR"}(s||(t.OKX_CONNECT_ERROR_CODES=s={})),t.PARSE_ERROR="PARSE_ERROR",t.INVALID_REQUEST="INVALID_REQUEST",t.METHOD_NOT_FOUND="METHOD_NOT_FOUND",t.INVALID_PARAMS="INVALID_PARAMS",t.INTERNAL_ERROR="INTERNAL_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.RESERVED_ERROR_CODES=[-32700,-32600,-32601,-32602,-32603],t.SERVER_ERROR_CODE_RANGE=[-32e3,-32099],t.STANDARD_ERROR_MAP={[t.PARSE_ERROR]:{code:-32700,message:"Parse error"},[t.INVALID_REQUEST]:{code:-32600,message:"Invalid Request"},[t.METHOD_NOT_FOUND]:{code:-32601,message:"Method not found"},[t.INVALID_PARAMS]:{code:-32602,message:"Invalid params"},[t.INTERNAL_ERROR]:{code:-32603,message:"Internal error"},[t.SERVER_ERROR]:{code:-32e3,message:"Server error"}},t.DEFAULT_ERROR=t.SERVER_ERROR},60075:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.OKX_APP_WALLET_NAME=t.downloadUrl=t.okxDeeplink=t.tonConnectSdkVersion=t.standardDeeplink=t.standardUniversalLink=t.NameSpaceKeyStarknet=t.NameSpaceKeyTron=t.NameSpaceKeyCosmos=t.NameSpaceKeyAptos=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.NameSpaceKeyTON=t.NameSpaceKeySOL=t.NameSpaceKeyEip155=void 0,s(n(91306),t);var i=n(38439);Object.defineProperty(t,"NameSpaceKeyEip155",{enumerable:!0,get:function(){return i.NameSpaceKeyEip155}}),Object.defineProperty(t,"NameSpaceKeySOL",{enumerable:!0,get:function(){return i.NameSpaceKeySOL}}),Object.defineProperty(t,"NameSpaceKeyTON",{enumerable:!0,get:function(){return i.NameSpaceKeyTON}}),Object.defineProperty(t,"NameSpaceKeySui",{enumerable:!0,get:function(){return i.NameSpaceKeySui}}),Object.defineProperty(t,"NameSpaceKeyBtc",{enumerable:!0,get:function(){return i.NameSpaceKeyBtc}}),Object.defineProperty(t,"NameSpaceKeyAptos",{enumerable:!0,get:function(){return i.NameSpaceKeyAptos}}),Object.defineProperty(t,"NameSpaceKeyCosmos",{enumerable:!0,get:function(){return i.NameSpaceKeyCosmos}}),Object.defineProperty(t,"NameSpaceKeyTron",{enumerable:!0,get:function(){return i.NameSpaceKeyTron}}),Object.defineProperty(t,"NameSpaceKeyStarknet",{enumerable:!0,get:function(){return i.NameSpaceKeyStarknet}});var a=n(2510);Object.defineProperty(t,"standardUniversalLink",{enumerable:!0,get:function(){return a.standardUniversalLink}}),Object.defineProperty(t,"standardDeeplink",{enumerable:!0,get:function(){return a.standardDeeplink}}),Object.defineProperty(t,"tonConnectSdkVersion",{enumerable:!0,get:function(){return a.tonConnectSdkVersion}}),Object.defineProperty(t,"okxDeeplink",{enumerable:!0,get:function(){return a.okxDeeplink}}),Object.defineProperty(t,"downloadUrl",{enumerable:!0,get:function(){return a.downloadUrl}}),Object.defineProperty(t,"OKX_APP_WALLET_NAME",{enumerable:!0,get:function(){return a.OKX_APP_WALLET_NAME}}),s(n(11250),t)},38439:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameSpaceKeyStarknet=t.NameSpaceKeyTron=t.NameSpaceKeyCosmos=t.NameSpaceKeyAptos=t.NameSpaceKeyBtc=t.NameSpaceKeySui=t.NameSpaceKeyTON=t.NameSpaceKeySOL=t.NameSpaceKeyEip155=void 0,t.NameSpaceKeyEip155="eip155",t.NameSpaceKeySOL="solana",t.NameSpaceKeyTON="ton",t.NameSpaceKeySui="sui",t.NameSpaceKeyBtc="btc",t.NameSpaceKeyAptos="aptos",t.NameSpaceKeyCosmos="cosmos",t.NameSpaceKeyTron="tron",t.NameSpaceKeyStarknet="starknet"},84978:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function r(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((o=o.apply(e,t||[])).next())}))};function o(e,t){return n(this,void 0,void 0,(function*(){var n,o;const i=null!==(n=null===t||void 0===t?void 0:t.attempts)&&void 0!==n?n:3,a=null!==(o=null===t||void 0===t?void 0:t.delayMs)&&void 0!==o?o:800;if("function"!==typeof e)throw new Error("Expected a function, got "+typeof e);let r,c=0;while(c<i)try{return yield e()}catch(l){r=l,c++,c<i&&(yield s(a))}throw r}))}function s(e,t){return n(this,void 0,void 0,(function*(){return new Promise(((n,o)=>{var s,i;if(null===(s=null===t||void 0===t?void 0:t.signal)||void 0===s?void 0:s.aborted)return void o(new Error("Delay aborted"));const a=setTimeout((()=>n()),e);null===(i=null===t||void 0===t?void 0:t.signal)||void 0===i||i.addEventListener("abort",(()=>{clearTimeout(a),o(new Error("Delay aborted"))}))}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.callForSuccess=o,t.delay=s},31364:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,s)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.checkMetaData=t.versionCompare=t.isBrowser=t.isOS=t.isMobileUserAgent=t.openDeeplinkWithFallback=t.openLinkBlank=t.openLink=t.useShortLink=t.toSafeBase64FromBase64=t.isValidObject=t.isIos=t.base64decode=t.base64encode=t.splitToUint8Arrays=t.concatUint8Arrays=t.toHexString=t.hexToByteArray=t.getOKXLink=t.openOKXUniversalLink=t.getAppWalletShortDeepLink=t.encodeTWAConnectURLParams=t.encodeConnectParams=t.openOKXTMAWalletlinkWithFallback=t.getTelegramWalletTWAUrl=t.getAppWalletDeepLink=t.encodeTelegramUrlParameters=t.isTelegramUrl=t.openOKXDeeplinkWithFallback=t.openOKXDeeplink=t.getUniversalLink=t.safeJsonStringify=t.safeJsonParse=t.getDefaultReporter=t.reportEvent=t.reportLog=t.logWarning=t.logError=t.logDebug=t.callForSuccess=void 0;var i=n(84978);Object.defineProperty(t,"callForSuccess",{enumerable:!0,get:function(){return i.callForSuccess}});var a=n(23902);Object.defineProperty(t,"logDebug",{enumerable:!0,get:function(){return a.logDebug}}),Object.defineProperty(t,"logError",{enumerable:!0,get:function(){return a.logError}}),Object.defineProperty(t,"logWarning",{enumerable:!0,get:function(){return a.logWarning}}),Object.defineProperty(t,"reportLog",{enumerable:!0,get:function(){return a.reportLog}}),Object.defineProperty(t,"reportEvent",{enumerable:!0,get:function(){return a.reportEvent}}),Object.defineProperty(t,"getDefaultReporter",{enumerable:!0,get:function(){return a.getDefaultReporter}}),s(n(85823),t),s(n(66708),t);var r=n(60529);Object.defineProperty(t,"safeJsonParse",{enumerable:!0,get:function(){return r.safeJsonParse}}),Object.defineProperty(t,"safeJsonStringify",{enumerable:!0,get:function(){return r.safeJsonStringify}});var c=n(95821);Object.defineProperty(t,"getUniversalLink",{enumerable:!0,get:function(){return c.getUniversalLink}}),Object.defineProperty(t,"openOKXDeeplink",{enumerable:!0,get:function(){return c.openOKXDeeplink}}),Object.defineProperty(t,"openOKXDeeplinkWithFallback",{enumerable:!0,get:function(){return c.openOKXDeeplinkWithFallback}}),Object.defineProperty(t,"isTelegramUrl",{enumerable:!0,get:function(){return c.isTelegramUrl}}),Object.defineProperty(t,"encodeTelegramUrlParameters",{enumerable:!0,get:function(){return c.encodeTelegramUrlParameters}}),Object.defineProperty(t,"getAppWalletDeepLink",{enumerable:!0,get:function(){return c.getAppWalletDeepLink}}),Object.defineProperty(t,"getTelegramWalletTWAUrl",{enumerable:!0,get:function(){return c.getTelegramWalletTWAUrl}}),Object.defineProperty(t,"openOKXTMAWalletlinkWithFallback",{enumerable:!0,get:function(){return c.openOKXTMAWalletlinkWithFallback}}),Object.defineProperty(t,"encodeConnectParams",{enumerable:!0,get:function(){return c.encodeConnectParams}}),Object.defineProperty(t,"encodeTWAConnectURLParams",{enumerable:!0,get:function(){return c.encodeTWAConnectURLParams}}),Object.defineProperty(t,"getAppWalletShortDeepLink",{enumerable:!0,get:function(){return c.getAppWalletShortDeepLink}}),Object.defineProperty(t,"openOKXUniversalLink",{enumerable:!0,get:function(){return c.openOKXUniversalLink}}),Object.defineProperty(t,"getOKXLink",{enumerable:!0,get:function(){return c.getOKXLink}});var l=n(57837);Object.defineProperty(t,"hexToByteArray",{enumerable:!0,get:function(){return l.hexToByteArray}}),Object.defineProperty(t,"toHexString",{enumerable:!0,get:function(){return l.toHexString}}),Object.defineProperty(t,"concatUint8Arrays",{enumerable:!0,get:function(){return l.concatUint8Arrays}}),Object.defineProperty(t,"splitToUint8Arrays",{enumerable:!0,get:function(){return l.splitToUint8Arrays}}),Object.defineProperty(t,"base64encode",{enumerable:!0,get:function(){return l.base64encode}}),Object.defineProperty(t,"base64decode",{enumerable:!0,get:function(){return l.base64decode}}),Object.defineProperty(t,"isIos",{enumerable:!0,get:function(){return l.isIos}}),Object.defineProperty(t,"isValidObject",{enumerable:!0,get:function(){return l.isValidObject}}),Object.defineProperty(t,"toSafeBase64FromBase64",{enumerable:!0,get:function(){return l.toSafeBase64FromBase64}}),Object.defineProperty(t,"useShortLink",{enumerable:!0,get:function(){return l.useShortLink}});var d=n(3879);Object.defineProperty(t,"openLink",{enumerable:!0,get:function(){return d.openLink}}),Object.defineProperty(t,"openLinkBlank",{enumerable:!0,get:function(){return d.openLinkBlank}}),Object.defineProperty(t,"openDeeplinkWithFallback",{enumerable:!0,get:function(){return d.openDeeplinkWithFallback}}),Object.defineProperty(t,"isMobileUserAgent",{enumerable:!0,get:function(){return d.isMobileUserAgent}}),Object.defineProperty(t,"isOS",{enumerable:!0,get:function(){return d.isOS}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return d.isBrowser}});var u=n(78359);Object.defineProperty(t,"versionCompare",{enumerable:!0,get:function(){return u.versionCompare}});var g=n(4777);Object.defineProperty(t,"checkMetaData",{enumerable:!0,get:function(){return g.checkMetaData}})},23902:function(e,t,n){"use strict";n(71433),n(4051),n(71433),n(4051);var o=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function r(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultReporter=c,t.logDebug=u,t.logError=g,t.logWarning=f,t.reportEvent=p,t.reportLog=h;const s=!1,i=!1,a=n(66708),r=new a.OKXReporter;function c(){return r}const l=n(53636),d=l.version;function u(...e){if("undefined"!=typeof console)try{(s||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.log(`[OKX_CONNECT_SDK] ${d} `,...e)}catch(t){}}function g(...e){if("undefined"!=typeof console)try{if((s||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.error(`[OKX_CONNECT_SDK] ${d} `,...e),i||!s){let t="";t+=[...e].reduce(((e,t)=>{"string"==typeof t?","+t:"object"==typeof t&&JSON.stringify(t)})),r.sendRecordContent(t,a.OKXReportType.LOG,"")}}catch(t){}}function f(...e){if("undefined"!=typeof console)try{(s||(null===window||void 0===window?void 0:window.okxLogDebug))&&console.warn(`[OKX_CONNECT_SDK] ${d} `,...e)}catch(t){}}function p(e,t,n){return o(this,void 0,void 0,(function*(){yield r.sendRecordContent(n,e,t)}))}function h(e){return o(this,arguments,void 0,(function*(e,t="default"){}))}},66708:function(e,t,n){"use strict";n(41011),n(71433),n(27007),n(70354),n(57039),n(41011),n(71433),n(27007),n(70354),n(57039);var o=this&&this.__awaiter||function(e,t,n,o){function s(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{c(o.next(e))}catch(t){i(t)}}function r(e){try{c(o["throw"](e))}catch(t){i(t)}}function c(e){e.done?n(e.value):s(e.value).then(a,r)}c((o=o.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OKXReporter=t.OKXReportSide=t.OKXReportType=t.versionStr=void 0;const i=s(n(15963)),a=n(23902),r=n(95821),c=n(31364),l=s(n(63004)),d=s(n(77361));t.versionStr="1.6.2";const u=["https://www.okx.com/dappstat/wallet-connect","https://www.okx.ac/dappstat/wallet-connect"],g="OKX_RP_CK",f="OKX_RP_UUID_CK",p=100,h={Accept:"*/*","Content-Type":"text/plain"},b="POST",_={headers:h,method:b};t.OKXReportType={PAGE_IN:"page_in",PAGE_OUT:"page_out",CLICK:"click",LOG:"log"},t.OKXReportSide={DAPP:"dapp",WALLET:"wallet"};const m=(e,...t)=>o(void 0,[e,...t],void 0,(function*(e,t={},n=5e3){for(const s of e)try{const e=new AbortController,o=e.signal,a=(0,i.default)(s,Object.assign(Object.assign({},t),{signal:o})),r=new Promise(((t,o)=>setTimeout((()=>{e.abort(),o(new Error("Request timed out"))}),n))),c=yield Promise.race([a,r]);if(c.ok)return c;if(502==c.status)return console.error("Fetch error status 502",s),c}catch(o){console.error(`Fetch error for ${s}:`,o)}throw console.error("'All fetch attempts failed.'"),new Error("All fetch attempts failed.")}));class y{constructor(){this.currentSide=t.OKXReportSide.DAPP,this.currentVersion=t.versionStr,this.storage=l.default.createInstance({name:"OKXReporter"}),this.recordList=new Array,this.currentUUID=(0,c.toHexString)(d.default.randomBytes(16))}configVersionAndSide(e,t,n){this.currentVersion=e,this.currentSide=t,this.appName=n}get recordCacheKey(){return g+"@"+this.appName}get reportPlatform(){return(0,c.isMobileUserAgent)()?(0,c.isIos)()?"iOS":"android":"pc"}beginReport(){return o(this,void 0,void 0,(function*(){this.startErrorCatching();let e=yield this.storage.getItem(this.recordCacheKey),t=yield this.storage.getItem(f);t?this.currentUUID=t:this.storage.setItem(f,this.currentUUID),e&&(this.recordList=e,(0,a.logDebug)("resume records from cache length: ",this.recordList.length),yield this.sendCachedRecords())}))}startErrorCatching(){let e=(0,r.getWindow)();e&&(0,a.logDebug)("begin capture console error")}cachedErrors(){return this.recordList}sendRecord(e){return o(this,void 0,void 0,(function*(){return new Promise(((t,n)=>o(this,void 0,void 0,(function*(){try{const o=JSON.stringify(e);(0,a.logDebug)("[REPORT] record: ",o);const s=yield m(u,Object.assign(Object.assign({},_),{body:o}));(0,a.logDebug)("[REPORT] get rsp:",s),s&&s.status&&200==s.status?(this.recordList=this.recordList.filter((t=>t.timestamp!=e.timestamp||t.content!=e.content)),yield this.storage.setItem(this.recordCacheKey,this.recordList),t(!0)):n(!1)}catch(o){(0,a.logDebug)("send record error:",o),t(!0)}}))))}))}sendRecordContent(e,t,n){return o(this,void 0,void 0,(function*(){var o,s,i,a;let c=null===(o=(0,r.getWindow)())||void 0===o?void 0:o.location.pathname,l=null===(s=(0,r.getWindow)())||void 0===s?void 0:s.location.origin;c&&l&&(l+=c);let d=null===(i=(0,r.getWindow)())||void 0===i?void 0:i.navigator.language,u=null===(a=(0,r.getWindow)())||void 0===a?void 0:a.navigator.userAgent,g=this.reportPlatform,f={uuid:this.currentUUID,version:this.currentVersion,content:e,action:n,side:this.currentSide,timestamp:(new Date).getTime(),url:l,lang:d,type:t,platform:g,"user-agent":u};yield this.markRecordItem(f),yield this.sendRecord(f)}))}sendCachedRecords(){return o(this,void 0,void 0,(function*(){return new Promise(((e,t)=>o(this,void 0,void 0,(function*(){let n=this.recordList.map((e=>this.sendRecord(e)));(0,a.logDebug)("[REPORT] submit & clean recorded caches begin @",(new Date).toUTCString()),Promise.allSettled(n).then((n=>{(0,a.logDebug)("[REPORT] submit & clean recorded caches ends @",(new Date).toUTCString());let o=[];n.forEach(((e,t)=>{"rejected"==e.status&&o.push(t)})),this.recordList=this.recordList.filter(((e,t)=>!o.includes(t))),this.storage.setItem(this.recordCacheKey,this.recordList).then((function(t){e()})).catch((function(e){t(e)}))}))}))))}))}markRecordItem(e){return o(this,void 0,void 0,(function*(){if(this.recordList.push(e),this.recordList.length>p){let e=this.recordList.length-p;this.recordList.splice(0,e)}return new Promise(((t,n)=>{this.storage.setItem(this.recordCacheKey,this.recordList).then((function(n){t(e)})).catch((function(e){n(e)}))}))}))}markRecord(e,t,n,s){return o(this,void 0,void 0,(function*(){var o,i,a,c;let l=null===(o=(0,r.getWindow)())||void 0===o?void 0:o.location.pathname,d=null===(i=(0,r.getWindow)())||void 0===i?void 0:i.location.origin;l&&d&&(d+=l);let u=null===(a=(0,r.getWindow)())||void 0===a?void 0:a.navigator.language,g=this.reportPlatform,f=null===(c=(0,r.getWindow)())||void 0===c?void 0:c.navigator.userAgent,p={uuid:this.currentUUID,version:this.currentVersion,content:e,action:n,side:s,timestamp:(new Date).getTime(),url:d,lang:u,type:t,platform:g,"user-agent":f};return yield this.markRecordItem(p)}))}}t.OKXReporter=y},85823:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Report_WalletType_Key=t.Report_Proceed_QRCode_Click=t.Report_ChooseType_Download_Click=t.Report_ChooseType_ConnectWallet_Click=t.Report_Proceed_Retry_Click=t.Report_ChooseType_ConnectWallet_View=t.Report_Loading_ConnectWallet_View=t.Report_Proceed_QRCode_View=t.Report_Proceed_Proceed_View=void 0,t.Report_Proceed_Proceed_View="OKXConnectSDK_Proceed_Proceed_View",t.Report_Proceed_QRCode_View="OKXConnectSDK_Proceed_QRCode_View",t.Report_Loading_ConnectWallet_View="OKXConnectSDK_Loading_ConnectWallet_View",t.Report_ChooseType_ConnectWallet_View="OKXConnectSDK_ChooseType_ConnectWallet_View",t.Report_Proceed_Retry_Click="OKXConnectSDK_Proceed_Retry_Click",t.Report_ChooseType_ConnectWallet_Click="OKXConnectSDK_ChooseType_ConnectWallet_Click",t.Report_ChooseType_Download_Click="OKXConnectSDK_ChooseType_Download_Click",t.Report_Proceed_QRCode_Click="OKXConnectSDK_Proceed_QRCode_Click",t.Report_WalletType_Key="wallet_type"},4777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkMetaData=s;const o=n(60075);function s(e){if(!e)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"You have to specify a `dappMetaData`in the options.");if(!e.name)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"dappName is required");if(!e.icon)throw new o.OKXConnectError(o.OKX_CONNECT_ERROR_CODES.BAD_REQUEST_ERROR,"icon is required");return!0}},60529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeJsonParse=a,t.safeJsonStringify=r;const o=n(23902),s=e=>JSON.stringify(e,((e,t)=>"bigint"===typeof t?t.toString()+"n":t)),i=e=>{const t=/:(\b\d{17,}|\b(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))(?=[,\}\]]|$)/g,n=e.replace(t,((e,t)=>`:"${t}n"`));try{return JSON.parse(n,((e,t)=>{const n="string"===typeof t&&t.match(/^\d+n$/);return n?BigInt(t.substring(0,t.length-1)):t}))}catch(o){return JSON.parse(e)}};function a(e){if("string"!==typeof e)throw(0,o.logDebug)(e),new Error("Cannot safe json parse value of type "+typeof e);try{return i(e)}catch(t){return console.error("safeJsonParse error:",t),e}}function r(e){return"string"===typeof e?e:s(e)||""}},98650:function(e,t,n){"use strict";n(92806),n(53287),n(70039),n(70144),n(86823),n(51204),n(92806),n(53287),n(70039),n(70144),n(86823),n(51204),Object.defineProperty(t,"__esModule",{value:!0}),t.okxfromString=i,t.okxtoString=a,t.alloc=r,t.allocUnsafe=c;const o=n(2049),s=n(23902);function i(e,t="utf8"){const n=g[t];if((0,s.logDebug)("okxfromstring ====> "),!n)throw new Error(`Unsupported encoding "${t}"`);return n.decoder.decode(`${n.prefix}${e}`)}function a(e,t="utf8"){const n=g[t];if((0,s.logDebug)("okxtoString ====> "),!n)throw new Error(`Unsupported encoding "${t}"`);return n.encoder.encode(e).substring(1)}function r(e=0){return new Uint8Array(e)}function c(e=0){return new Uint8Array(e)}function l(e,t,n,o){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:n},decoder:{decode:o}}}const d=l("utf8","u",(e=>{const t=new TextDecoder("utf8");return"u"+t.decode(e)}),(e=>{const t=new TextEncoder;return t.encode(e.substring(1))})),u=l("ascii","a",(e=>{let t="a";for(let n=0;n<e.length;n++){let o=e[n];o&&String.fromCharCode(o)&&(t+=String.fromCharCode(o))}return t}),(e=>{e=e.substring(1);const t=c(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t})),g=Object.assign({utf8:d,"utf-8":d,hex:o.bases.base16,latin1:u,ascii:u,binary:u},o.bases)},78359:function(e,t,n){"use strict";var o,s,i,a,r,c,l;n(37008),n(24671),n(73074),n(37008),n(24671),n(73074),Object.defineProperty(t,"__esModule",{value:!0}),t.isTmaPlatform=_,t.isInTMA=m,t.isInTelegramBrowser=y,t.sendExpand=C,t.sendOpenTelegramLink=v,t.versionCompare=S;const d=n(95821),u=n(23902),g=n(60075),f=n(3879);let p={};try{let e=location.hash.toString();p=T(e)}catch(R){}let h="unknown";if((null===p||void 0===p?void 0:p.tgWebAppPlatform)&&(h=null!==(o=p.tgWebAppPlatform)&&void 0!==o?o:"unknown"),"unknown"===h){const e=(0,d.getWindow)();h=null!==(a=null===(i=null===(s=null===e||void 0===e?void 0:e.Telegram)||void 0===s?void 0:s.WebApp)||void 0===i?void 0:i.platform)&&void 0!==a?a:"unknown"}let b="6.0";if((null===p||void 0===p?void 0:p.tgWebAppVersion)&&(b=p.tgWebAppVersion),!b){const e=(0,d.getWindow)();b=null!==(l=null===(c=null===(r=null===e||void 0===e?void 0:e.Telegram)||void 0===r?void 0:r.WebApp)||void 0===c?void 0:c.version)&&void 0!==l?l:"6.0"}function _(...e){return e.includes(h)}function m(){var e;return"unknown"!==h||!!(null===(e=(0,d.getWindow)())||void 0===e?void 0:e.TelegramWebviewProxy)}function y(){var e;const t=!!(null===(e=(0,d.getWindow)())||void 0===e?void 0:e.TelegramWebview);return(m()||t)&&"unknown"===h}function C(){k("web_app_expand",{})}function v(e,t){const n=new URL(e);if("http:"!==n.protocol&&"https:"!==n.protocol){if(t)return t();throw new g.OKXConnectError(g.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url protocol is not supported: ${n}`)}if("t.me"!==n.hostname){if(t)return t();throw new g.OKXConnectError(g.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,`Url host is not supported: ${n}`)}const o=n.pathname+n.search;O()||N("6.1")?k("web_app_open_tg_link",{path_full:o}):(0,f.openLinkBlank)("https://t.me"+o)}function O(){try{const e=(0,d.getWindow)();return!!e&&(null!=e.parent&&e!==e.parent)}catch(R){return!1}}function k(e,t){try{const n=(0,d.getWindow)();if(!n)throw new g.OKXConnectError(g.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to parent window: window is not defined");if(void 0!==n.TelegramWebviewProxy)(0,u.logDebug)("postEvent",e,t),n.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));else if(n.external&&"notify"in n.external)(0,u.logDebug)("postEvent",e,t),n.external.notify(JSON.stringify({eventType:e,eventData:t}));else{if(!O())throw new g.OKXConnectError(g.OKX_CONNECT_ERROR_CODES.UNKNOWN_ERROR,"Can't post event to TMA");{const o="*",s=JSON.stringify({eventType:e,eventData:t});(0,u.logDebug)("postEvent",e,t),n.parent.postMessage(s,o)}}}catch(R){(0,u.logError)(`Can't post event to parent window: ${R}`)}}function T(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=w(e),t;let n=e.indexOf("?");if(n>=0){let o=e.substr(0,n);t._path=w(o),e=e.substr(n+1)}let o=E(e);for(let s in o)t[s]=o[s];return t}function w(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(R){return e}}function E(e){let t={};if(!e.length)return t;let n,o,s,i,a=e.split("&");for(n=0;n<a.length;n++)o=a[n].split("="),s=w(o[0]),i=null==o[1]?null:w(o[1]),t[s]=i;return t}function S(e,t){"string"!==typeof e&&(e=""),"string"!==typeof t&&(t="");let n,o,s,i,a=e.replace(/^\s+|\s+$/g,"").split("."),r=t.replace(/^\s+|\s+$/g,"").split(".");for(n=Math.max(a.length,r.length),o=0;o<n;o++)if(s=parseInt(a[o])||0,i=parseInt(r[o])||0,s!==i)return s>i?1:-1;return 0}function N(e){return S(b,e)>=0}},95821:function(e,t,n){"use strict";var o,s,i,a;n(27618),n(37008),n(24671),n(73074),n(27618),n(37008),n(24671),n(73074),Object.defineProperty(t,"__esModule",{value:!0}),t.removeUrlLastSlash=g,t.addPathToUrl=f,t.getUniversalLink=p,t.openOKXDeeplink=h,t.openOKXUniversalLink=b,t.openOKXDeeplinkWithFallback=_,t.getWindow=m,t.isTelegramUrl=y,t.encodeTelegramUrlParameters=C,t.encodeConnectParams=v,t.encodeTWAConnectURLParams=O,t.getAppWalletDeepLink=k,t.getAppWalletShortDeepLink=T,t.getTelegramWalletTWAUrl=w,t.openOKXTMAWalletlinkWithFallback=E,t.isInTMA=A,t.isInTelegramBrowser=I,t.getOKXLink=K;const r=n(60075),c=n(23902),l=n(2510),d=n(57837),u=n(78359);function g(e){return"/"===e.slice(-1)?e.slice(0,-1):e}function f(e,t){return g(e)+"/"+t}function p(e,t=!1){console.log("getUniversalLink deeplinkUrl:",e,", useStandardUniversalLink:",t);const n=encodeURIComponent(e);return console.log("getUniversalLink standardUniversalLink:",r.standardUniversalLink),console.log("getUniversalLink standardUniversalLink:",`${r.standardUniversalLink}?deeplink=${n}`),`${r.standardUniversalLink}?deeplink=${n}`}function h(e){var t;const n=p(e),o=!!(null===(t=m())||void 0===t?void 0:t.TelegramWebviewProxy);if(console.log("openOKXDeeplink fullUrl:",n),(0,d.isIos)())b(n);else{let t=null;o?t=window.open(e,"_blank"):window.location.href=e}}function b(e){(0,d.isIos)()?A()?window.open(e,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null===window||void 0===window?void 0:window.okxLogDebug)?window.open(e,"_blank"):window.open(e,"_self"),console.log("windowOpen[after]: ",Date.now())):window.open(e,"_blank")}function _(e){var t;const n=p(e),o=!!(null===(t=m())||void 0===t?void 0:t.TelegramWebviewProxy);console.log("openOKXDeeplinkWithFallback fullUrl:",n);let s=!1;const i=3e3;r.standardUniversalLink;if(console.log("openOKXDeeplinkWithFallback standardUniversalLink:",r.standardUniversalLink),(0,d.isIos)())o?window.open(n,"_blank"):(console.log("windowOpen[before]: ",Date.now()),(null===window||void 0===window?void 0:window.okxLogDebug)?window.open(n,"_blank"):window.open(n,"_self"),console.log("windowOpen[after]: ",Date.now()));else{let t=null;var a=()=>{s||(t?t.open(n,"_self"):window.open(n,"_blank"))};o?t=window.open(e,"_blank"):window.location.href=e,setTimeout(a,i),window.addEventListener("blur",(()=>{s=!0}),{once:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(s=!0)}))}}function m(){if("undefined"!==typeof window)return window}function y(e){if(!e)return!1;const t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname}function C(e){let t=e;return t=t.replace(/\./g,"%2E"),t=t.replace(/-/g,"%2D"),t=t.replace(/_/g,"%5F"),t=t.replace(/&/g,"-"),t=t.replace(/=/g,"__"),t=t.replace(/%/g,"--"),t}function v(e){const t=JSON.stringify(e);(0,c.logDebug)("url encodeConnectParams connectRequestStr ",t);const n=(new TextEncoder).encode(t),o=btoa(String.fromCharCode(...n));return(0,c.logDebug)("url encodeConnectParams base64Encoded ",o),o}function O(e){const t=JSON.stringify({topic:e.topic,clientId:e.clientId});(0,c.logDebug)("url encodeConnectParams connectRequestStr",t);const n=(new TextEncoder).encode(t),o=btoa(String.fromCharCode(...n));return o}function k(e){return`${r.standardDeeplink}?param=${e}`}function T(e,t){return`${l.shortUniversalLink}?topic=${e}${(0,d.getLastSixMd5Hash)(t)}`}function w(e,t){let n={okxconnect:"",redirect:"",extraparams:"",fromtg:"0"};e&&(n.okxconnect=e),A()?(n.redirect="back",n.fromtg="1"):(n.redirect="none",n.fromtg="0"),(0,c.logDebug)("getTelegramWalletTWAUrl redirect:",n.redirect);let o=JSON.stringify(n);const s=(new TextEncoder).encode(o),i=btoa(String.fromCharCode(...s)),a=(0,d.toSafeBase64FromBase64)(i);return(0,c.logDebug)("[TWA] open link:",n,i),e||t?A()?(0,l.getTestTgTwaUrl)()?`${(0,l.getTestTgTwaUrl)()}?startapp=${a}`:`https://t.me/${l.tgwalletName}/start?startapp=${a}`:(0,l.getTestTwaUrl)()?`${(0,l.getTestTwaUrl)()}?tgWebAppStartParam=${a}`:`tg://resolve?domain=${l.tgwalletName}&appname=${l.tgwalletAppName}&startapp=${a}`:A()?(0,l.getTestTgTwaUrl)()?`${(0,l.getTestTgTwaUrl)()}`:`https://t.me/${l.tgwalletName}/start`:(0,l.getTestTwaUrl)()?`${(0,l.getTestTwaUrl)()}`:`tg://resolve?domain=${l.tgwalletName}&appname=${l.tgwalletAppName}`}function E(e){var t,n,o,s,i;(0,c.logDebug)("[TWA] open link:",e,"isInTMA ==> ",A()),A()?(null===(n=null===(t=m())||void 0===t?void 0:t.Telegram)||void 0===n?void 0:n.WebApp)?null===(i=null===(s=null===(o=m())||void 0===o?void 0:o.Telegram)||void 0===s?void 0:s.WebApp)||void 0===i||i.openTelegramLink(e):(0,u.sendOpenTelegramLink)(e):(0,l.getTestTwaUrl)()?window.open(e,"_blank"):window.open(e,"_self")}function S(e){try{return e=e.replace(/\+/g,"%20"),decodeURIComponent(e)}catch(t){return e}}function N(e){let t={};if(!e.length)return t;let n,o,s,i,a=e.split("&");for(n=0;n<a.length;n++)o=a[n].split("="),s=S(o[0]),i=null==o[1]?null:S(o[1]),t[s]=i;return t}function R(e){e=e.replace(/^#/,"");let t={};if(!e.length)return t;if(e.indexOf("=")<0&&e.indexOf("?")<0)return t._path=S(e),t;let n=e.indexOf("?");if(n>=0){let o=e.substr(0,n);t._path=S(o),e=e.substr(n+1)}let o=N(e);for(let s in o)t[s]=o[s];return t}let D={};try{let e=location.hash.toString();D=R(e)}catch(F){}let P="unknown";if((null===D||void 0===D?void 0:D.tgWebAppPlatform)&&(P=null!==(o=D.tgWebAppPlatform)&&void 0!==o?o:"unknown"),"unknown"===P){const e=m();P=null!==(a=null===(i=null===(s=null===e||void 0===e?void 0:e.Telegram)||void 0===s?void 0:s.WebApp)||void 0===i?void 0:i.platform)&&void 0!==a?a:"unknown"}function A(){var e;return"unknown"!==P||!!(null===(e=m())||void 0===e?void 0:e.TelegramWebviewProxy)}function I(){var e;const t=!!(null===(e=m())||void 0===e?void 0:e.TelegramWebview);return(A()||t)&&"unknown"===P}function K(e,t=!1,n){if((0,c.logDebug)(`url  getOKXLink() called connectRequest==> ${JSON.stringify(e)}  useMini=> ${t}  tmaReturnUrl==> ${n}`),t){var o=O(e);return w(o,null!==n&&void 0!==n?n:"back")}if((0,d.useShortLink)())return T(e.topic,e.clientId);{const t=v(e);return`${r.standardDeeplink}?param=${t}`}}},57837:function(e,t,n){"use strict";n(92806),n(53287),n(70039),n(70144),n(86823),n(51204),n(71433),n(70354),n(92806),n(53287),n(70039),n(70144),n(86823),n(51204),n(71433),n(70354);var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidObject=t.RANDOM_LENGTH=t.isBrowser=t.resolveLocalStorage=t.hasLocalStorage=t.hasBuiltInWebSocket=t.resolveWebSocketImplementation=void 0,t.hexToByteArray=f,t.toHexString=p,t.concatUint8Arrays=h,t.splitToUint8Arrays=b,t.base64encode=y,t.base64decode=C,t.checkWSUrl=v,t.hashKey=S,t.generateRandomBytes32=N,t.generateTopic=R,t.isIos=P,t.getLastSixMd5Hash=A,t.toSafeBase64FromBase64=I,t.useShortLink=K;const s=o(n(77361)),i=o(n(17220)),a=n(8552),r=n(20290),c=n(60529),l=n(23902),d=n(98650),u=o(n(50054)),g="base16";function f(e){if(e.length%2!==0)throw new Error(`Cannot convert ${e} to bytesArray`);const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=parseInt(e.slice(n,n+2),16);return t}function p(e){let t="";return e.forEach((e=>{t+=("0"+(255&e).toString(16)).slice(-2)})),t}function h(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function b(e,t){if(t>=e.length)throw new Error("Index is out of buffer");const n=e.slice(0,t),o=e.slice(t);return[n,o]}function _(e,t){const n=i.default.encodeBase64(e);return t?encodeURIComponent(n):n}function m(e,t){return t&&(e=decodeURIComponent(e)),i.default.decodeBase64(e)}function y(e,t){let n;return e instanceof Uint8Array?n=e:("string"!==typeof e&&(e=(0,c.safeJsonStringify)(e)),n=i.default.decodeUTF8(e)),_(n,t)}function C(e,t){const n=m(e,t);return{toString(){return i.default.encodeUTF8(n)},toObject(){try{return(0,c.safeJsonParse)(i.default.encodeUTF8(n))}catch(e){return null}},toUint8Array(){return n}}}function v(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!t||!t.length)return!1;let n=t[0];return void 0!==n&&new RegExp("^wss?:").test(n)}const O=()=>"undefined"!==typeof WebSocket?WebSocket:"undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket?n.g.WebSocket:"undefined"!==typeof window&&"undefined"!==typeof window.WebSocket?window.WebSocket:"undefined"!==typeof self&&"undefined"!==typeof self.WebSocket?self.WebSocket:WebSocket;t.resolveWebSocketImplementation=O;const k=()=>"undefined"!==typeof WebSocket||"undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket||"undefined"!==typeof window&&"undefined"!==typeof window.WebSocket||"undefined"!==typeof self&&"undefined"!==typeof self.WebSocket;t.hasBuiltInWebSocket=k;const T=()=>"undefined"!==typeof n.g&&"undefined"!==typeof n.g.localStorage||"undefined"!==typeof window&&"undefined"!==typeof window.localStorage;t.hasLocalStorage=T;const w=()=>"undefined"!==typeof n.g&&"undefined"!==typeof n.g.localStorage?n.g.localStorage:"undefined"!==typeof window&&"undefined"!==typeof window.localStorage?window.localStorage:localStorage;t.resolveLocalStorage=w;const E=()=>"undefined"!==typeof window;function S(e,t=g){(0,l.logDebug)(`hash key called ${e}`);const n=(0,r.hash)((0,d.okxfromString)(e,t));return(0,a.toString)(n,t)}function N(){return s.default.randomBytes(t.RANDOM_LENGTH)}function R(){let e=N();return(0,l.logDebug)(`generate topic called ${e}`),S((0,a.toString)(e,g))}t.isBrowser=E,t.RANDOM_LENGTH=32;const D=e=>Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length;function P(){const e=navigator.userAgent,t=navigator.maxTouchPoints||0,n=/iPad|iPhone|iPod/.test(e)&&!window.MSStream,o=e.includes("Mac")&&t>1;return(0,l.logDebug)(`utils isIos >>>isIOSDevice: ${n}    >> isIPadOS: ${o}`),n||o}function A(e){const t=u.default.MD5(e).toString();return t.slice(-6)}function I(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function K(){return!!window.useShortLink}t.isValidObject=D},3879:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.openLink=a,t.openLinkBlank=r,t.openDeeplinkWithFallback=c,t.isMobileUserAgent=l,t.getUserAgent=d,t.isOS=u,t.isBrowser=g;const s=o(n(98158)),i=n(23902);function a(e,t="_self"){(0,i.logDebug)("openLink",e,t),window.open(e,t,"noopener noreferrer")}function r(e){a(e,"_blank")}function c(e,t){const n=()=>{g("safari")||u("android")&&g("firefox")||t()},o=setTimeout((()=>n()),500);window.addEventListener("blur",(()=>clearTimeout(o)),{once:!0}),a(e,"_self")}function l(){let e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.slice(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}function d(){var e,t,n;const o=(new s.default).getResult(),i=null===(e=o.os.name)||void 0===e?void 0:e.toLowerCase(),a=null===(t=o.device.model)||void 0===t?void 0:t.toLowerCase();let r;switch(!0){case"ipad"===a:r="ipad";break;case"ios"===i:r="ios";break;case"android"===i:r="android";break;case"mac os"===i:r="macos";break;case"linux"===i:r="linux";break;case null===i||void 0===i?void 0:i.includes("windows"):r="windows";break}const c=null===(n=o.browser.name)||void 0===n?void 0:n.toLowerCase();let l;switch(!0){case"chrome"===c:l="chrome";break;case"firefox"===c:l="firefox";break;case null===c||void 0===c?void 0:c.includes("safari"):l="safari";break;case null===c||void 0===c?void 0:c.includes("opera"):l="opera";break}return{os:r,browser:l}}function u(...e){return e.includes(d().os)}function g(...e){return e.includes(d().browser)}},10837:function(e,t,n){"use strict";var o=n(93067),s=n(13306),i=(n(4188),n(2757)),a=n(46357);const r={id:"app"};function c(e,t,n,s,c,l){const d=(0,i.g2)("el-header"),u=(0,i.g2)("el-col"),g=(0,i.g2)("el-row"),f=(0,i.g2)("el-card"),p=(0,i.g2)("el-checkbox"),h=(0,i.g2)("el-option"),b=(0,i.g2)("el-select"),_=(0,i.g2)("el-input"),m=(0,i.g2)("el-button"),y=(0,i.g2)("qrcode-vue"),C=(0,i.g2)("el-tab-pane"),v=(0,i.g2)("SuiPanel"),O=(0,i.g2)("BTCPanel"),k=(0,i.g2)("FractalPanel"),T=(0,i.g2)("TronTransactionPanel"),w=(0,i.g2)("StarknetPanel"),E=(0,i.g2)("el-tabs"),S=(0,i.g2)("el-main"),N=(0,i.g2)("el-container");return(0,i.uX)(),(0,i.CE)("div",r,[(0,i.bF)(N,null,{default:(0,i.k6)((()=>[(0,i.bF)(d,null,{default:(0,i.k6)((()=>t[49]||(t[49]=[(0,i.eW)("OKX Connect")]))),_:1}),(0,i.bF)(S,null,{default:(0,i.k6)((()=>[(0,i.bF)(f,{class:"wallet-info"},{header:(0,i.k6)((()=>t[50]||(t[50]=[(0,i.Lk)("div",{style:{"font-weight":"bold"}},"Wallet Info",-1)]))),default:(0,i.k6)((()=>[(0,i.bF)(g,{class:"info-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[t[51]||(t[51]=(0,i.Lk)("strong",null,"Wallet Address:",-1)),(0,i.eW)(" "+(0,a.v_)(l.getWalletAddress),1)])),_:1})])),_:1}),(0,i.bF)(g,{class:"info-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[t[52]||(t[52]=(0,i.Lk)("strong",null,"Status :",-1)),(0,i.eW)(" "+(0,a.v_)(e.currentStatus),1)])),_:1})])),_:1})])),_:1}),(0,i.bF)(f,{class:"wallet-actions"},{header:(0,i.k6)((()=>t[53]||(t[53]=[(0,i.Lk)("div",{style:{"font-weight":"bold"}},"Connect Params",-1)]))),default:(0,i.k6)((()=>[(0,i.bF)(g,{class:"info-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:12},{default:(0,i.k6)((()=>[(0,i.bF)(p,{modelValue:e.withUI,"onUpdate:modelValue":t[0]||(t[0]=t=>e.withUI=t),onChange:e.handleWithUI},{default:(0,i.k6)((()=>t[54]||(t[54]=[(0,i.eW)(" Show UI")]))),_:1},8,["modelValue","onChange"])])),_:1}),(0,i.bF)(u,{span:12},{default:(0,i.k6)((()=>[(0,i.bF)(p,{modelValue:e.universalToTG,"onUpdate:modelValue":t[1]||(t[1]=t=>e.universalToTG=t),onChange:e.handleUniversalToTG},{default:(0,i.k6)((()=>t[55]||(t[55]=[(0,i.eW)(" Use mini wallet")]))),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,i.bF)(g,{style:{"align-items":"center"}},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:4},{default:(0,i.k6)((()=>t[56]||(t[56]=[(0,i.Lk)("p",{style:{"font-size":"11pt"}},"Modals",-1)]))),_:1}),(0,i.bF)(u,{span:20},{default:(0,i.k6)((()=>[(0,i.bF)(b,{modelValue:e.modals,"onUpdate:modelValue":t[2]||(t[2]=t=>e.modals=t),placeholder:"Modals",onChange:l.handleModalsSelect,multiple:""},{default:(0,i.k6)((()=>[(0,i.bF)(h,{label:"Before",value:"before"}),(0,i.bF)(h,{label:"Success",value:"success"}),(0,i.bF)(h,{label:"Error",value:"error"})])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,i.bF)(g,{style:{"align-items":"center","justify-content":"space-between"}},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:6,style:{gap:"2px"}},{default:(0,i.k6)((()=>t[57]||(t[57]=[(0,i.Lk)("p",{style:{"font-size":"11pt",margin:"0px"}},"Return Strategy",-1),(0,i.Lk)("p",{style:{"font-size":"9pt",margin:"0px"}},"(Mobile only)",-1)]))),_:1}),(0,i.bF)(u,{span:10},{default:(0,i.k6)((()=>[(0,i.bF)(b,{modelValue:e.returnStrategy,"onUpdate:modelValue":t[3]||(t[3]=t=>e.returnStrategy=t),onChange:l.handleReturnStrategySelect,placeholder:"Return Strategy"},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.returnStrategies,(e=>((0,i.uX)(),(0,i.Wv)(h,{key:`return-strategy-select-option-${e}`,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,i.bF)(u,{span:10},{default:(0,i.k6)((()=>["deeplink"===e.returnStrategy?((0,i.uX)(),(0,i.Wv)(_,{key:0,modelValue:e.deeplink,"onUpdate:modelValue":t[4]||(t[4]=t=>e.deeplink=t),onChange:l.handleReturnStrategyDeeplink,placeholder:"Deeplink",disabled:"deeplink"!==e.returnStrategy,style:{margin:"0px"}},null,8,["modelValue","onChange","disabled"])):(0,i.Q3)("",!0)])),_:1})])),_:1}),(0,i.bF)(g,{style:{"align-items":"center"}},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:4},{default:(0,i.k6)((()=>t[58]||(t[58]=[(0,i.Lk)("p",{style:{"font-size":"11pt"}},"Lang",-1)]))),_:1}),(0,i.bF)(u,{span:20},{default:(0,i.k6)((()=>[(0,i.bF)(b,{modelValue:e.language,"onUpdate:modelValue":t[5]||(t[5]=t=>e.language=t),onChange:l.handleLanguageSelect,placeholder:"Language"},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.locales,(e=>((0,i.uX)(),(0,i.Wv)(h,{key:`language-select-option-${e}`,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,i.bF)(g,{style:{"align-items":"center"}},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:4},{default:(0,i.k6)((()=>t[59]||(t[59]=[(0,i.Lk)("p",{style:{"font-size":"11pt"}},"Theme",-1)]))),_:1}),(0,i.bF)(u,{span:20},{default:(0,i.k6)((()=>[(0,i.bF)(b,{modelValue:e.theme,"onUpdate:modelValue":t[6]||(t[6]=t=>e.theme=t),onChange:l.handleThemeSelect,placeholder:"Theme"},{default:(0,i.k6)((()=>[(0,i.bF)(h,{label:"LIGHT",value:e.THEME.LIGHT},null,8,["value"]),(0,i.bF)(h,{label:"DARK",value:e.THEME.DARK},null,8,["value"])])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,i.bF)(g,{style:{"align-items":"center"}},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:4},{default:(0,i.k6)((()=>t[60]||(t[60]=[(0,i.Lk)("p",{style:{"font-size":"11pt"}},"Connect",-1),(0,i.Lk)("p",{style:{"font-size":"11pt"}},"Methods",-1)]))),_:1}),(0,i.bF)(u,{span:20},{default:(0,i.k6)((()=>[(0,i.bF)(b,{modelValue:e.selectedMethod,"onUpdate:modelValue":t[7]||(t[7]=t=>e.selectedMethod=t),onChange:l.handleConnectMethodsSelect,multiple:"",placeholder:"methods"},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.connectMethods,(e=>((0,i.uX)(),(0,i.Wv)(h,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1})])),_:1}),(0,i.bF)(g,{style:{"align-items":"center"}},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:4},{default:(0,i.k6)((()=>t[61]||(t[61]=[(0,i.Lk)("p",{style:{"font-size":"11pt"}},"ton_proof",-1)]))),_:1}),(0,i.bF)(u,{span:20},{default:(0,i.k6)((()=>[(0,i.bF)(_,{modelValue:e.tonProofValue,"onUpdate:modelValue":t[8]||(t[8]=t=>e.tonProofValue=t),placeholder:"input ton_proof"},null,8,["modelValue"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,align:"middle"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:20},{default:(0,i.k6)((()=>t[62]||(t[62]=[(0,i.Lk)("div",{style:{"font-weight":"bold"}},"Select Required Chains",-1)]))),_:1}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Object.keys(e.availableChains),(t=>((0,i.uX)(),(0,i.Wv)(u,{span:6,key:t},{default:(0,i.k6)((()=>[(0,i.bF)(p,{modelValue:e.availableChains[t].checked,"onUpdate:modelValue":n=>e.availableChains[t].checked=n,disabled:!e.areChainsInit},{default:(0,i.k6)((()=>[(0,i.eW)((0,a.v_)(e.availableChains[t].name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024)))),128))])),_:1}),(0,i.bF)(g,{gutter:12,align:"middle",style:{"margin-top":"20px"}},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:20},{default:(0,i.k6)((()=>t[63]||(t[63]=[(0,i.Lk)("div",{style:{"font-weight":"bold"}},"Select Optional Chains",-1)]))),_:1}),(0,i.bF)(u,{span:5},{default:(0,i.k6)((()=>[(0,i.bF)(p,{checked:e.isOptionalChecked(43114),onChange:t[9]||(t[9]=()=>e.handleOptionChange(43114))},{default:(0,i.k6)((()=>t[64]||(t[64]=[(0,i.eW)(" AVAX")]))),_:1},8,["checked"])])),_:1}),(0,i.bF)(u,{span:5},{default:(0,i.k6)((()=>[(0,i.bF)(p,{checked:e.isOptionalChecked(10),onChange:t[10]||(t[10]=()=>e.handleOptionChange(10))},{default:(0,i.k6)((()=>t[65]||(t[65]=[(0,i.eW)("OP")]))),_:1},8,["checked"])])),_:1}),(0,i.bF)(u,{span:5},{default:(0,i.k6)((()=>[(0,i.bF)(p,{checked:e.isOptionalChecked(8453),onChange:t[11]||(t[11]=()=>e.handleOptionChange(8453))},{default:(0,i.k6)((()=>t[66]||(t[66]=[(0,i.eW)(" BASE")]))),_:1},8,["checked"])])),_:1}),(0,i.bF)(u,{span:5},{default:(0,i.k6)((()=>[(0,i.bF)(p,{checked:e.isOptionalChecked(99781165),onChange:t[12]||(t[12]=()=>e.handleOptionChange(99781165))},{default:(0,i.k6)((()=>t[67]||(t[67]=[(0,i.eW)("Nonexist")]))),_:1},8,["checked"])])),_:1}),(0,i.bF)(u,{span:5},{default:(0,i.k6)((()=>[(0,i.bF)(p,{checked:e.isOptionalChecked("solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"),onChange:t[13]||(t[13]=()=>e.handleOptionChange("solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"))},{default:(0,i.k6)((()=>t[68]||(t[68]=[(0,i.eW)("Solana")]))),_:1},8,["checked"])])),_:1}),(0,i.bF)(u,{span:5},{default:(0,i.k6)((()=>[(0,i.bF)(p,{checked:e.isOptionalChecked("ton:-239"),onChange:t[14]||(t[14]=()=>e.handleOptionChange("ton:-239"))},{default:(0,i.k6)((()=>t[69]||(t[69]=[(0,i.eW)("Ton")]))),_:1},8,["checked"])])),_:1}),(0,i.bF)(u,{span:5},{default:(0,i.k6)((()=>[(0,i.bF)(p,{checked:e.isOptionalChecked("btc:mainnet"),onChange:t[15]||(t[15]=()=>e.handleOptionChange("btc:mainnet"))},{default:(0,i.k6)((()=>t[70]||(t[70]=[(0,i.eW)("btc")]))),_:1},8,["checked"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.initBtnClicked,icon:"el-icon-connection",disabled:!e.areChainsInit},{default:(0,i.k6)((()=>[(0,i.eW)((0,a.v_)(e.connectInitStr),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.connectBtnClicked,icon:"el-icon-connection",disabled:!e.areChainsInit},{default:(0,i.k6)((()=>[(0,i.eW)((0,a.v_)(e.connectStatusStr),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.syncAllAddressClick,icon:"el-icon-connection",disabled:!e.areChainsInit},{default:(0,i.k6)((()=>[(0,i.eW)((0,a.v_)(e.syncAllAddressStr),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"danger",onClick:l.disconnectAction,icon:"el-icon-switch-button",disabled:!e.areChainsInit||0==e.walletAddress.length},{default:(0,i.k6)((()=>[(0,i.eW)((0,a.v_)(e.disconnectStatusStr),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1}),((0,i.uX)(),(0,i.Wv)(i.Im,{to:"body"},[e.showModal?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"modal-overlay",onClick:t[18]||(t[18]=(...e)=>l.closeModal&&l.closeModal(...e))},[(0,i.Lk)("div",{class:"modal-content",onClick:t[17]||(t[17]=(0,o.D$)((()=>{}),["stop"]))},[(0,i.Lk)("button",{class:"close-button",onClick:t[16]||(t[16]=(...e)=>l.closeModal&&l.closeModal(...e))}," × "),t[71]||(t[71]=(0,i.Lk)("h2",null,"Scan to connect",-1)),(0,i.bF)(y,{value:e.qrValue,size:350,level:"L"},null,8,["value"])])])):(0,i.Q3)("",!0)]))])),_:1}),(0,i.bF)(f,{class:"wallet-actions"},{header:(0,i.k6)((()=>t[72]||(t[72]=[(0,i.Lk)("div",{style:{"font-weight":"bold"}},"Transactions",-1)]))),default:(0,i.k6)((()=>[(0,i.bF)(E,{modelValue:e.activeTab,"onUpdate:modelValue":t[42]||(t[42]=t=>e.activeTab=t),type:"border-card",onTabClick:l.clickActiveTab},{default:(0,i.k6)((()=>[(0,i.bF)(C,{label:"ETH",name:"eip155:1"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_requestAccounts},{default:(0,i.k6)((()=>t[73]||(t[73]=[(0,i.eW)("eth_requestAccounts(ETH)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[19]||(t[19]=e=>l.eth_chainId())},{default:(0,i.k6)((()=>t[74]||(t[74]=[(0,i.eW)("eth_chainId(ETH)")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[20]||(t[20]=e=>l.wallet_switchEthereumChain())},{default:(0,i.k6)((()=>t[75]||(t[75]=[(0,i.eW)("wallet_switchEthereumChain(switch to ETH)")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[21]||(t[21]=e=>l.wallet_addEthereumChain())},{default:(0,i.k6)((()=>t[76]||(t[76]=[(0,i.eW)("wallet_addEthereumChain")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[22]||(t[22]=e=>l.personal_sign())},{default:(0,i.k6)((()=>t[77]||(t[77]=[(0,i.eW)("personal_sign")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[23]||(t[23]=e=>l.eth_signTypedData_v4())},{default:(0,i.k6)((()=>t[78]||(t[78]=[(0,i.eW)("eth_signTypedData_v4")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_transfer},{default:(0,i.k6)((()=>t[79]||(t[79]=[(0,i.eW)("eth_sendTransaction(send ETH)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_approve},{default:(0,i.k6)((()=>t[80]||(t[80]=[(0,i.eW)("eth_sendTransaction(approve TONCoin)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_mint},{default:(0,i.k6)((()=>t[81]||(t[81]=[(0,i.eW)("eth_sendTransaction(eth mint nft)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[24]||(t[24]=e=>l.wallet_watchAsset())},{default:(0,i.k6)((()=>t[82]||(t[82]=[(0,i.eW)("wallet_watchAsset(add SPX6900) ")]))),_:1})])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"TON",name:"ton:-239"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.ton_getAccount},{default:(0,i.k6)((()=>t[83]||(t[83]=[(0,i.eW)("ton_getAccount")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.ton_sendTransaction},{default:(0,i.k6)((()=>t[84]||(t[84]=[(0,i.eW)("ton_sendTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"Sol",name:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signMessage},{default:(0,i.k6)((()=>t[85]||(t[85]=[(0,i.eW)("solana_signMessage")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signTransaction},{default:(0,i.k6)((()=>t[86]||(t[86]=[(0,i.eW)("solana_signTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signVersionedTransaction},{default:(0,i.k6)((()=>t[87]||(t[87]=[(0,i.eW)("solana_signVersionedTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signAllTransactions},{default:(0,i.k6)((()=>t[88]||(t[88]=[(0,i.eW)("sol_signAllTransactions")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signAllVersionedTransactions},{default:(0,i.k6)((()=>t[89]||(t[89]=[(0,i.eW)("sol_signAllVersionedTransactions")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signAndSendTransaction},{default:(0,i.k6)((()=>t[90]||(t[90]=[(0,i.eW)("sol_signAndSendTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signAndSendVersionedTransaction},{default:(0,i.k6)((()=>t[91]||(t[91]=[(0,i.eW)("signAndSendVersionedTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"Sui",name:"sui:mainnet"},{default:(0,i.k6)((()=>[(0,i.bF)(v,{onGenerateTransactionParams:l.sui_generateTransactionParams},null,8,["onGenerateTransactionParams"])])),_:1}),(0,i.bF)(C,{label:"BTC",name:"btc:mainnet"},{default:(0,i.k6)((()=>[(0,i.bF)(O,{onGenerateTransactionParams:l.btc_generateTransactionParams},null,8,["onGenerateTransactionParams"])])),_:1}),(0,i.bF)(C,{label:"Fractal",name:"fractal:mainnet"},{default:(0,i.k6)((()=>[(0,i.bF)(k,{onGenerateTransactionParams:l.fractal_generateTransactionParams},null,8,["onGenerateTransactionParams"])])),_:1}),(0,i.bF)(C,{label:"Tron",name:"tron:mainnet"},{default:(0,i.k6)((()=>[(0,i.bF)(T,{onGenerateTransactionParams:l.tron_generateTransactionParams,onGenerateTransactionResult:l.tron_getTransactionResult},null,8,["onGenerateTransactionParams","onGenerateTransactionResult"])])),_:1}),(0,i.bF)(C,{label:"Aptos",name:"aptos:mainnet"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.aptos_signMessage},{default:(0,i.k6)((()=>t[92]||(t[92]=[(0,i.eW)("aptos_signMessage")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.aptos_signTransaction},{default:(0,i.k6)((()=>t[93]||(t[93]=[(0,i.eW)("aptos_signTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.aptos_signAndSubmitTransaction},{default:(0,i.k6)((()=>t[94]||(t[94]=[(0,i.eW)("aptos_signAndSubmitTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"Cosmos",name:"cosmos:cosmoshub-4"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signArbitrary},{default:(0,i.k6)((()=>t[95]||(t[95]=[(0,i.eW)("cosmos_signArbitrary")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signAmino},{default:(0,i.k6)((()=>t[96]||(t[96]=[(0,i.eW)("cosmos_signAmino")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signDirect},{default:(0,i.k6)((()=>t[97]||(t[97]=[(0,i.eW)("cosmos_signDirect")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"Polygon",name:"eip155:137"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_requestAccounts},{default:(0,i.k6)((()=>t[98]||(t[98]=[(0,i.eW)("eth_requestAccounts")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[25]||(t[25]=e=>l.eth_chainId())},{default:(0,i.k6)((()=>t[99]||(t[99]=[(0,i.eW)("eth_chainId")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[26]||(t[26]=e=>l.wallet_switchEthereumChain())},{default:(0,i.k6)((()=>t[100]||(t[100]=[(0,i.eW)("wallet_switchEthereumChain")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[27]||(t[27]=e=>l.wallet_addEthereumChain())},{default:(0,i.k6)((()=>t[101]||(t[101]=[(0,i.eW)("wallet_addEthereumChain")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[28]||(t[28]=e=>l.personal_sign())},{default:(0,i.k6)((()=>t[102]||(t[102]=[(0,i.eW)("personal_sign")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[29]||(t[29]=e=>l.eth_signTypedData_v4())},{default:(0,i.k6)((()=>t[103]||(t[103]=[(0,i.eW)("eth_signTypedData_v4")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_transfer},{default:(0,i.k6)((()=>t[104]||(t[104]=[(0,i.eW)("eth_sendTransaction(send POL)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_approve},{default:(0,i.k6)((()=>t[105]||(t[105]=[(0,i.eW)("eth_sendTransaction(approve sushi)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_mint},{default:(0,i.k6)((()=>t[106]||(t[106]=[(0,i.eW)("eth_sendTransaction(polygon mint nft)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[30]||(t[30]=e=>l.wallet_watchAsset())},{default:(0,i.k6)((()=>t[107]||(t[107]=[(0,i.eW)("wallet_watchAsset(add LGNS) ")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[31]||(t[31]=e=>l.wallet_testRpc())},{default:(0,i.k6)((()=>t[108]||(t[108]=[(0,i.eW)("wallet_testRpc(Polygon)")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_transfer},{default:(0,i.k6)((()=>t[109]||(t[109]=[(0,i.eW)("eth_sendTransaction(转账FUSE)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_approve},{default:(0,i.k6)((()=>t[110]||(t[110]=[(0,i.eW)("eth_sendTransaction(授权USDC)")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"BNB",name:"eip155:56"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_requestAccounts},{default:(0,i.k6)((()=>t[111]||(t[111]=[(0,i.eW)("eth_requestAccounts(BNB)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[32]||(t[32]=e=>l.eth_chainId())},{default:(0,i.k6)((()=>t[112]||(t[112]=[(0,i.eW)("eth_chainId(BNB)")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[33]||(t[33]=e=>l.wallet_switchEthereumChain())},{default:(0,i.k6)((()=>t[113]||(t[113]=[(0,i.eW)("wallet_switchEthereumChain(switch to BNB)")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[34]||(t[34]=e=>l.wallet_addEthereumChain())},{default:(0,i.k6)((()=>t[114]||(t[114]=[(0,i.eW)("wallet_addEthereumChain")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[35]||(t[35]=e=>l.personal_sign())},{default:(0,i.k6)((()=>t[115]||(t[115]=[(0,i.eW)("personal_sign")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[36]||(t[36]=e=>l.eth_signTypedData_v4())},{default:(0,i.k6)((()=>t[116]||(t[116]=[(0,i.eW)("eth_signTypedData_v4")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_transfer},{default:(0,i.k6)((()=>t[117]||(t[117]=[(0,i.eW)("eth_sendTransaction(send BNB)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_approve},{default:(0,i.k6)((()=>t[118]||(t[118]=[(0,i.eW)("eth_sendTransaction(approve POSI)")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[37]||(t[37]=e=>l.wallet_watchAsset())},{default:(0,i.k6)((()=>t[119]||(t[119]=[(0,i.eW)("wallet_watchAsset(add FET) ")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[38]||(t[38]=e=>l.wallet_testRpc())},{default:(0,i.k6)((()=>t[120]||(t[120]=[(0,i.eW)("wallet_testRpc(check balance on eth)")]))),_:1})])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"Fuse",name:"eip155:122"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_requestAccounts},{default:(0,i.k6)((()=>t[121]||(t[121]=[(0,i.eW)("eth_requestAccounts")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[39]||(t[39]=e=>l.eth_chainId())},{default:(0,i.k6)((()=>t[122]||(t[122]=[(0,i.eW)("eth_chainId")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[40]||(t[40]=e=>l.personal_sign())},{default:(0,i.k6)((()=>t[123]||(t[123]=[(0,i.eW)("personal_sign")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:t[41]||(t[41]=e=>l.eth_signTypedData_v4())},{default:(0,i.k6)((()=>t[124]||(t[124]=[(0,i.eW)("eth_signTypedData_v4")]))),_:1})])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.eth_sendTransaction_swap},{default:(0,i.k6)((()=>t[125]||(t[125]=[(0,i.eW)("eth_sendTransaction(Swap)")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"Sonic testnet",name:"svm:70000062"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signMessage},{default:(0,i.k6)((()=>t[126]||(t[126]=[(0,i.eW)("solana_signMessage")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signTransaction},{default:(0,i.k6)((()=>t[127]||(t[127]=[(0,i.eW)("solana_signTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signAllTransactions},{default:(0,i.k6)((()=>t[128]||(t[128]=[(0,i.eW)("sol_signAllTransactions")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signAndSendTransaction},{default:(0,i.k6)((()=>t[129]||(t[129]=[(0,i.eW)("sol_signAndSendTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.sol_signAndSendVersionedTransaction},{default:(0,i.k6)((()=>t[130]||(t[130]=[(0,i.eW)("signAndSendVersionedTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"Movement",name:"movement:testnet"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.aptos_signMessage},{default:(0,i.k6)((()=>t[131]||(t[131]=[(0,i.eW)("aptos_signMessage")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.move_signTransaction},{default:(0,i.k6)((()=>t[132]||(t[132]=[(0,i.eW)("move_signTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.move_signAndSubmitTransaction},{default:(0,i.k6)((()=>t[133]||(t[133]=[(0,i.eW)("move_signAndSubmitTransaction")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"osmos",name:"cosmos:osmosis-1"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signArbitrary},{default:(0,i.k6)((()=>t[134]||(t[134]=[(0,i.eW)("cosmos_signArbitrary")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signAmino},{default:(0,i.k6)((()=>t[135]||(t[135]=[(0,i.eW)("cosmos_signAmino")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signDirect},{default:(0,i.k6)((()=>t[136]||(t[136]=[(0,i.eW)("cosmos_signDirect")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"SEI",name:"cosmos:pacific-1"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signArbitrary},{default:(0,i.k6)((()=>t[137]||(t[137]=[(0,i.eW)("cosmos_signArbitrary")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signAmino},{default:(0,i.k6)((()=>t[138]||(t[138]=[(0,i.eW)("cosmos_signAmino")]))),_:1},8,["onClick"])])),_:1})])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.cosmos_signDirect},{default:(0,i.k6)((()=>t[139]||(t[139]=[(0,i.eW)("cosmos_signDirect")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),(0,i.bF)(C,{label:"Starknet",name:"starknet:mainnet"},{default:(0,i.k6)((()=>[(0,i.bF)(w,{ref:"starknetPanelRef",onGenerateTransactionParams:l.starknet_generateTransactionParams,onGenerateTransactionResult:l.starknet_getTransactionResult},null,8,["onGenerateTransactionParams","onGenerateTransactionResult"])])),_:1}),(0,i.bF)(C,{label:"TEST ",name:"test:1"},{default:(0,i.k6)((()=>[(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",onClick:l.testBase64UrlSafe},{default:(0,i.k6)((()=>t[140]||(t[140]=[(0,i.eW)("testBase64UrlSafe")]))),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue","onTabClick"]),(0,i.bF)(u,{xs:24,sm:24,style:{margin:"16px 0px"}},{default:(0,i.k6)((()=>[(0,i.bF)(g,{style:{"align-items":"center","justify-content":"space-between","margin-bottom":"8px"}},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:4},{default:(0,i.k6)((()=>t[141]||(t[141]=[(0,i.Lk)("p",{style:{"font-size":"11pt",margin:"0px","text-align":"start"}},"Redirect param (only for ETH, Polygon, BNB, Fuse)",-1)]))),_:1}),(0,i.bF)(u,{span:9},{default:(0,i.k6)((()=>[(0,i.bF)(b,{modelValue:e.redirect,"onUpdate:modelValue":t[43]||(t[43]=t=>e.redirect=t),onChange:l.handleRedirectSelect,placeholder:"Return Strategy",disabled:!l.canChainAddRedirectParam()},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.returnStrategies,(e=>((0,i.uX)(),(0,i.Wv)(h,{key:`return-strategy-select-option-${e}`,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange","disabled"])])),_:1}),(0,i.bF)(u,{span:10},{default:(0,i.k6)((()=>["deeplink"===e.redirect?((0,i.uX)(),(0,i.Wv)(_,{key:0,modelValue:e.redirectDeeplink,"onUpdate:modelValue":t[44]||(t[44]=t=>e.redirectDeeplink=t),onChange:l.handleRedirectDeeplink,placeholder:"Deeplink",disabled:!l.canChainAddRedirectParam()||"deeplink"!==e.redirect,style:{margin:"0px"}},null,8,["modelValue","onChange","disabled"])):(0,i.Q3)("",!0)])),_:1})])),_:1}),(0,i.bF)(m,{type:"primary",onClick:t[45]||(t[45]=e=>l.addRedirectParam()),disabled:!l.canChainAddRedirectParam()||!e.testTransaction},{default:(0,i.k6)((()=>t[142]||(t[142]=[(0,i.eW)(" Add redirect param to data ")]))),_:1},8,["disabled"])])),_:1}),(0,i.bF)(u,{xs:24,sm:12},{default:(0,i.k6)((()=>[t[143]||(t[143]=(0,i.Lk)("div",{class:"input-label"},"Data:",-1)),(0,i.bF)(_,{modelValue:e.testTransaction,"onUpdate:modelValue":t[46]||(t[46]=t=>e.testTransaction=t),type:"textarea",rows:5,placeholder:"sendTransactions"},null,8,["modelValue"])])),_:1}),(0,i.bF)(u,{xs:24,sm:12},{default:(0,i.k6)((()=>[t[144]||(t[144]=(0,i.Lk)("div",{class:"input-label"},"Result :",-1)),(0,i.bF)(_,{modelValue:e.testboc,"onUpdate:modelValue":t[47]||(t[47]=t=>e.testboc=t),type:"textarea",rows:5,placeholder:"boc"},null,8,["modelValue"])])),_:1}),(0,i.bF)(g,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(u,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(m,{type:"primary",disabled:s.sendBtnDisabled,onClick:t[48]||(t[48]=e=>l.sendTransaction())},{default:(0,i.k6)((()=>[(0,i.eW)((0,a.v_)(e.testTransactionStr),1)])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])}n(41011),n(92806),n(53287),n(70039),n(88373),n(51555),n(33734),n(22035),n(94932),n(50427),n(19239),n(70144),n(86823),n(51204),n(71433),n(27007),n(70354),n(57039),n(27618);var l=n(65418),d=n(2660),u=n(42795),g=n(45116),f=n(15426),p=n(18584),h=n(29772),b=n(36108);function _(e,t,n,o,s,a){const r=(0,i.g2)("el-button"),c=(0,i.g2)("el-col"),l=(0,i.g2)("el-input"),d=(0,i.g2)("el-row");return(0,i.uX)(),(0,i.Wv)(d,{gutter:12},{default:(0,i.k6)((()=>[(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[0]||(t[0]=e=>a.btc_getAccount())},{default:(0,i.k6)((()=>t[12]||(t[12]=[(0,i.eW)("getAccount(BTC)")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[1]||(t[1]=e=>a.btc_signMessage())},{default:(0,i.k6)((()=>t[13]||(t[13]=[(0,i.eW)("signMessage(BTC)")]))),_:1})])),_:1}),t[25]||(t[25]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[t[16]||(t[16]=(0,i.Lk)("div",{style:{"font-size":"12px",color:"gray"}},"(发送到Pattern测试钱包的legacy地址)",-1)),(0,i.bF)(l,{class:"grid-content",modelValue:o.sendAmount,"onUpdate:modelValue":t[2]||(t[2]=e=>o.sendAmount=e),clearable:"",placeholder:"请输入要发送的数量"},null,8,["modelValue"]),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[3]||(t[3]=e=>a.btc_send())},{default:(0,i.k6)((()=>t[14]||(t[14]=[(0,i.eW)("send(BTC)")]))),_:1}),t[17]||(t[17]=(0,i.Lk)("br",null,null,-1)),(0,i.bF)(l,{class:"grid-content",modelValue:o.sendSatoshisAmount,"onUpdate:modelValue":t[4]||(t[4]=e=>o.sendSatoshisAmount=e),clearable:"",placeholder:"请输入要发送的satoshi数量"},null,8,["modelValue"]),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[5]||(t[5]=e=>a.btc_sendBitcoin())},{default:(0,i.k6)((()=>t[15]||(t[15]=[(0,i.eW)("sendBitcoin(BTC)")]))),_:1})])),_:1}),t[26]||(t[26]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(l,{class:"grid-content",modelValue:o.psbtHex,"onUpdate:modelValue":t[6]||(t[6]=e=>o.psbtHex=e),clearable:"",placeholder:"请输入要签名的Psbt"},null,8,["modelValue"]),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[7]||(t[7]=e=>a.btc_signPsbt_up())},{default:(0,i.k6)((()=>t[18]||(t[18]=[(0,i.eW)("signPsbt(上架NFT)")]))),_:1}),t[20]||(t[20]=(0,i.Lk)("br",null,null,-1)),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[8]||(t[8]=e=>a.btc_signAndPushPsbt_up())},{default:(0,i.k6)((()=>t[19]||(t[19]=[(0,i.eW)("signAndPushPsbt(上架NFT)")]))),_:1}),t[21]||(t[21]=(0,i.Lk)("br",null,null,-1)),t[22]||(t[22]=(0,i.Lk)("div",{style:{"font-size":"12px","margin-top":"12px","margin-left":"4px",color:"gray","text-align":"left"}},[(0,i.Lk)("li",null," 1. 在OKX App选择要上架的Btc NFT，点击【上架】 "),(0,i.Lk)("li",null," 2. 弹出签名面板，点开高级选项，查看 "),(0,i.Lk)("li",null," 3. 单击复制，就可以得到psbt。然后退出上架流程。 "),(0,i.Lk)("li",null," 4. 验证 https://chainquery.com/bitcoin-cli/decodepsbt ")],-1))])),_:1}),t[27]||(t[27]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(l,{class:"grid-content",modelValue:o.nftId,"onUpdate:modelValue":t[9]||(t[9]=e=>o.nftId=e),clearable:"",placeholder:"请输入要转移的NFT ID"},null,8,["modelValue"]),(0,i.bF)(l,{class:"grid-content",modelValue:o.receiver,"onUpdate:modelValue":t[10]||(t[10]=e=>o.receiver=e),clearable:"",placeholder:"接收者钱包地址"},null,8,["modelValue"]),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[11]||(t[11]=e=>a.btc_sendInscription())},{default:(0,i.k6)((()=>t[23]||(t[23]=[(0,i.eW)("sendInscription(BTC)")]))),_:1}),t[24]||(t[24]=(0,i.Lk)("div",{style:{"font-size":"12px","margin-top":"12px","margin-left":"4px",color:"gray","text-align":"left"}},[(0,i.Lk)("li",null," 1. 在web端NFT界面，选择要发送的Btc NFT，打开详情 "),(0,i.Lk)("li",null," 2. 从NFT详情页URL中获取NFT id（url最后一部分） "),(0,i.Lk)("li",null," 3. 复制到上面输入框中，再点击sendInscription按钮 ")],-1))])),_:1})])),_:1})}var m=n(50141),y={name:"BtcTransactionPanel",props:{msg:String},setup(){const e=(0,m.KR)(""),t=(0,m.KR)(15e-6),n=(0,m.KR)(17100),o=(0,m.KR)(""),s=(0,m.KR)("");return{nftId:e,receiver:s,psbtHex:o,sendAmount:t,sendSatoshisAmount:n}},methods:{btc_getAccount(){this.$emit("generateTransactionParams",{},"btc_getAccount")},btc_signMessage(){let e={from:"bc1p7pgnqe87red4cvd7ml6rh9pl9ufpr522k2y3dpeyrvfc6g2g3r3s3ae9dr",signStr:"Welcome to BTC"};this.$emit("generateTransactionParams",e,"btc_signMessage")},btc_send(){if(0==this.sendAmount)return void alert("不能为零");let e={from:"",to:"1NKnZ3uAuQLnmExA3WY44u1efwCgTiAxBn",value:`${this.sendAmount}`};this.$emit("generateTransactionParams",e,"btc_send")},btc_sendBitcoin(){if(0==this.sendAmount)return void alert("不能为零");let e={from:"",toAddress:"1NKnZ3uAuQLnmExA3WY44u1efwCgTiAxBn",satoshis:`${this.sendSatoshisAmount}`,options:{feeRate:16}};this.$emit("generateTransactionParams",e,"btc_sendBitcoin")},btc_signPsbt_up(){this.psbtHex?this.$emit("generateTransactionParams",{psbtHex:this.psbtHex,options:{autoFinalized:!1}},"btc_signPsbt"):alert("请输入psbt")},btc_signAndPushPsbt_up(){this.psbtHex?this.$emit("generateTransactionParams",{psbtHex:this.psbtHex,options:{autoFinalized:!0}},"btc_signAndPushPsbt"):alert("请输入psbt")},btc_sendInscription(){this.nftId?this.receiver?this.$emit("generateTransactionParams",{address:this.receiver,inscriptionId:this.nftId,options:{feeRate:"15"}},"btc_sendInscription"):alert("请输入接收者地址"):alert("请输入NFT ID")}}},C=n(15690);const v=(0,C.A)(y,[["render",_],["__scopeId","data-v-376d03bc"]]);var O=v;function k(e,t,n,o,s,a){const r=(0,i.g2)("el-button"),c=(0,i.g2)("el-col"),l=(0,i.g2)("el-input"),d=(0,i.g2)("el-row");return(0,i.uX)(),(0,i.Wv)(d,{gutter:12},{default:(0,i.k6)((()=>[(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[0]||(t[0]=e=>a.fractal_getAccount())},{default:(0,i.k6)((()=>t[12]||(t[12]=[(0,i.eW)("getAccount(Fractal)")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[1]||(t[1]=e=>a.fractal_signMessage())},{default:(0,i.k6)((()=>t[13]||(t[13]=[(0,i.eW)("signMessage(Fractal)")]))),_:1})])),_:1}),t[25]||(t[25]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[t[16]||(t[16]=(0,i.Lk)("div",{style:{"font-size":"12px",color:"gray"}},"(发送到Pattern测试钱包的legacy地址)",-1)),(0,i.bF)(l,{class:"grid-content",modelValue:o.sendAmount,"onUpdate:modelValue":t[2]||(t[2]=e=>o.sendAmount=e),clearable:"",placeholder:"请输入要发送的数量"},null,8,["modelValue"]),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[3]||(t[3]=e=>a.fractal_send())},{default:(0,i.k6)((()=>t[14]||(t[14]=[(0,i.eW)("send(Fractal)")]))),_:1}),t[17]||(t[17]=(0,i.Lk)("br",null,null,-1)),(0,i.bF)(l,{class:"grid-content",modelValue:o.sendSatoshisAmount,"onUpdate:modelValue":t[4]||(t[4]=e=>o.sendSatoshisAmount=e),clearable:"",placeholder:"请输入要发送的satoshi数量"},null,8,["modelValue"]),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[5]||(t[5]=e=>a.fractal_sendBitcoin())},{default:(0,i.k6)((()=>t[15]||(t[15]=[(0,i.eW)("sendBitcoin(Fractal)")]))),_:1})])),_:1}),t[26]||(t[26]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(l,{class:"grid-content",modelValue:o.psbtHex,"onUpdate:modelValue":t[6]||(t[6]=e=>o.psbtHex=e),clearable:"",placeholder:"请输入要签名的Psbt"},null,8,["modelValue"]),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[7]||(t[7]=e=>a.fractal_signPsbt_up())},{default:(0,i.k6)((()=>t[18]||(t[18]=[(0,i.eW)("signPsbt(上架NFT)")]))),_:1}),t[20]||(t[20]=(0,i.Lk)("br",null,null,-1)),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[8]||(t[8]=e=>a.fractal_signAndPushPsbt_up())},{default:(0,i.k6)((()=>t[19]||(t[19]=[(0,i.eW)("signAndPushPsbt(上架NFT)")]))),_:1}),t[21]||(t[21]=(0,i.Lk)("br",null,null,-1)),t[22]||(t[22]=(0,i.Lk)("div",{style:{"font-size":"12px","margin-top":"12px","margin-left":"4px",color:"gray","text-align":"left"}},[(0,i.Lk)("li",null," 1. 在OKX App选择要上架的Fractal NFT，点击【上架】 "),(0,i.Lk)("li",null," 2. 弹出签名面板，点开高级选项，查看 "),(0,i.Lk)("li",null," 3. 单击复制，就可以得到psbt。然后退出上架流程。 "),(0,i.Lk)("li",null," 4. 验证 https://chainquery.com/bitcoin-cli/decodepsbt ")],-1))])),_:1}),t[27]||(t[27]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(l,{class:"grid-content",modelValue:o.nftId,"onUpdate:modelValue":t[9]||(t[9]=e=>o.nftId=e),clearable:"",placeholder:"请输入要转移的NFT ID"},null,8,["modelValue"]),(0,i.bF)(l,{class:"grid-content",modelValue:o.receiver,"onUpdate:modelValue":t[10]||(t[10]=e=>o.receiver=e),clearable:"",placeholder:"接收者钱包地址"},null,8,["modelValue"]),(0,i.bF)(r,{class:"grid-content",type:"warning",onClick:t[11]||(t[11]=e=>a.fractal_sendInscription())},{default:(0,i.k6)((()=>t[23]||(t[23]=[(0,i.eW)("sendInscription(Fractal)")]))),_:1}),t[24]||(t[24]=(0,i.Lk)("div",{style:{"font-size":"12px","margin-top":"12px","margin-left":"4px",color:"gray","text-align":"left"}},[(0,i.Lk)("li",null," 1. 在web端NFT界面，选择要发送的Fractal NFT，打开详情 "),(0,i.Lk)("li",null," 2. 从NFT详情页URL中获取NFT id（url最后一部分） "),(0,i.Lk)("li",null," 3. 复制到上面输入框中，再点击sendInscription按钮 ")],-1))])),_:1})])),_:1})}var T={name:"BtcTransactionPanel",props:{msg:String},setup(){const e=(0,m.KR)(""),t=(0,m.KR)(15e-6),n=(0,m.KR)(17100),o=(0,m.KR)(""),s=(0,m.KR)("");return{nftId:e,receiver:s,psbtHex:o,sendAmount:t,sendSatoshisAmount:n}},methods:{fractal_getAccount(){this.$emit("generateTransactionParams",{},"fractal_getAccount")},fractal_signMessage(){let e={from:"bc1p7pgnqe87red4cvd7ml6rh9pl9ufpr522k2y3dpeyrvfc6g2g3r3s3ae9dr",signStr:"Welcome to UniSat!\n\nClick to sign in and accept the UniSat Terms of Service (https://unisat.io/terms-of-service.html) and Privacy Policy (https://unisat.io/privacy-policy.html).\n    \nThis request will not trigger a blockchain transaction.\n    \nYour authentication status will reset after 24 hours.\n    \nWallet address:\nbc1p7pgnqe87red4cvd7ml6rh9pl9ufpr522k2y3dpeyrvfc6g2g3r3s3ae9dr\n    \nNonce:\n162d70e3-8c21-4cfd-9a22-9bf0a4b7be51\n"};this.$emit("generateTransactionParams",e,"fractal_signMessage")},fractal_send(){if(0==this.sendAmount)return void alert("不能为零");let e={from:"",to:"1NKnZ3uAuQLnmExA3WY44u1efwCgTiAxBn",value:`${this.sendAmount}`};this.$emit("generateTransactionParams",e,"fractal_send")},fractal_sendBitcoin(){if(0==this.sendAmount)return void alert("不能为零");let e={from:"",toAddress:"1NKnZ3uAuQLnmExA3WY44u1efwCgTiAxBn",satoshis:`${this.sendSatoshisAmount}`,options:{feeRate:16}};this.$emit("generateTransactionParams",e,"fractal_sendBitcoin")},fractal_signPsbt_up(){this.psbtHex?this.$emit("generateTransactionParams",{psbtHex:this.psbtHex,options:{autoFinalized:!1}},"fractal_signPsbt"):alert("请输入psbt")},fractal_signAndPushPsbt_up(){this.psbtHex?this.$emit("generateTransactionParams",{psbtHex:this.psbtHex,options:{autoFinalized:!0}},"fractal_signAndPushPsbt"):alert("请输入psbt")},fractal_sendInscription(){this.nftId?this.receiver?this.$emit("generateTransactionParams",{address:this.receiver,inscriptionId:this.nftId,options:{feeRate:"15"}},"fractal_sendInscription"):alert("请输入接收者地址"):alert("请输入NFT ID")}}};const w=(0,C.A)(T,[["render",k],["__scopeId","data-v-fb2f7e38"]]);var E=w;function S(e,t,n,o,s,a){const r=(0,i.g2)("el-button"),c=(0,i.g2)("el-col"),l=(0,i.g2)("el-row");return(0,i.uX)(),(0,i.Wv)(l,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[0]||(t[0]=e=>a.sui_getAccount())},{default:(0,i.k6)((()=>t[8]||(t[8]=[(0,i.eW)("getAccount(Sui)")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[1]||(t[1]=e=>a.sui_signMessage())},{default:(0,i.k6)((()=>t[9]||(t[9]=[(0,i.eW)("signMessage(Sui)")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[2]||(t[2]=e=>a.sui_signPersonalMessage())},{default:(0,i.k6)((()=>t[10]||(t[10]=[(0,i.eW)("signPersonalMessage(Sui)")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[3]||(t[3]=e=>a.sui_signTransaction2())},{default:(0,i.k6)((()=>t[11]||(t[11]=[(0,i.eW)("signTransaction(Sui)")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[4]||(t[4]=e=>a.sui_signAndExecuteTransaction())},{default:(0,i.k6)((()=>t[12]||(t[12]=[(0,i.eW)("sendTransaction(Sui)")]))),_:1}),t[13]||(t[13]=(0,i.Lk)("div",{style:{"font-size":"12px",color:"gray"}},"(send to Rally Tiger account)",-1))])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[5]||(t[5]=e=>a.sui_requestRpc())},{default:(0,i.k6)((()=>t[14]||(t[14]=[(0,i.eW)("RPC_getBalance")]))),_:1}),t[15]||(t[15]=(0,i.Lk)("div",{style:{"font-size":"12px",color:"gray"}},"get USDC balance of address:",-1)),t[16]||(t[16]=(0,i.Lk)("div",{style:{"font-size":"12px",color:"gray"}},"0x51ceab2edc89f74730e683ebee65578cb3bc9237ba6fca019438a9737cf156ae",-1))])),_:1}),t[19]||(t[19]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[6]||(t[6]=e=>a.sui_signTransaction_pre_execution())},{default:(0,i.k6)((()=>t[17]||(t[17]=[(0,i.eW)("signTransaction(prepared data)")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[7]||(t[7]=e=>a.sui_signAndExecuteTransaction_pre_execution())},{default:(0,i.k6)((()=>t[18]||(t[18]=[(0,i.eW)("sendTransaction(prepared data)")]))),_:1})])),_:1})])),_:1})}var N=n(20777),R=n(16310),D=n(82933),P=n(63987)["Buffer"],A={name:"SuiTransactionPanel",methods:{sui_getAccount(){this.$emit("generateTransactionParams","","sui_getAccount")},async sui_signMessage(){const e=[76,111,103,105,110,32,119,105,116,104,32,66,108,117,101,109,111,118,101],t=new Uint8Array(e);let n={message:t};this.$emit("generateTransactionParams",n,"sui_signMessage")},async sui_signPersonalMessage(){const e=[76,111,103,105,110,32,119,105,116,104,32,66,108,117,101,109,111,118,101],t=new Uint8Array(e);let n={message:t};this.$emit("generateTransactionParams",n,"sui_signPersonalMessage")},sui_signTransaction2(){const e=109,t="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",n=new D.Z,[o]=n.splitCoins(n.gas,[e]);n.transferObjects([o],t);const s={transactionBlock:n,account:{},chain:"sui:mainnet",options:{showEffects:!0}};this.$emit("generateTransactionParams",s,"sui_signTransaction")},async sui_requestRpc(){let e=window.provider;e.setDefaultChain("sui:mainnet","https://fullnode.mainnet.sui.io:443");var t={method:"suix_getBalance",params:["0x51ceab2edc89f74730e683ebee65578cb3bc9237ba6fca019438a9737cf156ae","0x168da5bf1f48dafc111b0a488fa454aca95e0b5e::usdc::USDC"]};this.$emit("generateTransactionParams",t,"sui_testRpc")},async sui_signTransaction_pre_execution(){const e=102,t="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",n=new D.Z,[o]=n.splitCoins(n.gas,[e]);n.transferObjects([o],t);const s={transactionBlock:n,options:{showEffects:!0}},[i,a]=await this.generateTsBytesAndSerizlize(s);s.txBytes=i,s.txSerialize=a,this.$emit("generateTransactionParams",s,"sui_signTransaction")},async sui_signAndExecuteTransaction_pre_execution(){const e=115,t="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",n=new D.Z,[o]=n.splitCoins(n.gas,[e]);n.transferObjects([o],t);const s={transactionBlock:n,options:{showEffects:!0}},[i,a]=await this.generateTsBytesAndSerizlize(s);s.txBytes=i,s.txSerialize=a,this.$emit("generateTransactionParams",s,"sui_signAndExecuteTransaction")},async generateTsBytesAndSerizlize(e){let t=["",""];if("txBytes"in e&&e.txBytes.length>0&&"txSerialize"in e&&e.txSerialize.length>0&&(t=[e.txBytes,e.txSerialize]),!("transactionBlock"in e))return new Promise((e=>{e(t)}));let n=window.provider.requestAccountsWithNamespace("sui");if(0==n.length)return new Promise((e=>{e(t)}));try{let o=(0,N.T)("mainnet");o="https://www.okx.com/fullnode/sui/discover/rpc";const s=new R.x({url:o});e.transactionBlock.setSender(n[0]);const i=await e.transactionBlock.build({client:s}),a=P(i).toString("base64"),r=await D.Z.from(a).toJSON();t=[a,r]}catch(o){return new Promise((e=>{e(t)}))}return new Promise((e=>{e(t)}))},sui_signAndExecuteTransaction(){const e=115,t="0x72f798f8b709902453d4bb55c65661e9e04154a506765f2333dfb7e7834056d2",n=new D.Z,[o]=n.splitCoins(n.gas,[e]);n.transferObjects([o],t);const s={transactionBlock:n,account:{},chain:"sui:mainnet",options:{showEffects:!0}};this.testTransaction=JSON.stringify(s),this.currentSuiTransaction=s,this.currentSuiMethod="sui_signAndExecuteTransaction"}}};const I=(0,C.A)(A,[["render",S],["__scopeId","data-v-56a8eddf"]]);var K=I;function F(e,t,n,o,s,a){const r=(0,i.g2)("el-button"),c=(0,i.g2)("el-col"),l=(0,i.g2)("el-row");return(0,i.uX)(),(0,i.Wv)(l,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[0]||(t[0]=e=>a.starknet_signMessage())},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("signMessage")]))),_:1}),t[3]||(t[3]=(0,i.Lk)("div",{style:{"font-size":"12px","margin-top":"12px","margin-left":"4px",color:"gray","text-align":"left"}},[(0,i.Lk)("li",null," 1. 验签不成功的话，请尝试连接VPN ")],-1))])),_:1}),t[6]||(t[6]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[1]||(t[1]=e=>a.starknet_sendTransaction(!0))},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)(" sendTransaction ")]))),_:1}),t[5]||(t[5]=(0,i.Lk)("div",{style:{"font-size":"12px","margin-top":"12px","margin-left":"4px",color:"gray","text-align":"left"}},[(0,i.Lk)("li",null," 1. 发送0.12个DAI到0x00b9...4237f的地址 "),(0,i.Lk)("li",null," 2. 请保证你的钱包有足够的DAI ")],-1))])),_:1})])),_:1})}var M=n(61815),W={name:"StarknetTransactionPanel",methods:{async starknet_signMessage(){if(this.address=this.getCurrentAddress(),""===this.address)return void alert("address can't be ''");let e=this.signData;this.$emit("generateTransactionParams",JSON.stringify(e));let t=new d.OKXStarknetProvider(window.provider),n=await t.signMessage(this.address,e,"starknet:mainnet");if(n.code){if(301==n.code){let e="Wallet address is registering, please try again later!";alert(e),this.$emit("generateTransactionResult",e,"starknet_signMessage")}return void this.$emit("generateTransactionResult",n,"starknet_signMessage")}console.log(n);const o=new M.bd({nodeUrl:"https://free-rpc.nethermind.io/mainnet-juno/v0_7"});let s="0x123";const i=new M.gD(o,this.address,s);let a=this;i.verifyMessage(e,n).then((function(e){a.$emit("generateTransactionResult","verify:"+e+"\n"+n,"starknet_signMessage")})).catch((function(e){a.$emit("generateTransactionResult","failed:"+e+"\n"+n,"starknet_signMessage")}))},async starknet_sendTransaction(){if(this.address=this.getCurrentAddress(),""===this.address)return void alert("address can't be ''");let e=M.iN.bnToUint256(12e16);const t=M.fP.compile({to:"0x00b909cefa36ab6bc26f5887a867e46ef162238f0a171b1c2974b665afd4237f",value:e}),n="0x00da114221cb83fa859dbdb4c44beeaa0bb37c7537ad5ae66fe5e0efd20e6eb3",o={calls:[{contract_address:n,entry_point:"transfer",calldata:t}]};this.$emit("generateTransactionParams",JSON.stringify(o));let s=new d.OKXStarknetProvider(window.provider),i=this;s.sendTransaction(this.address,o,"starknet:mainnet").then((function(e){console.log("starknet_sendTransaction result ",e),i.$emit("generateTransactionResult",e,"starknet_sendTransaction")})).catch((function(e){if(301==e.code){let e="Wallet address is registering, please try again later!";alert(e),i.$emit("generateTransactionResult",e,"starknet_sendTransaction")}else i.$emit("generateTransactionResult",e,"starknet_sendTransaction")}))},getCurrentAddress(){let e=new d.OKXStarknetProvider(window.provider);const t=e.getAccount("starknet:mainnet")?.address;return t},getPublicKey(){let e=new d.OKXStarknetProvider(window.provider);const t=e.getAccount("starknet:mainnet");return console.log("获取到的account是："),console.log(t),"05d8e5e9c1dd686246716c888159271d2f13986cb4acee46164e2c4e034629c0"}},data(){const e={domain:{chainId:"0x534e5f4d41494e",name:"STRKFarm",version:"1"},message:{document:"app.strkfarm.xyz/tnc/v1",message:"Read and Agree T&C"},primaryType:"Tnc",types:{StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],Tnc:[{name:"message",type:"felt"},{name:"document",type:"felt"}]}};return{signData:e}}};const x=(0,C.A)(W,[["render",F],["__scopeId","data-v-082fda2b"]]);var L=x,U=n(20571),J=n(79556),B=n(55138),X=n.n(B),j=n(41479),H=n.n(j),$=n(79414);function V(e,t,n,o,s,a){const r=(0,i.g2)("el-button"),c=(0,i.g2)("el-col"),l=(0,i.g2)("el-row");return(0,i.uX)(),(0,i.Wv)(l,{gutter:12,class:"button-row"},{default:(0,i.k6)((()=>[(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[0]||(t[0]=e=>a.tron_signMessage())},{default:(0,i.k6)((()=>t[8]||(t[8]=[(0,i.eW)("tron_signMessage")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[1]||(t[1]=e=>a.tron_signMessageV2())},{default:(0,i.k6)((()=>t[9]||(t[9]=[(0,i.eW)("tron_signMessageV2")]))),_:1})])),_:1}),t[16]||(t[16]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[2]||(t[2]=e=>a.tron_signTransaction(!0))},{default:(0,i.k6)((()=>t[10]||(t[10]=[(0,i.eW)(" tron_signTransaction(transfer) ")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[3]||(t[3]=e=>a.tron_signAndSendTransactionContract(!0))},{default:(0,i.k6)((()=>t[11]||(t[11]=[(0,i.eW)(" tron_signTransaction(contract) ")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[4]||(t[4]=e=>a.tron_signAndSendTransactionApprove(!0))},{default:(0,i.k6)((()=>t[12]||(t[12]=[(0,i.eW)(" tron_signTransaction(Approve) ")]))),_:1})])),_:1}),t[17]||(t[17]=(0,i.Lk)("div",{class:"line"},null,-1)),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[5]||(t[5]=e=>a.tron_signTransaction(!1))},{default:(0,i.k6)((()=>t[13]||(t[13]=[(0,i.eW)(" tron_signAndSendTransaction(transfer) ")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[6]||(t[6]=e=>a.tron_signAndSendTransactionContract(!1))},{default:(0,i.k6)((()=>t[14]||(t[14]=[(0,i.eW)(" tron_signAndSendTransaction(contract) ")]))),_:1})])),_:1}),(0,i.bF)(c,{span:24},{default:(0,i.k6)((()=>[(0,i.bF)(r,{class:"grid-content",type:"primary",onClick:t[7]||(t[7]=e=>a.tron_signAndSendTransactionApprove(!1))},{default:(0,i.k6)((()=>t[15]||(t[15]=[(0,i.eW)(" tron_signAndSendTransaction(approve) ")]))),_:1})])),_:1})])),_:1})}var q=n(30626),G=n(63987)["Buffer"],Y={name:"TronTransactionPanel",methods:{async tron_signMessage(){this.$emit("generateTransactionParams","Hello Tron");let e=new d.OKXTronProvider(window.provider),t=await e.signMessage("Hello Tron","tron:mainnet");if(t.code)return void this.$emit("generateTransactionResult",t,"tron_signMessage");let n=new q.K_({fullHost:"https://api.trongrid.io",headers:{},privateKey:""});const o=await n.trx.verifyMessage("0x"+G.from("Hello Tron").toString("hex"),t,e.getAccount("tron:mainnet").address);this.$emit("generateTransactionResult","verify:"+o+"\n"+t,"tron_signMessage")},async tron_signMessageV2(){this.$emit("generateTransactionParams","Hello Tron");let e=new d.OKXTronProvider(window.provider),t=await e.signMessageV2("Hello Tron","tron:mainnet");if(t.code)return void this.$emit("generateTransactionResult",t,"tron_signMessage");let n=new q.K_({fullHost:"https://api.trongrid.io",headers:{},privateKey:""});const o=await n.trx.verifyMessageV2("Hello Tron",t);console.log("tron_signMessageV2_base58Address",o),console.log("tron_signMessageV2_address",e.getAccount("tron:mainnet").address);const s=o===e.getAccount("tron:mainnet").address;this.$emit("generateTransactionResult","verify:"+s+"\n"+t,"tron_signMessage")},async tron_signTransaction(e){let t=new d.OKXTronProvider(window.provider),n=new q.K_({fullHost:"https://api.trongrid.io",headers:{},privateKey:""}),o=t.getAccount("tron:mainnet").address;const s=await n.transactionBuilder.sendTrx("TGBcVLMnVtvJzjPWZpPiYBgwwb7th1w3BF",1e3,o);if(this.$emit("generateTransactionParams",s),e){let e=await t.signTransaction(s,"tron:mainnet");this.$emit("generateTransactionResult",e,"tron_signTransaction")}else{let e=await t.signAndSendTransaction(s,"tron:mainnet");this.$emit("generateTransactionResult",e,"tron_sendRawTransaction")}},async getContract(){let e=new q.K_({fullHost:"https://api.trongrid.io",headers:{},privateKey:""}),t="41b4a428ab7092c2f1395f376ce297033b3bb446c1";try{const n=await e.trx.getContract(t),o=n.abi.entrys;console.log("获取到的合约："),console.log(o)}catch(n){console.log("Error getting contract ABI:",n)}},async tron_signAndSendTransactionContract(e){let t=new q.K_({fullHost:"https://api.trongrid.io",headers:{},privateKey:""}),n="41e95812d8d5b5412d2b9f3a4d5a87ca15c5c51f33",o=new d.OKXTronProvider(window.provider),s=o.getAccount("tron:mainnet").address;const i=[{type:"uint256",value:1},{type:"uint256",value:1},{type:"uint256",value:1}],a=await t.transactionBuilder.triggerSmartContract(n,"quote(uint256,uint256,uint256)",{},i,s);if(console.log("=====>transaction: "),console.log(a),this.$emit("generateTransactionParams",a.transaction),e){let e=await o.signTransaction(a.transaction,"tron:mainnet");this.$emit("generateTransactionResult",e,"tron_sendRawTransaction")}else{let e=await o.signAndSendTransaction(a.transaction,"tron:mainnet");this.$emit("generateTransactionResult",e,"tron_sendRawTransaction")}},async tron_signAndSendTransactionApprove(e){let t="41b4a428ab7092c2f1395f376ce297033b3bb446c1",n=new d.OKXTronProvider(window.provider),o=n.getAccount("tron:mainnet").address;const s=[{type:"address",value:t},{type:"uint256",value:1e3}];let i=new q.K_({fullHost:"https://api.trongrid.io",headers:{},privateKey:""});const a=await i.transactionBuilder.triggerSmartContract(t,"approve(address,uint256)",{},s,o);let r=a.transaction;if(this.$emit("generateTransactionParams",r),e){let e=await n.signTransaction(r,"tron:mainnet");this.$emit("generateTransactionResult",e,"tron_sendRawTransaction")}else{let e=await n.signAndSendTransaction(r,"tron:mainnet");this.$emit("generateTransactionResult",e,"tron_sendRawTransaction")}}}};const z=(0,C.A)(Y,[["render",V],["__scopeId","data-v-55a13ab0"]]);var Q=z,Z=n(63987)["Buffer"];const{verifyADR36Amino:ee}=n(98471),{fromBech32:te}=n(97777);new(X());const ne={1:{name:"Eth",checked:!1},56:{name:"BNB",checked:!1},137:{name:"Polygon",checked:!1},122:{name:"Fuse",checked:!1},"ton:-239":{name:"TON",checked:!1},"btc:mainnet":{name:"BTC",checked:!1},"sui:mainnet":{name:"Sui",checked:!1},"aptos:mainnet":{name:"Aptos",checked:!1},"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":{name:"Solana",checked:!1},"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":{name:"Sol testnet",checked:!1},"svm:70000062":{name:"Sonic testnet",checked:!1},"movement:testnet":{name:"Movement",checked:!1},"fractal:mainnet":{name:"Fractal",checked:!1},"cosmos:osmosis-1":{name:"Osmos",checked:!1},"cosmos:cosmoshub-4":{name:"Cosmos",checked:!1},"cosmos:pacific-1":{name:"SEI",checked:!1},"cosmos:abvdefg":{name:"cosmos:abvdefg",checked:!1},"tron:mainnet":{name:"tron",checked:!1},997865:{name:"Non Exist chain",checked:!1},2020:{name:"Ronin",checked:!1},16666e5:{name:"Harmony",checked:!1},"starknet:mainnet":{name:"starknet",checked:!1}},oe=["eip"];var se=new Set([]),ie=["before","success","error"],ae="none",re="tg://resolve",ce="en_US",le=U.THEME.LIGHT,de={name:"App",components:{TronTransactionPanel:Q,QrcodeVue:p.Ay,BTCPanel:O,FractalPanel:E,SuiPanel:K,StarknetPanel:L},setup(){const e=(0,m.KR)(!1);return{sendBtnDisabled:e}},data:()=>({activeTab:"eip155:1",testTopic:"",testPublicKey:"",testProofPayload:"",tonProofValue:"",pendingDeepLink:"-",logList:[],connectReady:!1,connectStatusStr:"Connect",syncAllAddressStr:"syncAllAddress",connectInitStr:"init test",disconnectStatusStr:"Disconnect",localPubKey:"",localSecKey:"",testTransaction:"",selectedChain:"eip155:1",testTransactionStr:"Send",walletAddress:"",testboc:"",ProofPayloadVerify:"",showModal:!1,showVerifyRow:!1,qrValue:"https://www.okx.com/download",currentStatus:"",areChainsInit:!1,availableChains:ne,isOptionalChecked:e=>se.has(e),withUI:"false"!=localStorage.getItem("autoRefresh"),universalToTG:"false"!=localStorage.getItem("universalToTG"),modals:ie,returnStrategies:["none","back","deeplink"],returnStrategy:ae,deeplink:re,locales:["en_US","ru_RU","zh_CN","zh","ar_AE","cs_CZ","de_DE","es_ES","es_LAT","fr_FR","id_ID","it_IT","nl_NL","pl_PL","pt_BR","pt_PT","ro_RO","tr_TR","uk_UA","vi_VN","zh_TW"],selectedMethod:[],selectedMethodData:[],connectMethods:["wallet_addEthereumChain(ETH)","personal_sign(ETH)","solana_signMessage(Sol mainnet)","sui_signMessage(Sui mainnet)","sui_signPersonalMessage(Sui mainnet)","btc_signMessage(BTC)","aptos_signMessage(aptos mainnet)","cosmos_signArbitrary(cosmoshub)","test_noSupport_eth(ETH)","tron_signMessage","tron_signMessageV2","starknet_signMessage","sync_all_addresses"],language:ce,theme:le,THEME:U.THEME,redirect:ae,redirectDeeplink:re,handleWithUI:e=>{localStorage.setItem("autoRefresh",`${e}`),location.reload()},handleUniversalToTG:e=>{localStorage.setItem("universalToTG",`${e}`)},handleOptionChange:e=>{se.has(e)?se.delete(e):se.add(e)},starknetPanelTypedData:""}),computed:{getWalletAddress:function(){return this.walletAddress}},methods:{isChecked(e){return this.selectedChains.has(e)},initChains(e){if(e.length>0){const t=Object.assign({},this.availableChains);for(const n of e)t[n]&&(t[n].checked=!t[n].checked);this.availableChains=t}this.areChainsInit=!0},async clickActiveTab(e){const t=e.props?e.props.name:e.name;this.selectedChain=t,console.log("已切换到链 :",t),window.provider||console.error("钱包 未初始化完成"),this.sendBtnDisabled="starknet:mainnet"==t,window.provider.setDefaultChain(this.selectedChain)},async initBtnClicked(){var e;e=this.withUI?U.OKXUniversalConnectUI.init({dappMetaData:{icon:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",name:"OKX WalletConnect UI Demo"},actionsConfiguration:{returnStrategy:ae,modals:"all"},language:ce,uiPreferences:{theme:le}}):d.OKXUniversalProvider.init({dappMetaData:{name:"univer test dapp",icon:"https://avatars.githubusercontent.com/u/37784886"}}),e.then((e=>{if(window.provider=e,window.tonProvider=new d.OKXTonProvider(window.provider),window.tonProvider.onStatusChange((e=>{console.log("TONConnection onStatusChange:",JSON.stringify(e))}),(e=>{console.log("TONConnection onStatusChange error:",e)})),window.provider instanceof U.OKXUniversalConnectUI&&window.provider.onModalStateChange((e=>{console.log(`onModalStateChange   ${JSON.stringify(e)}`)})),console.log("init finished:",e),console.log("init finished session:",JSON.stringify(e.session)),e.session?.namespaces){const t=[];console.log("namespaces",e.session.namespaces),Object.entries(e.session.namespaces).forEach((([e,n])=>{"eip155"===e?n.chains.forEach((e=>{t.push(parseInt(e.substring(7)))})):n.chains.forEach((e=>{t.push(e)}))})),console.log("existing chains:",t),this.initChains(t)}else this.initChains([]);e.on("display_uri",(e=>{(0,l.useShortLink)()||this.isPC()&&(!e||this.withUI||this.universalToTG||(this.qrValue=e,this.showModal=!0)),console.log("通知>>>display_uri  ==> ",e)})),e.on("connect_signResponse",(e=>{console.log("通知>>>connect_signResponse  ==> ",JSON.stringify(e)),this.verifyMessage(e)})),e.on("short_display_uri",(e=>{(0,l.useShortLink)()&&this.isPC()&&(!e||this.withUI||this.universalToTG||(this.qrValue=e,this.showModal=!0)),console.log("通知>>>short_display_uri  ==> ",e)})),e.on("session_connecting",(()=>{(0,l.useShortLink)()&&alert("session_connecting"),console.log("通知>>>session_connecting  ==> ")})),e.on("connect",(e=>{console.log("通知>>>get connect session",e)})),e.on("reconnect",(e=>{console.log("通知>>>get reconnect session",e),this.walletAddress="connected"})),e.on("disconnect",(({topic:e})=>{console.log(`通知>>>get disconnect  ${e}`),this.walletAddress="disconnecteddddd"})),e.on("session_delete",(({topic:e})=>{console.log(`通知>>>get session_delete  ${e}`)})),e.on("session_update",(e=>{console.log("通知>>>get session_update ",JSON.stringify(e))}))}))},async connectBtnClicked(){console.log(`encryptStoreMsg   connectBtnClicked  ${Date.now()}`),window.provider?this.testTonSdk():console.log("connectBtnClicked provider not finish init")},async syncAllAddressClick(){if(console.log(`encryptStoreMsg   connectBtnClicked  ${Date.now()}`),window.provider){if(window.provider instanceof d.OKXUniversalProvider)if(window.provider.connected())try{let e=await window.provider.syncAllAddresses();this.testboc="string"==typeof e?e:JSON.stringify(e)}catch(e){this.testboc=JSON.stringify(e)}else this.testboc="not connected"}else console.log("syncAllAddress provider not finish init")},async disconnectAction(){try{console.log("get disconnect wallet btn clicked");var e=window.provider;await e.disconnect(),this.walletAddress="disconnected"}catch(t){console.log("Disconnect  error ==>> ",t.message),this.currentStatus=t.message}},async eth_requestAccounts(){var e={method:"eth_requestAccounts"};this.testTransaction=JSON.stringify(e)},async eth_chainId(){var e={method:"eth_chainId"};this.testTransaction=JSON.stringify(e)},async wallet_switchEthereumChain(){var e={method:"wallet_switchEthereumChain"};this.testTransaction=JSON.stringify(e)},async wallet_addEthereumChain(){var e={method:"wallet_addEthereumChain",params:{blockExplorerUrls:["https://explorer.fuse.io"],chainId:"0x7a",chainName:"Fuse",nativeCurrency:{name:"Fuse",symbol:"FUSE",decimals:18},rpcUrls:["https://rpc.fuse.io"]}};this.testTransaction=JSON.stringify(e)},async personal_sign(){if("eip155:1"===this.selectedChain){var e=await window.provider.request({method:"eth_requestAccounts"},"eip155:1"),t=e[0];console.log("签名地址>>>",t,JSON.stringify(e));var n={method:"personal_sign",params:["0x4d7920656d61696c206973206a6f686e40646f652e636f6d202d2031373237353937343537313336",t]};this.testTransaction=JSON.stringify(n)}else if("eip155:137"===this.selectedChain||"eip155:122"===this.selectedChain){var o={method:"personal_sign",params:{message:"0x4d7920656d61696c206973206a6f686e40646f652e636f6d202d2031373237353937353831303437"}};this.testTransaction=JSON.stringify(o)}else if("eip155:56"===this.selectedChain){var s={method:"personal_sign",params:{message:"0x4d7920656d61696c206973206a6f686e40646f652e636f6d202d2031373237353937353831303437"}};this.testTransaction=JSON.stringify(s)}},async eth_sendTransaction_swap(){var e={method:"eth_sendTransaction",chainId:"eip155:122",params:{value:"0x38d7ea4c68000",gas:"0x2665f",to:"0xf2614A233c7C3e7f08b1F887Ba133a13f1eb2c55",from:"0xf2F3e73be57031114dd1f4E75c1DD87658be7F0E",data:"0x2646478b000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee00000000000000000000000000000000000000000000000000038d7ea4c68000000000000000000000000000620fd5fa44be6af63715ef4e65ddfa0387ad13f5000000000000000000000000000000000000000000000000000000000000001b000000000000000000000000f2f3e73be57031114dd1f4e75c1dd87658be7f0e00000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000700301ffff0201602352A9Eb5234466Eac23E59e7B99bCaE79C39c0BE9e53fd7EDaC9F859882AfdDa116645287C629040BE9e53fd7EDaC9F859882AfdDa116645287C62900602352A9Eb5234466Eac23E59e7B99bCaE79C39c01f2F3e73be57031114dd1f4E75c1DD87658be7F0E000bb800000000000000000000000000000000"}};this.testTransaction=JSON.stringify(e)},async eth_signTypedData_v4(){var e=await window.provider.request({method:"eth_requestAccounts"},this.selectedChain),t=e[0];console.log("签名地址>>>",t,JSON.stringify(e));var n={method:"eth_signTypedData_v4",params:[t,{types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person"},{name:"contents",type:"string"}]},primaryType:"Mail",domain:{name:"Ether Mail",version:"1",chainId:1,verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},message:{from:{name:"Cow",wallet:"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},to:{name:"Bob",wallet:"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},contents:"Hello, Bob!"}}]};this.testTransaction=JSON.stringify(n)},async eth_sendTransaction_transfer(){var e={};"eip155:1"===this.selectedChain?e={method:"eth_sendTransaction",params:{from:"0x0cecb15396825a895ff8da8fc2d2c77a234dccee",chainId:"0x1",to:"0x0cecb15396825a895ff8da8fc2d2c77a234dccee",value:"0x5af3107a4000",maxPriorityFeePerGas:"0x3b9aca00",gas:"0x5e56",maxFeePerGas:"0x2643b9db8"}}:"eip155:137"===this.selectedChain?e={method:"eth_sendTransaction",params:{gasPrice:"0x17003f6530",nonce:"0x0d30",data:"0x",value:"0x00",to:"0xf2f3e73be57031114dd1f4e75c1dd87658be7f0e",gasLimit:"0x5208",from:"0xf2f3e73be57031114dd1f4e75c1dd87658be7f0e"}}:"eip155:56"===this.selectedChain?e={method:"eth_sendTransaction",params:{gas:"0x5e56",value:"0x5af3107a4000",from:"0xf2f3e73be57031114dd1f4e75c1dd87658be7f0e",gasPrice:"0x3b9aca00",to:"0xf2f3e73be57031114dd1f4e75c1dd87658be7f0e",chainId:"0x38"}}:"eip155:122"===this.selectedChain&&(e={method:"eth_sendTransaction",params:{from:"0xf2f3e73be57031114dd1f4e75c1dd87658be7f0e",to:"0xf2f3e73be57031114dd1f4e75c1dd87658be7f0e",value:"0x0",chainId:"0x7a"}});var t=await window.provider.request({method:"eth_requestAccounts"},this.selectedChain),n=t[0];console.log("当前钱包地址------",n),e.params["to"]=n,e.params["from"]=n,this.testTransaction=JSON.stringify(e)},async eth_sendTransaction_approve(){var e={};"eip155:1"===this.selectedChain?e={method:"eth_sendTransaction",params:{from:"0xf2F3e73be57031114dd1f4E75c1DD87658be7F0E",data:"0x095ea7b3000000000000000000000000000000000022d473030f116ddee9f6b43ac78ba3ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",to:"0x582d872a1b094fc48f5de31d3b73f2d9be47def1"}}:"eip155:137"===this.selectedChain?e={method:"eth_sendTransaction",params:{from:"0xf2F3e73be57031114dd1f4E75c1DD87658be7F0E",data:"0x095ea7b3000000000000000000000000f2614a233c7c3e7f08b1f887ba133a13f1eb2c5500000000000000000000000000000000000000000000000000f6f8096ac575b0",to:"0x0b3F868E0BE5597D5DB7fEB59E1CADBb0fdDa50a"}}:"eip155:56"===this.selectedChain?e={method:"eth_sendTransaction",params:{from:"0x0cecb15396825A895FF8DA8fC2D2C77A234dcCee",value:"0x0",gas:"0xe117",gasPrice:"0xb2d05e00",data:"0x095ea7b300000000000000000000000031c2f6fcff4f8759b3bd5bf0e1084a055615c768ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",to:"0x5CA42204cDaa70d5c773946e69dE942b85CA6706"}}:"eip155:122"===this.selectedChain&&(e={method:"eth_sendTransaction",params:{from:"0x0cecb15396825A895FF8DA8fC2D2C77A234dcCee",data:"0x095ea7b3000000000000000000000000f2614a233c7c3e7f08b1f887ba133a13f1eb2c5500000000000000000000000000000000000000000000000000000000000013b3",to:"0x620fd5fa44BE6af63715Ef4E65DDFA0387aD13F5"}});var t=await window.provider.request({method:"eth_requestAccounts"},this.selectedChain),n=t[0];console.log("当前钱包地址------",n),e.params["from"]=n,this.testTransaction=JSON.stringify(e)},async eth_sendTransaction_mint(){var e={};"eip155:1"===this.selectedChain?e={method:"eth_sendTransaction",params:{gas:"0x4cacb",data:"0xa64dfa75000000000000000000000000ed688002f3797599db8b4feacfe8b1dda0df1c8d000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002e0000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000003a000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000003e00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000042000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000000000000000000000000000000000005400000000000000000000000000000000000000000000000000000000000000560000000000000000000000000000000000000000000000000000000000000058000000000000000000000000000000000000000000000000000000000000005a000000000000000000000000000000000000000000000000000000000000005c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000cecb15396825a895ff8da8fc2d2c77a234dccee00000000000000000000000000000000000000000000000000000000000005e0000000000000000000000000000000000000000000000000000000000000062000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000047697066733a2f2f6261667962656968643737366b6177706e71336f6f6a6635693274787a76617737737164656b34616a776472637472703261366f626b70723773792f7b69647d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a3078303030303030303030303030303030303030303030303030303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001",to:"0x864baa13e01d8f9e26549dc91b458cd15e34eb7c",value:"0x0",from:"0x0cecb15396825a895ff8da8fc2d2c77a234dccee"}}:"eip155:137"===this.selectedChain&&(e={method:"eth_sendTransaction",params:{gas:"0x30795",data:"0xa64dfa75000000000000000000000000341b3687f0309778f08f29336b2c4b9c38b9f110000000000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002e0000000000000000000000000000000000000000000000000000000000000032000000000000000000000000000000000000000000000000000000000000003a000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000003e00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000042000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000052000000000000000000000000000000000000000000000000000000000000005400000000000000000000000000000000000000000000000000000000000000560000000000000000000000000000000000000000000000000000000000000058000000000000000000000000000000000000000000000000000000000000005a000000000000000000000000000000000000000000000000000000000000005c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f2f3e73be57031114dd1f4e75c1dd87658be7f0e00000000000000000000000000000000000000000000000000000000000005e0000000000000000000000000000000000000000000000000000000000000062000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000047697066733a2f2f62616679626569686a6279676b68747a71376b68377434336266686e676e793236337668766f6578716a6d6e377161716166366e717a64743777712f7b69647d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002a3078303030303030303030303030303030303030303030303030303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001",to:"0x864baa13e01d8f9e26549dc91b458cd15e34eb7c",value:"0x0",from:"0xf2f3e73be57031114dd1f4e75c1dd87658be7f0e"}});let t=JSON.stringify(e);console.log("-----长度---\x3e",t.length);var n=await window.provider.request({method:"eth_requestAccounts"},this.selectedChain),o=n[0];console.log("当前钱包地址------",o),e.params["from"]=o,this.testTransaction=JSON.stringify(e)},async wallet_testRpc(){let e=window.provider;e.setDefaultChain("eip155:56","https://eth-mainnet.g.alchemy.com/v2/NxUfYJUr-TQtEpLmSXhhD5pXn70GwsyV");var t={method:"eth_getBalance",params:["0x8D97689C9818892B700e27F316cc3E41e17fBeb9","latest"]};this.testTransaction=JSON.stringify(t)},async wallet_watchAsset(){var e={};"eip155:1"===this.selectedChain?e={method:"wallet_watchAsset",params:{type:"ERC20",options:{address:"0xe0f63a424a4439cbe457d80e4f4b51ad25b2c56c",symbol:"SPX6900",image:"https://assets.coingecko.com/coins/images/31401/standard/sticker_%281%29.jpg?1702371083",decimals:8}}}:"eip155:137"===this.selectedChain?e={method:"wallet_watchAsset",params:{type:"ERC20",options:{address:"0xeB51D9A39AD5EEF215dC0Bf39a8821ff804A0F01",symbol:"LGNS",image:"https://polygonscan.com/token/images/originlgns_32.png",decimals:9}}}:"eip155:56"===this.selectedChain&&(e={method:"wallet_watchAsset",params:{type:"ERC20",options:{address:"0x031b41e504677879370e9dbcf937283a8691fa7f",symbol:"FET",image:"https://bscscan.com/token/images/fetch_32.png",decimals:18}}}),this.testTransaction=JSON.stringify(e)},async ton_sendTransaction(){var e={messages:[{address:"EQARULUYsmJq1RiZ-YiH-IJLcAZUVkVff-KBPwEmmaQGH6aC",amount:"205000000",payload:"te6cckEBAgEAhwABbQ+KfqUAAADNgG7tIEATEtAIAO87mQKicbKgHIk4pSPP4k5xhHqutqYgAB7USnesDnCcECwbgQMBAJUlk4VhgBD3JEg1TUr75iTijBghOKm/sxNDXUBl7CD6WMut0Q85x4RafwA/Es89DBXoTxuqxVFxyBbzt9Rav2HBUKl7hmkvLuKHLBCW57aK"}],validUntil:1792481054,network:"-239"};this.testTransaction=JSON.stringify(e)},ton_getAccount(){this.testTransaction="这里是同步获取 不再需要点击 <<发送交易>>";let e=window.tonProvider.account();this.testboc=e?JSON.stringify(e):"null"},async tonUniversalLog(){console.log("ton 信息: tonProvider  connected:",window.tonProvider.connected()),console.log("ton 信息: tonProvider  account:",JSON.stringify(window.tonProvider.account())),console.log("ton 信息: tonProvider  wallet:",JSON.stringify(window.tonProvider.wallet()))},async sendTransactionAlert(){const e=await fetch("https://apitest.fireverse.ai/oauth/okx/getNonce?publicAddress=0x0cecb15396825a895ff8da8fc2d2c77a234dccee"),t=await e.json();console.log("请求数据----",JSON.stringify(t)),await this.personal_sign(),confirm("Are you want to sign message?")&&this.sendTransaction()},async sendTransaction(){if(!(this.selectedChain.startsWith("aptos")||this.selectedChain.startsWith("movement")||this.selectedChain.startsWith("solana")||this.selectedChain.startsWith("sonic")||this.selectedChain.startsWith("cosmos")))if(console.log("sendTransaction",window.provider),console.log("sendTransaction内容11------",this.testTransaction),window.provider||console.error("钱包 未初始化完成"),this.testTransaction&&window.provider){const i=JSON.parse(this.testTransaction);try{console.log("sendTransaction-----22method>>",i.method);let s="eip155:1";if(this.selectedChain&&(s=this.selectedChain,console.log("sendTransaction-----this.selectedChain>>",this.selectedChain)),console.log("windowOpen[click_1]: ",Date.now()),"sui:mainnet"==s){const t=new f.Z(window.provider);var e="invalid result";if("sui_getAccount"==this.currentSuiMethod){let e=t.getAccount();this.testboc="string"==typeof e?e:JSON.stringify(e)}if("sui_signTransaction"==this.currentSuiMethod)e=await t.signTransaction(this.currentSuiTransaction),this.testboc=JSON.stringify(e);else if("sui_signAndExecuteTransaction"==this.currentSuiMethod)e=await t.signAndExecuteTransaction(this.currentSuiTransaction),this.testboc=JSON.stringify(e);else if("sui_signMessage"==this.currentSuiMethod)console.log("signMessage----",this.currentSuiTransaction),e=await t.signMessage(this.currentSuiTransaction),this.testboc=JSON.stringify(e),this.sui_verifySignature(e).then((e=>{this.testboc=`signature verify: ${e.result}\n${e.msg}\n\n${this.testboc}`}));else if("sui_signPersonalMessage"==this.currentSuiMethod)console.log("signPersonalMessage----",this.currentSuiTransaction),e=await t.signPersonalMessage(this.currentSuiTransaction),this.testboc=JSON.stringify(e),this.sui_verifySignature(e).then((e=>{this.testboc=`signature verify: ${e.result}\n${e.msg}\n\n${this.testboc}`}));else if("sui_testRpc"==this.currentSuiMethod){console.log("test rpc----",this.currentSuiTransaction),console.log(`请求数据发送 rpc -----\x3e> ${JSON.stringify(i)}`);const e=await window.provider.request(i,s);console.log(`请求数据回调 rpc -----\x3e> ${JSON.stringify(o)}`),this.testboc="string"==typeof e?e:JSON.stringify(e)}return void console.log("windowOpen[click_2]: ",Date.now())}if("ton:-239"===s){console.log(`请求数据发送 sendTransaction ---ton--\x3e> ${JSON.stringify(i)}`);let e=await window.tonProvider.sendTransaction(i);return console.log(`请求数据回调 sendTransaction -----\x3e> ${JSON.stringify(e)}`),void(this.testboc="string"==typeof e?e:JSON.stringify(e))}if("btc:mainnet"==s){const e=new d.OKXBtcProvider(window.provider);var t="invalid result";return void("btc_signMessage"==this.currentBtcMethod?(t=await e.signMessage(s,this.currentBtcTransaction["signStr"]),this.testboc=JSON.stringify(t)):"btc_send"==this.currentBtcMethod?(t=await e.send(s,this.currentBtcTransaction),this.testboc=JSON.stringify(t)):"btc_signPsbt"==this.currentBtcMethod?(t=await e.signPsbt(s,this.currentBtcTransaction.psbtHex,this.currentBtcTransaction.options),this.hexToBase64(t).then((e=>{this.testboc=JSON.stringify(e)})).catch((e=>{this.testboc=e}))):"btc_signPsbts"==this.currentBtcMethod?(t=await e.signPsbts(s,this.currentBtcTransaction.psbtHexs,this.currentBtcTransaction.options),this.testboc=JSON.stringify(t)):"btc_sendInscription"==this.currentBtcMethod?(t=await e.sendInscription(s,this.currentBtcTransaction.address,this.currentBtcTransaction.inscriptionId,this.currentBtcTransaction.options),this.testboc=JSON.stringify(t)):"btc_signAndPushPsbt"==this.currentBtcMethod?(t=await e.signAndPushPsbt(s,this.currentBtcTransaction.psbtHex,this.currentBtcTransaction.options),this.testboc=JSON.stringify(t)):"btc_sendBitcoin"==this.currentBtcMethod?(t=await e.sendBitcoin(s,this.currentBtcTransaction.toAddress,this.currentBtcTransaction.satoshis,this.currentBtcTransaction.options),this.testboc=JSON.stringify(t)):"btc_getAccount"==this.currentBtcMethod&&(t=e.getAccount(s),this.testboc=JSON.stringify(t)))}if("fractal:mainnet"==s){const e=new d.OKXBtcProvider(window.provider);var n="invalid result";return void("fractal_signMessage"==this.currentFractalMethod?(n=await e.signMessage(s,this.currentFractalTransaction["signStr"]),this.testboc=JSON.stringify(n)):"fractal_send"==this.currentFractalMethod?(n=await e.send(s,this.currentFractalTransaction),this.testboc=JSON.stringify(n)):"fractal_signPsbt"==this.currentFractalMethod?(n=await e.signPsbt(s,this.currentFractalTransaction.psbtHex,this.currentFractalTransaction.options),this.hexToBase64(n).then((e=>{this.testboc=JSON.stringify(e)})).catch((e=>{this.testboc=e}))):"fractal_signPsbts"==this.currentFractalMethod?(n=await e.signPsbts(s,this.currentFractalTransaction.psbtHexs,this.currentFractalTransaction.options),this.testboc=JSON.stringify(n)):"fractal_sendInscription"==this.currentFractalMethod?(n=await e.sendInscription(s,this.currentFractalTransaction.address,this.currentFractalTransaction.inscriptionId,this.currentFractalTransaction.options),this.testboc=JSON.stringify(n)):"fractal_signAndPushPsbt"==this.currentFractalMethod?(n=await e.signAndPushPsbt(s,this.currentFractalTransaction.psbtHex,this.currentFractalTransaction.options),this.testboc=JSON.stringify(n)):"fractal_sendBitcoin"==this.currentFractalMethod?(n=await e.sendBitcoin(s,this.currentFractalTransaction.toAddress,this.currentFractalTransaction.satoshis,this.currentFractalTransaction.options),this.testboc=JSON.stringify(n)):"fractal_getAccount"==this.currentFractalMethod&&(n=e.getAccount(s),this.testboc=JSON.stringify(n)))}console.log(`请求数据发送 sendTransaction -----\x3e> ${JSON.stringify(i)}`);var o=await window.provider.request(i,s);console.log(`请求数据回调 sendTransaction -----\x3e> ${JSON.stringify(o)}`),console.log("windowOpen[click_3]: ",Date.now()),this.testboc="string"==typeof o?o:JSON.stringify(o),console.log("方法数据回调 --this.testboc--",this.testboc)}catch(s){console.error("方法数据回调失败 --Error--",s.message),s.code===l.OKX_CONNECT_ERROR_CODES.USER_REJECTS_ERROR?this.testboc=s.message:this.testboc="wrong signature！"+s.message}}else alert("Please input transaction data")},hexToBase64(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));const o=new Uint8Array(t),s=new Blob([o]);return new Promise(((e,t)=>{const n=new FileReader;n.onload=function(t){var n=t.target.result.split(",")[1];e(n)},n.onerror=function(e){t(e)},n.readAsDataURL(s)}))},testBase64UrlSafe(){let e={protocolVer:1,topic:"8a7a4c3be73802d0ae2587123ade7bb79f27433b9aa3ca589a2208a2089eecfd",clientId:"5f1bbf9eac92160affa7ef04d0a710817ddb6d8c22ebbd6263e86f059930b404",requestId:"1731383250054",dAppInfo:{url:"connect.oker.vip",origin:"https://connect.oker.vip",name:"univer test dapp",icon:"https://avatars.githubusercontent.com/u/37784886"},requests:[{name:"requestAccounts",requiredNamespaces:[{namespace:"aptos",chains:["aptos:637"]}],optionalNamespaces:[],connectRequestMethods:[{chainId:"aptos:637",method:"aptos_signMessage",params:{data:{address:!0,application:!0,chainId:!0,message:"123 中文测试!",nonce:"1234"},applicationUrl:"https://connect.oker.vip",prefix:"APTOS",aptosChainId:"1"}}]}],redirect:"none"},t=JSON.stringify(e);const n=(new TextEncoder).encode(t);let o="";n.forEach((e=>{o+=String.fromCharCode(e)}));let s=btoa(o);console.log("字符串编码1>>>>",s),s=s.replace(/\+/g,"-"),console.log("字符串编码2>>>>",s),s=s.replace(/\//g,"_"),console.log("字符串编码3>>>>",s),s=s.replace(/=+$/,""),console.log("字符串编码4>>>>",s);let i=(0,l.getUniversalLink)((0,l.getAppWalletDeepLink)(s));console.log("字符串编码5>>>>",i),this.qrValue=i,this.showModal=!0},async testTonSdk(){let e,t,n,o,s,i,a,r,c=[],l=[],d=["solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","svm:70000062"],u=!1,g=["sui:mainnet"],f=["btc:mainnet","fractal:mainnet"];const p=Object.entries(this.availableChains).filter((e=>e[1].checked)).map((e=>e[0]));console.log(`chains  ===> ${p.values()}`),p.forEach((function(l){return console.log(`chains.forEach chainId  ===> ${l}`),d.includes(l)?(c.push(l),void(t=!0)):"string"==typeof l&&l.startsWith("ton")?(c.push(l),void(i=!0)):"string"==typeof l&&(l.startsWith("aptos")||l.startsWith("movement"))?(c.push(l),void(s=!0)):"string"==typeof l&&l.startsWith("svm")?(c.push(l),void(t=!0)):"string"==typeof l&&l.startsWith("cosmos")?(c.push(l),void(a=!0)):"string"==typeof l&&l.startsWith("tron")?(c.push(l),void(r=!0)):"string"==typeof l&&l.startsWith("starknet")?(c.push(l),void(u=!0)):g.includes(l)?(console.log(`nameSpacesChains.push  ===> ${l}`),c.push(l),void(n=!0)):f.includes(l)?(console.log(`nameSpacesChains.push  ===> ${l}`),c.push(l),void(o=!0)):(e=!0,void c.push(`eip155:${l}`))})),se.forEach((function(e){if(!d.includes(e))return"string"==typeof e&&e.startsWith("svm")?(c.push(e),void(t=!0)):void(g.includes(e)||f.includes(e)||e.startsWith("ton")?l.push(e):l.push(`eip155:${e}`));l.push(e)})),console.log(`namespaceChains  ===> ${JSON.stringify(c)}`);var h,b={};if(c&&c.length>0){var _={};if(e&&(_.eip155={chains:c.filter((e=>e.startsWith("eip155"))),defaultChain:c.filter((e=>e.startsWith("eip155")))[0]}),t&&(_.solana={chains:c.filter((e=>e.startsWith("solana")||e.startsWith("sonic")||e.startsWith("svm"))),defaultChain:c.filter((e=>e.startsWith("solana")||e.startsWith("sonic")||e.startsWith("svm")))[0]}),a&&(_.cosmos={chains:c.filter((e=>e.startsWith("cosmos"))),defaultChain:c.filter((e=>e.startsWith("cosmos")))[0]}),r&&(_.tron={chains:c.filter((e=>e.startsWith("tron"))),defaultChain:c.filter((e=>e.startsWith("tron")))[0]}),u&&(_.starknet={chains:c.filter((e=>e.startsWith("starknet"))),defaultChain:c.filter((e=>e.startsWith("starknet")))[0]}),i){let e={ton_addr:{name:"ton_addr"}};this.tonProofValue&&(e={ton_addr:{name:"ton_addr"},ton_proof:{name:"ton_proof",payload:this.tonProofValue}}),_.ton={chains:c.filter((e=>e.startsWith("ton"))),defaultChain:c.filter((e=>e.startsWith("ton")))[0],params:e}}if(n&&(_.sui={chains:c.filter((e=>e.startsWith("sui"))),defaultChain:c.filter((e=>e.startsWith("sui")))[0],rpcMap:{"sui:mainnet":"https://www.okx.com/fullnode/sui/discover/rpc"}}),s&&(_.aptos={chains:c.filter((e=>e.startsWith("aptos")||e.startsWith("movement"))),defaultChain:c.filter((e=>e.startsWith("aptos")||e.startsWith("movement")))[0]}),o){let e=c.filter((e=>e.startsWith("btc")||e.startsWith("fractal")));_.btc={chains:e,defaultChain:e[0]}}console.log(`requireData  ===> ${JSON.stringify(_)}`),b["namespaces"]=_,console.log(JSON.stringify(b))}if(l&&l.length>0){const e={},t=l.filter((e=>e.startsWith("eip155")));t.length>0&&(e["eip155"]={chains:t,defaultChain:t[0]});const n=l.filter((e=>e.startsWith("solana")));n.length>0&&(e["solana"]={chains:n,defaultChain:n[0]});const o=l.filter((e=>e.startsWith("ton")));if(o.length>0){let t={ton_addr:{name:"ton_addr"}};this.tonProofValue&&(t={ton_addr:{name:"ton_addr"},ton_proof:{name:"ton_proof",payload:this.tonProofValue}}),e["ton"]={chains:o,defaultChain:o[0],params:t}}const s=l.filter((e=>e.startsWith("btc")));s.length>0&&(e["btc"]={chains:s,defaultChain:s[0]}),b["optionalNamespaces"]=e}if(0===c.length&&0===l.length)return void alert("Please select a chain from above to continue");console.log("=====>connectData "),console.log(b);let m=this.getCurrentSelectedMethodData();window.provider instanceof U.OKXUniversalConnectUI?h=m&&m.length>0?window.provider.openModalAndSign(b,JSON.parse(JSON.stringify(m))):window.provider.openModal(b):(this.universalToTG?b.sessionConfig={useMini:!0,openUniversalUrl:!0,tmaReturnUrl:"back"}:b.sessionConfig={redirect:ae},h=m&&m.length>0?window.provider.connectAndSign(b,JSON.parse(JSON.stringify(m))):window.provider.connect(b)),await h.then((e=>{if(this.walletAddress="connected",this.isPC()&&(this.showModal=!1),e&&(this.testboc=JSON.stringify(e)),window.provider.session&&window.provider.session.namespaces){let e=window.provider.session.namespaces["ton"];console.log("是否包含ton",e),e&&this.tonUniversalLog()}})).catch((e=>{301==e.code?setTimeout((()=>{alert(e.message)}),.5):e.message&&alert(e.message),console.error("发生了错误：",e)}))},getCurrentSelectedMethodData(){var e=[];return this.selectedMethod.forEach((t=>{switch(t){case"wallet_addEthereumChain(ETH)":e.push({method:"wallet_addEthereumChain",chainId:"eip155:1",params:{blockExplorerUrls:["https://explorer.fuse.io"],chainId:"0x7a",chainName:"Fuse",nativeCurrency:{name:"Fuse",symbol:"FUSE",decimals:18},rpcUrls:["https://rpc.fuse.io"]}});break;case"personal_sign(ETH)":e.push({method:"personal_sign",chainId:"eip155:1",params:["0x4d7920656d61696c206973206a6f686e40646f652e636f6d202d2031373237353937343537313336"]});break;case"solana_signMessage(Sol mainnet)":e.push({chainId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",method:"solana_signMessage",params:{message:"Hello Solana"}});break;case"sui_signMessage(Sui mainnet)":case"sui_signPersonalMessage(Sui mainnet)":{let n=[76,111,103,105,110,32,119,105,116,104,32,66,108,117,101,109,111,118,101],o=new Uint8Array(n),s="sui_signMessage";this.currentSuiTransaction={message:o},t.startsWith("sui_signPersonalMessage")&&(s="sui_signPersonalMessage"),e.push({method:s,chainId:"sui:mainnet",params:{message:o}});break}case"btc_signMessage(BTC)":e.push({method:"btc_signMessage",chainId:"btc:mainnet",params:{message:"Welcome to BTC"}});break;case"aptos_signMessage(aptos mainnet)":e.push({chainId:"aptos:mainnet",method:"aptos_signMessage",params:{address:!0,application:!0,chainId:!0,message:"Hello Aptos",nonce:"1234"}});break;case"cosmos_signArbitrary(cosmoshub)":e.push({chainId:"cosmos:cosmoshub-4",method:"cosmos_signArbitrary",params:{message:"test cosmos"}});break;case"test_noSupport_eth(ETH)":e.push({chainId:"eip155:1",method:"test_noSupport_eth",params:{message:"test hello"}});break;case"sync_all_addresses":e.push({method:"sync_all_addresses"});break;case"tron_signMessage":e.push({chainId:"tron:mainnet",method:"tron_signMessage",params:{message:"Hello Tron"}});break;case"tron_signMessageV2":e.push({chainId:"tron:mainnet",method:"tron_signMessageV2",params:{message:"Hello Tron"}});break;case"starknet_signMessage":{const t={domain:{chainId:"0x534e5f4d41494e",name:"STRKFarm",version:"1"},message:{document:"app.strkfarm.xyz/tnc/v1",message:"Read and Agree T&C"},primaryType:"Tnc",types:{StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],Tnc:[{name:"message",type:"felt"},{name:"document",type:"felt"}]}};e.push({chainId:"starknet:mainnet",method:"starknet_signMessage",params:{accountAddress:"",typedData:t}})}break;default:break}})),this.selectedMethodData=e,e},closeModal(){this.showModal=!1},isPC(){const e=navigator.userAgent;console.log("current device ua is ===>",e);const t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let n=!0;for(let o=0;o<t.length;o++)if(e.indexOf(t[o])>0){n=!1;break}return n},isSafariOrChrome(){const e=navigator.userAgent,t=["Safari","Chrome"];let n=!1;for(let o=0;o<t.length;o++)if(e.indexOf(t[o])>0){n=!0;break}return n},async sol_signMessage(){let e={method:"solana_signMessage",params:{message:"Hello Solana",pubkey:""}};this.testTransaction=JSON.stringify(e);let t=new u.y(window.provider),n=await t.signMessage("Hello Solana",this.selectedChain);console.log("solana_signMessage Result:",JSON.stringify(n));const o=H().sign.detached.verify((new TextEncoder).encode("Hello Solana"),n.signature,new g.PublicKey(n.publicKey).toBytes());console.log(o),this.testboc=o},async aptos_signMessage(){let e={address:!0,application:!0,chainId:!0,message:"Hello Aptos",nonce:"1234"},t=new h.V(window.provider),n=await t.signMessage(e,this.selectedChain);this.testTransaction=JSON.stringify(e),this.testboc="string"==typeof n?n:JSON.stringify(n)},async aptos_signTransaction(){let e=new h.V(window.provider);const t=new b.qc8({network:b.lgv.MAINNET}),n=new b.i5T(t),o=await n.transaction.build.simple({sender:e.getAccount(this.selectedChain).address,data:{function:"0x80273859084bc47f92a6c2d3e9257ebb2349668a1b0fb3db1d759a04c7628855::router::swap_exact_coin_for_coin_x1",typeArguments:["0x1::aptos_coin::AptosCoin","0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a::stapt_token::StakedApt","0x0163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated","0x80273859084bc47f92a6c2d3e9257ebb2349668a1b0fb3db1d759a04c7628855::router::BinStepV0V05"],functionArguments:["10000",["9104"],["5"],["true"]]}});this.testTransaction=(0,l.safeJsonStringify)(o);let s=await e.signTransaction(o,this.selectedChain);this.testboc="string"==typeof s?s:JSON.stringify(s)},async move_signTransaction(){let e=new h.V(window.provider);const t=new b.qc8({network:b.lgv.MAINNET}),n=new b.i5T(t),o=await n.transaction.build.simple({sender:e.getAccount(this.selectedChain).address,data:{function:"0x0163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::scripts::swap",typeArguments:["0x1::aptos_coin::AptosCoin","0x275f508689de8756169d1ee02d889c777de1cebda3a7bbcce63ba8a27c563c6f::tokens::WBTC","0x0163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated"],functionArguments:["10000","12"]}});this.testTransaction=(0,l.safeJsonStringify)(o);let s=await e.signTransaction(o,this.selectedChain);this.testboc="string"==typeof s?s:JSON.stringify(s)},async move_signAndSubmitTransaction(){let e=new h.V(window.provider);const t=new b.qc8({network:b.lgv.MAINNET}),n=new b.i5T(t),o=await n.transaction.build.simple({sender:e.getAccount(this.selectedChain).address,data:{function:"0x0163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::scripts::swap",typeArguments:["0x1::aptos_coin::AptosCoin","0x275f508689de8756169d1ee02d889c777de1cebda3a7bbcce63ba8a27c563c6f::tokens::WBTC","0x0163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated"],functionArguments:["10000","12"]}});this.testTransaction=(0,l.safeJsonStringify)(o);let s=await e.signAndSubmitTransaction(o,this.selectedChain);this.testboc="string"==typeof s?s:JSON.stringify(s)},async aptos_signAndSubmitTransaction(){let e=new h.V(window.provider);const t=new b.qc8({network:b.lgv.MAINNET}),n=new b.i5T(t),o=await n.transaction.build.simple({sender:e.getAccount(this.selectedChain).address,data:{function:"0x80273859084bc47f92a6c2d3e9257ebb2349668a1b0fb3db1d759a04c7628855::router::swap_exact_coin_for_coin_x1",typeArguments:["0x1::aptos_coin::AptosCoin","0x111ae3e5bc816a5e63c2da97d0aa3886519e0cd5e4b046659fa35796bd11542a::stapt_token::StakedApt","0x0163df34fccbf003ce219d3f1d9e70d140b60622cb9dd47599c25fb2f797ba6e::curves::Uncorrelated","0x80273859084bc47f92a6c2d3e9257ebb2349668a1b0fb3db1d759a04c7628855::router::BinStepV0V05"],functionArguments:["10000",["9104"],["5"],["true"]]}});this.testTransaction=(0,l.safeJsonStringify)(o);let s=await e.signAndSubmitTransaction(o,this.selectedChain);this.testboc="string"==typeof s?s:JSON.stringify(s)},async sol_signVersionedTransaction(){let e=new u.y(window.provider),t=new g.PublicKey(e.getAccount("solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp").address);const n=new g.Connection(this.getSolConnect()),{blockhash:o}=await n.getLatestBlockhash(),s=new g.TransactionMessage({payerKey:t,recentBlockhash:o,instructions:[g.SystemProgram.transfer({fromPubkey:new g.PublicKey(e.getAccount().address),toPubkey:new g.PublicKey(e.getAccount().address),lamports:"100"})]}).compileToV0Message();let i=new g.VersionedTransaction(s);this.testTransaction=(0,l.safeJsonStringify)(i);let a=await e.signTransaction(i,this.selectedChain);console.log("sol_signTransaction result",JSON.stringify(a)),this.testboc="string"==typeof a?a:JSON.stringify(a)},async sol_signAndSendVersionedTransaction(){let e=new u.y(window.provider),t=new g.PublicKey(e.getAccount().address);const n=new g.Connection(this.getSolConnect()),{blockhash:o}=await n.getLatestBlockhash(),s=new g.TransactionMessage({payerKey:t,recentBlockhash:o,instructions:[g.SystemProgram.transfer({fromPubkey:new g.PublicKey(e.getAccount().address),toPubkey:new g.PublicKey(e.getAccount().address),lamports:"100"})]}).compileToV0Message();let i=new g.VersionedTransaction(s);this.testTransaction=(0,l.safeJsonStringify)(i);let a=await e.signAndSendTransaction(i,this.selectedChain);console.log("sol_signTransaction result",JSON.stringify(a)),this.testboc="string"==typeof a?a:JSON.stringify(a)},async sol_signAllVersionedTransactions(){let e=new u.y(window.provider);const t=new g.Connection(this.getSolConnect()),{blockhash:n}=await t.getLatestBlockhash();let o=new g.PublicKey(e.getAccount().address);const s=new g.TransactionMessage({payerKey:o,recentBlockhash:n,instructions:[g.SystemProgram.transfer({fromPubkey:new g.PublicKey(e.getAccount().address),toPubkey:new g.PublicKey(e.getAccount().address),lamports:"100"})]}).compileToV0Message();let i=new g.VersionedTransaction(s);this.testTransaction=(0,l.safeJsonStringify)(i);let a=await e.signAllTransactions([i],this.selectedChain);console.log("sol_signTransaction result",JSON.stringify(a)),this.testboc="string"==typeof a?a:JSON.stringify(a)},async sol_signTransaction(){const e=new g.Connection(this.getSolConnect()),{blockhash:t}=await e.getLatestBlockhash();let n=new u.y(window.provider);const o=new g.Transaction({feePayer:new g.PublicKey(n.getAccount().address),recentBlockhash:t}).add(g.SystemProgram.transfer({fromPubkey:new g.PublicKey(n.getAccount().address),toPubkey:new g.PublicKey(n.getAccount().address),lamports:1e3}));this.testTransaction=(0,l.safeJsonStringify)(o);let s=await n.signTransaction(o,this.selectedChain);console.log("sol_signTransaction result",JSON.stringify(s)),this.testboc="string"==typeof s?s:JSON.stringify(s)},async sol_signAllTransactions(){const e=new g.Connection(this.getSolConnect()),{blockhash:t}=await e.getLatestBlockhash();let n=new u.y(window.provider);const o=new g.Transaction({feePayer:new g.PublicKey(n.getAccount().address),recentBlockhash:t}).add(g.SystemProgram.transfer({fromPubkey:new g.PublicKey(n.getAccount().address),toPubkey:new g.PublicKey(n.getAccount().address),lamports:"100"}));this.testTransaction=(0,l.safeJsonStringify)(o);let s=await n.signAllTransactions([o],this.selectedChain);this.testboc="string"==typeof s?s:JSON.stringify(s)},getSolConnect(){let e="https://www.okx.com/fullnode/sol/discover/rpc";return"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"===this.selectedChain?e="https://www.okx.com//fullnode/sol/discover/rpc":"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"===this.selectedChain?e="https://www.okx.com/fullnode/soltestnet/discover/rpc":"svm:70000062"===this.selectedChain&&(e="https://www.okx.com/fullnode/sonic/testnet/discover/rpc"),e},async sol_signAndSendTransaction(){const e=new g.Connection(this.getSolConnect()),{blockhash:t}=await e.getLatestBlockhash();let n=new u.y(window.provider);const o=new g.Transaction({feePayer:new g.PublicKey(n.getAccount().address),recentBlockhash:t}).add(g.SystemProgram.transfer({fromPubkey:new g.PublicKey(n.getAccount().address),toPubkey:new g.PublicKey(n.getAccount().address),lamports:"100"}));this.testTransaction=(0,l.safeJsonStringify)(o);let s=await n.signAndSendTransaction(o,this.selectedChain);this.testboc="string"==typeof s?s:JSON.stringify(s)},async cosmos_signArbitrary(){let e=new d.OKXCosmosProvider(window.provider),t=await e.signArbitrary(this.selectedChain,e.getAccount(this.selectedChain).address,"test cosmos");if("string"==typeof t)this.testboc=t;else{let n=await this.cosmos_verifySignArbitrary(e.getAccount(this.selectedChain).address,"test cosmos",t.signature,t.pub_key.value);console.log("verify",n),this.testboc="verify:"+n+JSON.stringify(t)}},async cosmos_verifySignArbitrary(e,t,n,o){try{console.log("cosmos_verifySignArbitrary signer:",e),console.log("cosmos_verifySignArbitrary data:",JSON.stringify(t)),console.log("cosmos_verifySignArbitrary signature:",n),console.log("cosmos_verifySignArbitrary pubkey:",o);const{prefix:s}=te(e),i=Z.from(n,"base64"),a=new Uint8Array(i),r=Z.from(o,"base64"),c=new Uint8Array(r);return await ee(s,e,t,c,a)}catch(s){return console.error("Verification failed:",s),!1}},async cosmos_signAmino(){let e=new d.OKXCosmosProvider(window.provider),t={chain_id:"osmosis-1",account_number:"630104",sequence:"480",fee:{gas:"683300",amount:[{denom:"uosmo",amount:"2818"}]},msgs:[{type:"osmosis/poolmanager/swap-exact-amount-in",value:{sender:"osmo1u6lts9ng4etxj0zdaxsada6zgl8dudpgelmuyu",routes:[{pool_id:"1096",token_out_denom:"ibc/987C17B11ABC2B20019178ACE62929FE9840202CE79498E29FE8E5CB02B7C0A4"},{pool_id:"611",token_out_denom:"ibc/27394FB092D2ECCD56123C74F36E4C1F926001CEADA9CA97EA622B25F41E5EB2"}],token_in:{denom:"uosmo",amount:"100"},token_out_min_amount:"8"}}],memo:"FE",timeout_height:"23603788",signOptions:{useOneClickTrading:!1,preferNoSetFee:!0,fee:{gas:"683300",amount:[{denom:"uosmo",amount:"2818"}]}}};this.testTransaction=(0,l.safeJsonStringify)(t);let n=await e.signAmino(this.selectedChain,e.getAccount(this.selectedChain).address,t);this.testboc="string"==typeof n?n:JSON.stringify(n)},messageToBuffer(e){var t=Z.from([]);try{t="string"===typeof e?Z.from(e.replace("0x",""),"hex"):Z.from(e)}catch(n){console.log(`messageToBuffer error: ${n}`)}return t},async cosmos_signDirect(){let e=new d.OKXCosmosProvider(window.provider),t={bodyBytes:this.messageToBuffer("0x0ac1010a292f6962632e6170706c69636174696f6e732e7472616e736665722e76312e4d73675472616e736665721293010a087472616e7366657212096368616e6e656c2d301a0d0a05756f736d6f120431303030222b6f736d6f3175366c7473396e67346574786a307a64617873616461367a676c386475647067656c6d7579752a2d636f736d6f733175366c7473396e67346574786a307a64617873616461367a676c386475647067337967766a773207080410ebe3f90a3880b0bcafd18cec8218"),authInfoBytes:this.messageToBuffer("0x0a510a460a1f2f636f736d6f732e63727970746f2e736563703235366b312e5075624b657912230a2102446e19e94ac0e83ea896d2712507577eb39fbdd2d6ae9f0fc0b9759f1fbaba9012040a02080118e00312140a0e0a05756f736d6f1205323530303010859a11"),chainId:"osmosis-1",accountNumber:"630104"};this.testTransaction=(0,l.safeJsonStringify)(t);let n=await e.signDirect(this.selectedChain,e.getAccount(this.selectedChain).address,t);this.testboc="string"==typeof n?n:JSON.stringify(n)},sui_generateTransactionParams(e,t){this.testTransaction=JSON.stringify(e),this.currentSuiTransaction=e,this.currentSuiMethod=t},btc_generateTransactionParams(e,t){this.testTransaction=JSON.stringify(e),this.currentBtcTransaction=e,this.currentBtcMethod=t,console.log("参数是: ",e),console.log("flag: ",t)},fractal_generateTransactionParams(e,t){this.testTransaction=JSON.stringify(e),this.currentFractalTransaction=e,this.currentFractalMethod=t,console.log("参数是: ",e),console.log("flag: ",t)},tron_getTransactionResult(e){this.testboc="string"==typeof e?e:JSON.stringify(e)},tron_generateTransactionParams(e){this.testTransaction="string"==typeof e?e:JSON.stringify(e)},starknet_getTransactionResult(e){this.testboc="string"==typeof e?e:JSON.stringify(e)},starknet_generateTransactionParams(e){this.testTransaction="string"==typeof e?e:JSON.stringify(e)},handleModalsSelect(e){ie=e,this.withUI&&(window.provider.uiOptions={actionsConfiguration:{returnStrategy:ae,modals:3===e.length?"all":e},language:ce,uiPreferences:{theme:le}})},handleReturnStrategySelect(e){ae="deeplink"===e?this.deeplink:e,this.withUI?window.provider.uiOptions={actionsConfiguration:{returnStrategy:ae,modals:3===ie.length?"all":ie},language:ce,uiPreferences:{theme:le}}:window.provider.sessionConfig?window.provider.sessionConfig.redirect=ae:window.provider.sessionConfig={redirect:ae}},handleReturnStrategyDeeplink(e){console.log("handleReturnStrategyDeeplink",e),ae=e,this.withUI?window.provider.uiOptions={actionsConfiguration:{returnStrategy:e,modals:3===ie.length?"all":ie},language:ce,uiPreferences:{theme:le}}:window.provider.sessionConfig?window.provider.sessionConfig.redirect=e:window.provider.sessionConfig={redirect:e}},handleLanguageSelect(e){ce=e,this.withUI&&(window.provider.uiOptions={actionsConfiguration:{returnStrategy:ae,modals:3===ie.length?"all":ie},language:e,uiPreferences:{theme:le}})},handleConnectMethodsSelect(){console.log("当前的方法 this.selectedMethod>>>>",this.selectedMethod)},eth_verifyMessage(e,t,n){if(console.log("eth_verifyMessage   message>>>",e),console.log("eth_verifyMessage   signature>>>",t),console.log("eth_verifyMessage   ethAddress>>>",n),!e||!t)return"";let o=e;if(e.startsWith("0x")){o=o.replace(/^0x/,"");let e="";for(let t=0;t<o.length;t+=2){const n=o.slice(t,t+2);e+=String.fromCharCode(parseInt(n,16))}o=e}console.log("eth_verifyMessage   originalMessage>>>",o);const s=J.lT(o,t);return console.log("eth_verifyMessage recoveredAddress:",s),s.toLowerCase()===n.toLowerCase()},async verifyMessage(e){if(window.provider&&window.provider.session&&e&&e.length>0){let t={};for(let n of e)if("result"in n&&"method"in n){let e=this.selectedMethodData.filter((e=>e.method===n.method))[0];if(console.log("验证签名 请求>>>:",JSON.stringify(e)),console.log("验证签名 结果>>>:",JSON.stringify(n)),"personal_sign"===n.method){let o=await window.provider.request({method:"eth_requestAccounts"},n.chainId);o=o[0],console.log("验证eth 钱包地址>>>:",o);let s=e.params[0];console.log("验证eth 签名消息体>>:",JSON.stringify(s)),t[n.method]=this.eth_verifyMessage(s,n.result,o)}else if("solana_signMessage"===n.method){let e=n.result;if("signature"in e&&"publicKey"in e){const o=H().sign.detached.verify((new TextEncoder).encode("Hello Solana"),e.signature,new g.PublicKey(e.publicKey).toBytes());t[n.method]=o}else t[n.method]=!1}else if("sui_signPersonalMessage"===n.method||"sui_signMessage"===n.method){let e=this.sui_verifySignature(n.result);t[n.method]=(await e).result}else if("btc_signMessage"===n.method)t[n.method]="Not verified yet";else if("aptos_signMessage"===n.method){let e=n.result,o=new h.V(window.provider),s=o.getAccount(n.chainId)?.publicKey,i=e.signature;i.startsWith("0x")&&(i=i.slice(2,i.length)),console.log("aptos_signMessage aptosPublicKey And signStr",s,i),t[n.method]=H().sign.detached.verify(Z.from(e.fullMessage),Z.from(i,"hex"),Z.from(s,"hex"))}else if("cosmos_signArbitrary"===n.method){let e=new d.OKXCosmosProvider(window.provider),o=e.getAccount(n.chainId)?.address,s=n.result,i=await this.cosmos_verifySignArbitrary(o,"test cosmos",s.signature,s.pub_key.value);t[n.method]=i}else if("tron_signMessage"===n.method){let e=n.result,o=new q.K_({fullHost:"https://api.trongrid.io",headers:{},privateKey:""}),s=new d.OKXTronProvider(window.provider);t[n.method]=await o.trx.verifyMessage("0x"+Z.from("Hello Tron").toString("hex"),e,s.getAccount("tron:mainnet").address)}else if("tron_signMessageV2"===n.method){let e=n.result,o=new q.K_({fullHost:"https://api.trongrid.io",headers:{},privateKey:""});const s=await o.trx.verifyMessageV2("Hello Tron",e);let i=new d.OKXTronProvider(window.provider);t[n.method]=s===i.getAccount("tron:mainnet").address}else if("starknet_signMessage"===n.method){let e=n.result,o=this.starknetPanelTypedData;const s=new M.bd({nodeUrl:"https://free-rpc.nethermind.io/mainnet-juno/v0_7"});let i=new d.OKXStarknetProvider(window.provider),a=i.getAccount("starknet:mainnet").address,r="0x123";const c=new M.gD(s,a,r);let l=this;c.verifyMessage(o,e).then((function(e){l.testTransaction=`Verifyed result: \n${e}`})).catch((function(e){l.testTransaction=`Verifyed failed: \n${e}`})),t[n.method]="starknet is verifying signature..."}else t[n.method]="Not verified yet"}else"method"in n&&"error"in n&&(t[n.method]=n.error);console.log("验证签名 最后的结果>>>:",JSON.stringify(t)),this.testTransaction="签名验证结果如下: \n"+JSON.stringify(t)}else console.log("验证签名 window.provider.session.connectMethodsReply 为空:")},handleThemeSelect(e){le=e,this.withUI&&(window.provider.uiOptions={actionsConfiguration:{returnStrategy:ae,modals:3===ie.length?"all":ie},language:ce,uiPreferences:{theme:e}})},async sui_verifySignature(e){let t=e,n=!1,o="";try{const e=new f.Z(window.provider);let s=e.getAccount();console.log(`Account中获取的address：${s.address}`);let i=await(0,$.n0)(this.currentSuiTransaction.message,t.signature),a=i.toSuiAddress();console.log(`验签结果计算得到address：${a}`),console.log(`account pubkey: ${s.publicKey}`),console.log(`result pubkey: ${i.toBase64()}`),n=s.address===a&&s.publicKey===i.toBase64(),o=`address verify: ${s.address===a}\npublicKey verify: ${s.publicKey===i.toBase64()}`,console.log("signature verify success: ",i)}catch(s){console.log("signature verify failed: ",s)}return{result:n,msg:o}},handleRedirectSelect(e){this.redirect=e},handleRedirectDeeplink(e){this.redirectDeeplink=e},addRedirectParam(){if(this.testTransaction){const e=JSON.parse(this.testTransaction);e.redirect="deeplink"===this.redirect?this.redirectDeeplink:this.redirect,this.testTransaction=JSON.stringify(e)}},canChainAddRedirectParam(){return oe.some((e=>this.selectedChain.startsWith(e)))}},created(){},mounted(){var e=document.createElement("script");e.src="https://telegram.org/js/telegram-web-app.js",e.id="tgsdk",document.getElementsByTagName("head")[0].appendChild(e),this.connectReady=!0,document.title="OKX Connect",this.initBtnClicked(),console.log("挂载成功:"),this.$refs.starknetPanelRef?(this.starknetPanelTypedData=(0,m.ux)(this.$refs.starknetPanelRef.signData),console.log("111: ",this.starknetPanelTypedData)):console.log("222")}};const ue=(0,C.A)(de,[["render",c],["__scopeId","data-v-56a738bb"]]);var ge=ue;const fe=(0,o.Ef)(ge);fe.use(s.A),fe.mount("#app")},98730:function(){},48103:function(){},45349:function(){},30515:function(){},91848:function(){},58954:function(){},89513:function(){},47790:function(){},61276:function(){},73776:function(){},17406:function(){},15340:function(){},79838:function(){},71281:function(){},53636:function(e){"use strict";e.exports=JSON.parse('{"name":"@okxconnect/core","version":"1.6.2","description":"OKX Connect core","main":"./src/index.js","keywords":["OKXConnect","OKX Connect"],"scripts":{"build":"npx tsc","local":"yarn install && npx tsc","remove":"rm -rf ./src  && rm -rf ./node_modules"},"author":"OKX Wallet","license":"MIT","dependencies":{"@stablelib/ed25519":"^1.0.2","@stablelib/random":"^1.0.1","@stablelib/sha256":"1.0.1","core-js":"2.6.12","cross-fetch":"^4.0.0","crypto-js":"^4.2.0","eventemitter3":"^5.0.1","isutf8":"^4.0.0","localforage":"^1.10.0","multiformats":"9.4.2","process":"^0.11.10","tweetnacl":"^1.0.3","tweetnacl-util":"^0.15.1","ua-parser-js":"^1.0.35","uint8arrays":"3.1.0"},"devDependencies":{"@types/crypto-js":"^4.2.2","@types/ua-parser-js":"^0.7.36","assert":"^2.1.0","eslint":"^9.7.0","events":"^3.3.0","jest":"^29.7.0","ts-loader":"^9.5.1","typescript":"^5.5.2"}}')}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,o,s,i){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],s=e[d][1],i=e[d][2];for(var r=!0,c=0;c<o.length;c++)(!1&i||a>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(r=!1,i<a&&(a=i));if(r){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(o,s){if(1&s&&(o=this(o)),8&s)return o;if("object"===typeof o&&o){if(4&s&&o.__esModule)return o;if(16&s&&"function"===typeof o.then)return o}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var r=2&s&&o;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((function(e){a[e]=function(){return o[e]}}));return a["default"]=function(){return o},n.d(i,a),i}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,i,a=o[0],r=o[1],c=o[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(s in r)n.o(r,s)&&(n.m[s]=r[s]);if(c)var d=c(n)}for(t&&t(o);l<a.length;l++)i=a[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},o=self["webpackChunkokxconnectdemo"]=self["webpackChunkokxconnectdemo"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(10837)}));o=n.O(o)})();
//# sourceMappingURL=app.e8b921be.js.map